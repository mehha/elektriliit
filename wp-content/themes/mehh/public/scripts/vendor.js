(self["webpackChunksage"] = self["webpackChunksage"] || []).push([["/scripts/vendor"],{

/***/ "./node_modules/@fancyapps/ui/dist/index.esm.js":
/*!******************************************************!*\
  !*** ./node_modules/@fancyapps/ui/dist/index.esm.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Carousel": function() { return /* binding */ _; },
/* harmony export */   "Fancybox": function() { return /* binding */ xt; },
/* harmony export */   "Panzoom": function() { return /* binding */ T; }
/* harmony export */ });
const t=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e),e=function(t){if(!(t&&t instanceof Element&&t.offsetParent))return!1;const e=t.scrollHeight>t.clientHeight,i=window.getComputedStyle(t).overflowY,n=-1!==i.indexOf("hidden"),s=-1!==i.indexOf("visible");return e&&!n&&!s},i=function(t,n){return!(!t||t===document.body||n&&t===n)&&(e(t)?t:i(t.parentElement,n))},n=function(t){var e=(new DOMParser).parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var i=document.createElement("div");e.firstChild;)i.appendChild(e.firstChild);return i}return e.firstChild},s=t=>`${t||""}`.split(" ").filter((t=>!!t)),o=(t,e,i)=>{s(e).forEach((e=>{t&&t.classList.toggle(e,i||!1)}))};class a{constructor(t){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.time=Date.now()}}const r={passive:!1};class l{constructor(t,{start:e=(()=>!0),move:i=(()=>{}),end:n=(()=>{})}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=t,this.startCallback=e,this.moveCallback=i,this.endCallback=n;for(const t of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[t]=this[t].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,r),this.element.addEventListener("touchstart",this.onTouchStart,r),this.element.addEventListener("touchmove",this.onMove,r),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(t){if(!t.buttons||0!==t.button)return;const e=new a(t);this.currentPointers.some((t=>t.id===e.id))||this.triggerPointerStart(e,t)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerStart(new a(e),t);window.addEventListener("blur",this.onWindowBlur)}onMove(t){const e=this.currentPointers.slice(),i="changedTouches"in t?Array.from(t.changedTouches||[]).map((t=>new a(t))):[new a(t)],n=[];for(const t of i){const e=this.currentPointers.findIndex((e=>e.id===t.id));e<0||(n.push(t),this.currentPointers[e]=t)}n.length&&this.moveCallback(t,this.currentPointers.slice(),e)}onPointerEnd(t){t.buttons>0&&0!==t.button||(this.triggerPointerEnd(t,new a(t)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerEnd(t,new a(e))}triggerPointerStart(t,e){return!!this.startCallback(e,t,this.currentPointers.slice())&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}triggerPointerEnd(t,e){const i=this.currentPointers.findIndex((t=>t.id===e.id));i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(t,e,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const t=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY}),t,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,r),this.element.removeEventListener("touchstart",this.onTouchStart,r),this.element.removeEventListener("touchmove",this.onMove,r),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function c(t,e){return e?Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)):0}function h(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const d=t=>"object"==typeof t&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t),u=(t,...e)=>{const i=e.length;for(let n=0;n<i;n++){const i=e[n]||{};Object.entries(i).forEach((([e,i])=>{const n=Array.isArray(i)?[]:{};t[e]||Object.assign(t,{[e]:n}),d(i)?Object.assign(t[e],u(n,i)):Array.isArray(i)?Object.assign(t,{[e]:[...i]}):Object.assign(t,{[e]:i})}))}return t},p=function(t,e){return t.split(".").reduce(((t,e)=>"object"==typeof t?t[e]:void 0),e)};class f{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(t){this.options=t?u({},this.constructor.defaults,t):{};for(const[t,e]of Object.entries(this.option("on")||{}))this.on(t,e)}option(t,...e){let i=p(t,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...n){let s=p(e,t);var o;"string"!=typeof(o=s)||isNaN(o)||isNaN(parseFloat(o))||(s=parseFloat(s)),"true"===s&&(s=!0),"false"===s&&(s=!1),s&&"function"==typeof s&&(s=s.call(this,this,t,...n));let a=p(e,this.options);return a&&"function"==typeof a?s=a.call(this,this,t,...n,s):void 0===s&&(s=a),void 0===s?i:s}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,((t,e,i)=>{let n="";return i?n=this.option(`${e[0]+e.toLowerCase().substring(1)}.l10n.${i}`):e&&(n=this.option(`l10n.${e}`)),n||(n=t),n}));for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t=t.replace(/\{\{(.*?)\}\}/g,((t,e)=>e))}on(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach((t=>{let i=this.events.get(t);i||(this.events.set(t,[]),i=[]),i.includes(e)||i.push(e),this.events.set(t,i)}))}off(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach((t=>{const i=this.events.get(t);if(Array.isArray(i)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}))}emit(t,...e){[...this.events.get(t)||[]].forEach((t=>t(this,...e))),"*"!==t&&this.emit("*",t,...e)}}Object.defineProperty(f,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.15"}),Object.defineProperty(f,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class m extends f{constructor(t={}){super(t),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(t={}){const e=new Map;for(const[i,n]of Object.entries(t)){const t=this.option(i),s=this.plugins[i];s||!1===t?s&&!1===t&&(s.detach(),delete this.plugins[i]):e.set(i,new n(this,t||{}))}for(const[t,i]of e)this.plugins[t]=i,i.attach();this.emit("attachPlugins")}detachPlugins(t){t=t||Object.keys(this.plugins);for(const e of t){const t=this.plugins[e];t&&t.detach(),delete this.plugins[e]}return this.emit("detachPlugins"),this}}var g;!function(t){t[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy"}(g||(g={}));const b=["a","b","c","d","e","f"],v={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},y={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:v},w='<div class="f-spinner"><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"></circle><circle cx="25" cy="25" r="20"></circle></svg></div>',x=t=>t&&null!==t&&t instanceof Element&&"nodeType"in t,E=(t,e)=>{t&&s(e).forEach((e=>{t.classList.remove(e)}))},S=(t,e)=>{t&&s(e).forEach((e=>{t.classList.add(e)}))},P={a:1,b:0,c:0,d:1,e:0,f:0};let C=null,M=null;class T extends m{get isTouchDevice(){return null===M&&(M=window.matchMedia("(hover: none)").matches),M}get isMobile(){return null===C&&(C=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),C}get panMode(){return"mousemove"!==this.options.panMode||this.isTouchDevice?"drag":"mousemove"}get panOnlyZoomed(){const t=this.options.panOnlyZoomed;return"auto"===t?this.isTouchDevice:t}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:t,b:e}=this.current;return Math.sqrt(t*t+e*e)||1}get targetScale(){const{a:t,b:e}=this.target;return Math.sqrt(t*t+e*e)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:t}=this;return t.fullWidth/t.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:t,contentRect:e}=this,i=Math.max(t.height/e.fitHeight,t.width/e.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const t=this.content;return!!(t&&t instanceof HTMLImageElement)&&!t.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const t of b){const e="e"==t||"f"===t?.001:1e-5;if(Math.abs(this.target[t]-this.current[t])>e)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(t,e={},i={}){var s;if(super(e),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:g.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},P)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},P)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!t)throw new Error("Container Element Not Found");this.container=t,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},T.Plugins),i)),this.emit("init");const o=this.content;if(o.addEventListener("load",this.onLoad),o.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){t.classList.add(this.cn("isLoading"));const e=n(w);!t.contains(o)||o.parentElement instanceof HTMLPictureElement?this.spinner=t.appendChild(e):this.spinner=(null===(s=o.parentElement)||void 0===s?void 0:s.insertBefore(e,o))||null}this.emit("beforeLoad")}else queueMicrotask((()=>{this.enable()}))}initContent(){const{container:t}=this,e=this.cn("content");let i=this.option("content")||t.querySelector(`.${e}`);if(i||(i=t.querySelector("img,picture")||t.firstElementChild,i&&S(i,e)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){this.spinner&&(this.spinner.remove(),this.spinner=null),this.option("spinner")&&this.container.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),this.state===g.Init?this.enable():this.updateMetrics()}onError(){this.state!==g.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=g.Error,this.emit("error"))}attachObserver(){var t;const e=()=>Math.abs(this.containerRect.width-this.container.getBoundingClientRect().width)>.1||Math.abs(this.containerRect.height-this.container.getBoundingClientRect().height)>.1;this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver((()=>{this.updateTimer||(e()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout((()=>{e()&&this.onResize(),this.updateTimer=null}),500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))}))),null===(t=this.resizeObserver)||void 0===t||t.observe(this.container)}detachObserver(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect()}attachEvents(){const{container:t}=this;t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new l(t,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener("mousemove",this.onMouseMove)}detachEvents(){var t;const{container:e}=this;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),null===(t=this.pointerTracker)||void 0===t||t.stop(),this.pointerTracker=null,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){const t=this.friction;this.setTargetForce();const e=this.option("maxVelocity");for(const i of b)t?(this.velocity[i]*=1-t,e&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],e),-1*e)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame((()=>this.animate())):this.stop("current")}setTargetForce(){for(const t of b)"e"===t&&this.isBouncingX||"f"===t&&this.isBouncingY||(this.velocity[t]=(1/(1-this.friction)-1)*(this.target[t]-this.current[t]))}checkBounds(t=0,e=0){const{current:i}=this,n=i.e+t,s=i.f+e,o=this.getBounds(),{x:a,y:r}=o,l=a.min,c=a.max,h=r.min,d=r.max;let u=0,p=0;return l!==1/0&&n<l?u=l-n:c!==1/0&&n>c&&(u=c-n),h!==1/0&&s<h?p=h-s:d!==1/0&&s>d&&(p=d-s),Math.abs(u)<.001&&(u=0),Math.abs(p)<.001&&(p=0),Object.assign(Object.assign({},o),{xDiff:u,yDiff:p,inBounds:!u&&!p})}clampTargetBounds(){const{target:t}=this,{x:e,y:i}=this.getBounds();e.min!==1/0&&(t.e=Math.max(t.e,e.min)),e.max!==1/0&&(t.e=Math.min(t.e,e.max)),i.min!==1/0&&(t.f=Math.max(t.f,i.min)),i.max!==1/0&&(t.f=Math.min(t.f,i.max))}calculateContentDim(t=this.current){const{content:e,contentRect:i}=this,{fitWidth:n,fitHeight:s,fullWidth:o,fullHeight:a}=i;let r=o,l=a;if(this.option("zoom")||0!==this.angle){const i=!(e instanceof HTMLImageElement)&&("none"===window.getComputedStyle(e).maxWidth||"none"===window.getComputedStyle(e).maxHeight),c=i?o:n,h=i?a:s,d=this.getMatrix(t),u=new DOMPoint(0,0).matrixTransform(d),p=new DOMPoint(0+c,0).matrixTransform(d),f=new DOMPoint(0+c,0+h).matrixTransform(d),m=new DOMPoint(0,0+h).matrixTransform(d),g=Math.abs(f.x-u.x),b=Math.abs(f.y-u.y),v=Math.abs(m.x-p.x),y=Math.abs(m.y-p.y);r=Math.max(g,v),l=Math.max(b,y)}return{contentWidth:r,contentHeight:l}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||"mousemove"===this.panMode||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:t}=this,{x:e,y:i,xDiff:n,yDiff:s}=this.checkBounds();const o=this.option("maxVelocity");let a=this.velocity.e,r=this.velocity.f;0!==n?(this.isBouncingX=!0,n*a<=0?a+=.14*n:(a=.14*n,e.min!==1/0&&(this.target.e=Math.max(t.e,e.min)),e.max!==1/0&&(this.target.e=Math.min(t.e,e.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,0!==s?(this.isBouncingY=!0,s*r<=0?r+=.14*s:(r=.14*s,i.min!==1/0&&(this.target.f=Math.max(t.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(t.f,i.max))),o&&(r=Math.max(Math.min(r,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=r)}enable(){const{content:t}=this,e=new DOMMatrixReadOnly(window.getComputedStyle(t).transform);for(const t of b)this.current[t]=this.target[t]=e[t];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=g.Ready,this.emit("ready")}onClick(t){var e;this.isDragging&&(null===(e=this.pointerTracker)||void 0===e||e.clear(),this.trackingPoints=[],this.startDecelAnim());const i=t.target;if(!i||t.defaultPrevented)return;if(i&&i.hasAttribute("disabled"))return t.preventDefault(),void t.stopPropagation();if((()=>{const t=window.getSelection();return t&&"Range"===t.type})()&&!i.closest("button"))return;const n=i.closest("[data-panzoom-action]"),s=i.closest("[data-panzoom-change]"),o=n||s,a=o&&x(o)?o.dataset:null;if(a){const e=a.panzoomChange,i=a.panzoomAction;if((e||i)&&t.preventDefault(),e){let t={};try{t=JSON.parse(e)}catch(t){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(t)}if(i)return void(this[i]&&this[i]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return t.preventDefault(),void t.stopPropagation();const r=this.content.getBoundingClientRect();if(this.dragStart.time&&!this.canZoomOut()&&(Math.abs(r.x-this.dragStart.x)>2||Math.abs(r.y-this.dragStart.y)>2))return;this.dragStart.time=0;const l=e=>{this.option("zoom")&&e&&"string"==typeof e&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(e)&&"function"==typeof this[e]&&(t.preventDefault(),this[e]({event:t}))},c=this.option("click",t),h=this.option("dblClick",t);h?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout((()=>{1===this.clicks?(this.emit("click",t),!t.defaultPrevented&&c&&l(c)):(this.emit("dblClick",t),t.defaultPrevented||l(h)),this.clicks=0,this.clickTimer=null}),350))):(this.emit("click",t),!t.defaultPrevented&&c&&l(c))}addTrackingPoint(t){const e=this.trackingPoints.filter((t=>t.time>Date.now()-100));e.push(t),this.trackingPoints=e}onPointerDown(t,e,i){var n;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const s=this.content.getBoundingClientRect();if(this.dragStart={x:s.x,y:s.y,top:s.top,left:s.left,time:Date.now()},this.clickTimer)return!1;if("mousemove"===this.panMode&&this.targetScale>1)return t.preventDefault(),t.stopPropagation(),!1;if(!i.length){const e=t.composedPath()[0];if(["A","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(e.nodeName)||e.closest("[contenteditable]")||e.closest("[data-selectable]")||e.closest("[data-panzoom-change]")||e.closest("[data-panzoom-action]"))return!1;null===(n=window.getSelection())||void 0===n||n.removeAllRanges()}if("mousedown"===t.type)t.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(e),this.emit("touchStart",t)),!0}onPointerMove(e,n,s){if(!1===this.option("touch",e))return;if(!this.isDragging)return;if(n.length<2&&this.panOnlyZoomed&&t(this.targetScale)<=t(this.minScale))return;if(this.emit("touchMove",e),e.defaultPrevented)return;this.addTrackingPoint(n[0]);const{content:o}=this,a=h(s[0],s[1]),r=h(n[0],n[1]);let l=0,d=0;if(n.length>1){const t=o.getBoundingClientRect();l=a.clientX-t.left-.5*t.width,d=a.clientY-t.top-.5*t.height}const u=c(s[0],s[1]),p=c(n[0],n[1]);let f=u?p/u:1,m=r.clientX-a.clientX,g=r.clientY-a.clientY;this.dragOffset.x+=m,this.dragOffset.y+=g,this.dragOffset.time=Date.now()-this.dragStart.time;let b=t(this.targetScale)===t(this.minScale)&&this.option("lockAxis");if(b&&!this.lockedAxis)if("xy"===b||"y"===b||"touchmove"===e.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const t=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=t>45&&t<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,m=0,g=0}else this.lockedAxis=b;if(i(e.target,this.content)&&(b="x",this.dragOffset.y=0),b&&"xy"!==b&&this.lockedAxis!==b&&t(this.targetScale)===t(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const v=this.checkBounds(m,g);this.option("rubberband")?("x"!==this.isInfinite&&(v.xDiff>0&&m<0||v.xDiff<0&&m>0)&&(m*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*v.xDiff))),"y"!==this.isInfinite&&(v.yDiff>0&&g<0||v.yDiff<0&&g>0)&&(g*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*v.yDiff)))):(v.xDiff&&(m=0),v.yDiff&&(g=0));const y=this.targetScale,w=this.minScale,x=this.maxScale;y<.5*w&&(f=Math.max(f,w)),y>1.5*x&&(f=Math.min(f,x)),"y"===this.lockedAxis&&t(y)===t(w)&&(m=0),"x"===this.lockedAxis&&t(y)===t(w)&&(g=0),this.applyChange({originX:l,originY:d,panX:m,panY:g,scale:f,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(t,e,n){if(n.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(e),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),i(t.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",t),this.isDragging=!1,this.lockedAxis=!1,this.state!==g.Destroy&&(t.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){const e=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const t of b)this.velocity[t]=0;this.target.e=this.current.e,this.target.f=this.current.f,E(this.container,"is-scaling"),E(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:i}=this,n=i[0],s=i[i.length-1];let o=0,a=0,r=0;s&&n&&(o=s.clientX-n.clientX,a=s.clientY-n.clientY,r=s.time-n.time);let l=0,c=0,h=0,d=0,u=this.option("decelFriction");const p=this.targetScale;if(r>0){h=Math.abs(o)>3?o/(r/30):0,d=Math.abs(a)>3?a/(r/30):0;const t=this.option("maxVelocity");t&&(h=Math.max(Math.min(h,t),-1*t),d=Math.max(Math.min(d,t),-1*t))}h&&(l=h/(1/(1-u)-1)),d&&(c=d/(1/(1-u)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&t(p)===this.minScale)&&(l=h=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&t(p)===this.minScale)&&(c=d=0);const f=this.dragOffset.x,m=this.dragOffset.y,g=this.option("dragMinThreshold")||0;Math.abs(f)<g&&Math.abs(m)<g&&(l=c=0,h=d=0),(p<this.minScale-1e-5||p>this.maxScale+1e-5||e&&!l&&!c)&&(u=.35),this.applyChange({panX:l,panY:c,friction:u}),this.emit("decel",h,d,f,m)}onWheel(t){var e=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const i=Math.max(-1,Math.min(1,e));if(this.emit("wheel",t,i),"mousemove"===this.panMode)return;if(t.defaultPrevented)return;const n=this.option("wheel");"pan"===n?(t.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-t.deltaX,panY:2*-t.deltaY,bounce:!1})):"zoom"===n&&!1!==this.option("zoom")&&this.zoomWithWheel(t)}onMouseMove(t){this.panWithMouse(t)}onKeydown(t){"Escape"===t.key&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:i,content:n,contentRect:s}=this,o=Object.assign({},P);for(const n of b){const s="e"==n||"f"===n?1e3:1e5;o[n]=t(e[n],s),Math.abs(i[n]-e[n])<("e"==n||"f"===n?.51:.001)&&(e[n]=i[n])}let{a:a,b:r,c:l,d:c,e:h,f:d}=o,u=`matrix(${a}, ${r}, ${l}, ${c}, ${h}, ${d})`,p=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;if(this.option("transformParent")&&(p=p.parentElement||p),p.style.transform===u)return;p.style.transform=u;const{contentWidth:f,contentHeight:m}=this.calculateContentDim();s.width=f,s.height=m,this.emit("afterTransform")}updateMetrics(e=!1){if(!this||this.state===g.Destroy)return;if(this.isContentLoading)return;const{container:i,content:n}=this,s=n instanceof HTMLImageElement,o=i.getBoundingClientRect(),a=getComputedStyle(this.container),r=o.width,l=o.height,c=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),h=r-(parseFloat(a.paddingLeft)+parseFloat(a.paddingRight)),d=l-c;this.containerRect={width:r,height:l,innerWidth:h,innerHeight:d};let u=this.option("width")||"auto",p=this.option("height")||"auto";"auto"===u&&(u=parseFloat(n.dataset.width||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalWidth:t instanceof SVGElement?t.width.baseVal.value:Math.max(t.offsetWidth,t.scrollWidth),e||0})(n)),"auto"===p&&(p=parseFloat(n.dataset.height||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalHeight:t instanceof SVGElement?t.height.baseVal.value:Math.max(t.offsetHeight,t.scrollHeight),e||0})(n));let f=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;this.option("transformParent")&&(f=f.parentElement||f);const m=f.getAttribute("style")||"";f.style.setProperty("transform","none","important"),s&&(f.style.width="",f.style.height=""),f.offsetHeight;const b=n.getBoundingClientRect();let v=b.width,y=b.height,w=0,x=0;s&&(Math.abs(u-v)>1||Math.abs(p-y)>1)&&({width:v,height:y,top:w,left:x}=((t,e,i,n)=>{const s=i/n;return s>t/e?(i=t,n=t/s):(i=e*s,n=e),{width:i,height:n,top:.5*(e-n),left:.5*(t-i)}})(v,y,u,p)),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:b.top-o.top+w,bottom:o.bottom-b.bottom+w,left:b.left-o.left+x,right:o.right-b.right+x,fitWidth:v,fitHeight:y,width:v,height:y,fullWidth:u,fullHeight:p}),f.style.cssText=m,s&&(f.style.width=`${v}px`,f.style.height=`${y}px`),this.setTransform(),!0!==e&&this.emit("refresh"),this.ignoreBounds||(t(this.targetScale)<t(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===g.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}getBounds(){const e=this.option("bounds");if("auto"!==e)return e;const{contentWidth:i,contentHeight:n}=this.calculateContentDim(this.target);let s=0,o=0,a=0,r=0;const l=this.option("infinite");if(!0===l||this.lockedAxis&&l===this.lockedAxis)s=-1/0,a=1/0,o=-1/0,r=1/0;else{let{containerRect:e,contentRect:l}=this,c=t(this.contentRect.fitWidth*this.targetScale,1e3),h=t(this.contentRect.fitHeight*this.targetScale,1e3),{innerWidth:d,innerHeight:u}=e;if(this.containerRect.width===c&&(d=e.width),this.containerRect.width===h&&(u=e.height),i>d){a=.5*(i-d),s=-1*a;let t=.5*(l.right-l.left);s+=t,a+=t}if(this.contentRect.fitWidth>d&&i<d&&(s-=.5*(this.contentRect.fitWidth-d),a-=.5*(this.contentRect.fitWidth-d)),n>u){r=.5*(n-u),o=-1*r;let t=.5*(l.bottom-l.top);o+=t,r+=t}this.contentRect.fitHeight>u&&n<u&&(s-=.5*(this.contentRect.fitHeight-u),a-=.5*(this.contentRect.fitHeight-u))}return{x:{min:s,max:a},y:{min:o,max:r}}}updateControls(){const e=this,i=e.container,{panMode:n,contentRect:s,fullScale:a,targetScale:r,coverScale:l,maxScale:c,minScale:h}=e;let d={toggleMax:r-h<.5*(c-h)?c:h,toggleCover:r-h<.5*(l-h)?l:h,toggleZoom:r-h<.5*(a-h)?a:h}[e.option("click")||""]||h,u=e.canZoomIn(),p=e.canZoomOut(),f=p&&"drag"===n;t(r)<t(h)&&!this.panOnlyZoomed&&(f=!0),(t(s.width,1)>t(s.fitWidth,1)||t(s.height,1)>t(s.fitHeight,1))&&(f=!0),t(s.width*r,1)<t(s.fitWidth,1)&&(f=!1),"mousemove"===n&&(f=!1);let m=u&&t(d)>t(r),g=!m&&!f&&p&&t(d)<t(r);o(i,this.cn("canZoomIn"),m),o(i,this.cn("canZoomOut"),g),o(i,this.cn("isDraggable"),f);for(const t of i.querySelectorAll('[data-panzoom-action="zoomIn"]'))u?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of i.querySelectorAll('[data-panzoom-action="zoomOut"]'))p?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of i.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){u||p?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));const e=t.querySelector("g");e&&(e.style.display=u?"":"none")}}panTo({x:t=this.target.e,y:e=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:s=0,originX:o=0,originY:a=0,flipX:r=!1,flipY:l=!1,ignoreBounds:c=!1}){this.state!==g.Destroy&&this.applyChange({panX:t-this.target.e,panY:e-this.target.f,scale:i/this.targetScale,angle:s,originX:o,originY:a,friction:n,flipX:r,flipY:l,ignoreBounds:c})}applyChange({panX:e=0,panY:i=0,scale:n=1,angle:s=0,originX:o=-this.current.e,originY:a=-this.current.f,friction:r=this.option("friction"),flipX:l=!1,flipY:c=!1,ignoreBounds:h=!1,bounce:d=this.option("bounce")}){if(this.state===g.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=r||0,this.ignoreBounds=h;const{current:u}=this,p=u.e,f=u.f,m=this.getMatrix(this.target);let v=(new DOMMatrix).translate(p,f).translate(o,a).translate(e,i);if(this.option("zoom")){if(!h){const t=this.targetScale,e=this.minScale,i=this.maxScale;t*n<e&&(n=e/t),t*n>i&&(n=i/t)}v=v.scale(n)}v=v.translate(-o,-a).translate(-p,-f).multiply(m),s&&(v=v.rotate(s)),l&&(v=v.scale(-1,1)),c&&(v=v.scale(1,-1));for(const e of b)"e"!==e&&"f"!==e&&(v[e]>this.minScale+1e-5||v[e]<this.minScale-1e-5)?this.target[e]=v[e]:this.target[e]=t(v[e],1e3);(this.targetScale<this.scale||Math.abs(n-1)>.1||"mousemove"===this.panMode||!1===d)&&!h&&this.clampTargetBounds(),this.isResting||(this.state=g.Panning,this.requestTick())}stop(t=!1){if(this.state===g.Init||this.state===g.Destroy)return;const e=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const e of b)this.velocity[e]=0,"current"===t?this.current[e]=this.target[e]:"target"===t&&(this.target[e]=this.current[e]);this.setTransform(),E(this.container,"is-scaling"),E(this.container,"is-animating"),this.isTicking=!1,this.state=g.Ready,e&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),S(this.container,"is-animating"),this.isScaling&&S(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame((()=>this.animate())))}panWithMouse(e,i=this.option("mouseMoveFriction")){if(this.pmme=e,"mousemove"!==this.panMode||!e)return;if(t(this.targetScale)<=t(this.minScale))return;this.emit("mouseMove",e);const{container:n,containerRect:s,contentRect:o}=this,a=s.width,r=s.height,l=n.getBoundingClientRect(),c=(e.clientX||0)-l.left,h=(e.clientY||0)-l.top;let{contentWidth:d,contentHeight:u}=this.calculateContentDim(this.target);const p=this.option("mouseMoveFactor");p>1&&(d!==a&&(d*=p),u!==r&&(u*=p));let f=.5*(d-a)-c/a*100/100*(d-a);f+=.5*(o.right-o.left);let m=.5*(u-r)-h/r*100/100*(u-r);m+=.5*(o.bottom-o.top),this.applyChange({panX:f-this.target.e,panY:m-this.target.f,friction:i})}zoomWithWheel(e){if(this.state===g.Destroy||this.state===g.Init)return;const i=Date.now();if(i-this.pwt<45)return void e.preventDefault();this.pwt=i;var n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const s=Math.max(-1,Math.min(1,n)),{targetScale:o,maxScale:a,minScale:r}=this;let l=o*(100+45*s)/100;t(l)<t(r)&&t(o)<=t(r)?(this.cwd+=Math.abs(s),l=r):t(l)>t(a)&&t(o)>=t(a)?(this.cwd+=Math.abs(s),l=a):(this.cwd=0,l=Math.max(Math.min(l,a),r)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),t(l)!==t(o)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(t(this.contentRect.width,1)<t(this.contentRect.fitWidth,1)||t(this.targetScale)<t(this.maxScale))}canZoomOut(){return this.option("zoom")&&t(this.targetScale)>t(this.minScale)}zoomIn(t=1.25,e){this.zoomTo(this.targetScale*t,e)}zoomOut(t=.8,e){this.zoomTo(this.targetScale*t,e)}zoomToFit(t){this.zoomTo("fit",t)}zoomToCover(t){this.zoomTo("cover",t)}zoomToFull(t){this.zoomTo("full",t)}zoomToMax(t){this.zoomTo("max",t)}toggleZoom(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.fullScale-this.minScale)?"full":"fit",t)}toggleMax(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.maxScale-this.minScale)?"max":"fit",t)}toggleCover(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.coverScale-this.minScale)?"cover":"fit",t)}iterateZoom(t){this.zoomTo("next",t)}zoomTo(t=1,{friction:e="auto",originX:i=0,originY:n=0,event:s}={}){if(this.isContentLoading||this.state===g.Destroy)return;const{targetScale:o}=this;this.stop();let a=1;if("mousemove"===this.panMode&&(s=this.pmme||s),s){const t=this.content.getBoundingClientRect(),e=s.clientX||0,o=s.clientY||0;i=e-t.left-.5*t.width,n=o-t.top-.5*t.height}const r=this.fullScale,l=this.maxScale;let c=this.coverScale;"number"==typeof t?a=t/o:("next"===t&&(r-c<.2&&(c=r),t=o<r-1e-5?"full":o<l-1e-5?"max":"fit"),a="full"===t?r/o||1:"cover"===t?c/o||1:"max"===t?l/o||1:1/o||1),e="auto"===e?a>1?.15:.25:e,this.applyChange({scale:a,originX:i,originY:n,friction:e}),s&&"mousemove"===this.panMode&&this.panWithMouse(s,e)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.height-(e.top+.5*e.fitHeight)-i.f,scale:t.width/e.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.innerHeight-(e.top+.5*e.fitHeight)-i.f,scale:t.height/e.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:t}=this,e=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");t.classList.toggle(e);const n=t.classList.contains(e);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(t=this.current){const{a:e,b:i,c:n,d:s,e:o,f:a}=t;return new DOMMatrix([e,i,n,s,o,a])}reset(t){if(this.state!==g.Init&&this.state!==g.Destroy){this.stop("current");for(const t of b)this.target[t]=P[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===t?this.option("friction"):t,this.state=g.Panning,this.requestTick())}}destroy(){this.stop(),this.state=g.Destroy,this.detachEvents(),this.detachObserver();const{container:t,content:e}=this,i=this.option("classes")||{};for(const e of Object.values(i))t.classList.remove(e+"");e&&(e.removeEventListener("load",this.onLoad),e.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(T,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:y}),Object.defineProperty(T,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const O=function(t,e){let i=!0;return(...n)=>{i&&(i=!1,t(...n),setTimeout((()=>{i=!0}),e))}},A=(t,e)=>{let i=[];return t.childNodes.forEach((t=>{t.nodeType!==Node.ELEMENT_NODE||e&&!t.matches(e)||i.push(t)})),i},z={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var L;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Destroy=2]="Destroy"}(L||(L={}));const R=t=>{if("string"==typeof t&&(t={html:t}),!(t instanceof String||t instanceof HTMLElement)){const e=t.thumb;void 0!==e&&("string"==typeof e&&(t.thumbSrc=e),e instanceof HTMLImageElement&&(t.thumbEl=e,t.thumbElSrc=e.src,t.thumbSrc=e.src),delete t.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",index:-1,dim:0,gap:0,pos:0,transition:!1},t)},k=(t={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},t);class I extends f{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}const D={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class F extends I{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let t=this.list;return t||(t=document.createElement("ul"),S(t,this.cn("list")),t.setAttribute("role","tablist"),this.instance.container.appendChild(t),S(this.instance.container,this.cn("hasDots")),this.list=t),t}refresh(){var t;const e=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),s=this.option("dynamicFrom");if(e<i||e>n)return void this.cleanup();const a="number"==typeof s&&e>5&&e>=s,r=!this.list||this.isDynamic!==a||this.list.children.length!==e;r&&this.cleanup();const l=this.build();if(o(l,this.cn("isDynamic"),!!a),r)for(let t=0;t<e;t++)l.append(this.createItem(t));let c,h=0;for(const e of[...l.children]){const i=h===this.instance.page;i&&(c=e),o(e,this.cn("isCurrent"),i),null===(t=e.children[0])||void 0===t||t.setAttribute("aria-selected",i?"true":"false");for(const t of["isBeforePrev","isPrev","isNext","isAfterNext"])E(e,this.cn(t));h++}if(c=c||l.firstChild,a&&c){const t=c.previousElementSibling,e=t&&t.previousElementSibling;S(t,this.cn("isPrev")),S(e,this.cn("isBeforePrev"));const i=c.nextElementSibling,n=i&&i.nextElementSibling;S(i,this.cn("isNext")),S(n,this.cn("isAfterNext"))}this.isDynamic=a}createItem(t=0){var e;const i=document.createElement("li");i.setAttribute("role","presentation");const s=n(this.instance.localize(this.option("dotTpl"),[["%d",t+1]]).replace(/\%i/g,t+""));return i.appendChild(s),null===(e=i.children[0])||void 0===e||e.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,E(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(F,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:D});class j extends I{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){const t=this.instance,e=t.pages.length,i=t.page;if(e<2)return void this.cleanup();this.build();let n=this.prev,s=this.next;n&&s&&(n.removeAttribute("disabled"),s.removeAttribute("disabled"),t.isInfinite||(i<=0&&n.setAttribute("disabled",""),i>=e-1&&s.setAttribute("disabled","")))}createButton(t){const e=this.instance,i=document.createElement("button");i.setAttribute("tabindex","0"),i.setAttribute("title",e.localize(`{{${t.toUpperCase()}}}`)),S(i,this.cn("button")+" "+this.cn("next"===t?"isNext":"isPrev"));const n=e.isRTL?"next"===t?"prev":"next":t;var s;return i.innerHTML=e.localize(this.option(`${n}Tpl`)),i.dataset[`carousel${s=t,s?s.match("^[a-z]")?s.charAt(0).toUpperCase()+s.substring(1):s:""}`]="true",i}build(){let t=this.container;t||(this.container=t=document.createElement("div"),S(t,this.cn("container")),this.instance.container.appendChild(t)),this.next||(this.next=t.appendChild(this.createButton("next"))),this.prev||(this.prev=t.appendChild(this.createButton("prev")))}cleanup(){this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove(),this.prev=null,this.next=null,this.container=null}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(j,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class H extends I{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(t){this.target=this.instance,this.nav=t,this.attachEvents()}addAsNavFor(t){this.nav=this.instance,this.target=t,this.attachEvents()}attachEvents(){this.nav&&this.target&&(this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.state===L.Ready&&this.onNavReady(this.nav),this.target.on("ready",this.onTargetReady),this.target.state===L.Ready&&this.onTargetReady(this.target))}onNavReady(t){t.on("createSlide",this.onNavCreateSlide),t.on("Panzoom.click",this.onNavClick),t.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(t){t.on("change",this.onTargetChange),t.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(t,e,i){i.pointerType||this.onNavTouch(t,t.panzoom,i)}onNavTouch(t,e,i){var n,s;if(Math.abs(e.dragOffset.x)>3||Math.abs(e.dragOffset.y)>3)return;const o=i.target,{nav:a,target:r}=this;if(!a||!r||!o)return;const l=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!l)return;const c=parseInt(l.dataset.index||"",10)||0,h=r.getPageForSlide(c),d=a.getPageForSlide(c);a.slideTo(d),r.slideTo(h,{friction:null===(s=null===(n=this.nav)||void 0===n?void 0:n.plugins)||void 0===s?void 0:s.Sync.option("friction")}),this.markSelectedSlide(c)}onNavCreateSlide(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}onTargetChange(){const{target:t,nav:e}=this;if(!t||!e)return;if(e.state!==L.Ready||t.state!==L.Ready)return;const i=t.pages[t.page].slides[0].index,n=e.getPageForSlide(i);this.markSelectedSlide(i),e.slideTo(n)}markSelectedSlide(t){const{nav:e}=this;e&&e.state===L.Ready&&(this.selectedIndex=t,[...e.slides].map((e=>{e.el&&e.el.classList[e.index===t?"add":"remove"]("is-nav-selected")})))}attach(){let t=this.options.target,e=this.options.nav;t?this.addAsNavFor(t):e&&this.addAsTargetFor(e)}detach(){this.nav&&(this.nav.off("ready",this.onNavReady),this.nav.off("createSlide",this.onNavCreateSlide),this.nav.off("Panzoom.click",this.onNavClick),this.nav.off("Panzoom.touchEnd",this.onNavTouch)),this.nav=null,this.target&&(this.target.off("ready",this.onTargetReady),this.target.off("refresh",this.onTargetChange),this.target.off("change",this.onTargetChange)),this.target=null}}Object.defineProperty(H,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const B={Navigation:j,Dots:F,Sync:H};class _ extends m{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===L.Ready}get isInfinite(){let t=!1;const e=this.contentDim,i=this.viewportDim;return this.pages.length>=2&&e>1.5*i&&(t=this.option("infinite")),t}get isRTL(){return"rtl"===this.option("direction")}get isHorizontal(){return"x"===this.option("axis")}constructor(t,e={},i={}){if(super(),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:L.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),"string"==typeof t&&(t=document.querySelector(t)),!t||!x(t))throw new Error("No Element found");this.container=t,this.slideNext=O(this.slideNext.bind(this),150),this.slidePrev=O(this.slidePrev.bind(this),150),this.userOptions=e,this.userPlugins=i,queueMicrotask((()=>{this.processOptions()}))}processOptions(){const t=u({},_.defaults,this.userOptions);let e="";const i=t.breakpoints;if(i&&d(i))for(const[n,s]of Object.entries(i))window.matchMedia(n).matches&&d(s)&&(e+=n,u(t,s));e===this.bp&&this.state!==L.Init||(this.bp=e,this.state===L.Ready&&(t.initialSlide=this.pages[this.page].slides[0].index),this.state!==L.Init&&this.destroy(),super.setOptions(t),!1===this.option("enabled")?this.attachEvents():setTimeout((()=>{this.init()}),0))}init(){this.state=L.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},_.Plugins),this.userPlugins)),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=L.Ready,this.emit("ready")}initLayout(){const{container:t}=this,e=this.option("classes");S(t,this.cn("container")),o(t,e.isLTR,!this.isRTL),o(t,e.isRTL,this.isRTL),o(t,e.isVertical,!this.isHorizontal),o(t,e.isHorizontal,this.isHorizontal);let i=this.option("viewport")||t.querySelector(`.${e.viewport}`);i||(i=document.createElement("div"),S(i,e.viewport),i.append(...A(t,`.${e.slide}`)),t.prepend(i));let n=this.option("track")||t.querySelector(`.${e.track}`);n||(n=document.createElement("div"),S(n,e.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){const{track:t}=this;if(t){this.slides=[],[...A(t,`.${this.cn("slide")}`)].forEach((t=>{if(x(t)){const e=R({el:t,isDom:!0,index:this.slides.length});this.slides.push(e),this.emit("initSlide",e,this.slides.length)}}));for(let t of this.option("slides",[])){const e=R(t);e.index=this.slides.length,this.slides.push(e),this.emit("initSlide",e,this.slides.length)}this.emit("initSlides")}}setInitialPage(){let t=0;const e=this.option("initialSlide");t="number"==typeof e?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0,this.page=t}setInitialPosition(){if(!this.track||!this.pages.length)return;const t=this.isHorizontal;let e=this.page;this.pages[e]||(this.page=e=0);const i=this.pages[e].pos*(this.isRTL&&t?1:-1),n=t?`${i}px`:"0",s=t?"0":`${i}px`;this.track.style.transform=`translate3d(${n}, ${s}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const t=this.option("Panzoom")||{};this.panzoom=new T(this.viewport,u({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},t)),this.panzoom.on("*",((t,e,...i)=>{this.emit(`Panzoom.${e}`,t,...i)})),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const t=this.container;t&&(t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let t=[];const{contentDim:e,viewportDim:i}=this,n=this.option("slidesPerPage");if("number"==typeof n&&e>i){for(let e=0;e<this.slides.length;e+=n)t.push(k({index:e,slides:this.slides.slice(e,e+n)}));return t}let s=0,o=0;for(const e of this.slides)(!t.length||o+e.dim>i)&&(t.push(k()),s=t.length-1,o=0),o+=e.dim+e.gap,t[s].slides.push(e);return t}processPages(){const e=this.pages,{contentDim:i,viewportDim:n}=this,s=this.option("center"),o=this.option("fill"),a=o&&s&&i>n&&!this.isInfinite;if(e.forEach(((t,e)=>{t.index=e,t.pos=t.slides[0].pos,t.dim=0;for(const[e,i]of t.slides.entries())t.dim+=i.dim,e<t.slides.length-1&&(t.dim+=i.gap);a&&t.pos+.5*t.dim<.5*n?t.pos=0:a&&t.pos+.5*t.dim>=i-.5*n?t.pos=i-n:s&&(t.pos+=-.5*(n-t.dim))})),e.forEach(((e,s)=>{o&&!this.isInfinite&&i>n&&(e.pos=Math.max(e.pos,0),e.pos=Math.min(e.pos,i-n)),e.pos=t(e.pos,1e3),e.dim=t(e.dim,1e3),e.pos<.1&&e.pos>-.1&&(e.pos=0)})),this.isInfinite)return e;const r=[];let l;return e.forEach((t=>{const e=Object.assign({},t);l&&e.pos===l.pos?(l.dim+=e.dim,l.slides=[...l.slides,...e.slides]):(e.index=r.length,l=e,r.push(e))})),r}getPageFromIndex(t=0){const e=this.pages.length;let i;return t=parseInt((t||0).toString())||0,i=this.isInfinite?(t%e+e)%e:Math.max(Math.min(t,e-1),0),i}getSlideMetrics(e){const i=this.isHorizontal?"width":"height";let n=0,s=0,o=e.el;o?n=parseFloat(o.dataset[i]||"")||0:(o=document.createElement("div"),o.style.visibility="hidden",S(o,this.cn("slide")+" "+e.class),(this.track||document.body).prepend(o)),n?(o.style[i]=`${n}px`,o.style["width"===i?"height":"width"]=""):n=o.getBoundingClientRect()[i];const a=getComputedStyle(o);return"content-box"===a.boxSizing&&(this.isHorizontal?(n+=parseFloat(a.paddingLeft)||0,n+=parseFloat(a.paddingRight)||0):(n+=parseFloat(a.paddingTop)||0,n+=parseFloat(a.paddingBottom)||0)),s=parseFloat(a[this.isHorizontal?"marginRight":"marginBottom"])||0,this.isHorizontal,e.el||o.remove(),{dim:t(n,1e3),gap:t(s,1e3)}}getBounds(){let t={min:0,max:0};if(this.isInfinite)t={min:-1/0,max:1/0};else if(this.pages.length){const e=this.pages[0].pos,i=this.pages[this.pages.length-1].pos;t=this.isRTL&&this.isHorizontal?{min:e,max:i}:{min:-1*i,max:-1*e}}return{x:this.isHorizontal?t:{min:0,max:0},y:this.isHorizontal?{min:0,max:0}:t}}repositionSlides(){let e,{viewport:i,viewportDim:n,contentDim:s,page:o,pages:a}=this,r=0,l=0,c=0,h=0;this.panzoom?h=-1*this.panzoom.current[this.axis]:a[o]&&(h=a[o].pos||0),e=this.isHorizontal?this.isRTL?"right":"left":"top",this.isRTL&&this.isHorizontal&&(h*=-1);for(const i of this.slides)i.el?("top"===e?(i.el.style.right="",i.el.style.left=""):i.el.style.top="",i.index!==r?i.el.style[e]=0===l?"":`${t(l,1e3)}px`:i.el.style[e]="",c+=i.dim+i.gap,r++):l+=i.dim+i.gap;if(this.isInfinite&&c&&i){const o=this.isHorizontal;let a=getComputedStyle(i),r="padding",d=o?"Right":"Bottom",u=parseFloat(a[r+(o?"Left":"Top")]);h-=u,n+=u,n+=parseFloat(a[r+d]);for(const i of this.slides)i.el&&(t(i.pos)<t(n)&&t(i.pos+i.dim+i.gap)<t(h)&&t(h)>t(s-n)&&(i.el.style[e]=`${t(l+c,1e3)}px`),t(i.pos+i.gap)>=t(s-n)&&t(i.pos)>t(h+n)&&t(h)<t(n)&&(i.el.style[e]=`-${t(c,1e3)}px`))}let d,u,p=[...this.inTransition];if(p.length>1&&(d=this.pages[p[0]],u=this.pages[p[1]]),d&&u){let i=0;for(const n of this.slides)n.el?this.inTransition.has(n.index)&&d.slides.indexOf(n)<0&&(n.el.style[e]=`${t(i+(d.pos-u.pos),1e3)}px`):i+=n.dim+n.gap}}createSlideEl(t){if(!this.track||!t)return;if(t.el)return;const e=document.createElement("div");S(e,this.cn("slide")),S(e,t.class),S(e,t.customClass),t.html&&(e.innerHTML=t.html);const i=[];this.slides.forEach(((t,e)=>{t.el&&i.push(e)}));const n=t.index;let s=null;if(i.length){let t=i.reduce(((t,e)=>Math.abs(e-n)<Math.abs(t-n)?e:t));s=this.slides[t]}const o=s&&s.el?s.index<t.index?s.el.nextSibling:s.el:null;this.track.insertBefore(e,this.track.contains(o)?o:null),t.el=e,this.emit("createSlide",t)}removeSlideEl(t,e=!1){const i=t.el;if(!i)return;if(E(i,this.cn("isSelected")),t.isDom&&!e)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),E(i,this.cn("isSelected")),void(i.style.left="");this.emit("removeSlide",t);const n=new CustomEvent("animationend");i.dispatchEvent(n),t.el&&t.el.remove(),t.el=null}transitionTo(e=0,i=this.option("transition")){if(!i)return!1;const{pages:n,panzoom:s}=this;e=parseInt((e||0).toString())||0;const o=this.getPageFromIndex(e);if(!s||!n[o]||n.length<2||n[this.page].slides[0].dim<this.viewportDim)return!1;const a=e>this.page?1:-1,r=this.pages[o].pos*(this.isRTL?1:-1);if(this.page===o&&t(r,1e3)===t(s.target[this.axis],1e3))return!1;this.clearTransitions();const l=s.isResting;S(this.container,this.cn("inTransition"));const c=this.pages[this.page].slides[0],h=this.pages[o].slides[0];this.inTransition.add(h.index),this.createSlideEl(h);let d=c.el,u=h.el;l||"slide"===i||(i="fadeFast",d=null);const p=this.isRTL?"next":"prev",f=this.isRTL?"prev":"next";return d&&(this.inTransition.add(c.index),c.transition=i,d.addEventListener("animationend",this.onAnimationEnd),d.classList.add(`f-${i}Out`,`to-${a>0?f:p}`)),u&&(h.transition=i,u.addEventListener("animationend",this.onAnimationEnd),u.classList.add(`f-${i}In`,`from-${a>0?p:f}`)),s.panTo({x:this.isHorizontal?r:0,y:this.isHorizontal?0:r,friction:0}),this.onChange(o),!0}manageSlideVisiblity(){const t=new Set,e=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const n of this.slides)i.has(n)?t.add(n):e.add(n);for(const e of this.inTransition)t.add(this.slides[e]);for(const e of t)this.createSlideEl(e),this.lazyLoadSlide(e);for(const i of e)t.has(i)||this.removeSlideEl(i);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const t="aria-hidden";let e=this.cn("isSelected");if(e)for(const i of this.slides)i.el&&(i.el.dataset.index=`${i.index}`,this.pages[this.page].slides.includes(i)?(i.el.classList.contains(e)||(S(i.el,e),this.emit("selectSlide",i)),i.el.removeAttribute(t)):(i.el.classList.contains(e)&&(E(i.el,e),this.emit("unselectSlide",i)),i.el.setAttribute(t,"true")))}flipInfiniteTrack(){const t=this.panzoom;if(!t||!this.isInfinite)return;const e="x"===this.option("axis")?"e":"f",{viewportDim:i,contentDim:n}=this;let s=t.current[e],o=t.target[e]-s,a=0,r=.5*i,l=n;this.isRTL&&this.isHorizontal?(s<-r&&(a=-1,s+=l),s>l-r&&(a=1,s-=l)):(s>r&&(a=1,s-=l),s<-l+r&&(a=-1,s+=l)),a&&(t.current[e]=s,t.target[e]=s+o)}lazyLoadSlide(t){const e=this,i=t&&t.el;if(!i)return;const s=new Set,o="f-fadeIn";i.querySelectorAll("[data-lazy-srcset]").forEach((t=>{t instanceof HTMLImageElement&&s.add(t)}));let a=Array.from(i.querySelectorAll("[data-lazy-src]"));i.dataset.lazySrc&&a.push(i),a.map((t=>{t instanceof HTMLImageElement?s.add(t):x(t)&&(t.style.backgroundImage=`url('${t.dataset.lazySrc||""}')`,delete t.dataset.lazySrc)}));const r=(t,i,n)=>{n&&(n.remove(),n=null),i.complete&&(i.classList.add(o),setTimeout((()=>{i.classList.remove(o)}),350),i.style.display=""),this.option("adaptiveHeight")&&t.el&&this.pages[this.page].slides.indexOf(t)>-1&&(e.updateMetrics(),e.setViewportHeight()),this.emit("load",t)};for(const e of s){let i=null;e.src=e.dataset.lazySrcset||e.dataset.lazySrc||"",delete e.dataset.lazySrc,delete e.dataset.lazySrcset,e.style.display="none",e.addEventListener("error",(()=>{r(t,e,i)})),e.addEventListener("load",(()=>{r(t,e,i)})),setTimeout((()=>{e.parentNode&&t.el&&(e.complete?r(t,e,i):(i=n(w),e.parentNode.insertBefore(i,e)))}),300)}}onAnimationEnd(t){var e;const i=t.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,s=this.slides[n],o=t.animationName;if(!i||!s||!o)return;const a=!!this.inTransition.has(n)&&s.transition;a&&o.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(null===(e=this.panzoom)||void 0===e?void 0:e.isResting)&&this.emit("settle")}onDecel(t,e=0,i=0){const{isRTL:n,isHorizontal:s,axis:o,pages:a}=this,r=a.length,l=Math.abs(Math.atan2(i,e)/(Math.PI/180));let c=0;if(c=l>45&&l<135?s?0:i:s?e:0,!r)return;const h=this.option("dragFree");let d=this.page,u=n&&s?1:-1;const p=t.target[o]*u,f=t.current[o]*u;let{pageIndex:m}=this.getPageFromPosition(p),{pageIndex:g}=this.getPageFromPosition(f);h?this.onChange(m):(d=g,Math.abs(c)>5&&(d=n&&s?c<0?d-1:d+1:c<0?d+1:d-1),this.slideTo(d,{transition:!1,friction:t.option("decelFriction")}))}onClick(t){const e=t.target,i=e&&x(e)?e.dataset:null;let n,s;i&&(void 0!==i.carouselPage?(s="slideTo",n=i.carouselPage):void 0!==i.carouselNext?s="slideNext":void 0!==i.carouselPrev&&(s="slidePrev")),s?(t.preventDefault(),t.stopPropagation(),e&&!e.hasAttribute("disabled")&&this[s](n)):this.emit("click",t)}onSlideTo(t){const e=t.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}onChange(t,e=0){const i=this.page;this.prevPage=i,this.page=t,this.option("adaptiveHeight")&&this.setViewportHeight(),t!==i&&(this.markSelectedSlides(),this.emit("change",t,i,e))}onRefresh(){let t=this.contentDim,e=this.viewportDim;this.updateMetrics(),this.contentDim===t&&this.viewportDim===e||this.slideTo(this.page,{friction:0,transition:!1})}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(t){this.lp!==t.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=t.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(t=null,e=null){this.destroy(),this.state=L.Init,this.userOptions=t||this.userOptions,this.userPlugins=e||this.userPlugins,this.processOptions()}slideTo(t=0,{friction:e=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===L.Destroy)return;const{axis:n,isHorizontal:s,isRTL:o,pages:a,panzoom:r}=this,l=a.length,c=o&&s?1:-1;if(!r||!l)return;if(this.transitionTo(t,i))return;const h=this.getPageFromIndex(t);let d=a[h].pos;if(this.isInfinite){const e=this.contentDim,i=r.target[n]*c;if(2===l)d+=e*Math.floor(parseFloat(t+"")/2);else{const t=i;d=[d,d-e,d+e].reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e}))}}d*=c,Math.abs(r.target[n]-d)<.1||(r.panTo({x:s?d:0,y:s?0:d,friction:e}),this.onChange(h))}slideToClosest(t){if(this.panzoom){const{pageIndex:e}=this.getPageFromPosition(this.panzoom.current[this.isHorizontal?"e":"f"]);this.slideTo(e,t)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),E(this.container,this.cn("inTransition"));const t=["to-prev","to-next","from-prev","from-next"];for(const e of this.slides){const i=e.el;if(i){i.removeEventListener("animationend",this.onAnimationEnd),i.classList.remove(...t);const n=e.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}prependSlide(t){var e,i;let n=Array.isArray(t)?t:[t];for(const t of n.reverse())this.slides.unshift(R(t));for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;const s=(null===(e=this.pages[this.page])||void 0===e?void 0:e.pos)||0;this.page+=n.length,this.updateMetrics();const o=(null===(i=this.pages[this.page])||void 0===i?void 0:i.pos)||0;if(this.panzoom){const t=this.isRTL?s-o:o-s;this.panzoom.target.e-=t,this.panzoom.current.e-=t,this.panzoom.requestTick()}}appendSlide(t){let e=Array.isArray(t)?t:[t];for(const t of e){const e=R(t);e.index=this.slides.length,this.slides.push(e),this.emit("initSlide",t,this.slides.length)}this.updateMetrics()}removeSlide(t){const e=this.slides.length;t=(t%e+e)%e,this.removeSlideEl(this.slides[t],!0),this.slides.splice(t,1);for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1})}updateMetrics(){const{panzoom:e,viewport:i,track:n,isHorizontal:s}=this;if(!n)return;const o=s?"width":"height";if(i){let e=t(i.getBoundingClientRect()[o],1e3),n=getComputedStyle(i),a="padding",r=s?"Right":"Bottom";e-=parseFloat(n[a+(s?"Left":"Top")])+parseFloat(n[a+r]),this.viewportDim=e}let a,r=this.pages.length,l=0;for(const[e,i]of this.slides.entries()){let n=0,s=0;!i.el&&a?(n=a.dim,s=a.gap):(({dim:n,gap:s}=this.getSlideMetrics(i)),a=i),n=t(n,1e3),s=t(s,1e3),i.dim=n,i.gap=s,i.pos=l,l+=n,(this.isInfinite||e<this.slides.length-1)&&(l+=s)}const c=this.contentDim;l=t(l,1e3),this.contentDim=l,e&&(e.contentRect[o]=l,e.contentRect["e"===this.axis?"fullWidth":"fullHeight"]=l),this.pages=this.createPages(),this.pages=this.processPages(),this.state===L.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),e&&r===this.pages.length&&Math.abs(l-c)>.5&&(e.target[this.axis]=-1*this.pages[this.page].pos,e.current[this.axis]=-1*this.pages[this.page].pos,e.stop()),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,i=!1){void 0===e&&(e=this.page);const n=this,s=n.panzoom,o=n.pages[e]||0;if(!o||!s)return 0;let a=-1*s.current.e,r=n.contentDim;var l=[t((a-o.pos)/(1*o.dim),1e3),t((a+r-o.pos)/(1*o.dim),1e3),t((a-r-o.pos)/(1*o.dim),1e3)].reduce((function(t,e){return Math.abs(e)<Math.abs(t)?e:t}));return i?l:Math.max(-1,Math.min(1,l))}setViewportHeight(){const{page:t,pages:e,viewport:i,isHorizontal:n}=this;if(!i||!e[t])return;let s=0;n&&this.track&&(this.track.style.height="auto",e[t].slides.forEach((t=>{t.el&&(s=Math.max(s,t.el.offsetHeight))}))),i.style.height=s?`${s}px`:""}getPageForSlide(t){for(const e of this.pages)for(const i of e.slides)if(i.index===t)return e.index;return-1}getVisibleSlides(t=0){var e;const i=new Set;let{contentDim:n,viewportDim:s,pages:o,page:a}=this;n=n+(null===(e=this.slides[this.slides.length-1])||void 0===e?void 0:e.gap)||0;let r=0;r=this.panzoom?-1*this.panzoom.current[this.axis]:o[a]&&o[a].pos||0,this.isInfinite&&(r-=Math.floor(r/n)*n),this.isRTL&&this.isHorizontal&&(r*=-1);const l=r-s*t,c=r+s*(t+1),h=this.isInfinite?[-1,0,1]:[0];for(const t of this.slides)for(const e of h){const s=t.pos+e*n,o=t.pos+t.dim+t.gap+e*n;s<c&&o>l&&i.add(t)}return i}getPageFromPosition(t){const{viewportDim:e,contentDim:i}=this,n=this.pages.length,s=this.slides.length,o=this.slides[s-1];let a=0,r=0,l=0;const c=this.option("center");c&&(t+=.5*e),this.isInfinite||(t=Math.max(this.slides[0].pos,Math.min(t,o.pos)));const h=i+o.gap;l=Math.floor(t/h)||0,t-=l*h;let d=o,u=this.slides.find((e=>{const i=t+(d&&!c?.5*d.dim:0);return d=e,e.pos<=i&&e.pos+e.dim+e.gap>i}));return u||(u=o),r=this.getPageForSlide(u.index),a=r+l*n,{page:a,pageIndex:r}}destroy(){if([L.Destroy].includes(this.state))return;this.state=L.Destroy;const{container:t,viewport:e,track:i,slides:n,panzoom:s}=this,o=this.option("classes");t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),s&&(s.destroy(),this.panzoom=null),n&&n.forEach((t=>{this.removeSlideEl(t)})),this.detachPlugins(),e&&e.offsetParent&&i&&i.offsetParent&&e.replaceWith(...i.childNodes);for(const[e,i]of Object.entries(o))"container"!==e&&i&&t.classList.remove(i);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}}Object.defineProperty(_,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:T}),Object.defineProperty(_,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:z}),Object.defineProperty(_,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:B});const N=function(t){const e=window.pageYOffset,i=window.pageYOffset+window.innerHeight;if(!x(t))return 0;const n=t.getBoundingClientRect(),s=n.y+window.pageYOffset,o=n.y+n.height+window.pageYOffset;if(e>o||i<s)return 0;if(e<s&&i>o)return 100;if(s<e&&o>i)return 100;let a=n.height;s<e&&(a-=window.pageYOffset-s),o>i&&(a-=o-i);const r=a/window.innerHeight*100;return Math.round(r)},W=!("undefined"==typeof window||!window.document||!window.document.createElement);let $;const X=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),Y=t=>{if(t&&W){void 0===$&&document.createElement("div").focus({get preventScroll(){return $=!0,!1}});try{if($)t.focus({preventScroll:!0});else{const e=window.pageXOffset||document.body.scrollTop,i=window.pageYOffset||document.body.scrollLeft;t.focus(),document.body.scrollTo({top:e,left:i,behavior:"auto"})}}catch(t){}}},q={dragToClose:!0,hideScrollbar:!0,Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},contentClick:"toggleZoom",contentDblClick:!1,backdropClick:"close",animated:!0,idle:3500,showClass:"f-zoomInUp",hideClass:"f-fadeOut",commonCaption:!1,parentEl:null,startIndex:0,l10n:Object.assign(Object.assign({},v),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n    <div class="fancybox__backdrop"></div>\n    <div class="fancybox__carousel"></div>\n    <div class="fancybox__footer"></div>\n  </div>'},groupAll:!1,groupAttr:"data-fancybox",defaultType:"image",defaultDisplay:"block",autoFocus:!0,trapFocus:!0,placeFocusBack:!0,closeButton:"auto",keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},Fullscreen:{autoStart:!1},compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,wheel:"zoom"};var Z,V;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Closing=2]="Closing",t[t.CustomClosing=3]="CustomClosing",t[t.Destroy=4]="Destroy"}(Z||(Z={})),function(t){t[t.Loading=0]="Loading",t[t.Opening=1]="Opening",t[t.Ready=2]="Ready",t[t.Closing=3]="Closing"}(V||(V={}));const G=()=>{queueMicrotask((()=>{(()=>{const{slug:t,index:e}=U.parseURL(),i=xt.getInstance();if(i&&!1!==i.option("Hash")){const n=i.carousel;if(t&&n){for(let e of n.slides)if(e.slug&&e.slug===t)return n.slideTo(e.index);if(t===i.option("slug"))return n.slideTo(e-1);const s=i.getSlide(),o=s&&s.triggerEl&&s.triggerEl.dataset;if(o&&o.fancybox===t)return n.slideTo(e-1)}U.hasSilentClose=!0,i.close()}U.startFromUrl()})()}))};class U extends I{constructor(){super(...arguments),Object.defineProperty(this,"origHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null})}onChange(){const t=this.instance,e=t.carousel;this.timer&&clearTimeout(this.timer);const i=t.getSlide();if(!e||!i)return;const n=t.isOpeningSlide(i),s=new URL(document.URL).hash;let o,a=i.slug||void 0;o=a||this.instance.option("slug"),!o&&i.triggerEl&&i.triggerEl.dataset&&(o=i.triggerEl.dataset.fancybox);let r="";o&&"true"!==o&&(r="#"+o+(!a&&e.slides.length>1?"-"+(i.index+1):"")),n&&(this.origHash=s!==r?s:""),r&&s!==r&&(this.timer=setTimeout((()=>{try{window.history[n?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+r)}catch(t){}}),300))}onClose(){if(this.timer&&clearTimeout(this.timer),!0!==U.hasSilentClose)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash||""))}catch(t){}}attach(){this.instance.on("Carousel.ready",this.onChange),this.instance.on("Carousel.change",this.onChange),this.instance.on("close",this.onClose)}detach(){this.instance.off("Carousel.ready",this.onChange),this.instance.off("Carousel.change",this.onChange),this.instance.off("close",this.onClose)}static parseURL(){const t=window.location.hash.slice(1),e=t.split("-"),i=e[e.length-1],n=i&&/^\+?\d+$/.test(i)&&parseInt(e.pop()||"1",10)||1;return{hash:t,slug:e.join("-"),index:n}}static startFromUrl(){if(U.hasSilentClose=!1,xt.getInstance()||!1===xt.defaults.Hash)return;const{hash:t,slug:e,index:i}=U.parseURL();if(!e)return;let n=document.querySelector(`[data-slug="${t}"]`);if(n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),xt.getInstance())return;const s=document.querySelectorAll(`[data-fancybox="${e}"]`);s.length&&(n=s[i-1],n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))}static destroy(){window.removeEventListener("hashchange",G,!1)}}function K(){window.addEventListener("hashchange",G,!1),setTimeout((()=>{U.startFromUrl()}),500)}Object.defineProperty(U,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(U,"hasSilentClose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),W&&(/complete|interactive|loaded/.test(document.readyState)?K():document.addEventListener("DOMContentLoaded",K));class J extends I{onCreateSlide(t,e,i){const n=this.instance,s=n.optionFor(i,"src")||"",{el:o,type:a}=i;o&&"image"===a&&"string"==typeof s&&this.setContent(i,s).then((t=>{const e=i.contentEl,s=i.imageEl,a=i.thumbElSrc;if(n.isClosing()||!e||!s)return;e.offsetHeight;const r=!!n.isOpeningSlide(i)&&this.getZoomInfo(i);if(this.option("protected")){o.addEventListener("contextmenu",(t=>{t.preventDefault()}));const t=document.createElement("div");S(t,"fancybox-protected"),e.appendChild(t)}if(a&&r){const s=t.contentRect,o=Math.max(s.fullWidth,s.fullHeight);let c=null;!r.opacity&&o>1200&&(c=document.createElement("img"),S(c,"fancybox-ghost"),c.src=a,e.appendChild(c));const h=()=>{c&&(S(c,"f-fadeFastOut"),setTimeout((()=>{c&&(c.remove(),c=null)}),200))};(l=a,new Promise(((t,e)=>{const i=new Image;i.onload=t,i.onerror=e,i.src=l}))).then((()=>{i.state=V.Opening,this.instance.emit("reveal",i),this.zoomIn(i).then((()=>{h(),this.instance.done(i)}),(()=>{n.hideLoading(i)})),c&&setTimeout((()=>{h()}),o>2500?800:200)}),(()=>{n.hideLoading(i),n.revealContent(i)}))}else{const e=this.optionFor(i,"initialSize"),s=this.optionFor(i,"zoom"),o={event:n.prevMouseMoveEvent||n.options.event,friction:s?.12:0};let a=n.optionFor(i,"showClass")||void 0,r=!0;n.isOpeningSlide(i)&&("full"===e?t.zoomToFull(o):"cover"===e?t.zoomToCover(o):"max"===e?t.zoomToMax(o):r=!1,t.stop("current")),r&&a&&(a=t.isDragging?"f-fadeIn":""),n.revealContent(i,a)}var l}),(()=>{n.setError(i,"{{IMAGE_ERROR}}")}))}onRemoveSlide(t,e,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(t,e,i,n){for(const t of e.slides){const e=t.panzoom;e&&t.index!==i&&e.reset(.35)}}onClose(){const t=this.instance,e=t.container,i=t.getSlide();if(!e||!e.parentElement||!i)return;const{el:n,contentEl:s,panzoom:o}=i,a=i.thumbElSrc;if(!n||!a||!s||!o||o.isContentLoading||o.state===g.Init||o.state===g.Destroy)return;o.updateMetrics();let r=this.getZoomInfo(i);if(!r)return;this.instance.state=Z.CustomClosing,e.classList.remove("is-zooming-in"),e.classList.add("is-zooming-out"),s.style.backgroundImage=`url('${a}')`;const l=e.getBoundingClientRect();Object.assign(e.style,{position:"absolute",top:`${window.pageYOffset}px`,left:`${window.pageXOffset}px`,bottom:"auto",right:"auto",width:`${l.width}px`,height:`${l.height}px`,overflow:"hidden"});const{x:c,y:h,scale:d,opacity:u}=r;if(u){const t=((t,e,i,n)=>{const s=e-t,o=n-i;return e=>i+((e-t)/s*o||0)})(o.scale,d,1,0);o.on("afterTransform",(()=>{s.style.opacity=t(o.scale)+""}))}o.on("endAnimation",(()=>{t.destroy()})),o.target.a=d,o.target.b=0,o.target.c=0,o.target.d=d,o.panTo({x:c,y:h,scale:d,friction:u?.2:.33,ignoreBounds:!0}),o.isResting&&t.destroy()}setContent(t,e){return new Promise(((i,s)=>{var o,a;const r=this.instance,l=t.el;if(!l)return void s();r.showLoading(t);let c=this.optionFor(t,"content");"string"==typeof c&&(c=n(c)),c&&x(c)||(c=document.createElement("img"),c instanceof HTMLImageElement&&(c.src=e||"",c.alt=(null===(o=t.caption)||void 0===o?void 0:o.replace(/<[^>]+>/gi,"").substring(0,1e3))||`Image ${t.index+1} of ${null===(a=r.carousel)||void 0===a?void 0:a.pages.length}`,c.draggable=!1,t.srcset&&c.setAttribute("srcset",t.srcset)),t.sizes&&c.setAttribute("sizes",t.sizes)),c.classList.add("fancybox-image"),t.imageEl=c,r.setContent(t,c,!1);t.panzoom=new T(l,u({},this.option("Panzoom")||{},{content:c,width:r.optionFor(t,"width","auto"),height:r.optionFor(t,"height","auto"),wheel:()=>{const t=r.option("wheel");return("zoom"===t||"pan"==t)&&t},click:(e,i)=>{var n,s;if(r.isCompact||r.isClosing())return!1;if(t.index!==(null===(n=r.getSlide())||void 0===n?void 0:n.index))return!1;let o=!i||i.target&&(null===(s=t.contentEl)||void 0===s?void 0:s.contains(i.target));return r.option(o?"contentClick":"backdropClick")||!1},dblClick:()=>r.isCompact?"toggleZoom":r.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,transformParent:!0,on:{ready:t=>{i(t)},error:()=>{s()},destroy:()=>{s()}}}))}))}zoomIn(t){return new Promise(((e,i)=>{const n=this.instance,s=n.container,{panzoom:o,contentEl:a,el:r}=t;o&&o.updateMetrics();const l=this.getZoomInfo(t);if(!(l&&r&&a&&o&&s))return void i();const{x:c,y:h,scale:d,opacity:u}=l,p=()=>{t.state!==V.Closing&&(u&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-d)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&e(o))},f=t=>{t.scale<.99||t.scale>1.01||(a.style.opacity="",E(s,"is-zooming-in"),t.off("endAnimation",f),t.off("touchStart",f),t.off("afterTransform",p),e(t))};o.on("endAnimation",f),o.on("touchStart",f),o.on("afterTransform",p),o.on(["error","destroy"],(()=>{i()})),o.panTo({x:c,y:h,scale:d,friction:0,ignoreBounds:!0}),o.stop("current");const m={event:"mousemove"===o.panMode?n.prevMouseMoveEvent||n.options.event:void 0},g=this.optionFor(t,"initialSize");S(s,"is-zooming-in"),n.hideLoading(t),"full"===g?o.zoomToFull(m):"cover"===g?o.zoomToCover(m):"max"===g?o.zoomToMax(m):o.reset(.172)}))}getZoomInfo(t){const{el:e,imageEl:i,thumbEl:n,panzoom:s}=t;if(!e||!i||!n||!s||N(n)<3||!this.optionFor(t,"zoom")||this.instance.state===Z.Destroy)return!1;const{top:o,left:a,width:r,height:l}=n.getBoundingClientRect();let{top:c,left:h,fitWidth:d,fitHeight:u}=s.contentRect;if(!(r&&l&&d&&u))return!1;const p=r/d,f=s.container.getBoundingClientRect();c+=f.top,h+=f.left;const m=-1*(h+.5*d-(a+.5*r)),g=-1*(c+.5*u-(o+.5*l));let b=this.option("zoomOpacity")||!1;return"auto"===b&&(b=Math.abs(r/l-d/u)>.1),{x:m,y:g,scale:p,opacity:b}}attach(){this.instance.on("Carousel.change",this.onChange),this.instance.on("Carousel.createSlide",this.onCreateSlide),this.instance.on("Carousel.removeSlide",this.onRemoveSlide),this.instance.on("close",this.onClose)}detach(){this.instance.off("Carousel.change",this.onChange),this.instance.off("Carousel.createSlide",this.onCreateSlide),this.instance.off("Carousel.removeSlide",this.onRemoveSlide),this.instance.off("close",this.onClose)}}Object.defineProperty(J,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}});const Q=(t,e={})=>{const i=new URL(t),n=new URLSearchParams(i.search),s=new URLSearchParams;for(const[t,i]of[...n,...Object.entries(e)]){let e=i.toString();"t"===t?s.set("start",parseInt(e).toString()):s.set(t,e)}let o=s.toString(),a=t.match(/#t=((.*)?\d+s)/);return a&&(o+=`#t=${a[1]}`),o},tt={ajax:null,autoSize:!0,preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},et=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo","video"];class it extends I{onInitSlide(t,e,i){this.processType(i)}onCreateSlide(t,e,i){this.setContent(i)}onRemoveSlide(t,e,i){i.closeBtnEl&&(i.closeBtnEl.remove(),i.closeBtnEl=void 0),i.xhr&&(i.xhr.abort(),i.xhr=null),i.iframeEl&&(i.iframeEl.onload=i.iframeEl.onerror=null,i.iframeEl.src="//about:blank",i.iframeEl=null);const n=i.contentEl,s=i.placeholderEl;if("inline"===i.type&&n&&s)n.classList.remove("fancybox__content"),"none"!==n.style.display&&(n.style.display="none"),s.parentNode&&s.parentNode.insertBefore(n,s),s.remove(),i.placeholderEl=null;else for(;i.el&&i.el.firstChild;)i.el.removeChild(i.el.firstChild)}onSelectSlide(t,e,i){i.state===V.Ready&&this.playVideo()}onUnselectSlide(t,e,i){var n,s;if("html5video"===i.type){try{null===(s=null===(n=i.el)||void 0===n?void 0:n.querySelector("video"))||void 0===s||s.pause()}catch(t){}return}let o;"vimeo"===i.type?o={method:"pause",value:"true"}:"youtube"===i.type&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}onDone(t,e){t.isCurrentSlide(e)&&!t.isClosing()&&this.playVideo()}onRefresh(t,e){e.slides.forEach((t=>{t.el&&(this.setAspectRatio(t),this.resizeIframe(t))}))}onMessage(t){try{let e=JSON.parse(t.data);if("https://player.vimeo.com"===t.origin){if("ready"===e.event)for(let e of Array.from(document.getElementsByClassName("fancybox__iframe")))e instanceof HTMLIFrameElement&&e.contentWindow===t.source&&(e.dataset.ready="true")}else if(t.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===e.event){const t=document.getElementById(e.id);t&&(t.dataset.ready="true")}}catch(t){}}loadAjaxContent(t){const e=this.instance.optionFor(t,"src")||"";this.instance.showLoading(t);const i=this.instance,n=new XMLHttpRequest;i.showLoading(t),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===Z.Ready&&(i.hideLoading(t),200===n.status?i.setContent(t,n.responseText):i.setError(t,404===n.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const s=t.ajax||null;n.open(s?"POST":"GET",e+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(s),t.xhr=n}setInlineContent(t){let e=null;if(x(t.src))e=t.src;else if("string"==typeof t.src){const i=t.src.split("#",2).pop();e=i?document.getElementById(i):null}if(e){if("clone"===t.type||e.closest(".fancybox__slide")){e=e.cloneNode(!0);const i=e.dataset.animationName;i&&(e.classList.remove(i),delete e.dataset.animationName);let n=e.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${t.index}`,e.setAttribute("id",n)}else if(e.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),e.parentNode.insertBefore(i,e),t.placeholderEl=i}this.instance.setContent(t,e)}else this.instance.setError(t,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(t){const{src:e,el:i}=t;if(!e||"string"!=typeof e||!i)return;const n=this.instance,s=document.createElement("iframe");s.className="fancybox__iframe",s.setAttribute("id",`fancybox__iframe_${n.id}_${t.index}`),s.setAttribute("allow","autoplay; fullscreen"),s.setAttribute("scrolling","auto"),s.onerror=()=>{n.setError(t,"{{IFRAME_ERROR}}")},t.iframeEl=s;const o=this.optionFor(t,"preload");if(i.classList.add("is-loading"),"iframe"!==t.type||!1===o)return s.setAttribute("src",t.src+""),this.resizeIframe(t),void n.setContent(t,s);n.showLoading(t),s.onload=()=>{if(!s.src.length)return;const e="true"!==s.dataset.ready;s.dataset.ready="true",this.resizeIframe(t),e?n.revealContent(t):n.hideLoading(t)},s.setAttribute("src",e),n.setContent(t,s,!1)}resizeIframe(t){const e=t.iframeEl,i=null==e?void 0:e.parentElement;if(!e||!i)return;let n=t.autoSize,s=t.width||0,o=t.height||0;s&&o&&(n=!1);const a=i&&i.style;if(!1!==t.preload&&!1!==n&&a)try{const t=window.getComputedStyle(i),n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),r=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),l=e.contentWindow;if(l){const t=l.document,e=t.getElementsByTagName("html")[0],i=t.body;a.width="",i.style.overflow="hidden",s=s||e.scrollWidth+n,a.width=`${s}px`,i.style.overflow="",a.flex="0 0 auto",a.height=`${i.scrollHeight}px`,o=e.scrollHeight+r}}catch(t){}if(s||o){const t={flex:"0 1 auto",width:"",height:""};s&&(t.width=`${s}px`),o&&(t.height=`${o}px`),Object.assign(a,t)}}playVideo(){const t=this.instance.getSlide();if(!t)return;const{el:e}=t;if(!e||!e.offsetParent)return;if(!this.optionFor(t,"videoAutoplay"))return;if("html5video"===t.type)try{const t=e.querySelector("video");if(t){const e=t.play();void 0!==e&&e.then((()=>{})).catch((e=>{t.muted=!0,t.play()}))}}catch(t){}if("youtube"!==t.type&&"vimeo"!==t.type)return;const i=()=>{if(t.iframeEl&&t.iframeEl.contentWindow){let e;if("true"===t.iframeEl.dataset.ready)return e="youtube"===t.type?{event:"command",func:"playVideo"}:{method:"play",value:"true"},e&&t.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"),void(t.poller=void 0);"youtube"===t.type&&(e={event:"listening",id:t.iframeEl.getAttribute("id")},t.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"))}t.poller=setTimeout(i,250)};i()}processType(t){if(t.html)return t.type="html",t.src=t.html,void(t.html="");const e=this.instance.optionFor(t,"src","");if(!e||"string"!=typeof e)return;let i=t.type,n=null;if(n=e.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const s=this.optionFor(t,"youtube"),{nocookie:o}=s,a=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i}(s,["nocookie"]),r=`www.youtube${o?"-nocookie":""}.com`,l=Q(e,a),c=encodeURIComponent(n[2]);t.videoId=c,t.src=`https://${r}/embed/${c}?${l}`,t.thumbSrc=t.thumbSrc||`https://i.ytimg.com/vi/${c}/mqdefault.jpg`,i="youtube"}else if(n=e.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const s=Q(e,this.optionFor(t,"vimeo")),o=encodeURIComponent(n[1]),a=n[4]||"";t.videoId=o,t.src=`https://player.vimeo.com/video/${o}?${a?`h=${a}${s?"&":""}`:""}${s}`,i="vimeo"}if(!i&&t.triggerEl){const e=t.triggerEl.dataset.type;et.includes(e)&&(i=e)}i||"string"==typeof e&&("#"===e.charAt(0)?i="inline":(n=e.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i="html5video",t.videoFormat=t.videoFormat||"video/"+("ogv"===n[1]?"ogg":n[1])):e.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i="image":e.match(/\.(pdf)((\?|#).*)?$/i)?i="pdf":(n=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(t.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i="map"):(n=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(t.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i="map")),i=i||this.instance.option("defaultType"),t.type=i,"image"===i&&(t.thumbSrc=t.thumbSrc||t.src)}setContent(t){const e=this.instance.optionFor(t,"src")||"";if(t&&t.type&&e){switch(t.type){case"html":this.instance.setContent(t,e);break;case"html5video":const i=this.option("videoTpl");i&&this.instance.setContent(t,i.replace(/\{\{src\}\}/gi,e+"").replace(/\{\{format\}\}/gi,this.optionFor(t,"videoFormat")||"").replace(/\{\{poster\}\}/gi,t.poster||t.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(t);break;case"ajax":this.loadAjaxContent(t);break;case"pdf":case"map":case"youtube":case"vimeo":t.preload=!1;case"iframe":this.setIframeContent(t)}this.setAspectRatio(t)}}setAspectRatio(t){var e;const i=t.contentEl,n=this.optionFor(t,"videoRatio"),s=null===(e=t.el)||void 0===e?void 0:e.getBoundingClientRect();if(!(i&&s&&n&&1!==n&&t.type&&["video","youtube","vimeo","html5video"].includes(t.type)))return;const o=s.width,a=s.height;i.style.aspectRatio=n+"",i.style.width=o/a>n?"auto":"",i.style.height=o/a>n?"":"auto"}attach(){this.instance.on("Carousel.initSlide",this.onInitSlide),this.instance.on("Carousel.createSlide",this.onCreateSlide),this.instance.on("Carousel.removeSlide",this.onRemoveSlide),this.instance.on("Carousel.selectSlide",this.onSelectSlide),this.instance.on("Carousel.unselectSlide",this.onUnselectSlide),this.instance.on("Carousel.Panzoom.refresh",this.onRefresh),this.instance.on("done",this.onDone),window.addEventListener("message",this.onMessage)}detach(){this.instance.off("Carousel.initSlide",this.onInitSlide),this.instance.off("Carousel.createSlide",this.onCreateSlide),this.instance.off("Carousel.removeSlide",this.onRemoveSlide),this.instance.off("Carousel.selectSlide",this.onSelectSlide),this.instance.off("Carousel.unselectSlide",this.onUnselectSlide),this.instance.off("Carousel.Panzoom.refresh",this.onRefresh),this.instance.off("done",this.onDone),window.removeEventListener("message",this.onMessage)}}Object.defineProperty(it,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:tt});class nt extends I{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:"ready"}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return"ready"!==this.state}onReady(t){this.option("autoStart")&&(t.isInfinite||t.page<t.pages.length-1)&&this.start()}onChange(){var t;(null===(t=this.instance.panzoom)||void 0===t?void 0:t.isResting)||(this.removeProgressBar(),this.pause())}onSettle(){this.resume()}onVisibilityChange(){"visible"===document.visibilityState?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var t;this.inHover=!1,(null===(t=this.instance.panzoom)||void 0===t?void 0:t.isResting)&&this.resume()}onTimerEnd(){"play"===this.state&&(this.instance.isInfinite||this.instance.page!==this.instance.pages.length-1?this.instance.slideNext():this.instance.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var t;if(!this.option("showProgress"))return null;this.removeProgressBar();const e=this.instance,i=(null===(t=e.pages[e.page])||void 0===t?void 0:t.slides)||[];let n=this.option("progressParentEl");if(n||(n=(1===i.length?i[0].el:null)||e.viewport),!n)return null;const s=document.createElement("div");return S(s,"f-progress"),n.prepend(s),this.progressBar=s,s.offsetHeight,s}set(){if(this.instance.pages.length<2)return;if(this.progressBar)return;const t=this.option("timeout");this.state="play",S(this.instance.container,"has-autoplay");let e=this.createProgressBar();e&&(e.style.transitionDuration=`${t}ms`,e.style.transform="scaleX(1)"),this.timer=setTimeout((()=>{this.timer=null,this.inHover||this.onTimerEnd()}),t),this.emit("set")}clear(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.removeProgressBar()}start(){if(this.set(),this.option("pauseOnHover")){const t=this.instance.container;t.addEventListener("mouseenter",this.onMouseEnter,!1),t.addEventListener("mouseleave",this.onMouseLeave,!1)}document.addEventListener("visibilitychange",this.onVisibilityChange,!1)}stop(){const t=this.instance.container;this.clear(),this.state="ready",t.removeEventListener("mouseenter",this.onMouseEnter,!1),t.removeEventListener("mouseleave",this.onMouseLeave,!1),document.removeEventListener("visibilitychange",this.onVisibilityChange,!1),E(t,"has-autoplay"),this.emit("stop")}pause(){"play"===this.state&&(this.state="pause",this.clear(),this.emit("pause"))}resume(){const t=this.instance;if(t.isInfinite||t.page!==t.pages.length-1)if("play"!==this.state){if("pause"===this.state&&!this.inHover){const t=new Event("resume",{bubbles:!0,cancelable:!0});this.emit("resume",event),t.defaultPrevented||this.set()}}else this.set();else this.stop()}toggle(){"play"===this.state||"pause"===this.state?this.stop():this.set()}attach(){this.instance.on("ready",this.onReady),this.instance.on("Panzoom.startAnimation",this.onChange),this.instance.on("Panzoom.endAnimation",this.onSettle),this.instance.on("Panzoom.touchMove",this.onChange)}detach(){this.instance.off("ready",this.onReady),this.instance.off("Panzoom.startAnimation",this.onChange),this.instance.off("Panzoom.endAnimation",this.onSettle),this.instance.off("Panzoom.touchMove",this.onChange),this.stop()}}Object.defineProperty(nt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class st extends I{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(t){const e=t.carousel;if(!e)return;const i=t.container;i&&(e.options.Autoplay=u(this.option("Autoplay")||{},{pauseOnHover:!1,autoStart:!1,timeout:this.option("timeout"),progressParentEl:()=>i.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]")||i,on:{set:e=>{var n;i.classList.add("has-slideshow"),(null===(n=t.getSlide())||void 0===n?void 0:n.state)!==V.Ready&&e.pause()},stop:()=>{i.classList.remove("has-slideshow"),t.isCompact||t.endIdle()},resume:(e,i)=>{var n,s,o;!i||!i.cancelable||(null===(n=t.getSlide())||void 0===n?void 0:n.state)===V.Ready&&(null===(o=null===(s=t.carousel)||void 0===s?void 0:s.panzoom)||void 0===o?void 0:o.isResting)||i.preventDefault()}}}),e.attachPlugins({Autoplay:nt}),this.ref=e.plugins.Autoplay)}onReady(t){const e=t.carousel,i=this.ref;e&&i&&this.option("playOnStart")&&(e.isInfinite||e.page<e.pages.length-1)&&i.start()}onDone(t,e){const i=this.ref;if(!i)return;const n=e.panzoom;n&&n.on("startAnimation",(()=>{t.isCurrentSlide(e)&&i.stop()})),t.isCurrentSlide(e)&&i.resume()}onKeydown(t,e){var i;const n=this.ref;n&&e===this.option("key")&&"BUTTON"!==(null===(i=document.activeElement)||void 0===i?void 0:i.nodeName)&&n.toggle()}attach(){this.instance.on("Carousel.init",this.onPrepare),this.instance.on("Carousel.ready",this.onReady),this.instance.on("done",this.onDone),this.instance.on("keydown",this.onKeydown)}detach(){this.instance.off("Carousel.init",this.onPrepare),this.instance.off("Carousel.ready",this.onReady),this.instance.off("done",this.onDone),this.instance.off("keydown",this.onKeydown)}}Object.defineProperty(st,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,timeout:3e3}});const ot={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var at;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Hidden=2]="Hidden",t[t.Disabled=3]="Disabled"}(at||(at={}));let rt=class extends I{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"shouldCenter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:at.Init})}formatThumb(t,e){return this.instance.localize(e,[["%i",t.index],["%d",t.index+1],["%s",t.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}getSlides(){const t=[],e=this.option("thumbTpl")||"";if(e)for(const i of this.instance.slides||[]){let n="";i.type&&(n=`for-${i.type}`,i.type&&["video","youtube","vimeo","html5video"].includes(i.type)&&(n+=" for-video")),t.push({html:this.formatThumb(i,e),customClass:n})}return t}onInitSlide(t,e){const i=e.el;i&&(e.thumbSrc=i.dataset.thumbSrc||e.thumbSrc||"",e.thumbClipWidth=parseFloat(i.dataset.thumbClipWidth||"")||e.thumbClipWidth||0,e.thumbHeight=parseFloat(i.dataset.thumbHeight||"")||e.thumbHeight||0)}onInitSlides(){this.state===at.Init&&this.build()}onRefreshM(){this.refreshModern()}onChangeM(){"modern"===this.type&&(this.shouldCenter=!0,this.centerModern())}onClickModern(t){t.preventDefault(),t.stopPropagation();const e=this.instance,i=e.page,n=t=>{if(t){const e=t.closest("[data-carousel-index]");if(e)return parseInt(e.dataset.carouselIndex||"",10)||0}return-1},s=(t,e)=>{const i=document.elementFromPoint(t,e);return i?n(i):-1};let o=n(t.target);o<0&&(o=s(t.clientX+this.thumbGap,t.clientY),o===i&&(o=i-1)),o<0&&(o=s(t.clientX-this.thumbGap,t.clientY),o===i&&(o=i+1)),o<0&&(o=(e=>{let n=s(t.clientX-e,t.clientY),a=s(t.clientX+e,t.clientY);return o<0&&n===i&&(o=i+1),o<0&&a===i&&(o=i-1),o})(this.thumbExtraGap)),o===i?this.centerModern():o>-1&&o<e.pages.length&&e.slideTo(o)}onTransformM(){if("modern"!==this.type)return;const{instance:t,container:e,track:i}=this,n=t.panzoom;if(!(e&&i&&n&&this.panzoom))return;o(e,this.cn("isResting"),n.state!==g.Init&&n.isResting);const s=this.thumbGap,a=this.thumbExtraGap,r=this.thumbClipWidth;let l=0,c=0,h=0;for(const e of t.slides){let i=e.index,n=e.thumbSlideEl;if(!n)continue;o(n,this.cn("isSelected"),i===t.page),c=1-Math.abs(t.getProgress(i)),n.style.setProperty("--progress",c?c+"":"");const d=.5*((e.thumbWidth||0)-r);l+=s,l+=d,c&&(l-=c*(d+a)),n.style.setProperty("--shift",l-s+""),l+=d,c&&(l-=c*(d+a)),l-=s,0===i&&(h=a*c)}i&&(i.style.setProperty("--left",h+""),i.style.setProperty("--width",l+h+s+a*c+"")),this.shouldCenter&&this.centerModern()}buildClassic(){const{container:t,track:e}=this,i=this.getSlides();if(!t||!e||!i)return;const n=new this.instance.constructor(t,u({track:e,infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,transition:!1,Dots:!1,Navigation:!1,Sync:{},classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},this.option("Carousel")||{},{Sync:{target:this.instance},slides:i}));this.carousel=n,this.track=e,n.on("ready",(()=>{this.emit("ready")}))}buildModern(){if("modern"!==this.type)return;const{container:t,track:e,instance:i}=this,s=this.option("thumbTpl")||"";if(!t||!e||!s)return;S(t,"is-horizontal"),this.updateModern();for(const t of i.slides||[]){const i=document.createElement("div");if(S(i,this.cn("slide")),t.type){let e=`for-${t.type}`;["video","youtube","vimeo","html5video"].includes(t.type)&&(e+=" for-video"),S(i,e)}i.appendChild(n(this.formatThumb(t,s))),t.thumbSlideEl=i,e.appendChild(i),this.resizeModernSlide(t)}const o=new i.constructor.Panzoom(t,{content:e,lockAxis:"x",zoom:!1,panOnlyZoomed:!1,bounds:()=>{let t=0,e=0,n=i.slides[0],s=i.slides[i.slides.length-1],o=i.slides[i.page];return n&&s&&o&&(e=-1*this.getModernThumbPos(0),0!==i.page&&(e+=.5*(n.thumbWidth||0)),t=-1*this.getModernThumbPos(i.slides.length-1),i.page!==i.slides.length-1&&(t+=(s.thumbWidth||0)-(o.thumbWidth||0)-.5*(s.thumbWidth||0))),{x:{min:t,max:e},y:{min:0,max:0}}}});o.on("touchStart",((t,e)=>{this.shouldCenter=!1})),o.on("click",((t,e)=>this.onClickModern(e))),o.on("ready",(()=>{this.centerModern(),this.emit("ready")})),o.on(["afterTransform","refresh"],(t=>{this.lazyLoadModern()})),this.panzoom=o,this.refreshModern()}updateModern(){if("modern"!==this.type)return;const{container:t}=this;t&&(this.thumbGap=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-gap"))||0,this.thumbExtraGap=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-extra-gap"))||0,this.thumbWidth=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-width"))||40,this.thumbClipWidth=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-clip-width"))||40,this.thumbHeight=parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-height"))||40)}refreshModern(){var t;if("modern"===this.type){this.updateModern();for(const t of this.instance.slides||[])this.resizeModernSlide(t);this.onTransformM(),null===(t=this.panzoom)||void 0===t||t.updateMetrics(!0),this.centerModern(0)}}centerModern(e){const i=this.instance,{container:n,panzoom:s}=this;if(!n||!s||s.state===g.Init)return;const o=i.page;let a=this.getModernThumbPos(o),r=a;for(let t=i.page-3;t<i.page+3;t++){if(t<0||t>i.pages.length-1||t===i.page)continue;const e=1-Math.abs(i.getProgress(t));e>0&&e<1&&(r+=e*(this.getModernThumbPos(t)-a))}let l=100;void 0===e&&(e=.2,i.inTransition.size>0&&(e=.12),Math.abs(-1*s.current.e-r)>s.containerRect.width&&(e=.5,l=0)),s.options.maxVelocity=l,s.applyChange({panX:t(-1*r-s.target.e,1e3),friction:null===i.prevPage?0:e})}lazyLoadModern(){const{instance:t,panzoom:e}=this;if(!e)return;const i=-1*e.current.e||0;let s=this.getModernThumbPos(t.page);if(e.state!==g.Init||0===s)for(const s of t.slides||[]){const t=s.thumbSlideEl;if(!t)continue;const o=t.querySelector("img[data-lazy-src]"),a=s.index,r=this.getModernThumbPos(a),l=i-.5*e.containerRect.innerWidth,c=l+e.containerRect.innerWidth;if(!o||r<l||r>c)continue;let h=o.dataset.lazySrc;if(!h||!h.length)continue;if(delete o.dataset.lazySrc,o.src=h,o.complete)continue;S(t,this.cn("isLoading"));const d=n(w);t.appendChild(d),o.addEventListener("load",(()=>{t.offsetParent&&(t.classList.remove(this.cn("isLoading")),d.remove())}),!1)}}resizeModernSlide(t){if("modern"!==this.type)return;if(!t.thumbSlideEl)return;const e=t.thumbClipWidth&&t.thumbHeight?Math.round(this.thumbHeight*(t.thumbClipWidth/t.thumbHeight)):this.thumbWidth;t.thumbWidth=e}getModernThumbPos(e){const i=this.instance.slides[e],n=this.panzoom;if(!n||!n.contentRect.fitWidth)return 0;let s=n.containerRect.innerWidth,o=n.contentRect.width;2===this.instance.slides.length&&(e-=1,o=2*this.thumbClipWidth);let a=e*(this.thumbClipWidth+this.thumbGap)+this.thumbExtraGap+.5*(i.thumbWidth||0);return a-=o>s?.5*s:.5*o,t(a||0,1)}build(){const t=this.instance,e=t.container,i=this.option("minCount")||0;if(i){let e=0;for(const i of t.slides||[])i.thumbSrc&&e++;if(e<i)return this.cleanup(),void(this.state=at.Disabled)}const n=this.option("type");if(["modern","classic"].indexOf(n)<0)return void(this.state=at.Disabled);this.type=n;const s=document.createElement("div");S(s,this.cn("container")),S(s,`is-${n}`);const o=this.option("parentEl");o?o.appendChild(s):e.after(s),this.container=s,S(e,this.cn("hasThumbs"));const a=document.createElement("div");S(a,this.cn("track")),s.appendChild(a),this.track=a,"classic"===n?this.buildClassic():this.buildModern(),this.state=at.Ready,s.addEventListener("click",(e=>{setTimeout((()=>{var e;null===(e=null==s?void 0:s.querySelector(`[data-carousel-index="${t.page}"]`))||void 0===e||e.focus()}),100)}))}cleanup(){this.carousel&&this.carousel.destroy(),this.carousel=null,this.panzoom&&this.panzoom.destroy(),this.panzoom=null,this.container&&this.container.remove(),this.container=null,this.track=null,this.state=at.Init,E(this.instance.container,this.cn("hasThumbs"))}attach(){const{instance:t}=this;t.on("initSlide",this.onInitSlide),t.state===L.Init?t.on("initSlides",this.onInitSlides):this.onInitSlides(),t.on("Panzoom.afterTransform",this.onTransformM),t.on("Panzoom.refresh",this.onRefreshM),t.on("change",this.onChangeM)}detach(){const{instance:t}=this;t.off("initSlide",this.onInitSlide),t.off("initSlides",this.onInitSlides),t.off("Panzoom.afterTransform",this.onTransformM),t.off("Panzoom.refresh",this.onRefreshM),t.off("change",this.onChangeM),this.cleanup()}};Object.defineProperty(rt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ot});const lt=Object.assign(Object.assign({},ot),{key:"t",showOnStart:!0,parentEl:null});class ct extends I{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const t=this.ref;return t&&t.state!==at.Disabled}get isHidden(){return this.hidden}onInit(){const t=this.instance,e=t.carousel;if(this.ref||!e)return;const i=this.option("parentEl")||t.footer||t.container;i&&(e.options.Thumbs=u({},this.options,{parentEl:i,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:t.option("Carousel.friction")},on:{click:(t,e)=>{e.stopPropagation()}}},on:{ready:t=>{const e=t.container;e&&this.hidden&&(this.refresh(),e.style.transition="none",this.hide(),e.offsetHeight,queueMicrotask((()=>{e.style.transition="",this.show()})))}}}),e.attachPlugins({Thumbs:rt}),this.ref=e.plugins.Thumbs,this.option("showOnStart")||(this.ref.state=at.Hidden,this.hidden=!0))}onResize(){var t;const e=null===(t=this.ref)||void 0===t?void 0:t.container;e&&(e.style.maxHeight="")}onKeydown(t,e){const i=this.option("key");i&&i===e&&this.toggle()}toggle(){const t=this.ref;t&&t.state!==at.Disabled&&(t.state!==at.Hidden?this.hidden?this.show():this.hide():t.build())}show(){const t=this.ref,e=t&&t.state!==at.Disabled&&t.container;e&&(this.refresh(),e.offsetHeight,e.removeAttribute("aria-hidden"),e.classList.remove("is-hidden"),this.hidden=!1)}hide(){const t=this.ref,e=t&&t.container;e&&(this.refresh(),e.offsetHeight,e.classList.add("is-hidden"),e.setAttribute("aria-hidden","true")),this.hidden=!0}refresh(){const t=this.ref;if(!t||t.state===at.Disabled)return;const e=t.container,i=(null==e?void 0:e.firstChild)||null;e&&i&&i.childNodes.length&&(e.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){this.instance.state===Z.Init?this.instance.on("Carousel.init",this.onInit):this.onInit(),this.instance.on("resize",this.onResize),this.instance.on("keydown",this.onKeydown)}detach(){var t;this.instance.off("Carousel.init",this.onInit),this.instance.off("resize",this.onResize),this.instance.off("keydown",this.onKeydown),null===(t=this.instance.carousel)||void 0===t||t.detachPlugins(["Thumbs"]),this.ref=null}}Object.defineProperty(ct,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:lt});const ht={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var dt;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Disabled=2]="Disabled"}(dt||(dt={}));const ut={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},pt={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};class ft extends I{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:dt.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(t){var e;if(!t.carousel)return;let i=this.option("display"),n=this.option("absolute"),s=this.option("enabled");if("auto"===s){const t=this.instance.carousel;let e=0;if(t)for(const i of t.slides)(i.panzoom||"image"===i.type)&&e++;e||(s=!1)}s||(i=void 0);let o=0;const a={left:[],middle:[],right:[]};if(i)for(const t of["left","middle","right"])for(const n of i[t]){const i=this.createEl(n);i&&(null===(e=a[t])||void 0===e||e.push(i),o++)}let r=null;if(o&&(r=this.createContainer()),r){for(const[t,e]of Object.entries(a)){const i=document.createElement("div");S(i,"fancybox__toolbar__column is-"+t);for(const t of e)i.appendChild(t);"auto"!==n||"middle"!==t||e.length||(n=!0),r.appendChild(i)}!0===n&&S(r,"is-absolute"),this.state=dt.Ready,this.onRefresh()}else this.state=dt.Disabled}onClick(t){var e,i;const n=this.instance,s=n.getSlide(),o=null==s?void 0:s.panzoom,a=t.target,r=a&&x(a)?a.dataset:null;if(!r)return;if(void 0!==r.fancyboxToggleThumbs)return t.preventDefault(),t.stopPropagation(),void(null===(e=n.plugins.Thumbs)||void 0===e||e.toggle());if(void 0!==r.fancyboxToggleFullscreen)return t.preventDefault(),t.stopPropagation(),void this.instance.toggleFullscreen();if(void 0!==r.fancyboxToggleSlideshow){t.preventDefault(),t.stopPropagation();const e=null===(i=n.carousel)||void 0===i?void 0:i.plugins.Autoplay;let s=e.isActive;return o&&"mousemove"===o.panMode&&!s&&o.reset(),void(s?e.stop():e.start())}const l=r.panzoomAction,c=r.panzoomChange;if((c||l)&&(t.preventDefault(),t.stopPropagation()),c){let t={};try{t=JSON.parse(c)}catch(t){}o&&o.applyChange(t)}else l&&o&&o[l]&&o[l]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const t=this.container;if(!t)return;const e=this.instance.getSlide();if(!e||e.state!==V.Ready)return;const i=e&&!e.error&&e.panzoom;for(const e of t.querySelectorAll("[data-panzoom-action]"))i?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));let n=i&&i.canZoomIn(),s=i&&i.canZoomOut();for(const e of t.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));for(const e of t.querySelectorAll('[data-panzoom-action="zoomOut"]'))s?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));for(const e of t.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){s||n?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));const t=e.querySelector("g");t&&(t.style.display=n?"":"none")}}onDone(t,e){var i;null===(i=e.panzoom)||void 0===i||i.on("afterTransform",(()=>{this.instance.isCurrentSlide(e)&&this.onRefresh()})),this.instance.isCurrentSlide(e)&&this.onRefresh()}createContainer(){const t=this.instance.container;if(!t)return null;const e=this.option("parentEl")||t,i=document.createElement("div");return S(i,"fancybox__toolbar"),e.prepend(i),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),t&&S(t,"has-toolbar"),this.container=i,i}createEl(t){var e;const i=this.instance.carousel;if(!i)return null;if("toggleFS"===t)return null;if("fullscreen"===t&&!this.instance.fsAPI)return null;let s=null;const o=i.slides.length||0;let a=0,r=0;for(const t of i.slides)(t.panzoom||"image"===t.type)&&a++,("image"===t.type||t.downloadSrc)&&r++;if(o<2&&["infobar","prev","next"].includes(t))return s;if(void 0!==ht[t]&&!a)return null;if("download"===t&&!r)return null;if("thumbs"===t){const t=this.instance.plugins.Thumbs;if(!t||!t.isEnabled)return null}if("slideshow"===t){if(!(null===(e=this.instance.carousel)||void 0===e?void 0:e.plugins.Autoplay)||o<2)return null}if(void 0!==ht[t]){const e=ht[t];s=document.createElement("button"),s.setAttribute("title",this.instance.localize(`{{${t.toUpperCase()}}}`)),S(s,"f-button"),e.action&&(s.dataset.panzoomAction=e.action),e.change&&(s.dataset.panzoomChange=JSON.stringify(e.change)),s.appendChild(n(this.instance.localize(e.icon)))}else{const e=(this.option("items")||[])[t];e&&(s=n(this.instance.localize(e.tpl)),"function"==typeof e.click&&s.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),"function"==typeof e.click&&e.click.call(this,this,t)})))}const l=null==s?void 0:s.querySelector("svg");if(l)for(const[t,e]of Object.entries(pt))l.getAttribute(t)||l.setAttribute(t,String(e));return s}removeContainer(){const t=this.container;t&&t.remove(),this.container=null,this.state=dt.Disabled;const e=this.instance.container;e&&E(e,"has-toolbar")}attach(){const t=this,{instance:e}=t;e.on("Carousel.initSlides",t.onReady),e.on("done",t.onDone),e.on("reveal",t.onChange),e.on("Carousel.change",t.onChange),t.onReady(t.instance)}detach(){const t=this,{instance:e}=t;e.off("Carousel.initSlides",t.onReady),e.off("done",t.onDone),e.off("reveal",t.onChange),e.off("Carousel.change",t.onChange),t.removeContainer()}}Object.defineProperty(ft,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ut});const mt={Hash:U,Html:it,Images:J,Slideshow:st,Thumbs:ct,Toolbar:ft},gt=function(){var t=window.getSelection();return t&&"Range"===t.type};let bt=null,vt=null;const yt=new Map;let wt=0;class xt extends m{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(t=[],e={},i={}){super(e),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Z.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fsAPI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fsAPI=(()=>{let t,e="",i="",n="";return document.fullscreenEnabled?(e="requestFullscreen",i="exitFullscreen",n="fullscreenElement"):document.webkitFullscreenEnabled&&(e="webkitRequestFullscreen",i="webkitExitFullscreen",n="webkitFullscreenElement"),e&&(t={request:function(t){return"webkitRequestFullscreen"===e?t[e](Element.ALLOW_KEYBOARD_INPUT):t[e]()},exit:function(){return document[n]&&document[i]()},isFullscreen:function(){return document[n]}}),t})(),this.id=e.id||++wt,yt.set(this.id,this),this.userSlides=t,this.userPlugins=i,queueMicrotask((()=>{this.init()}))}init(){if(this.state===Z.Destroy)return;this.state=Z.Init,this.attachPlugins(Object.assign(Object.assign({},xt.Plugins),this.userPlugins)),this.emit("init"),!0===this.option("hideScrollbar")&&(()=>{if(!W)return;const t=document.body;if(t.classList.contains("hide-scrollbar"))return;const e=window.innerWidth-document.documentElement.getBoundingClientRect().width,i=t.currentStyle||window.getComputedStyle(t),n=parseFloat(i.marginRight);document.documentElement.style.setProperty("--fancybox-scrollbar-compensate",`${e}px`),n&&t.style.setProperty("--fancybox-body-margin",`${n}px`),t.classList.add("hide-scrollbar")})(),this.initLayout();const t=()=>{this.initCarousel(this.userSlides),this.state=Z.Ready,this.attachEvents(),this.emit("ready"),setTimeout((()=>{this.container&&this.container.setAttribute("aria-hidden","false")}),16)};this.option("Fullscreen.autoStart")&&this.fsAPI&&!this.fsAPI.isFullscreen()?this.fsAPI.request(this.container).then((()=>t())).catch((()=>t())):t()}initLayout(){var t,e;const i=this.option("parentEl")||document.body,s=n(this.localize(this.option("tpl.main")||""));s&&(s.setAttribute("id",`fancybox-${this.id}`),s.setAttribute("aria-label",this.localize("{{MODAL}}")),s.classList.toggle("is-compact",this.isCompact),S(s,this.option("mainClass")||""),this.container=s,this.footer=s.querySelector(".fancybox__footer"),i.appendChild(s),S(document.documentElement,"with-fancybox"),bt&&vt||(bt=document.createElement("span"),S(bt,"fancybox-focus-guard"),bt.setAttribute("tabindex","0"),bt.setAttribute("aria-hidden","true"),bt.setAttribute("aria-label","Focus guard"),vt=bt.cloneNode(),null===(t=s.parentElement)||void 0===t||t.insertBefore(bt,s),null===(e=s.parentElement)||void 0===e||e.append(vt)),this.option("animated")&&(S(s,"is-animated"),setTimeout((()=>{this.isClosing()||E(s,"is-animated")}),350)),this.emit("initLayout"))}initCarousel(t){const i=this.container;if(!i)return;const n=i.querySelector(".fancybox__carousel");if(!n)return;const s=this.carousel=new _(n,u({},{slides:t,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",((t,e,...i)=>{this.emit(`Carousel.${e}`,t,...i)})),s.on(["ready","change"],(()=>{var t;const e=this.getSlide();e&&(null===(t=e.panzoom)||void 0===t||t.updateControls()),this.manageCaption(e)})),s.on("removeSlide",((t,e)=>{e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0,e.state=void 0})),s.on("Panzoom.touchStart",(()=>{this.isCompact||this.endIdle()})),s.on("settle",(()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&this.checkFocus()})),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",((t,i)=>{const n=this.getSlide();if(n&&e(n.el))return;const s=this.container;if(s){const t=Math.abs(i.current.f),e=t<1?"":Math.max(.5,Math.min(1,1-t/i.contentRect.fitHeight*1.5));s.style.setProperty("--fancybox-ts",e?"0s":""),s.style.setProperty("--fancybox-opacity",e+"")}})),s.on("Panzoom.touchEnd",((t,i,n)=>{var s;const o=this.getSlide();if(o&&e(o.el))return;if(i.isMobile&&document.activeElement&&-1!==["TEXTAREA","INPUT"].indexOf(null===(s=document.activeElement)||void 0===s?void 0:s.nodeName))return;const a=Math.abs(i.dragOffset.y);"y"===i.lockedAxis&&(a>=200||a>=50&&i.dragOffset.time<300)&&(n&&n.cancelable&&n.preventDefault(),this.close(n,"f-throwOut"+(i.current.f<0?"Up":"Down")))}))),s.on(["change"],(t=>{var e;let i=null===(e=this.getSlide())||void 0===e?void 0:e.triggerEl;if(i){const e=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:t.page});i.dispatchEvent(e)}})),s.on(["refresh","change"],(t=>{const e=this.container;if(!e)return;for(const i of e.querySelectorAll("[data-fancybox-current-index]"))i.innerHTML=t.page+1;for(const i of e.querySelectorAll("[data-fancybox-count]"))i.innerHTML=t.pages.length;if(!t.isInfinite){for(const i of e.querySelectorAll("[data-fancybox-next]"))t.page<t.pages.length-1?(i.removeAttribute("disabled"),i.removeAttribute("tabindex")):(i.setAttribute("disabled",""),i.setAttribute("tabindex","-1"));for(const i of e.querySelectorAll("[data-fancybox-prev]"))t.page>0?(i.removeAttribute("disabled"),i.removeAttribute("tabindex")):(i.setAttribute("disabled",""),i.setAttribute("tabindex","-1"))}const i=this.getSlide();if(!i)return;let n=i.downloadSrc||"";n||"image"!==i.type||i.error||"string"!=typeof i.src||(n=i.src);for(const t of e.querySelectorAll("[data-fancybox-download]")){const e=i.downloadFilename;n?(t.removeAttribute("disabled"),t.removeAttribute("tabindex"),t.setAttribute("href",n),t.setAttribute("download",e||n),t.setAttribute("target","_blank")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"),t.removeAttribute("href"),t.removeAttribute("download"))}})),this.emit("initCarousel")}attachEvents(){const t=this.container;t&&(t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",this.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",this.onVisibilityChange,!1),document.addEventListener("mousemove",this.onMousemove),this.option("trapFocus")&&document.addEventListener("focus",this.onFocus,!0),window.addEventListener("resize",this.onResize))}detachEvents(){const t=this.container;t&&(document.removeEventListener("keydown",this.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",this.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",this.onMousemove),window.removeEventListener("resize",this.onResize),document.removeEventListener("visibilitychange",this.onVisibilityChange,!1),document.removeEventListener("focus",this.onFocus,!0))}onClick(t){var e,i;const{container:n,isCompact:s}=this;if(!n||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();const o=document.activeElement;if(gt()&&o&&n.contains(o))return;const a=t.composedPath()[0];if(a===(null===(e=this.carousel)||void 0===e?void 0:e.container))return;if(a.closest(".f-spinner")||a.closest("[data-fancybox-close]"))return t.preventDefault(),void this.close(t);if(a.closest("[data-fancybox-prev]"))return t.preventDefault(),void this.prev();if(a.closest("[data-fancybox-next]"))return t.preventDefault(),void this.next();if(s&&"image"===(null===(i=this.getSlide())||void 0===i?void 0:i.type))return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout((()=>{this.toggleIdle(),this.clickTimer=null}),350));if(this.emit("click",t),t.defaultPrevented)return;let r=!1;if(a.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;a.matches(X)||o.blur()}if(gt())return;r=this.option("contentClick")}else a.closest(".fancybox__carousel")&&!a.matches(X)&&(r=this.option("backdropClick"));"close"===r?(t.preventDefault(),this.close(t)):"next"===r?(t.preventDefault(),this.next()):"prev"===r&&(t.preventDefault(),this.prev())}onWheel(t){const e=this.option("wheel",t),i="slide"===e,n=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t})),s=Math.max(-1,Math.min(1,n)),o=Date.now();this.pwt&&o-this.pwt<300?i&&t.preventDefault():(this.pwt=o,this.emit("wheel",t),t.defaultPrevented||("close"===e?(t.preventDefault(),this.close(t)):"slide"===e&&(t.preventDefault(),this[s>0?"prev":"next"]())))}onKeydown(t){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const e=t.key,i=this.option("keyboard");if(!i||t.ctrlKey||t.altKey||t.shiftKey)return;const n=t.composedPath()[0],s=document.activeElement&&document.activeElement.classList,o=s&&s.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if("Escape"!==e&&!o&&x(n)){if(n.isContentEditable||-1!==["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName))return}this.emit("keydown",e,t);const a=i[e];"function"==typeof this[a]&&(t.preventDefault(),this[a]())}onResize(){const t=this.container;if(!t)return;const e=this.isCompact;t.classList.toggle("is-compact",e),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.emit("resize")}onFocus(t){this.isTopmost()&&this.checkFocus(t)}onMousemove(t){this.prevMouseMoveEvent=t,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){"visible"===document.visibilityState?this.checkFocus():this.endIdle()}manageCloseBtn(t){const e=this.optionFor(t,"closeButton")||!1;if("auto"===e){const t=this.plugins.Toolbar;if(t&&t.state===dt.Ready)return}if(!e)return;if(!t.contentEl||t.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const e=n(this.localize(i));t.closeBtnEl=t.contentEl.appendChild(e),t.el&&S(t.el,"has-close-btn")}}manageCaption(t){var e,i;const n="fancybox__caption",s="has-caption",o=this.container;if(!o)return;const a=this.isCompact||this.option("commonCaption"),r=!a;if(this.caption&&this.stop(this.caption),r&&this.caption&&(this.caption.remove(),this.caption=null),a&&!this.caption)for(const t of(null===(e=this.carousel)||void 0===e?void 0:e.slides)||[])t.captionEl&&(t.captionEl.remove(),t.captionEl=void 0,E(t.el,s),null===(i=t.el)||void 0===i||i.removeAttribute("aria-labelledby"));if(t||(t=this.getSlide()),!t||a&&!this.isCurrentSlide(t))return;const l=t.el;let c=this.optionFor(t,"caption","");if("string"!=typeof c||!c.length)return void(a&&this.caption&&this.animate(this.caption,"f-fadeOut",(()=>{var t;null===(t=this.caption)||void 0===t||t.remove(),this.caption=null})));let h=null;if(r){if(h=t.captionEl||null,l&&!h){const e=`fancybox__caption_${this.id}_${t.index}`;h=document.createElement("div"),S(h,n),h.setAttribute("id",e),t.captionEl=l.appendChild(h),S(l,s),l.setAttribute("aria-labelledby",e)}}else{if(h=this.caption,h||(h=o.querySelector("."+n)),!h){h=document.createElement("div"),h.dataset.fancyboxCaption="",S(h,n),h.innerHTML=c;(this.footer||o).prepend(h)}S(o,s),this.caption=h}h&&(h.innerHTML=c)}checkFocus(t){var e;const i=document.activeElement||null;i&&(null===(e=this.container)||void 0===e?void 0:e.contains(i))||this.focus(t)}focus(t){var e;if(this.ignoreFocusChange)return;const i=document.activeElement||null,n=(null==t?void 0:t.target)||null,s=this.container,o=this.getSlide();if(!s||!(null===(e=this.carousel)||void 0===e?void 0:e.viewport))return;if(!t&&i&&s.contains(i))return;const a=o&&o.state===V.Ready?o.el:null;if(!a||a.contains(i)||s===i)return;t&&t.cancelable&&t.preventDefault(),this.ignoreFocusChange=!0;const r=Array.from(s.querySelectorAll(X));let l=[],c=null;for(let t of r){const e=!t.offsetParent||t.closest('[aria-hidden="true"]'),i=a&&a.contains(t),n=!this.carousel.viewport.contains(t);t===s||(i||n)&&!e?(l.push(t),void 0!==t.dataset.origTabindex&&(t.tabIndex=parseFloat(t.dataset.origTabindex)),t.removeAttribute("data-orig-tabindex"),!t.hasAttribute("autoFocus")&&c||(c=t)):(t.dataset.origTabindex=void 0===t.dataset.origTabindex?t.getAttribute("tabindex")||void 0:t.dataset.origTabindex,t.tabIndex=-1)}let h=null;t?(!n||l.indexOf(n)<0)&&(h=c||s,l.length&&(i===vt?h=l[0]:this.lastFocus!==s&&i!==bt||(h=l[l.length-1]))):h=o&&"image"===o.type?s:c||s,h&&Y(h),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const t=this.carousel;t&&t.pages.length>1&&t.slideNext()}prev(){const t=this.carousel;t&&t.pages.length>1&&t.slidePrev()}jumpTo(...t){this.carousel&&this.carousel.slideTo(...t)}isTopmost(){var t;return(null===(t=xt.getInstance())||void 0===t?void 0:t.id)==this.id}animate(t=null,e="",i){if(!t||!e)return void(i&&i());this.stop(t);const n=s=>{s.target===t&&t.dataset.animationName&&(t.removeEventListener("animationend",n),delete t.dataset.animationName,i&&i(),E(t,e))};t.dataset.animationName=e,t.addEventListener("animationend",n),S(t,e)}stop(t){t&&t.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:t}))}setContent(t,e="",i=!0){if(this.isClosing())return;const s=t.el;if(!s)return;let o=null;if(x(e)?o=e:(o=n(e+""),x(o)||(o=document.createElement("div"),o.innerHTML=e+"")),["img","picture","iframe","video","audio"].includes(o.nodeName.toLowerCase())){const t=document.createElement("div");t.appendChild(o),o=t}x(o)&&t.filter&&!t.error&&(o=o.querySelector(t.filter)),o&&x(o)?(S(o,"fancybox__content"),t.id&&o.setAttribute("id",t.id),"none"!==o.style.display&&"none"!==getComputedStyle(o).getPropertyValue("display")||(o.style.display=t.display||this.option("defaultDisplay")||"flex"),s.classList.add(`has-${t.error?"error":t.type||"unknown"}`),s.prepend(o),t.contentEl=o,i&&this.revealContent(t),this.manageCloseBtn(t),this.manageCaption(t)):this.setError(t,"{{ELEMENT_NOT_FOUND}}")}revealContent(t,e){const i=t.el,n=t.contentEl;i&&n&&(this.emit("reveal",t),this.hideLoading(t),t.state=V.Opening,(e=this.isOpeningSlide(t)?void 0===e?this.optionFor(t,"showClass"):e:"f-fadeIn")?this.animate(n,e,(()=>{this.done(t)})):this.done(t))}done(t){this.isClosing()||(t.state=V.Ready,this.emit("done",t),S(t.el,"is-done"),this.isCurrentSlide(t)&&this.option("autoFocus")&&queueMicrotask((()=>{this.option("autoFocus")&&(this.option("autoFocus")?this.focus():this.checkFocus())})),this.isOpeningSlide(t)&&!this.isCompact&&this.option("idle")&&this.setIdle())}isCurrentSlide(t){const e=this.getSlide();return!(!t||!e)&&e.index===t.index}isOpeningSlide(t){var e,i;return null===(null===(e=this.carousel)||void 0===e?void 0:e.prevPage)&&t.index===(null===(i=this.getSlide())||void 0===i?void 0:i.index)}showLoading(t){t.state=V.Loading;const e=t.el;if(!e)return;S(e,"is-loading"),this.emit("loading",t),t.spinnerEl||setTimeout((()=>{if(!this.isClosing()&&!t.spinnerEl&&t.state===V.Loading){let i=n(w);t.spinnerEl=i,e.prepend(i),this.animate(i,"f-fadeIn")}}),250)}hideLoading(t){const e=t.el;if(!e)return;const i=t.spinnerEl;this.isClosing()?null==i||i.remove():(E(e,"is-loading"),i&&this.animate(i,"f-fadeOut",(()=>{i.remove()})),t.state===V.Loading&&(this.emit("loaded",t),t.state=V.Ready))}setError(t,e){if(this.isClosing())return;this.emit("error"),t.error=e,this.hideLoading(t),this.clearContent(t);const i=document.createElement("div");i.classList.add("fancybox-error"),i.innerHTML=this.localize(e||"<p>{{ERROR}}</p>"),this.setContent(t,i)}clearContent(t){var e;null===(e=this.carousel)||void 0===e||e.emit("removeSlide",t),t.contentEl&&(t.contentEl.remove(),t.contentEl=void 0),t.closeBtnEl&&(t.closeBtnEl.remove(),t.closeBtnEl=void 0);const i=t.el;i&&(E(i,"is-loading"),E(i,"has-error"),E(i,"has-unknown"),E(i,`has-${t.type||"unknown"}`))}getSlide(){var t;const e=this.carousel;return(null===(t=null==e?void 0:e.pages[null==e?void 0:e.page])||void 0===t?void 0:t.slides[0])||void 0}close(t,e){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,t),i.defaultPrevented)return;t&&t.cancelable&&(t.preventDefault(),t.stopPropagation());const n=this.fsAPI,s=()=>{this.proceedClose(t,e)};n&&n.isFullscreen()?Promise.resolve(n.exit()).then((()=>s())):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(t=!1){const e=()=>{this.clearIdle(),this.idle=!0,S(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(t)e();else{const t=this.option("idle");t&&(this.idleTimer=setTimeout(e,t))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,E(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){const t=this.fsAPI;t&&(t.isFullscreen()?t.exit():this.container&&t.request(this.container))}isClosing(){return[Z.Closing,Z.CustomClosing,Z.Destroy].includes(this.state)}proceedClose(t,e){var i;this.state=Z.Closing,this.clearIdle(),this.detachEvents();const n=this.container,s=this.carousel,o=this.getSlide(),a=o&&this.option("placeFocusBack")?o.triggerEl||this.option("trigger"):null;if(a&&(N(a)?Y(a):a.focus()),n&&(S(n,"is-closing"),n.setAttribute("aria-hidden","true"),this.option("animated")&&S(n,"is-animated"),n.style.pointerEvents="none"),s){s.clearTransitions(),null===(i=s.panzoom)||void 0===i||i.destroy();for(const t of s.slides){t.state=V.Closing,this.hideLoading(t);const e=t.contentEl;e&&this.stop(e);const i=null==t?void 0:t.panzoom;i&&(i.stop(),i.detachEvents(),i.detachObserver()),this.isCurrentSlide(t)||s.emit("removeSlide",t)}}this.emit("close",t),this.state!==Z.CustomClosing?(void 0===e&&o&&(e=this.optionFor(o,"hideClass")),e&&o?(this.animate(o.contentEl,e,(()=>{s&&s.emit("removeSlide",o)})),setTimeout((()=>{this.destroy()}),500)):this.destroy()):setTimeout((()=>{this.destroy()}),500)}destroy(){var t;if(this.state===Z.Destroy)return;this.state=Z.Destroy,null===(t=this.carousel)||void 0===t||t.destroy();const e=this.container;e&&e.remove(),yt.delete(this.id);const i=xt.getInstance();i?i.focus():(bt&&(bt.remove(),bt=null),vt&&(vt.remove(),vt=null),E(document.documentElement,"with-fancybox"),(()=>{if(!W)return;const t=document,e=t.body;e.classList.remove("hide-scrollbar"),e.style.setProperty("--fancybox-body-margin",""),t.documentElement.style.setProperty("--fancybox-scrollbar-compensate","")})(),this.emit("destroy"))}static bind(t,e,i){if(!W)return;let n,s="",o={};if(void 0===t?n=document.body:"string"==typeof t?(n=document.body,s=t,"object"==typeof e&&(o=e||{})):(n=t,"string"==typeof e&&(s=e),"object"==typeof i&&(o=i||{})),!n||!x(n))return;s=s||"[data-fancybox]";const a=xt.openers.get(n)||new Map;a.set(s,o),xt.openers.set(n,a),1===a.size&&n.addEventListener("click",xt.fromEvent)}static unbind(t,e){let i,n="";if("string"==typeof t?(i=document.body,n=t):(i=t,"string"==typeof e&&(n=e)),!i)return;const s=xt.openers.get(i);s&&n&&s.delete(n),n&&s||(xt.openers.delete(i),i.removeEventListener("click",xt.fromEvent))}static destroy(){let t;for(;t=xt.getInstance();)t.destroy();for(const t of xt.openers.keys())t.removeEventListener("click",xt.fromEvent);xt.openers=new Map}static fromEvent(t){if(t.defaultPrevented)return;if(t.button&&0!==t.button)return;if(t.ctrlKey||t.metaKey||t.shiftKey)return;let e=t.composedPath()[0];const i=e.closest("[data-fancybox-trigger]");if(i){const t=i.dataset.fancyboxTrigger||"",n=document.querySelectorAll(`[data-fancybox="${t}"]`),s=parseInt(i.dataset.fancyboxIndex||"",10)||0;e=n[s]||e}if(!(e&&e instanceof Element))return;let n,s,o,a;if([...xt.openers].reverse().find((([t,i])=>!(!t.contains(e)||![...i].reverse().find((([i,r])=>{let l=e.closest(i);return!!l&&(n=t,s=i,o=l,a=r,!0)}))))),!n||!s||!o)return;a=a||{},t.preventDefault(),e=o;let r=[],l=u({},q,a);l.event=t,l.trigger=e,l.delegate=i;const c=l.groupAll,h=l.groupAttr,d=h&&e?e.getAttribute(`${h}`):"";if((!e||d||c)&&(r=[].slice.call(n.querySelectorAll(s))),e&&!c&&(r=d?r.filter((t=>t.getAttribute(`${h}`)===d)):[e]),!r.length)return;const p=xt.getInstance();return p&&p.options.trigger&&r.indexOf(p.options.trigger)>-1?void 0:(e&&(l.startIndex=r.indexOf(e)),xt.fromNodes(r,l))}static fromSelector(t,e){let i=null,n="";if("string"==typeof t?(i=document.body,n=t):t instanceof HTMLElement&&"string"==typeof e&&(i=t,n=e),!i||!n)return!1;const s=xt.openers.get(i);if(!s)return!1;const o=s.get(n);return!!o&&xt.fromNodes(Array.from(i.querySelectorAll(n)),o)}static fromNodes(t,e){e=u({},q,e);const i=[];for(const n of t){const t=n.dataset||{},s=t.src||n.getAttribute("href")||n.getAttribute("currentSrc")||n.getAttribute("src")||void 0;let o;const a=e.delegate;let r;a&&i.length===e.startIndex&&(o=a instanceof HTMLImageElement?a:a.querySelector("img:not([aria-hidden])")),o||(o=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),o&&(r=o.currentSrc||o.src||void 0,!r&&o.dataset&&(r=o.dataset.lazySrc||o.dataset.src||void 0));const l={src:s,triggerEl:n,thumbEl:o,thumbElSrc:r,thumbSrc:r};for(const e in t)"fancybox"!==e&&(l[e]=t[e]+"");i.push(l)}return new xt(i,e)}static getInstance(t){if(t)return yt.get(t);return Array.from(yt.values()).reverse().find((t=>!t.isClosing()&&t))||null}static getSlide(){var t;return(null===(t=xt.getInstance())||void 0===t?void 0:t.getSlide())||null}static show(t=[],e={}){return new xt(t,e)}static next(){const t=xt.getInstance();t&&t.next()}static prev(){const t=xt.getInstance();t&&t.prev()}static close(t=!0,...e){if(t)for(const t of yt.values())t.close(...e);else{const t=xt.getInstance();t&&t.close(...e)}}}Object.defineProperty(xt,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.15"}),Object.defineProperty(xt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:q}),Object.defineProperty(xt,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:mt}),Object.defineProperty(xt,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/base-component.js":
/*!**********************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/base-component.js ***!
  \**********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*!
  * Bootstrap base-component.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(/*! ./dom/data */ "./node_modules/bootstrap/js/dist/dom/data.js"), __webpack_require__(/*! ./util/index */ "./node_modules/bootstrap/js/dist/util/index.js"), __webpack_require__(/*! ./dom/event-handler */ "./node_modules/bootstrap/js/dist/dom/event-handler.js"), __webpack_require__(/*! ./util/config */ "./node_modules/bootstrap/js/dist/util/config.js")) :
  0;
})(this, (function (Data, index, EventHandler, Config) { 'use strict';

  const _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };

  const Data__default = /*#__PURE__*/_interopDefaultLegacy(Data);
  const EventHandler__default = /*#__PURE__*/_interopDefaultLegacy(EventHandler);
  const Config__default = /*#__PURE__*/_interopDefaultLegacy(Config);

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): base-component.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * Constants
   */

  const VERSION = '5.2.3';
  /**
   * Class definition
   */

  class BaseComponent extends Config__default.default {
    constructor(element, config) {
      super();
      element = index.getElement(element);

      if (!element) {
        return;
      }

      this._element = element;
      this._config = this._getConfig(config);
      Data__default.default.set(this._element, this.constructor.DATA_KEY, this);
    } // Public


    dispose() {
      Data__default.default.remove(this._element, this.constructor.DATA_KEY);
      EventHandler__default.default.off(this._element, this.constructor.EVENT_KEY);

      for (const propertyName of Object.getOwnPropertyNames(this)) {
        this[propertyName] = null;
      }
    }

    _queueCallback(callback, element, isAnimated = true) {
      index.executeAfterTransition(callback, element, isAnimated);
    }

    _getConfig(config) {
      config = this._mergeConfigObj(config, this._element);
      config = this._configAfterMerge(config);

      this._typeCheckConfig(config);

      return config;
    } // Static


    static getInstance(element) {
      return Data__default.default.get(index.getElement(element), this.DATA_KEY);
    }

    static getOrCreateInstance(element, config = {}) {
      return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null);
    }

    static get VERSION() {
      return VERSION;
    }

    static get DATA_KEY() {
      return `bs.${this.NAME}`;
    }

    static get EVENT_KEY() {
      return `.${this.DATA_KEY}`;
    }

    static eventName(name) {
      return `${name}${this.EVENT_KEY}`;
    }

  }

  return BaseComponent;

}));
//# sourceMappingURL=base-component.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/button.js":
/*!**************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/button.js ***!
  \**************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*!
  * Bootstrap button.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(/*! ./util/index */ "./node_modules/bootstrap/js/dist/util/index.js"), __webpack_require__(/*! ./dom/event-handler */ "./node_modules/bootstrap/js/dist/dom/event-handler.js"), __webpack_require__(/*! ./base-component */ "./node_modules/bootstrap/js/dist/base-component.js")) :
  0;
})(this, (function (index, EventHandler, BaseComponent) { 'use strict';

  const _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };

  const EventHandler__default = /*#__PURE__*/_interopDefaultLegacy(EventHandler);
  const BaseComponent__default = /*#__PURE__*/_interopDefaultLegacy(BaseComponent);

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): button.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * Constants
   */

  const NAME = 'button';
  const DATA_KEY = 'bs.button';
  const EVENT_KEY = `.${DATA_KEY}`;
  const DATA_API_KEY = '.data-api';
  const CLASS_NAME_ACTIVE = 'active';
  const SELECTOR_DATA_TOGGLE = '[data-bs-toggle="button"]';
  const EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`;
  /**
   * Class definition
   */

  class Button extends BaseComponent__default.default {
    // Getters
    static get NAME() {
      return NAME;
    } // Public


    toggle() {
      // Toggle class and sync the `aria-pressed` attribute with the return value of the `.toggle()` method
      this._element.setAttribute('aria-pressed', this._element.classList.toggle(CLASS_NAME_ACTIVE));
    } // Static


    static jQueryInterface(config) {
      return this.each(function () {
        const data = Button.getOrCreateInstance(this);

        if (config === 'toggle') {
          data[config]();
        }
      });
    }

  }
  /**
   * Data API implementation
   */


  EventHandler__default.default.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, event => {
    event.preventDefault();
    const button = event.target.closest(SELECTOR_DATA_TOGGLE);
    const data = Button.getOrCreateInstance(button);
    data.toggle();
  });
  /**
   * jQuery
   */

  index.defineJQueryPlugin(Button);

  return Button;

}));
//# sourceMappingURL=button.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/carousel.js":
/*!****************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/carousel.js ***!
  \****************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*!
  * Bootstrap carousel.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(/*! ./util/index */ "./node_modules/bootstrap/js/dist/util/index.js"), __webpack_require__(/*! ./dom/event-handler */ "./node_modules/bootstrap/js/dist/dom/event-handler.js"), __webpack_require__(/*! ./dom/manipulator */ "./node_modules/bootstrap/js/dist/dom/manipulator.js"), __webpack_require__(/*! ./dom/selector-engine */ "./node_modules/bootstrap/js/dist/dom/selector-engine.js"), __webpack_require__(/*! ./util/swipe */ "./node_modules/bootstrap/js/dist/util/swipe.js"), __webpack_require__(/*! ./base-component */ "./node_modules/bootstrap/js/dist/base-component.js")) :
  0;
})(this, (function (index, EventHandler, Manipulator, SelectorEngine, Swipe, BaseComponent) { 'use strict';

  const _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };

  const EventHandler__default = /*#__PURE__*/_interopDefaultLegacy(EventHandler);
  const Manipulator__default = /*#__PURE__*/_interopDefaultLegacy(Manipulator);
  const SelectorEngine__default = /*#__PURE__*/_interopDefaultLegacy(SelectorEngine);
  const Swipe__default = /*#__PURE__*/_interopDefaultLegacy(Swipe);
  const BaseComponent__default = /*#__PURE__*/_interopDefaultLegacy(BaseComponent);

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): carousel.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * Constants
   */

  const NAME = 'carousel';
  const DATA_KEY = 'bs.carousel';
  const EVENT_KEY = `.${DATA_KEY}`;
  const DATA_API_KEY = '.data-api';
  const ARROW_LEFT_KEY = 'ArrowLeft';
  const ARROW_RIGHT_KEY = 'ArrowRight';
  const TOUCHEVENT_COMPAT_WAIT = 500; // Time for mouse compat events to fire after touch

  const ORDER_NEXT = 'next';
  const ORDER_PREV = 'prev';
  const DIRECTION_LEFT = 'left';
  const DIRECTION_RIGHT = 'right';
  const EVENT_SLIDE = `slide${EVENT_KEY}`;
  const EVENT_SLID = `slid${EVENT_KEY}`;
  const EVENT_KEYDOWN = `keydown${EVENT_KEY}`;
  const EVENT_MOUSEENTER = `mouseenter${EVENT_KEY}`;
  const EVENT_MOUSELEAVE = `mouseleave${EVENT_KEY}`;
  const EVENT_DRAG_START = `dragstart${EVENT_KEY}`;
  const EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`;
  const EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`;
  const CLASS_NAME_CAROUSEL = 'carousel';
  const CLASS_NAME_ACTIVE = 'active';
  const CLASS_NAME_SLIDE = 'slide';
  const CLASS_NAME_END = 'carousel-item-end';
  const CLASS_NAME_START = 'carousel-item-start';
  const CLASS_NAME_NEXT = 'carousel-item-next';
  const CLASS_NAME_PREV = 'carousel-item-prev';
  const SELECTOR_ACTIVE = '.active';
  const SELECTOR_ITEM = '.carousel-item';
  const SELECTOR_ACTIVE_ITEM = SELECTOR_ACTIVE + SELECTOR_ITEM;
  const SELECTOR_ITEM_IMG = '.carousel-item img';
  const SELECTOR_INDICATORS = '.carousel-indicators';
  const SELECTOR_DATA_SLIDE = '[data-bs-slide], [data-bs-slide-to]';
  const SELECTOR_DATA_RIDE = '[data-bs-ride="carousel"]';
  const KEY_TO_DIRECTION = {
    [ARROW_LEFT_KEY]: DIRECTION_RIGHT,
    [ARROW_RIGHT_KEY]: DIRECTION_LEFT
  };
  const Default = {
    interval: 5000,
    keyboard: true,
    pause: 'hover',
    ride: false,
    touch: true,
    wrap: true
  };
  const DefaultType = {
    interval: '(number|boolean)',
    // TODO:v6 remove boolean support
    keyboard: 'boolean',
    pause: '(string|boolean)',
    ride: '(boolean|string)',
    touch: 'boolean',
    wrap: 'boolean'
  };
  /**
   * Class definition
   */

  class Carousel extends BaseComponent__default.default {
    constructor(element, config) {
      super(element, config);
      this._interval = null;
      this._activeElement = null;
      this._isSliding = false;
      this.touchTimeout = null;
      this._swipeHelper = null;
      this._indicatorsElement = SelectorEngine__default.default.findOne(SELECTOR_INDICATORS, this._element);

      this._addEventListeners();

      if (this._config.ride === CLASS_NAME_CAROUSEL) {
        this.cycle();
      }
    } // Getters


    static get Default() {
      return Default;
    }

    static get DefaultType() {
      return DefaultType;
    }

    static get NAME() {
      return NAME;
    } // Public


    next() {
      this._slide(ORDER_NEXT);
    }

    nextWhenVisible() {
      // FIXME TODO use `document.visibilityState`
      // Don't call next when the page isn't visible
      // or the carousel or its parent isn't visible
      if (!document.hidden && index.isVisible(this._element)) {
        this.next();
      }
    }

    prev() {
      this._slide(ORDER_PREV);
    }

    pause() {
      if (this._isSliding) {
        index.triggerTransitionEnd(this._element);
      }

      this._clearInterval();
    }

    cycle() {
      this._clearInterval();

      this._updateInterval();

      this._interval = setInterval(() => this.nextWhenVisible(), this._config.interval);
    }

    _maybeEnableCycle() {
      if (!this._config.ride) {
        return;
      }

      if (this._isSliding) {
        EventHandler__default.default.one(this._element, EVENT_SLID, () => this.cycle());
        return;
      }

      this.cycle();
    }

    to(index) {
      const items = this._getItems();

      if (index > items.length - 1 || index < 0) {
        return;
      }

      if (this._isSliding) {
        EventHandler__default.default.one(this._element, EVENT_SLID, () => this.to(index));
        return;
      }

      const activeIndex = this._getItemIndex(this._getActive());

      if (activeIndex === index) {
        return;
      }

      const order = index > activeIndex ? ORDER_NEXT : ORDER_PREV;

      this._slide(order, items[index]);
    }

    dispose() {
      if (this._swipeHelper) {
        this._swipeHelper.dispose();
      }

      super.dispose();
    } // Private


    _configAfterMerge(config) {
      config.defaultInterval = config.interval;
      return config;
    }

    _addEventListeners() {
      if (this._config.keyboard) {
        EventHandler__default.default.on(this._element, EVENT_KEYDOWN, event => this._keydown(event));
      }

      if (this._config.pause === 'hover') {
        EventHandler__default.default.on(this._element, EVENT_MOUSEENTER, () => this.pause());
        EventHandler__default.default.on(this._element, EVENT_MOUSELEAVE, () => this._maybeEnableCycle());
      }

      if (this._config.touch && Swipe__default.default.isSupported()) {
        this._addTouchEventListeners();
      }
    }

    _addTouchEventListeners() {
      for (const img of SelectorEngine__default.default.find(SELECTOR_ITEM_IMG, this._element)) {
        EventHandler__default.default.on(img, EVENT_DRAG_START, event => event.preventDefault());
      }

      const endCallBack = () => {
        if (this._config.pause !== 'hover') {
          return;
        } // If it's a touch-enabled device, mouseenter/leave are fired as
        // part of the mouse compatibility events on first tap - the carousel
        // would stop cycling until user tapped out of it;
        // here, we listen for touchend, explicitly pause the carousel
        // (as if it's the second time we tap on it, mouseenter compat event
        // is NOT fired) and after a timeout (to allow for mouse compatibility
        // events to fire) we explicitly restart cycling


        this.pause();

        if (this.touchTimeout) {
          clearTimeout(this.touchTimeout);
        }

        this.touchTimeout = setTimeout(() => this._maybeEnableCycle(), TOUCHEVENT_COMPAT_WAIT + this._config.interval);
      };

      const swipeConfig = {
        leftCallback: () => this._slide(this._directionToOrder(DIRECTION_LEFT)),
        rightCallback: () => this._slide(this._directionToOrder(DIRECTION_RIGHT)),
        endCallback: endCallBack
      };
      this._swipeHelper = new Swipe__default.default(this._element, swipeConfig);
    }

    _keydown(event) {
      if (/input|textarea/i.test(event.target.tagName)) {
        return;
      }

      const direction = KEY_TO_DIRECTION[event.key];

      if (direction) {
        event.preventDefault();

        this._slide(this._directionToOrder(direction));
      }
    }

    _getItemIndex(element) {
      return this._getItems().indexOf(element);
    }

    _setActiveIndicatorElement(index) {
      if (!this._indicatorsElement) {
        return;
      }

      const activeIndicator = SelectorEngine__default.default.findOne(SELECTOR_ACTIVE, this._indicatorsElement);
      activeIndicator.classList.remove(CLASS_NAME_ACTIVE);
      activeIndicator.removeAttribute('aria-current');
      const newActiveIndicator = SelectorEngine__default.default.findOne(`[data-bs-slide-to="${index}"]`, this._indicatorsElement);

      if (newActiveIndicator) {
        newActiveIndicator.classList.add(CLASS_NAME_ACTIVE);
        newActiveIndicator.setAttribute('aria-current', 'true');
      }
    }

    _updateInterval() {
      const element = this._activeElement || this._getActive();

      if (!element) {
        return;
      }

      const elementInterval = Number.parseInt(element.getAttribute('data-bs-interval'), 10);
      this._config.interval = elementInterval || this._config.defaultInterval;
    }

    _slide(order, element = null) {
      if (this._isSliding) {
        return;
      }

      const activeElement = this._getActive();

      const isNext = order === ORDER_NEXT;
      const nextElement = element || index.getNextActiveElement(this._getItems(), activeElement, isNext, this._config.wrap);

      if (nextElement === activeElement) {
        return;
      }

      const nextElementIndex = this._getItemIndex(nextElement);

      const triggerEvent = eventName => {
        return EventHandler__default.default.trigger(this._element, eventName, {
          relatedTarget: nextElement,
          direction: this._orderToDirection(order),
          from: this._getItemIndex(activeElement),
          to: nextElementIndex
        });
      };

      const slideEvent = triggerEvent(EVENT_SLIDE);

      if (slideEvent.defaultPrevented) {
        return;
      }

      if (!activeElement || !nextElement) {
        // Some weirdness is happening, so we bail
        // todo: change tests that use empty divs to avoid this check
        return;
      }

      const isCycling = Boolean(this._interval);
      this.pause();
      this._isSliding = true;

      this._setActiveIndicatorElement(nextElementIndex);

      this._activeElement = nextElement;
      const directionalClassName = isNext ? CLASS_NAME_START : CLASS_NAME_END;
      const orderClassName = isNext ? CLASS_NAME_NEXT : CLASS_NAME_PREV;
      nextElement.classList.add(orderClassName);
      index.reflow(nextElement);
      activeElement.classList.add(directionalClassName);
      nextElement.classList.add(directionalClassName);

      const completeCallBack = () => {
        nextElement.classList.remove(directionalClassName, orderClassName);
        nextElement.classList.add(CLASS_NAME_ACTIVE);
        activeElement.classList.remove(CLASS_NAME_ACTIVE, orderClassName, directionalClassName);
        this._isSliding = false;
        triggerEvent(EVENT_SLID);
      };

      this._queueCallback(completeCallBack, activeElement, this._isAnimated());

      if (isCycling) {
        this.cycle();
      }
    }

    _isAnimated() {
      return this._element.classList.contains(CLASS_NAME_SLIDE);
    }

    _getActive() {
      return SelectorEngine__default.default.findOne(SELECTOR_ACTIVE_ITEM, this._element);
    }

    _getItems() {
      return SelectorEngine__default.default.find(SELECTOR_ITEM, this._element);
    }

    _clearInterval() {
      if (this._interval) {
        clearInterval(this._interval);
        this._interval = null;
      }
    }

    _directionToOrder(direction) {
      if (index.isRTL()) {
        return direction === DIRECTION_LEFT ? ORDER_PREV : ORDER_NEXT;
      }

      return direction === DIRECTION_LEFT ? ORDER_NEXT : ORDER_PREV;
    }

    _orderToDirection(order) {
      if (index.isRTL()) {
        return order === ORDER_PREV ? DIRECTION_LEFT : DIRECTION_RIGHT;
      }

      return order === ORDER_PREV ? DIRECTION_RIGHT : DIRECTION_LEFT;
    } // Static


    static jQueryInterface(config) {
      return this.each(function () {
        const data = Carousel.getOrCreateInstance(this, config);

        if (typeof config === 'number') {
          data.to(config);
          return;
        }

        if (typeof config === 'string') {
          if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {
            throw new TypeError(`No method named "${config}"`);
          }

          data[config]();
        }
      });
    }

  }
  /**
   * Data API implementation
   */


  EventHandler__default.default.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_SLIDE, function (event) {
    const target = index.getElementFromSelector(this);

    if (!target || !target.classList.contains(CLASS_NAME_CAROUSEL)) {
      return;
    }

    event.preventDefault();
    const carousel = Carousel.getOrCreateInstance(target);
    const slideIndex = this.getAttribute('data-bs-slide-to');

    if (slideIndex) {
      carousel.to(slideIndex);

      carousel._maybeEnableCycle();

      return;
    }

    if (Manipulator__default.default.getDataAttribute(this, 'slide') === 'next') {
      carousel.next();

      carousel._maybeEnableCycle();

      return;
    }

    carousel.prev();

    carousel._maybeEnableCycle();
  });
  EventHandler__default.default.on(window, EVENT_LOAD_DATA_API, () => {
    const carousels = SelectorEngine__default.default.find(SELECTOR_DATA_RIDE);

    for (const carousel of carousels) {
      Carousel.getOrCreateInstance(carousel);
    }
  });
  /**
   * jQuery
   */

  index.defineJQueryPlugin(Carousel);

  return Carousel;

}));
//# sourceMappingURL=carousel.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/collapse.js":
/*!****************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/collapse.js ***!
  \****************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*!
  * Bootstrap collapse.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(/*! ./util/index */ "./node_modules/bootstrap/js/dist/util/index.js"), __webpack_require__(/*! ./dom/event-handler */ "./node_modules/bootstrap/js/dist/dom/event-handler.js"), __webpack_require__(/*! ./dom/selector-engine */ "./node_modules/bootstrap/js/dist/dom/selector-engine.js"), __webpack_require__(/*! ./base-component */ "./node_modules/bootstrap/js/dist/base-component.js")) :
  0;
})(this, (function (index, EventHandler, SelectorEngine, BaseComponent) { 'use strict';

  const _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };

  const EventHandler__default = /*#__PURE__*/_interopDefaultLegacy(EventHandler);
  const SelectorEngine__default = /*#__PURE__*/_interopDefaultLegacy(SelectorEngine);
  const BaseComponent__default = /*#__PURE__*/_interopDefaultLegacy(BaseComponent);

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): collapse.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * Constants
   */

  const NAME = 'collapse';
  const DATA_KEY = 'bs.collapse';
  const EVENT_KEY = `.${DATA_KEY}`;
  const DATA_API_KEY = '.data-api';
  const EVENT_SHOW = `show${EVENT_KEY}`;
  const EVENT_SHOWN = `shown${EVENT_KEY}`;
  const EVENT_HIDE = `hide${EVENT_KEY}`;
  const EVENT_HIDDEN = `hidden${EVENT_KEY}`;
  const EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`;
  const CLASS_NAME_SHOW = 'show';
  const CLASS_NAME_COLLAPSE = 'collapse';
  const CLASS_NAME_COLLAPSING = 'collapsing';
  const CLASS_NAME_COLLAPSED = 'collapsed';
  const CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`;
  const CLASS_NAME_HORIZONTAL = 'collapse-horizontal';
  const WIDTH = 'width';
  const HEIGHT = 'height';
  const SELECTOR_ACTIVES = '.collapse.show, .collapse.collapsing';
  const SELECTOR_DATA_TOGGLE = '[data-bs-toggle="collapse"]';
  const Default = {
    parent: null,
    toggle: true
  };
  const DefaultType = {
    parent: '(null|element)',
    toggle: 'boolean'
  };
  /**
   * Class definition
   */

  class Collapse extends BaseComponent__default.default {
    constructor(element, config) {
      super(element, config);
      this._isTransitioning = false;
      this._triggerArray = [];
      const toggleList = SelectorEngine__default.default.find(SELECTOR_DATA_TOGGLE);

      for (const elem of toggleList) {
        const selector = index.getSelectorFromElement(elem);
        const filterElement = SelectorEngine__default.default.find(selector).filter(foundElement => foundElement === this._element);

        if (selector !== null && filterElement.length) {
          this._triggerArray.push(elem);
        }
      }

      this._initializeChildren();

      if (!this._config.parent) {
        this._addAriaAndCollapsedClass(this._triggerArray, this._isShown());
      }

      if (this._config.toggle) {
        this.toggle();
      }
    } // Getters


    static get Default() {
      return Default;
    }

    static get DefaultType() {
      return DefaultType;
    }

    static get NAME() {
      return NAME;
    } // Public


    toggle() {
      if (this._isShown()) {
        this.hide();
      } else {
        this.show();
      }
    }

    show() {
      if (this._isTransitioning || this._isShown()) {
        return;
      }

      let activeChildren = []; // find active children

      if (this._config.parent) {
        activeChildren = this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(element => element !== this._element).map(element => Collapse.getOrCreateInstance(element, {
          toggle: false
        }));
      }

      if (activeChildren.length && activeChildren[0]._isTransitioning) {
        return;
      }

      const startEvent = EventHandler__default.default.trigger(this._element, EVENT_SHOW);

      if (startEvent.defaultPrevented) {
        return;
      }

      for (const activeInstance of activeChildren) {
        activeInstance.hide();
      }

      const dimension = this._getDimension();

      this._element.classList.remove(CLASS_NAME_COLLAPSE);

      this._element.classList.add(CLASS_NAME_COLLAPSING);

      this._element.style[dimension] = 0;

      this._addAriaAndCollapsedClass(this._triggerArray, true);

      this._isTransitioning = true;

      const complete = () => {
        this._isTransitioning = false;

        this._element.classList.remove(CLASS_NAME_COLLAPSING);

        this._element.classList.add(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW);

        this._element.style[dimension] = '';
        EventHandler__default.default.trigger(this._element, EVENT_SHOWN);
      };

      const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1);
      const scrollSize = `scroll${capitalizedDimension}`;

      this._queueCallback(complete, this._element, true);

      this._element.style[dimension] = `${this._element[scrollSize]}px`;
    }

    hide() {
      if (this._isTransitioning || !this._isShown()) {
        return;
      }

      const startEvent = EventHandler__default.default.trigger(this._element, EVENT_HIDE);

      if (startEvent.defaultPrevented) {
        return;
      }

      const dimension = this._getDimension();

      this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`;
      index.reflow(this._element);

      this._element.classList.add(CLASS_NAME_COLLAPSING);

      this._element.classList.remove(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW);

      for (const trigger of this._triggerArray) {
        const element = index.getElementFromSelector(trigger);

        if (element && !this._isShown(element)) {
          this._addAriaAndCollapsedClass([trigger], false);
        }
      }

      this._isTransitioning = true;

      const complete = () => {
        this._isTransitioning = false;

        this._element.classList.remove(CLASS_NAME_COLLAPSING);

        this._element.classList.add(CLASS_NAME_COLLAPSE);

        EventHandler__default.default.trigger(this._element, EVENT_HIDDEN);
      };

      this._element.style[dimension] = '';

      this._queueCallback(complete, this._element, true);
    }

    _isShown(element = this._element) {
      return element.classList.contains(CLASS_NAME_SHOW);
    } // Private


    _configAfterMerge(config) {
      config.toggle = Boolean(config.toggle); // Coerce string values

      config.parent = index.getElement(config.parent);
      return config;
    }

    _getDimension() {
      return this._element.classList.contains(CLASS_NAME_HORIZONTAL) ? WIDTH : HEIGHT;
    }

    _initializeChildren() {
      if (!this._config.parent) {
        return;
      }

      const children = this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE);

      for (const element of children) {
        const selected = index.getElementFromSelector(element);

        if (selected) {
          this._addAriaAndCollapsedClass([element], this._isShown(selected));
        }
      }
    }

    _getFirstLevelChildren(selector) {
      const children = SelectorEngine__default.default.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent); // remove children if greater depth

      return SelectorEngine__default.default.find(selector, this._config.parent).filter(element => !children.includes(element));
    }

    _addAriaAndCollapsedClass(triggerArray, isOpen) {
      if (!triggerArray.length) {
        return;
      }

      for (const element of triggerArray) {
        element.classList.toggle(CLASS_NAME_COLLAPSED, !isOpen);
        element.setAttribute('aria-expanded', isOpen);
      }
    } // Static


    static jQueryInterface(config) {
      const _config = {};

      if (typeof config === 'string' && /show|hide/.test(config)) {
        _config.toggle = false;
      }

      return this.each(function () {
        const data = Collapse.getOrCreateInstance(this, _config);

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError(`No method named "${config}"`);
          }

          data[config]();
        }
      });
    }

  }
  /**
   * Data API implementation
   */


  EventHandler__default.default.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {
    // preventDefault only for <a> elements (which change the URL) not inside the collapsible element
    if (event.target.tagName === 'A' || event.delegateTarget && event.delegateTarget.tagName === 'A') {
      event.preventDefault();
    }

    const selector = index.getSelectorFromElement(this);
    const selectorElements = SelectorEngine__default.default.find(selector);

    for (const element of selectorElements) {
      Collapse.getOrCreateInstance(element, {
        toggle: false
      }).toggle();
    }
  });
  /**
   * jQuery
   */

  index.defineJQueryPlugin(Collapse);

  return Collapse;

}));
//# sourceMappingURL=collapse.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/dom/data.js":
/*!****************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/dom/data.js ***!
  \****************************************************/
/***/ (function(module) {

/*!
  * Bootstrap data.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory() :
  0;
})(this, (function () { 'use strict';

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): dom/data.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */

  /**
   * Constants
   */
  const elementMap = new Map();
  const data = {
    set(element, key, instance) {
      if (!elementMap.has(element)) {
        elementMap.set(element, new Map());
      }

      const instanceMap = elementMap.get(element); // make it clear we only want one instance per element
      // can be removed later when multiple key/instances are fine to be used

      if (!instanceMap.has(key) && instanceMap.size !== 0) {
        // eslint-disable-next-line no-console
        console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`);
        return;
      }

      instanceMap.set(key, instance);
    },

    get(element, key) {
      if (elementMap.has(element)) {
        return elementMap.get(element).get(key) || null;
      }

      return null;
    },

    remove(element, key) {
      if (!elementMap.has(element)) {
        return;
      }

      const instanceMap = elementMap.get(element);
      instanceMap.delete(key); // free up element references if there are no instances left for an element

      if (instanceMap.size === 0) {
        elementMap.delete(element);
      }
    }

  };

  return data;

}));
//# sourceMappingURL=data.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/dom/event-handler.js":
/*!*************************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/dom/event-handler.js ***!
  \*************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*!
  * Bootstrap event-handler.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(/*! ../util/index */ "./node_modules/bootstrap/js/dist/util/index.js")) :
  0;
})(this, (function (index) { 'use strict';

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): dom/event-handler.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * Constants
   */

  const namespaceRegex = /[^.]*(?=\..*)\.|.*/;
  const stripNameRegex = /\..*/;
  const stripUidRegex = /::\d+$/;
  const eventRegistry = {}; // Events storage

  let uidEvent = 1;
  const customEvents = {
    mouseenter: 'mouseover',
    mouseleave: 'mouseout'
  };
  const nativeEvents = new Set(['click', 'dblclick', 'mouseup', 'mousedown', 'contextmenu', 'mousewheel', 'DOMMouseScroll', 'mouseover', 'mouseout', 'mousemove', 'selectstart', 'selectend', 'keydown', 'keypress', 'keyup', 'orientationchange', 'touchstart', 'touchmove', 'touchend', 'touchcancel', 'pointerdown', 'pointermove', 'pointerup', 'pointerleave', 'pointercancel', 'gesturestart', 'gesturechange', 'gestureend', 'focus', 'blur', 'change', 'reset', 'select', 'submit', 'focusin', 'focusout', 'load', 'unload', 'beforeunload', 'resize', 'move', 'DOMContentLoaded', 'readystatechange', 'error', 'abort', 'scroll']);
  /**
   * Private methods
   */

  function makeEventUid(element, uid) {
    return uid && `${uid}::${uidEvent++}` || element.uidEvent || uidEvent++;
  }

  function getElementEvents(element) {
    const uid = makeEventUid(element);
    element.uidEvent = uid;
    eventRegistry[uid] = eventRegistry[uid] || {};
    return eventRegistry[uid];
  }

  function bootstrapHandler(element, fn) {
    return function handler(event) {
      hydrateObj(event, {
        delegateTarget: element
      });

      if (handler.oneOff) {
        EventHandler.off(element, event.type, fn);
      }

      return fn.apply(element, [event]);
    };
  }

  function bootstrapDelegationHandler(element, selector, fn) {
    return function handler(event) {
      const domElements = element.querySelectorAll(selector);

      for (let {
        target
      } = event; target && target !== this; target = target.parentNode) {
        for (const domElement of domElements) {
          if (domElement !== target) {
            continue;
          }

          hydrateObj(event, {
            delegateTarget: target
          });

          if (handler.oneOff) {
            EventHandler.off(element, event.type, selector, fn);
          }

          return fn.apply(target, [event]);
        }
      }
    };
  }

  function findHandler(events, callable, delegationSelector = null) {
    return Object.values(events).find(event => event.callable === callable && event.delegationSelector === delegationSelector);
  }

  function normalizeParameters(originalTypeEvent, handler, delegationFunction) {
    const isDelegated = typeof handler === 'string'; // todo: tooltip passes `false` instead of selector, so we need to check

    const callable = isDelegated ? delegationFunction : handler || delegationFunction;
    let typeEvent = getTypeEvent(originalTypeEvent);

    if (!nativeEvents.has(typeEvent)) {
      typeEvent = originalTypeEvent;
    }

    return [isDelegated, callable, typeEvent];
  }

  function addHandler(element, originalTypeEvent, handler, delegationFunction, oneOff) {
    if (typeof originalTypeEvent !== 'string' || !element) {
      return;
    }

    let [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction); // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position
    // this prevents the handler from being dispatched the same way as mouseover or mouseout does

    if (originalTypeEvent in customEvents) {
      const wrapFunction = fn => {
        return function (event) {
          if (!event.relatedTarget || event.relatedTarget !== event.delegateTarget && !event.delegateTarget.contains(event.relatedTarget)) {
            return fn.call(this, event);
          }
        };
      };

      callable = wrapFunction(callable);
    }

    const events = getElementEvents(element);
    const handlers = events[typeEvent] || (events[typeEvent] = {});
    const previousFunction = findHandler(handlers, callable, isDelegated ? handler : null);

    if (previousFunction) {
      previousFunction.oneOff = previousFunction.oneOff && oneOff;
      return;
    }

    const uid = makeEventUid(callable, originalTypeEvent.replace(namespaceRegex, ''));
    const fn = isDelegated ? bootstrapDelegationHandler(element, handler, callable) : bootstrapHandler(element, callable);
    fn.delegationSelector = isDelegated ? handler : null;
    fn.callable = callable;
    fn.oneOff = oneOff;
    fn.uidEvent = uid;
    handlers[uid] = fn;
    element.addEventListener(typeEvent, fn, isDelegated);
  }

  function removeHandler(element, events, typeEvent, handler, delegationSelector) {
    const fn = findHandler(events[typeEvent], handler, delegationSelector);

    if (!fn) {
      return;
    }

    element.removeEventListener(typeEvent, fn, Boolean(delegationSelector));
    delete events[typeEvent][fn.uidEvent];
  }

  function removeNamespacedHandlers(element, events, typeEvent, namespace) {
    const storeElementEvent = events[typeEvent] || {};

    for (const handlerKey of Object.keys(storeElementEvent)) {
      if (handlerKey.includes(namespace)) {
        const event = storeElementEvent[handlerKey];
        removeHandler(element, events, typeEvent, event.callable, event.delegationSelector);
      }
    }
  }

  function getTypeEvent(event) {
    // allow to get the native events from namespaced events ('click.bs.button' --> 'click')
    event = event.replace(stripNameRegex, '');
    return customEvents[event] || event;
  }

  const EventHandler = {
    on(element, event, handler, delegationFunction) {
      addHandler(element, event, handler, delegationFunction, false);
    },

    one(element, event, handler, delegationFunction) {
      addHandler(element, event, handler, delegationFunction, true);
    },

    off(element, originalTypeEvent, handler, delegationFunction) {
      if (typeof originalTypeEvent !== 'string' || !element) {
        return;
      }

      const [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction);
      const inNamespace = typeEvent !== originalTypeEvent;
      const events = getElementEvents(element);
      const storeElementEvent = events[typeEvent] || {};
      const isNamespace = originalTypeEvent.startsWith('.');

      if (typeof callable !== 'undefined') {
        // Simplest case: handler is passed, remove that listener ONLY.
        if (!Object.keys(storeElementEvent).length) {
          return;
        }

        removeHandler(element, events, typeEvent, callable, isDelegated ? handler : null);
        return;
      }

      if (isNamespace) {
        for (const elementEvent of Object.keys(events)) {
          removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1));
        }
      }

      for (const keyHandlers of Object.keys(storeElementEvent)) {
        const handlerKey = keyHandlers.replace(stripUidRegex, '');

        if (!inNamespace || originalTypeEvent.includes(handlerKey)) {
          const event = storeElementEvent[keyHandlers];
          removeHandler(element, events, typeEvent, event.callable, event.delegationSelector);
        }
      }
    },

    trigger(element, event, args) {
      if (typeof event !== 'string' || !element) {
        return null;
      }

      const $ = index.getjQuery();
      const typeEvent = getTypeEvent(event);
      const inNamespace = event !== typeEvent;
      let jQueryEvent = null;
      let bubbles = true;
      let nativeDispatch = true;
      let defaultPrevented = false;

      if (inNamespace && $) {
        jQueryEvent = $.Event(event, args);
        $(element).trigger(jQueryEvent);
        bubbles = !jQueryEvent.isPropagationStopped();
        nativeDispatch = !jQueryEvent.isImmediatePropagationStopped();
        defaultPrevented = jQueryEvent.isDefaultPrevented();
      }

      let evt = new Event(event, {
        bubbles,
        cancelable: true
      });
      evt = hydrateObj(evt, args);

      if (defaultPrevented) {
        evt.preventDefault();
      }

      if (nativeDispatch) {
        element.dispatchEvent(evt);
      }

      if (evt.defaultPrevented && jQueryEvent) {
        jQueryEvent.preventDefault();
      }

      return evt;
    }

  };

  function hydrateObj(obj, meta) {
    for (const [key, value] of Object.entries(meta || {})) {
      try {
        obj[key] = value;
      } catch (_unused) {
        Object.defineProperty(obj, key, {
          configurable: true,

          get() {
            return value;
          }

        });
      }
    }

    return obj;
  }

  return EventHandler;

}));
//# sourceMappingURL=event-handler.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/dom/manipulator.js":
/*!***********************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/dom/manipulator.js ***!
  \***********************************************************/
/***/ (function(module) {

/*!
  * Bootstrap manipulator.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory() :
  0;
})(this, (function () { 'use strict';

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): dom/manipulator.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  function normalizeData(value) {
    if (value === 'true') {
      return true;
    }

    if (value === 'false') {
      return false;
    }

    if (value === Number(value).toString()) {
      return Number(value);
    }

    if (value === '' || value === 'null') {
      return null;
    }

    if (typeof value !== 'string') {
      return value;
    }

    try {
      return JSON.parse(decodeURIComponent(value));
    } catch (_unused) {
      return value;
    }
  }

  function normalizeDataKey(key) {
    return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`);
  }

  const Manipulator = {
    setDataAttribute(element, key, value) {
      element.setAttribute(`data-bs-${normalizeDataKey(key)}`, value);
    },

    removeDataAttribute(element, key) {
      element.removeAttribute(`data-bs-${normalizeDataKey(key)}`);
    },

    getDataAttributes(element) {
      if (!element) {
        return {};
      }

      const attributes = {};
      const bsKeys = Object.keys(element.dataset).filter(key => key.startsWith('bs') && !key.startsWith('bsConfig'));

      for (const key of bsKeys) {
        let pureKey = key.replace(/^bs/, '');
        pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length);
        attributes[pureKey] = normalizeData(element.dataset[key]);
      }

      return attributes;
    },

    getDataAttribute(element, key) {
      return normalizeData(element.getAttribute(`data-bs-${normalizeDataKey(key)}`));
    }

  };

  return Manipulator;

}));
//# sourceMappingURL=manipulator.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/dom/selector-engine.js":
/*!***************************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/dom/selector-engine.js ***!
  \***************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*!
  * Bootstrap selector-engine.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(/*! ../util/index */ "./node_modules/bootstrap/js/dist/util/index.js")) :
  0;
})(this, (function (index) { 'use strict';

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): dom/selector-engine.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * Constants
   */

  const SelectorEngine = {
    find(selector, element = document.documentElement) {
      return [].concat(...Element.prototype.querySelectorAll.call(element, selector));
    },

    findOne(selector, element = document.documentElement) {
      return Element.prototype.querySelector.call(element, selector);
    },

    children(element, selector) {
      return [].concat(...element.children).filter(child => child.matches(selector));
    },

    parents(element, selector) {
      const parents = [];
      let ancestor = element.parentNode.closest(selector);

      while (ancestor) {
        parents.push(ancestor);
        ancestor = ancestor.parentNode.closest(selector);
      }

      return parents;
    },

    prev(element, selector) {
      let previous = element.previousElementSibling;

      while (previous) {
        if (previous.matches(selector)) {
          return [previous];
        }

        previous = previous.previousElementSibling;
      }

      return [];
    },

    // TODO: this is now unused; remove later along with prev()
    next(element, selector) {
      let next = element.nextElementSibling;

      while (next) {
        if (next.matches(selector)) {
          return [next];
        }

        next = next.nextElementSibling;
      }

      return [];
    },

    focusableChildren(element) {
      const focusables = ['a', 'button', 'input', 'textarea', 'select', 'details', '[tabindex]', '[contenteditable="true"]'].map(selector => `${selector}:not([tabindex^="-"])`).join(',');
      return this.find(focusables, element).filter(el => !index.isDisabled(el) && index.isVisible(el));
    }

  };

  return SelectorEngine;

}));
//# sourceMappingURL=selector-engine.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/util/config.js":
/*!*******************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/util/config.js ***!
  \*******************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*!
  * Bootstrap config.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(/*! ./index */ "./node_modules/bootstrap/js/dist/util/index.js"), __webpack_require__(/*! ../dom/manipulator */ "./node_modules/bootstrap/js/dist/dom/manipulator.js")) :
  0;
})(this, (function (index, Manipulator) { 'use strict';

  const _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };

  const Manipulator__default = /*#__PURE__*/_interopDefaultLegacy(Manipulator);

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): util/config.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * Class definition
   */

  class Config {
    // Getters
    static get Default() {
      return {};
    }

    static get DefaultType() {
      return {};
    }

    static get NAME() {
      throw new Error('You have to implement the static method "NAME", for each component!');
    }

    _getConfig(config) {
      config = this._mergeConfigObj(config);
      config = this._configAfterMerge(config);

      this._typeCheckConfig(config);

      return config;
    }

    _configAfterMerge(config) {
      return config;
    }

    _mergeConfigObj(config, element) {
      const jsonConfig = index.isElement(element) ? Manipulator__default.default.getDataAttribute(element, 'config') : {}; // try to parse

      return { ...this.constructor.Default,
        ...(typeof jsonConfig === 'object' ? jsonConfig : {}),
        ...(index.isElement(element) ? Manipulator__default.default.getDataAttributes(element) : {}),
        ...(typeof config === 'object' ? config : {})
      };
    }

    _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {
      for (const property of Object.keys(configTypes)) {
        const expectedTypes = configTypes[property];
        const value = config[property];
        const valueType = index.isElement(value) ? 'element' : index.toType(value);

        if (!new RegExp(expectedTypes).test(valueType)) {
          throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${property}" provided type "${valueType}" but expected type "${expectedTypes}".`);
        }
      }
    }

  }

  return Config;

}));
//# sourceMappingURL=config.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/util/index.js":
/*!******************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/util/index.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports) {

/*!
  * Bootstrap index.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? factory(exports) :
  0;
})(this, (function (exports) { 'use strict';

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): util/index.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  const MAX_UID = 1000000;
  const MILLISECONDS_MULTIPLIER = 1000;
  const TRANSITION_END = 'transitionend'; // Shout-out Angus Croll (https://goo.gl/pxwQGp)

  const toType = object => {
    if (object === null || object === undefined) {
      return `${object}`;
    }

    return Object.prototype.toString.call(object).match(/\s([a-z]+)/i)[1].toLowerCase();
  };
  /**
   * Public Util API
   */


  const getUID = prefix => {
    do {
      prefix += Math.floor(Math.random() * MAX_UID);
    } while (document.getElementById(prefix));

    return prefix;
  };

  const getSelector = element => {
    let selector = element.getAttribute('data-bs-target');

    if (!selector || selector === '#') {
      let hrefAttribute = element.getAttribute('href'); // The only valid content that could double as a selector are IDs or classes,
      // so everything starting with `#` or `.`. If a "real" URL is used as the selector,
      // `document.querySelector` will rightfully complain it is invalid.
      // See https://github.com/twbs/bootstrap/issues/32273

      if (!hrefAttribute || !hrefAttribute.includes('#') && !hrefAttribute.startsWith('.')) {
        return null;
      } // Just in case some CMS puts out a full URL with the anchor appended


      if (hrefAttribute.includes('#') && !hrefAttribute.startsWith('#')) {
        hrefAttribute = `#${hrefAttribute.split('#')[1]}`;
      }

      selector = hrefAttribute && hrefAttribute !== '#' ? hrefAttribute.trim() : null;
    }

    return selector;
  };

  const getSelectorFromElement = element => {
    const selector = getSelector(element);

    if (selector) {
      return document.querySelector(selector) ? selector : null;
    }

    return null;
  };

  const getElementFromSelector = element => {
    const selector = getSelector(element);
    return selector ? document.querySelector(selector) : null;
  };

  const getTransitionDurationFromElement = element => {
    if (!element) {
      return 0;
    } // Get transition-duration of the element


    let {
      transitionDuration,
      transitionDelay
    } = window.getComputedStyle(element);
    const floatTransitionDuration = Number.parseFloat(transitionDuration);
    const floatTransitionDelay = Number.parseFloat(transitionDelay); // Return 0 if element or transition duration is not found

    if (!floatTransitionDuration && !floatTransitionDelay) {
      return 0;
    } // If multiple durations are defined, take the first


    transitionDuration = transitionDuration.split(',')[0];
    transitionDelay = transitionDelay.split(',')[0];
    return (Number.parseFloat(transitionDuration) + Number.parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER;
  };

  const triggerTransitionEnd = element => {
    element.dispatchEvent(new Event(TRANSITION_END));
  };

  const isElement = object => {
    if (!object || typeof object !== 'object') {
      return false;
    }

    if (typeof object.jquery !== 'undefined') {
      object = object[0];
    }

    return typeof object.nodeType !== 'undefined';
  };

  const getElement = object => {
    // it's a jQuery object or a node element
    if (isElement(object)) {
      return object.jquery ? object[0] : object;
    }

    if (typeof object === 'string' && object.length > 0) {
      return document.querySelector(object);
    }

    return null;
  };

  const isVisible = element => {
    if (!isElement(element) || element.getClientRects().length === 0) {
      return false;
    }

    const elementIsVisible = getComputedStyle(element).getPropertyValue('visibility') === 'visible'; // Handle `details` element as its content may falsie appear visible when it is closed

    const closedDetails = element.closest('details:not([open])');

    if (!closedDetails) {
      return elementIsVisible;
    }

    if (closedDetails !== element) {
      const summary = element.closest('summary');

      if (summary && summary.parentNode !== closedDetails) {
        return false;
      }

      if (summary === null) {
        return false;
      }
    }

    return elementIsVisible;
  };

  const isDisabled = element => {
    if (!element || element.nodeType !== Node.ELEMENT_NODE) {
      return true;
    }

    if (element.classList.contains('disabled')) {
      return true;
    }

    if (typeof element.disabled !== 'undefined') {
      return element.disabled;
    }

    return element.hasAttribute('disabled') && element.getAttribute('disabled') !== 'false';
  };

  const findShadowRoot = element => {
    if (!document.documentElement.attachShadow) {
      return null;
    } // Can find the shadow root otherwise it'll return the document


    if (typeof element.getRootNode === 'function') {
      const root = element.getRootNode();
      return root instanceof ShadowRoot ? root : null;
    }

    if (element instanceof ShadowRoot) {
      return element;
    } // when we don't find a shadow root


    if (!element.parentNode) {
      return null;
    }

    return findShadowRoot(element.parentNode);
  };

  const noop = () => {};
  /**
   * Trick to restart an element's animation
   *
   * @param {HTMLElement} element
   * @return void
   *
   * @see https://www.charistheo.io/blog/2021/02/restart-a-css-animation-with-javascript/#restarting-a-css-animation
   */


  const reflow = element => {
    element.offsetHeight; // eslint-disable-line no-unused-expressions
  };

  const getjQuery = () => {
    if (window.jQuery && !document.body.hasAttribute('data-bs-no-jquery')) {
      return window.jQuery;
    }

    return null;
  };

  const DOMContentLoadedCallbacks = [];

  const onDOMContentLoaded = callback => {
    if (document.readyState === 'loading') {
      // add listener on the first call when the document is in loading state
      if (!DOMContentLoadedCallbacks.length) {
        document.addEventListener('DOMContentLoaded', () => {
          for (const callback of DOMContentLoadedCallbacks) {
            callback();
          }
        });
      }

      DOMContentLoadedCallbacks.push(callback);
    } else {
      callback();
    }
  };

  const isRTL = () => document.documentElement.dir === 'rtl';

  const defineJQueryPlugin = plugin => {
    onDOMContentLoaded(() => {
      const $ = getjQuery();
      /* istanbul ignore if */

      if ($) {
        const name = plugin.NAME;
        const JQUERY_NO_CONFLICT = $.fn[name];
        $.fn[name] = plugin.jQueryInterface;
        $.fn[name].Constructor = plugin;

        $.fn[name].noConflict = () => {
          $.fn[name] = JQUERY_NO_CONFLICT;
          return plugin.jQueryInterface;
        };
      }
    });
  };

  const execute = callback => {
    if (typeof callback === 'function') {
      callback();
    }
  };

  const executeAfterTransition = (callback, transitionElement, waitForTransition = true) => {
    if (!waitForTransition) {
      execute(callback);
      return;
    }

    const durationPadding = 5;
    const emulatedDuration = getTransitionDurationFromElement(transitionElement) + durationPadding;
    let called = false;

    const handler = ({
      target
    }) => {
      if (target !== transitionElement) {
        return;
      }

      called = true;
      transitionElement.removeEventListener(TRANSITION_END, handler);
      execute(callback);
    };

    transitionElement.addEventListener(TRANSITION_END, handler);
    setTimeout(() => {
      if (!called) {
        triggerTransitionEnd(transitionElement);
      }
    }, emulatedDuration);
  };
  /**
   * Return the previous/next element of a list.
   *
   * @param {array} list    The list of elements
   * @param activeElement   The active element
   * @param shouldGetNext   Choose to get next or previous element
   * @param isCycleAllowed
   * @return {Element|elem} The proper element
   */


  const getNextActiveElement = (list, activeElement, shouldGetNext, isCycleAllowed) => {
    const listLength = list.length;
    let index = list.indexOf(activeElement); // if the element does not exist in the list return an element
    // depending on the direction and if cycle is allowed

    if (index === -1) {
      return !shouldGetNext && isCycleAllowed ? list[listLength - 1] : list[0];
    }

    index += shouldGetNext ? 1 : -1;

    if (isCycleAllowed) {
      index = (index + listLength) % listLength;
    }

    return list[Math.max(0, Math.min(index, listLength - 1))];
  };

  exports.defineJQueryPlugin = defineJQueryPlugin;
  exports.execute = execute;
  exports.executeAfterTransition = executeAfterTransition;
  exports.findShadowRoot = findShadowRoot;
  exports.getElement = getElement;
  exports.getElementFromSelector = getElementFromSelector;
  exports.getNextActiveElement = getNextActiveElement;
  exports.getSelectorFromElement = getSelectorFromElement;
  exports.getTransitionDurationFromElement = getTransitionDurationFromElement;
  exports.getUID = getUID;
  exports.getjQuery = getjQuery;
  exports.isDisabled = isDisabled;
  exports.isElement = isElement;
  exports.isRTL = isRTL;
  exports.isVisible = isVisible;
  exports.noop = noop;
  exports.onDOMContentLoaded = onDOMContentLoaded;
  exports.reflow = reflow;
  exports.toType = toType;
  exports.triggerTransitionEnd = triggerTransitionEnd;

  Object.defineProperties(exports, { __esModule: { value: true }, [Symbol.toStringTag]: { value: 'Module' } });

}));
//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/bootstrap/js/dist/util/swipe.js":
/*!******************************************************!*\
  !*** ./node_modules/bootstrap/js/dist/util/swipe.js ***!
  \******************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

/*!
  * Bootstrap swipe.js v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(/*! ./config */ "./node_modules/bootstrap/js/dist/util/config.js"), __webpack_require__(/*! ../dom/event-handler */ "./node_modules/bootstrap/js/dist/dom/event-handler.js"), __webpack_require__(/*! ./index */ "./node_modules/bootstrap/js/dist/util/index.js")) :
  0;
})(this, (function (Config, EventHandler, index) { 'use strict';

  const _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };

  const Config__default = /*#__PURE__*/_interopDefaultLegacy(Config);
  const EventHandler__default = /*#__PURE__*/_interopDefaultLegacy(EventHandler);

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v5.2.3): util/swipe.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * Constants
   */

  const NAME = 'swipe';
  const EVENT_KEY = '.bs.swipe';
  const EVENT_TOUCHSTART = `touchstart${EVENT_KEY}`;
  const EVENT_TOUCHMOVE = `touchmove${EVENT_KEY}`;
  const EVENT_TOUCHEND = `touchend${EVENT_KEY}`;
  const EVENT_POINTERDOWN = `pointerdown${EVENT_KEY}`;
  const EVENT_POINTERUP = `pointerup${EVENT_KEY}`;
  const POINTER_TYPE_TOUCH = 'touch';
  const POINTER_TYPE_PEN = 'pen';
  const CLASS_NAME_POINTER_EVENT = 'pointer-event';
  const SWIPE_THRESHOLD = 40;
  const Default = {
    endCallback: null,
    leftCallback: null,
    rightCallback: null
  };
  const DefaultType = {
    endCallback: '(function|null)',
    leftCallback: '(function|null)',
    rightCallback: '(function|null)'
  };
  /**
   * Class definition
   */

  class Swipe extends Config__default.default {
    constructor(element, config) {
      super();
      this._element = element;

      if (!element || !Swipe.isSupported()) {
        return;
      }

      this._config = this._getConfig(config);
      this._deltaX = 0;
      this._supportPointerEvents = Boolean(window.PointerEvent);

      this._initEvents();
    } // Getters


    static get Default() {
      return Default;
    }

    static get DefaultType() {
      return DefaultType;
    }

    static get NAME() {
      return NAME;
    } // Public


    dispose() {
      EventHandler__default.default.off(this._element, EVENT_KEY);
    } // Private


    _start(event) {
      if (!this._supportPointerEvents) {
        this._deltaX = event.touches[0].clientX;
        return;
      }

      if (this._eventIsPointerPenTouch(event)) {
        this._deltaX = event.clientX;
      }
    }

    _end(event) {
      if (this._eventIsPointerPenTouch(event)) {
        this._deltaX = event.clientX - this._deltaX;
      }

      this._handleSwipe();

      index.execute(this._config.endCallback);
    }

    _move(event) {
      this._deltaX = event.touches && event.touches.length > 1 ? 0 : event.touches[0].clientX - this._deltaX;
    }

    _handleSwipe() {
      const absDeltaX = Math.abs(this._deltaX);

      if (absDeltaX <= SWIPE_THRESHOLD) {
        return;
      }

      const direction = absDeltaX / this._deltaX;
      this._deltaX = 0;

      if (!direction) {
        return;
      }

      index.execute(direction > 0 ? this._config.rightCallback : this._config.leftCallback);
    }

    _initEvents() {
      if (this._supportPointerEvents) {
        EventHandler__default.default.on(this._element, EVENT_POINTERDOWN, event => this._start(event));
        EventHandler__default.default.on(this._element, EVENT_POINTERUP, event => this._end(event));

        this._element.classList.add(CLASS_NAME_POINTER_EVENT);
      } else {
        EventHandler__default.default.on(this._element, EVENT_TOUCHSTART, event => this._start(event));
        EventHandler__default.default.on(this._element, EVENT_TOUCHMOVE, event => this._move(event));
        EventHandler__default.default.on(this._element, EVENT_TOUCHEND, event => this._end(event));
      }
    }

    _eventIsPointerPenTouch(event) {
      return this._supportPointerEvents && (event.pointerType === POINTER_TYPE_PEN || event.pointerType === POINTER_TYPE_TOUCH);
    } // Static


    static isSupported() {
      return 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0;
    }

  }

  return Swipe;

}));
//# sourceMappingURL=swipe.js.map


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7O0FBR047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTs7O0FBR047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNOzs7QUFHTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLE1BQU07O0FBRXJHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNOzs7QUFHTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9EQUFvRCxPQUFPO0FBQzNEOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDO0FBQ0Q7Ozs7Ozs7Ozs7O0FDdGRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsS0FBNEQsNEJBQTRCLG1CQUFPLENBQUMsb0VBQWMsR0FBRyxtQkFBTyxDQUFDLGtGQUFxQixHQUFHLG1C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QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7QUMzUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxLQUE0RDtBQUM5RCxFQUFFLENBQzBHO0FBQzVHLENBQUMsdUJBQXVCOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEMsa0JBQWtCO0FBQzlEOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0Msc0JBQXNCO0FBQzVELEtBQUs7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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFHQUFxRzs7QUFFckc7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07OztBQUdOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNOzs7QUFHTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsYUFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSwwQkFBMEI7QUFDMUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLGNBQWMsY0FBYztBQUM1Qjs7O0FBR0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3Qzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUMsY0FBYyxhQUFhLDBCQUEwQixtQkFBbUI7O0FBRTdHLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7QUM5VkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxLQUE0RCw0QkFBNEIsbUJBQU8sQ0FBQyxpRUFBVSxHQUFHLG1CQUFPLENBQUMsbUZBQXNCLEdBQUcsbUJBQU8sQ0FBQywrREFBUztBQUNqSyxFQUFFLENBQ29KO0FBQ3RKLENBQUMsa0RBQWtEOztBQUVuRCwwRkFBMEY7O0FBRTFGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3Q0FBd0MsVUFBVTtBQUNsRCxzQ0FBc0MsVUFBVTtBQUNoRCxvQ0FBb0MsVUFBVTtBQUM5QywwQ0FBMEMsVUFBVTtBQUNwRCxzQ0FBc0MsVUFBVTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNOzs7QUFHTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNOzs7QUFHTjtBQUNBO0FBQ0EsTUFBTTs7O0FBR047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07OztBQUdOO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWdlLy4vbm9kZV9tb2R1bGVzL0BmYW5jeWFwcHMvdWkvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vc2FnZS8uL25vZGVfbW9kdWxlcy9ib290c3RyYXAvanMvZGlzdC9iYXNlLWNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9zYWdlLy4vbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9qcy9kaXN0L2J1dHRvbi5qcyIsIndlYnBhY2s6Ly9zYWdlLy4vbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9qcy9kaXN0L2Nhcm91c2VsLmpzIiwid2VicGFjazovL3NhZ2UvLi9ub2RlX21vZHVsZXMvYm9vdHN0cmFwL2pzL2Rpc3QvY29sbGFwc2UuanMiLCJ3ZWJwYWNrOi8vc2FnZS8uL25vZGVfbW9kdWxlcy9ib290c3RyYXAvanMvZGlzdC9kb20vZGF0YS5qcyIsIndlYnBhY2s6Ly9zYWdlLy4vbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9qcy9kaXN0L2RvbS9ldmVudC1oYW5kbGVyLmpzIiwid2VicGFjazovL3NhZ2UvLi9ub2RlX21vZHVsZXMvYm9vdHN0cmFwL2pzL2Rpc3QvZG9tL21hbmlwdWxhdG9yLmpzIiwid2VicGFjazovL3NhZ2UvLi9ub2RlX21vZHVsZXMvYm9vdHN0cmFwL2pzL2Rpc3QvZG9tL3NlbGVjdG9yLWVuZ2luZS5qcyIsIndlYnBhY2s6Ly9zYWdlLy4vbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9qcy9kaXN0L3V0aWwvY29uZmlnLmpzIiwid2VicGFjazovL3NhZ2UvLi9ub2RlX21vZHVsZXMvYm9vdHN0cmFwL2pzL2Rpc3QvdXRpbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9zYWdlLy4vbm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9qcy9kaXN0L3V0aWwvc3dpcGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdD0odCxlPTFlNCk9Pih0PXBhcnNlRmxvYXQodCtcIlwiKXx8MCxNYXRoLnJvdW5kKCh0K051bWJlci5FUFNJTE9OKSplKS9lKSxlPWZ1bmN0aW9uKHQpe2lmKCEodCYmdCBpbnN0YW5jZW9mIEVsZW1lbnQmJnQub2Zmc2V0UGFyZW50KSlyZXR1cm4hMTtjb25zdCBlPXQuc2Nyb2xsSGVpZ2h0PnQuY2xpZW50SGVpZ2h0LGk9d2luZG93LmdldENvbXB1dGVkU3R5bGUodCkub3ZlcmZsb3dZLG49LTEhPT1pLmluZGV4T2YoXCJoaWRkZW5cIikscz0tMSE9PWkuaW5kZXhPZihcInZpc2libGVcIik7cmV0dXJuIGUmJiFuJiYhc30saT1mdW5jdGlvbih0LG4pe3JldHVybiEoIXR8fHQ9PT1kb2N1bWVudC5ib2R5fHxuJiZ0PT09bikmJihlKHQpP3Q6aSh0LnBhcmVudEVsZW1lbnQsbikpfSxuPWZ1bmN0aW9uKHQpe3ZhciBlPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcodCxcInRleHQvaHRtbFwiKS5ib2R5O2lmKGUuY2hpbGRFbGVtZW50Q291bnQ+MSl7Zm9yKHZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5maXJzdENoaWxkOylpLmFwcGVuZENoaWxkKGUuZmlyc3RDaGlsZCk7cmV0dXJuIGl9cmV0dXJuIGUuZmlyc3RDaGlsZH0scz10PT5gJHt0fHxcIlwifWAuc3BsaXQoXCIgXCIpLmZpbHRlcigodD0+ISF0KSksbz0odCxlLGkpPT57cyhlKS5mb3JFYWNoKChlPT57dCYmdC5jbGFzc0xpc3QudG9nZ2xlKGUsaXx8ITEpfSkpfTtjbGFzcyBhe2NvbnN0cnVjdG9yKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicGFnZVhcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwYWdlWVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNsaWVudFhcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjbGllbnRZXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0aW1lXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibmF0aXZlUG9pbnRlclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSx0aGlzLm5hdGl2ZVBvaW50ZXI9dCx0aGlzLnBhZ2VYPXQucGFnZVgsdGhpcy5wYWdlWT10LnBhZ2VZLHRoaXMuY2xpZW50WD10LmNsaWVudFgsdGhpcy5jbGllbnRZPXQuY2xpZW50WSx0aGlzLmlkPXNlbGYuVG91Y2gmJnQgaW5zdGFuY2VvZiBUb3VjaD90LmlkZW50aWZpZXI6LTEsdGhpcy50aW1lPURhdGUubm93KCl9fWNvbnN0IHI9e3Bhc3NpdmU6ITF9O2NsYXNzIGx7Y29uc3RydWN0b3IodCx7c3RhcnQ6ZT0oKCk9PiEwKSxtb3ZlOmk9KCgpPT57fSksZW5kOm49KCgpPT57fSl9KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImVsZW1lbnRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzdGFydENhbGxiYWNrXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibW92ZUNhbGxiYWNrXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZW5kQ2FsbGJhY2tcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjdXJyZW50UG9pbnRlcnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInN0YXJ0UG9pbnRlcnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6W119KSx0aGlzLmVsZW1lbnQ9dCx0aGlzLnN0YXJ0Q2FsbGJhY2s9ZSx0aGlzLm1vdmVDYWxsYmFjaz1pLHRoaXMuZW5kQ2FsbGJhY2s9bjtmb3IoY29uc3QgdCBvZltcIm9uUG9pbnRlclN0YXJ0XCIsXCJvblRvdWNoU3RhcnRcIixcIm9uTW92ZVwiLFwib25Ub3VjaEVuZFwiLFwib25Qb2ludGVyRW5kXCIsXCJvbldpbmRvd0JsdXJcIl0pdGhpc1t0XT10aGlzW3RdLmJpbmQodGhpcyk7dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uUG9pbnRlclN0YXJ0LHIpLHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25Ub3VjaFN0YXJ0LHIpLHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vbk1vdmUsciksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMub25Ub3VjaEVuZCksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHRoaXMub25Ub3VjaEVuZCl9b25Qb2ludGVyU3RhcnQodCl7aWYoIXQuYnV0dG9uc3x8MCE9PXQuYnV0dG9uKXJldHVybjtjb25zdCBlPW5ldyBhKHQpO3RoaXMuY3VycmVudFBvaW50ZXJzLnNvbWUoKHQ9PnQuaWQ9PT1lLmlkKSl8fHRoaXMudHJpZ2dlclBvaW50ZXJTdGFydChlLHQpJiYod2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW92ZSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vblBvaW50ZXJFbmQpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMub25XaW5kb3dCbHVyKSl9b25Ub3VjaFN0YXJ0KHQpe2Zvcihjb25zdCBlIG9mIEFycmF5LmZyb20odC5jaGFuZ2VkVG91Y2hlc3x8W10pKXRoaXMudHJpZ2dlclBvaW50ZXJTdGFydChuZXcgYShlKSx0KTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLm9uV2luZG93Qmx1cil9b25Nb3ZlKHQpe2NvbnN0IGU9dGhpcy5jdXJyZW50UG9pbnRlcnMuc2xpY2UoKSxpPVwiY2hhbmdlZFRvdWNoZXNcImluIHQ/QXJyYXkuZnJvbSh0LmNoYW5nZWRUb3VjaGVzfHxbXSkubWFwKCh0PT5uZXcgYSh0KSkpOltuZXcgYSh0KV0sbj1bXTtmb3IoY29uc3QgdCBvZiBpKXtjb25zdCBlPXRoaXMuY3VycmVudFBvaW50ZXJzLmZpbmRJbmRleCgoZT0+ZS5pZD09PXQuaWQpKTtlPDB8fChuLnB1c2godCksdGhpcy5jdXJyZW50UG9pbnRlcnNbZV09dCl9bi5sZW5ndGgmJnRoaXMubW92ZUNhbGxiYWNrKHQsdGhpcy5jdXJyZW50UG9pbnRlcnMuc2xpY2UoKSxlKX1vblBvaW50ZXJFbmQodCl7dC5idXR0b25zPjAmJjAhPT10LmJ1dHRvbnx8KHRoaXMudHJpZ2dlclBvaW50ZXJFbmQodCxuZXcgYSh0KSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW92ZSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vblBvaW50ZXJFbmQpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMub25XaW5kb3dCbHVyKSl9b25Ub3VjaEVuZCh0KXtmb3IoY29uc3QgZSBvZiBBcnJheS5mcm9tKHQuY2hhbmdlZFRvdWNoZXN8fFtdKSl0aGlzLnRyaWdnZXJQb2ludGVyRW5kKHQsbmV3IGEoZSkpfXRyaWdnZXJQb2ludGVyU3RhcnQodCxlKXtyZXR1cm4hIXRoaXMuc3RhcnRDYWxsYmFjayhlLHQsdGhpcy5jdXJyZW50UG9pbnRlcnMuc2xpY2UoKSkmJih0aGlzLmN1cnJlbnRQb2ludGVycy5wdXNoKHQpLHRoaXMuc3RhcnRQb2ludGVycy5wdXNoKHQpLCEwKX10cmlnZ2VyUG9pbnRlckVuZCh0LGUpe2NvbnN0IGk9dGhpcy5jdXJyZW50UG9pbnRlcnMuZmluZEluZGV4KCh0PT50LmlkPT09ZS5pZCkpO2k8MHx8KHRoaXMuY3VycmVudFBvaW50ZXJzLnNwbGljZShpLDEpLHRoaXMuc3RhcnRQb2ludGVycy5zcGxpY2UoaSwxKSx0aGlzLmVuZENhbGxiYWNrKHQsZSx0aGlzLmN1cnJlbnRQb2ludGVycy5zbGljZSgpKSl9b25XaW5kb3dCbHVyKCl7dGhpcy5jbGVhcigpfWNsZWFyKCl7Zm9yKDt0aGlzLmN1cnJlbnRQb2ludGVycy5sZW5ndGg7KXtjb25zdCB0PXRoaXMuY3VycmVudFBvaW50ZXJzW3RoaXMuY3VycmVudFBvaW50ZXJzLmxlbmd0aC0xXTt0aGlzLmN1cnJlbnRQb2ludGVycy5zcGxpY2UodGhpcy5jdXJyZW50UG9pbnRlcnMubGVuZ3RoLTEsMSksdGhpcy5zdGFydFBvaW50ZXJzLnNwbGljZSh0aGlzLmN1cnJlbnRQb2ludGVycy5sZW5ndGgtMSwxKSx0aGlzLmVuZENhbGxiYWNrKG5ldyBFdmVudChcInRvdWNoZW5kXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxjbGllbnRYOnQuY2xpZW50WCxjbGllbnRZOnQuY2xpZW50WX0pLHQsdGhpcy5jdXJyZW50UG9pbnRlcnMuc2xpY2UoKSl9fXN0b3AoKXt0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Qb2ludGVyU3RhcnQsciksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQsciksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLm9uTW92ZSxyKSx0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kKSx0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsdGhpcy5vblRvdWNoRW5kKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3ZlKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm9uUG9pbnRlckVuZCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5vbldpbmRvd0JsdXIpfX1mdW5jdGlvbiBjKHQsZSl7cmV0dXJuIGU/TWF0aC5zcXJ0KE1hdGgucG93KGUuY2xpZW50WC10LmNsaWVudFgsMikrTWF0aC5wb3coZS5jbGllbnRZLXQuY2xpZW50WSwyKSk6MH1mdW5jdGlvbiBoKHQsZSl7cmV0dXJuIGU/e2NsaWVudFg6KHQuY2xpZW50WCtlLmNsaWVudFgpLzIsY2xpZW50WToodC5jbGllbnRZK2UuY2xpZW50WSkvMn06dH1jb25zdCBkPXQ9Plwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dCYmdC5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSx1PSh0LC4uLmUpPT57Y29uc3QgaT1lLmxlbmd0aDtmb3IobGV0IG49MDtuPGk7bisrKXtjb25zdCBpPWVbbl18fHt9O09iamVjdC5lbnRyaWVzKGkpLmZvckVhY2goKChbZSxpXSk9Pntjb25zdCBuPUFycmF5LmlzQXJyYXkoaSk/W106e307dFtlXXx8T2JqZWN0LmFzc2lnbih0LHtbZV06bn0pLGQoaSk/T2JqZWN0LmFzc2lnbih0W2VdLHUobixpKSk6QXJyYXkuaXNBcnJheShpKT9PYmplY3QuYXNzaWduKHQse1tlXTpbLi4uaV19KTpPYmplY3QuYXNzaWduKHQse1tlXTppfSl9KSl9cmV0dXJuIHR9LHA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zcGxpdChcIi5cIikucmVkdWNlKCgodCxlKT0+XCJvYmplY3RcIj09dHlwZW9mIHQ/dFtlXTp2b2lkIDApLGUpfTtjbGFzcyBme2NvbnN0cnVjdG9yKHQ9e30pe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwib3B0aW9uc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJldmVudHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bmV3IE1hcH0pLHRoaXMuc2V0T3B0aW9ucyh0KTtmb3IoY29uc3QgdCBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykpKXQuc3RhcnRzV2l0aChcIm9uXCIpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW3RdJiYodGhpc1t0XT10aGlzW3RdLmJpbmQodGhpcykpfXNldE9wdGlvbnModCl7dGhpcy5vcHRpb25zPXQ/dSh7fSx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzLHQpOnt9O2Zvcihjb25zdFt0LGVdb2YgT2JqZWN0LmVudHJpZXModGhpcy5vcHRpb24oXCJvblwiKXx8e30pKXRoaXMub24odCxlKX1vcHRpb24odCwuLi5lKXtsZXQgaT1wKHQsdGhpcy5vcHRpb25zKTtyZXR1cm4gaSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaSYmKGk9aS5jYWxsKHRoaXMsdGhpcywuLi5lKSksaX1vcHRpb25Gb3IodCxlLGksLi4ubil7bGV0IHM9cChlLHQpO3ZhciBvO1wic3RyaW5nXCIhPXR5cGVvZihvPXMpfHxpc05hTihvKXx8aXNOYU4ocGFyc2VGbG9hdChvKSl8fChzPXBhcnNlRmxvYXQocykpLFwidHJ1ZVwiPT09cyYmKHM9ITApLFwiZmFsc2VcIj09PXMmJihzPSExKSxzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBzJiYocz1zLmNhbGwodGhpcyx0aGlzLHQsLi4ubikpO2xldCBhPXAoZSx0aGlzLm9wdGlvbnMpO3JldHVybiBhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP3M9YS5jYWxsKHRoaXMsdGhpcyx0LC4uLm4scyk6dm9pZCAwPT09cyYmKHM9YSksdm9pZCAwPT09cz9pOnN9Y24odCl7Y29uc3QgZT10aGlzLm9wdGlvbnMuY2xhc3NlcztyZXR1cm4gZSYmZVt0XXx8XCJcIn1sb2NhbGl6ZSh0LGU9W10pe3Q9U3RyaW5nKHQpLnJlcGxhY2UoL1xce1xceyhcXHcrKS4/KFxcdyspP1xcfVxcfS9nLCgodCxlLGkpPT57bGV0IG49XCJcIjtyZXR1cm4gaT9uPXRoaXMub3B0aW9uKGAke2VbMF0rZS50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZygxKX0ubDEwbi4ke2l9YCk6ZSYmKG49dGhpcy5vcHRpb24oYGwxMG4uJHtlfWApKSxufHwobj10KSxufSkpO2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7aSsrKXQ9dC5zcGxpdChlW2ldWzBdKS5qb2luKGVbaV1bMV0pO3JldHVybiB0PXQucmVwbGFjZSgvXFx7XFx7KC4qPylcXH1cXH0vZywoKHQsZSk9PmUpKX1vbih0LGUpe2xldCBpPVtdO1wic3RyaW5nXCI9PXR5cGVvZiB0P2k9dC5zcGxpdChcIiBcIik6QXJyYXkuaXNBcnJheSh0KSYmKGk9dCksdGhpcy5ldmVudHN8fCh0aGlzLmV2ZW50cz1uZXcgTWFwKSxpLmZvckVhY2goKHQ9PntsZXQgaT10aGlzLmV2ZW50cy5nZXQodCk7aXx8KHRoaXMuZXZlbnRzLnNldCh0LFtdKSxpPVtdKSxpLmluY2x1ZGVzKGUpfHxpLnB1c2goZSksdGhpcy5ldmVudHMuc2V0KHQsaSl9KSl9b2ZmKHQsZSl7bGV0IGk9W107XCJzdHJpbmdcIj09dHlwZW9mIHQ/aT10LnNwbGl0KFwiIFwiKTpBcnJheS5pc0FycmF5KHQpJiYoaT10KSxpLmZvckVhY2goKHQ9Pntjb25zdCBpPXRoaXMuZXZlbnRzLmdldCh0KTtpZihBcnJheS5pc0FycmF5KGkpKXtjb25zdCB0PWkuaW5kZXhPZihlKTt0Pi0xJiZpLnNwbGljZSh0LDEpfX0pKX1lbWl0KHQsLi4uZSl7Wy4uLnRoaXMuZXZlbnRzLmdldCh0KXx8W11dLmZvckVhY2goKHQ9PnQodGhpcywuLi5lKSkpLFwiKlwiIT09dCYmdGhpcy5lbWl0KFwiKlwiLHQsLi4uZSl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLFwidmVyc2lvblwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpcIjUuMC4xNVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsXCJkZWZhdWx0c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7fX0pO2NsYXNzIG0gZXh0ZW5kcyBme2NvbnN0cnVjdG9yKHQ9e30pe3N1cGVyKHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicGx1Z2luc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7fX0pfWF0dGFjaFBsdWdpbnModD17fSl7Y29uc3QgZT1uZXcgTWFwO2Zvcihjb25zdFtpLG5db2YgT2JqZWN0LmVudHJpZXModCkpe2NvbnN0IHQ9dGhpcy5vcHRpb24oaSkscz10aGlzLnBsdWdpbnNbaV07c3x8ITE9PT10P3MmJiExPT09dCYmKHMuZGV0YWNoKCksZGVsZXRlIHRoaXMucGx1Z2luc1tpXSk6ZS5zZXQoaSxuZXcgbih0aGlzLHR8fHt9KSl9Zm9yKGNvbnN0W3QsaV1vZiBlKXRoaXMucGx1Z2luc1t0XT1pLGkuYXR0YWNoKCk7dGhpcy5lbWl0KFwiYXR0YWNoUGx1Z2luc1wiKX1kZXRhY2hQbHVnaW5zKHQpe3Q9dHx8T2JqZWN0LmtleXModGhpcy5wbHVnaW5zKTtmb3IoY29uc3QgZSBvZiB0KXtjb25zdCB0PXRoaXMucGx1Z2luc1tlXTt0JiZ0LmRldGFjaCgpLGRlbGV0ZSB0aGlzLnBsdWdpbnNbZV19cmV0dXJuIHRoaXMuZW1pdChcImRldGFjaFBsdWdpbnNcIiksdGhpc319dmFyIGc7IWZ1bmN0aW9uKHQpe3RbdC5Jbml0PTBdPVwiSW5pdFwiLHRbdC5FcnJvcj0xXT1cIkVycm9yXCIsdFt0LlJlYWR5PTJdPVwiUmVhZHlcIix0W3QuUGFubmluZz0zXT1cIlBhbm5pbmdcIix0W3QuTW91c2Vtb3ZlPTRdPVwiTW91c2Vtb3ZlXCIsdFt0LkRlc3Ryb3k9NV09XCJEZXN0cm95XCJ9KGd8fChnPXt9KSk7Y29uc3QgYj1bXCJhXCIsXCJiXCIsXCJjXCIsXCJkXCIsXCJlXCIsXCJmXCJdLHY9e1BBTlVQOlwiTW92ZSB1cFwiLFBBTkRPV046XCJNb3ZlIGRvd25cIixQQU5MRUZUOlwiTW92ZSBsZWZ0XCIsUEFOUklHSFQ6XCJNb3ZlIHJpZ2h0XCIsWk9PTUlOOlwiWm9vbSBpblwiLFpPT01PVVQ6XCJab29tIG91dFwiLFRPR0dMRVpPT006XCJUb2dnbGUgem9vbSBsZXZlbFwiLFRPR0dMRTFUTzE6XCJUb2dnbGUgem9vbSBsZXZlbFwiLElURVJBVEVaT09NOlwiVG9nZ2xlIHpvb20gbGV2ZWxcIixST1RBVEVDQ1c6XCJSb3RhdGUgY291bnRlcmNsb2Nrd2lzZVwiLFJPVEFURUNXOlwiUm90YXRlIGNsb2Nrd2lzZVwiLEZMSVBYOlwiRmxpcCBob3Jpem9udGFsbHlcIixGTElQWTpcIkZsaXAgdmVydGljYWxseVwiLEZJVFg6XCJGaXQgaG9yaXpvbnRhbGx5XCIsRklUWTpcIkZpdCB2ZXJ0aWNhbGx5XCIsUkVTRVQ6XCJSZXNldFwiLFRPR0dMRUZTOlwiVG9nZ2xlIGZ1bGxzY3JlZW5cIn0seT17Y29udGVudDpudWxsLHdpZHRoOlwiYXV0b1wiLGhlaWdodDpcImF1dG9cIixwYW5Nb2RlOlwiZHJhZ1wiLHRvdWNoOiEwLGRyYWdNaW5UaHJlc2hvbGQ6Myxsb2NrQXhpczohMSxtb3VzZU1vdmVGYWN0b3I6MSxtb3VzZU1vdmVGcmljdGlvbjouMTIsem9vbTohMCxwaW5jaFRvWm9vbTohMCxwYW5Pbmx5Wm9vbWVkOlwiYXV0b1wiLG1pblNjYWxlOjEsbWF4U2NhbGU6MixmcmljdGlvbjouMjUsZHJhZ0ZyaWN0aW9uOi4zNSxkZWNlbEZyaWN0aW9uOi4wNSxjbGljazpcInRvZ2dsZVpvb21cIixkYmxDbGljazohMSx3aGVlbDpcInpvb21cIix3aGVlbExpbWl0Ojcsc3Bpbm5lcjohMCxib3VuZHM6XCJhdXRvXCIsaW5maW5pdGU6ITEscnViYmVyYmFuZDohMCxib3VuY2U6ITAsbWF4VmVsb2NpdHk6NzUsdHJhbnNmb3JtUGFyZW50OiExLGNsYXNzZXM6e2NvbnRlbnQ6XCJmLXBhbnpvb21fX2NvbnRlbnRcIixpc0xvYWRpbmc6XCJpcy1sb2FkaW5nXCIsY2FuWm9vbUluOlwiY2FuLXpvb21faW5cIixjYW5ab29tT3V0OlwiY2FuLXpvb21fb3V0XCIsaXNEcmFnZ2FibGU6XCJpcy1kcmFnZ2FibGVcIixpc0RyYWdnaW5nOlwiaXMtZHJhZ2dpbmdcIixpbkZ1bGxzY3JlZW46XCJpbi1mdWxsc2NyZWVuXCIsaHRtbEhhc0Z1bGxzY3JlZW46XCJ3aXRoLXBhbnpvb20taW4tZnVsbHNjcmVlblwifSxsMTBuOnZ9LHc9JzxkaXYgY2xhc3M9XCJmLXNwaW5uZXJcIj48c3ZnIHZpZXdCb3g9XCIwIDAgNTAgNTBcIj48Y2lyY2xlIGN4PVwiMjVcIiBjeT1cIjI1XCIgcj1cIjIwXCI+PC9jaXJjbGU+PGNpcmNsZSBjeD1cIjI1XCIgY3k9XCIyNVwiIHI9XCIyMFwiPjwvY2lyY2xlPjwvc3ZnPjwvZGl2PicseD10PT50JiZudWxsIT09dCYmdCBpbnN0YW5jZW9mIEVsZW1lbnQmJlwibm9kZVR5cGVcImluIHQsRT0odCxlKT0+e3QmJnMoZSkuZm9yRWFjaCgoZT0+e3QuY2xhc3NMaXN0LnJlbW92ZShlKX0pKX0sUz0odCxlKT0+e3QmJnMoZSkuZm9yRWFjaCgoZT0+e3QuY2xhc3NMaXN0LmFkZChlKX0pKX0sUD17YToxLGI6MCxjOjAsZDoxLGU6MCxmOjB9O2xldCBDPW51bGwsTT1udWxsO2NsYXNzIFQgZXh0ZW5kcyBte2dldCBpc1RvdWNoRGV2aWNlKCl7cmV0dXJuIG51bGw9PT1NJiYoTT13aW5kb3cubWF0Y2hNZWRpYShcIihob3Zlcjogbm9uZSlcIikubWF0Y2hlcyksTX1nZXQgaXNNb2JpbGUoKXtyZXR1cm4gbnVsbD09PUMmJihDPS9pUGhvbmV8aVBhZHxpUG9kfEFuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSxDfWdldCBwYW5Nb2RlKCl7cmV0dXJuXCJtb3VzZW1vdmVcIiE9PXRoaXMub3B0aW9ucy5wYW5Nb2RlfHx0aGlzLmlzVG91Y2hEZXZpY2U/XCJkcmFnXCI6XCJtb3VzZW1vdmVcIn1nZXQgcGFuT25seVpvb21lZCgpe2NvbnN0IHQ9dGhpcy5vcHRpb25zLnBhbk9ubHlab29tZWQ7cmV0dXJuXCJhdXRvXCI9PT10P3RoaXMuaXNUb3VjaERldmljZTp0fWdldCBpc0luZmluaXRlKCl7cmV0dXJuIHRoaXMub3B0aW9uKFwiaW5maW5pdGVcIil9Z2V0IGFuZ2xlKCl7cmV0dXJuIDE4MCpNYXRoLmF0YW4yKHRoaXMuY3VycmVudC5iLHRoaXMuY3VycmVudC5hKS9NYXRoLlBJfHwwfWdldCB0YXJnZXRBbmdsZSgpe3JldHVybiAxODAqTWF0aC5hdGFuMih0aGlzLnRhcmdldC5iLHRoaXMudGFyZ2V0LmEpL01hdGguUEl8fDB9Z2V0IHNjYWxlKCl7Y29uc3R7YTp0LGI6ZX09dGhpcy5jdXJyZW50O3JldHVybiBNYXRoLnNxcnQodCp0K2UqZSl8fDF9Z2V0IHRhcmdldFNjYWxlKCl7Y29uc3R7YTp0LGI6ZX09dGhpcy50YXJnZXQ7cmV0dXJuIE1hdGguc3FydCh0KnQrZSplKXx8MX1nZXQgbWluU2NhbGUoKXtyZXR1cm4gdGhpcy5vcHRpb24oXCJtaW5TY2FsZVwiKXx8MX1nZXQgZnVsbFNjYWxlKCl7Y29uc3R7Y29udGVudFJlY3Q6dH09dGhpcztyZXR1cm4gdC5mdWxsV2lkdGgvdC5maXRXaWR0aHx8MX1nZXQgbWF4U2NhbGUoKXtyZXR1cm4gdGhpcy5mdWxsU2NhbGUqKHRoaXMub3B0aW9uKFwibWF4U2NhbGVcIil8fDEpfHwxfWdldCBjb3ZlclNjYWxlKCl7Y29uc3R7Y29udGFpbmVyUmVjdDp0LGNvbnRlbnRSZWN0OmV9PXRoaXMsaT1NYXRoLm1heCh0LmhlaWdodC9lLmZpdEhlaWdodCx0LndpZHRoL2UuZml0V2lkdGgpfHwxO3JldHVybiBNYXRoLm1pbih0aGlzLmZ1bGxTY2FsZSxpKX1nZXQgaXNTY2FsaW5nKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMudGFyZ2V0U2NhbGUtdGhpcy5zY2FsZSk+MWUtNSYmIXRoaXMuaXNSZXN0aW5nfWdldCBpc0NvbnRlbnRMb2FkaW5nKCl7Y29uc3QgdD10aGlzLmNvbnRlbnQ7cmV0dXJuISEodCYmdCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpJiYhdC5jb21wbGV0ZX1nZXQgaXNSZXN0aW5nKCl7aWYodGhpcy5pc0JvdW5jaW5nWHx8dGhpcy5pc0JvdW5jaW5nWSlyZXR1cm4hMTtmb3IoY29uc3QgdCBvZiBiKXtjb25zdCBlPVwiZVwiPT10fHxcImZcIj09PXQ/LjAwMToxZS01O2lmKE1hdGguYWJzKHRoaXMudGFyZ2V0W3RdLXRoaXMuY3VycmVudFt0XSk+ZSlyZXR1cm4hMX1yZXR1cm4hKCF0aGlzLmlnbm9yZUJvdW5kcyYmIXRoaXMuY2hlY2tCb3VuZHMoKS5pbkJvdW5kcyl9Y29uc3RydWN0b3IodCxlPXt9LGk9e30pe3ZhciBzO2lmKHN1cGVyKGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicG9pbnRlclRyYWNrZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicmVzaXplT2JzZXJ2ZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidXBkYXRlVGltZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY2xpY2tUaW1lclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJyQUZcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNUaWNraW5nXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJmcmljdGlvblwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZ25vcmVCb3VuZHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ITF9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzQm91bmNpbmdYXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0JvdW5jaW5nWVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY2xpY2tzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOjB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInRyYWNraW5nUG9pbnRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOltdfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwd3RcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY3dkXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOjB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBtbWVcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzdGF0ZVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpnLkluaXR9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzRHJhZ2dpbmdcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ITF9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNvbnRhaW5lclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNvbnRlbnRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzcGlubmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNvbnRhaW5lclJlY3RcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e3dpZHRoOjAsaGVpZ2h0OjAsaW5uZXJXaWR0aDowLGlubmVySGVpZ2h0OjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb250ZW50UmVjdFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7dG9wOjAscmlnaHQ6MCxib3R0b206MCxsZWZ0OjAsZnVsbFdpZHRoOjAsZnVsbEhlaWdodDowLGZpdFdpZHRoOjAsZml0SGVpZ2h0OjAsd2lkdGg6MCxoZWlnaHQ6MH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImRyYWdTdGFydFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7eDowLHk6MCx0b3A6MCxsZWZ0OjAsdGltZTowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZHJhZ09mZnNldFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7eDowLHk6MCx0aW1lOjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjdXJyZW50XCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOk9iamVjdC5hc3NpZ24oe30sUCl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInRhcmdldFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpPYmplY3QuYXNzaWduKHt9LFApfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ2ZWxvY2l0eVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7YTowLGI6MCxjOjAsZDowLGU6MCxmOjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJsb2NrZWRBeGlzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSksIXQpdGhyb3cgbmV3IEVycm9yKFwiQ29udGFpbmVyIEVsZW1lbnQgTm90IEZvdW5kXCIpO3RoaXMuY29udGFpbmVyPXQsdGhpcy5pbml0Q29udGVudCgpLHRoaXMuYXR0YWNoUGx1Z2lucyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sVC5QbHVnaW5zKSxpKSksdGhpcy5lbWl0KFwiaW5pdFwiKTtjb25zdCBvPXRoaXMuY29udGVudDtpZihvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcy5vbkxvYWQpLG8uYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcy5vbkVycm9yKSx0aGlzLmlzQ29udGVudExvYWRpbmcpe2lmKHRoaXMub3B0aW9uKFwic3Bpbm5lclwiKSl7dC5jbGFzc0xpc3QuYWRkKHRoaXMuY24oXCJpc0xvYWRpbmdcIikpO2NvbnN0IGU9bih3KTshdC5jb250YWlucyhvKXx8by5wYXJlbnRFbGVtZW50IGluc3RhbmNlb2YgSFRNTFBpY3R1cmVFbGVtZW50P3RoaXMuc3Bpbm5lcj10LmFwcGVuZENoaWxkKGUpOnRoaXMuc3Bpbm5lcj0obnVsbD09PShzPW8ucGFyZW50RWxlbWVudCl8fHZvaWQgMD09PXM/dm9pZCAwOnMuaW5zZXJ0QmVmb3JlKGUsbykpfHxudWxsfXRoaXMuZW1pdChcImJlZm9yZUxvYWRcIil9ZWxzZSBxdWV1ZU1pY3JvdGFzaygoKCk9Pnt0aGlzLmVuYWJsZSgpfSkpfWluaXRDb250ZW50KCl7Y29uc3R7Y29udGFpbmVyOnR9PXRoaXMsZT10aGlzLmNuKFwiY29udGVudFwiKTtsZXQgaT10aGlzLm9wdGlvbihcImNvbnRlbnRcIil8fHQucXVlcnlTZWxlY3RvcihgLiR7ZX1gKTtpZihpfHwoaT10LnF1ZXJ5U2VsZWN0b3IoXCJpbWcscGljdHVyZVwiKXx8dC5maXJzdEVsZW1lbnRDaGlsZCxpJiZTKGksZSkpLGkgaW5zdGFuY2VvZiBIVE1MUGljdHVyZUVsZW1lbnQmJihpPWkucXVlcnlTZWxlY3RvcihcImltZ1wiKSksIWkpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udGVudCBmb3VuZFwiKTt0aGlzLmNvbnRlbnQ9aX1vbkxvYWQoKXt0aGlzLnNwaW5uZXImJih0aGlzLnNwaW5uZXIucmVtb3ZlKCksdGhpcy5zcGlubmVyPW51bGwpLHRoaXMub3B0aW9uKFwic3Bpbm5lclwiKSYmdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNuKFwiaXNMb2FkaW5nXCIpKSx0aGlzLmVtaXQoXCJhZnRlckxvYWRcIiksdGhpcy5zdGF0ZT09PWcuSW5pdD90aGlzLmVuYWJsZSgpOnRoaXMudXBkYXRlTWV0cmljcygpfW9uRXJyb3IoKXt0aGlzLnN0YXRlIT09Zy5EZXN0cm95JiYodGhpcy5zcGlubmVyJiYodGhpcy5zcGlubmVyLnJlbW92ZSgpLHRoaXMuc3Bpbm5lcj1udWxsKSx0aGlzLnN0b3AoKSx0aGlzLmRldGFjaEV2ZW50cygpLHRoaXMuc3RhdGU9Zy5FcnJvcix0aGlzLmVtaXQoXCJlcnJvclwiKSl9YXR0YWNoT2JzZXJ2ZXIoKXt2YXIgdDtjb25zdCBlPSgpPT5NYXRoLmFicyh0aGlzLmNvbnRhaW5lclJlY3Qud2lkdGgtdGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpPi4xfHxNYXRoLmFicyh0aGlzLmNvbnRhaW5lclJlY3QuaGVpZ2h0LXRoaXMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCk+LjE7dGhpcy5yZXNpemVPYnNlcnZlcnx8dm9pZCAwPT09d2luZG93LlJlc2l6ZU9ic2VydmVyfHwodGhpcy5yZXNpemVPYnNlcnZlcj1uZXcgUmVzaXplT2JzZXJ2ZXIoKCgpPT57dGhpcy51cGRhdGVUaW1lcnx8KGUoKT8odGhpcy5vblJlc2l6ZSgpLHRoaXMuaXNNb2JpbGUmJih0aGlzLnVwZGF0ZVRpbWVyPXNldFRpbWVvdXQoKCgpPT57ZSgpJiZ0aGlzLm9uUmVzaXplKCksdGhpcy51cGRhdGVUaW1lcj1udWxsfSksNTAwKSkpOnRoaXMudXBkYXRlVGltZXImJihjbGVhclRpbWVvdXQodGhpcy51cGRhdGVUaW1lciksdGhpcy51cGRhdGVUaW1lcj1udWxsKSl9KSkpLG51bGw9PT0odD10aGlzLnJlc2l6ZU9ic2VydmVyKXx8dm9pZCAwPT09dHx8dC5vYnNlcnZlKHRoaXMuY29udGFpbmVyKX1kZXRhY2hPYnNlcnZlcigpe3ZhciB0O251bGw9PT0odD10aGlzLnJlc2l6ZU9ic2VydmVyKXx8dm9pZCAwPT09dHx8dC5kaXNjb25uZWN0KCl9YXR0YWNoRXZlbnRzKCl7Y29uc3R7Y29udGFpbmVyOnR9PXRoaXM7dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLHQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsdGhpcy5vbldoZWVsLHtwYXNzaXZlOiExfSksdGhpcy5wb2ludGVyVHJhY2tlcj1uZXcgbCh0LHtzdGFydDp0aGlzLm9uUG9pbnRlckRvd24sbW92ZTp0aGlzLm9uUG9pbnRlck1vdmUsZW5kOnRoaXMub25Qb2ludGVyVXB9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5vbk1vdXNlTW92ZSl9ZGV0YWNoRXZlbnRzKCl7dmFyIHQ7Y29uc3R7Y29udGFpbmVyOmV9PXRoaXM7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsdGhpcy5vbldoZWVsLHtwYXNzaXZlOiExfSksbnVsbD09PSh0PXRoaXMucG9pbnRlclRyYWNrZXIpfHx2b2lkIDA9PT10fHx0LnN0b3AoKSx0aGlzLnBvaW50ZXJUcmFja2VyPW51bGwsZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZU1vdmUpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5vbktleWRvd24sITApLHRoaXMuY2xpY2tUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLmNsaWNrVGltZXIpLHRoaXMuY2xpY2tUaW1lcj1udWxsKSx0aGlzLnVwZGF0ZVRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlVGltZXIpLHRoaXMudXBkYXRlVGltZXI9bnVsbCl9YW5pbWF0ZSgpe2NvbnN0IHQ9dGhpcy5mcmljdGlvbjt0aGlzLnNldFRhcmdldEZvcmNlKCk7Y29uc3QgZT10aGlzLm9wdGlvbihcIm1heFZlbG9jaXR5XCIpO2Zvcihjb25zdCBpIG9mIGIpdD8odGhpcy52ZWxvY2l0eVtpXSo9MS10LGUmJiF0aGlzLmlzU2NhbGluZyYmKHRoaXMudmVsb2NpdHlbaV09TWF0aC5tYXgoTWF0aC5taW4odGhpcy52ZWxvY2l0eVtpXSxlKSwtMSplKSksdGhpcy5jdXJyZW50W2ldKz10aGlzLnZlbG9jaXR5W2ldKTp0aGlzLmN1cnJlbnRbaV09dGhpcy50YXJnZXRbaV07dGhpcy5zZXRUcmFuc2Zvcm0oKSx0aGlzLnNldEVkZ2VGb3JjZSgpLCF0aGlzLmlzUmVzdGluZ3x8dGhpcy5pc0RyYWdnaW5nP3RoaXMuckFGPXJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9PnRoaXMuYW5pbWF0ZSgpKSk6dGhpcy5zdG9wKFwiY3VycmVudFwiKX1zZXRUYXJnZXRGb3JjZSgpe2Zvcihjb25zdCB0IG9mIGIpXCJlXCI9PT10JiZ0aGlzLmlzQm91bmNpbmdYfHxcImZcIj09PXQmJnRoaXMuaXNCb3VuY2luZ1l8fCh0aGlzLnZlbG9jaXR5W3RdPSgxLygxLXRoaXMuZnJpY3Rpb24pLTEpKih0aGlzLnRhcmdldFt0XS10aGlzLmN1cnJlbnRbdF0pKX1jaGVja0JvdW5kcyh0PTAsZT0wKXtjb25zdHtjdXJyZW50Oml9PXRoaXMsbj1pLmUrdCxzPWkuZitlLG89dGhpcy5nZXRCb3VuZHMoKSx7eDphLHk6cn09byxsPWEubWluLGM9YS5tYXgsaD1yLm1pbixkPXIubWF4O2xldCB1PTAscD0wO3JldHVybiBsIT09MS8wJiZuPGw/dT1sLW46YyE9PTEvMCYmbj5jJiYodT1jLW4pLGghPT0xLzAmJnM8aD9wPWgtczpkIT09MS8wJiZzPmQmJihwPWQtcyksTWF0aC5hYnModSk8LjAwMSYmKHU9MCksTWF0aC5hYnMocCk8LjAwMSYmKHA9MCksT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG8pLHt4RGlmZjp1LHlEaWZmOnAsaW5Cb3VuZHM6IXUmJiFwfSl9Y2xhbXBUYXJnZXRCb3VuZHMoKXtjb25zdHt0YXJnZXQ6dH09dGhpcyx7eDplLHk6aX09dGhpcy5nZXRCb3VuZHMoKTtlLm1pbiE9PTEvMCYmKHQuZT1NYXRoLm1heCh0LmUsZS5taW4pKSxlLm1heCE9PTEvMCYmKHQuZT1NYXRoLm1pbih0LmUsZS5tYXgpKSxpLm1pbiE9PTEvMCYmKHQuZj1NYXRoLm1heCh0LmYsaS5taW4pKSxpLm1heCE9PTEvMCYmKHQuZj1NYXRoLm1pbih0LmYsaS5tYXgpKX1jYWxjdWxhdGVDb250ZW50RGltKHQ9dGhpcy5jdXJyZW50KXtjb25zdHtjb250ZW50OmUsY29udGVudFJlY3Q6aX09dGhpcyx7Zml0V2lkdGg6bixmaXRIZWlnaHQ6cyxmdWxsV2lkdGg6byxmdWxsSGVpZ2h0OmF9PWk7bGV0IHI9byxsPWE7aWYodGhpcy5vcHRpb24oXCJ6b29tXCIpfHwwIT09dGhpcy5hbmdsZSl7Y29uc3QgaT0hKGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSYmKFwibm9uZVwiPT09d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSkubWF4V2lkdGh8fFwibm9uZVwiPT09d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSkubWF4SGVpZ2h0KSxjPWk/bzpuLGg9aT9hOnMsZD10aGlzLmdldE1hdHJpeCh0KSx1PW5ldyBET01Qb2ludCgwLDApLm1hdHJpeFRyYW5zZm9ybShkKSxwPW5ldyBET01Qb2ludCgwK2MsMCkubWF0cml4VHJhbnNmb3JtKGQpLGY9bmV3IERPTVBvaW50KDArYywwK2gpLm1hdHJpeFRyYW5zZm9ybShkKSxtPW5ldyBET01Qb2ludCgwLDAraCkubWF0cml4VHJhbnNmb3JtKGQpLGc9TWF0aC5hYnMoZi54LXUueCksYj1NYXRoLmFicyhmLnktdS55KSx2PU1hdGguYWJzKG0ueC1wLngpLHk9TWF0aC5hYnMobS55LXAueSk7cj1NYXRoLm1heChnLHYpLGw9TWF0aC5tYXgoYix5KX1yZXR1cm57Y29udGVudFdpZHRoOnIsY29udGVudEhlaWdodDpsfX1zZXRFZGdlRm9yY2UoKXtpZih0aGlzLmlnbm9yZUJvdW5kc3x8dGhpcy5pc0RyYWdnaW5nfHxcIm1vdXNlbW92ZVwiPT09dGhpcy5wYW5Nb2RlfHx0aGlzLnRhcmdldFNjYWxlPHRoaXMuc2NhbGUpcmV0dXJuIHRoaXMuaXNCb3VuY2luZ1g9ITEsdm9pZCh0aGlzLmlzQm91bmNpbmdZPSExKTtjb25zdHt0YXJnZXQ6dH09dGhpcyx7eDplLHk6aSx4RGlmZjpuLHlEaWZmOnN9PXRoaXMuY2hlY2tCb3VuZHMoKTtjb25zdCBvPXRoaXMub3B0aW9uKFwibWF4VmVsb2NpdHlcIik7bGV0IGE9dGhpcy52ZWxvY2l0eS5lLHI9dGhpcy52ZWxvY2l0eS5mOzAhPT1uPyh0aGlzLmlzQm91bmNpbmdYPSEwLG4qYTw9MD9hKz0uMTQqbjooYT0uMTQqbixlLm1pbiE9PTEvMCYmKHRoaXMudGFyZ2V0LmU9TWF0aC5tYXgodC5lLGUubWluKSksZS5tYXghPT0xLzAmJih0aGlzLnRhcmdldC5lPU1hdGgubWluKHQuZSxlLm1heCkpKSxvJiYoYT1NYXRoLm1heChNYXRoLm1pbihhLG8pLC0xKm8pKSk6dGhpcy5pc0JvdW5jaW5nWD0hMSwwIT09cz8odGhpcy5pc0JvdW5jaW5nWT0hMCxzKnI8PTA/cis9LjE0KnM6KHI9LjE0KnMsaS5taW4hPT0xLzAmJih0aGlzLnRhcmdldC5mPU1hdGgubWF4KHQuZixpLm1pbikpLGkubWF4IT09MS8wJiYodGhpcy50YXJnZXQuZj1NYXRoLm1pbih0LmYsaS5tYXgpKSksbyYmKHI9TWF0aC5tYXgoTWF0aC5taW4ocixvKSwtMSpvKSkpOnRoaXMuaXNCb3VuY2luZ1k9ITEsdGhpcy5pc0JvdW5jaW5nWCYmKHRoaXMudmVsb2NpdHkuZT1hKSx0aGlzLmlzQm91bmNpbmdZJiYodGhpcy52ZWxvY2l0eS5mPXIpfWVuYWJsZSgpe2NvbnN0e2NvbnRlbnQ6dH09dGhpcyxlPW5ldyBET01NYXRyaXhSZWFkT25seSh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS50cmFuc2Zvcm0pO2Zvcihjb25zdCB0IG9mIGIpdGhpcy5jdXJyZW50W3RdPXRoaXMudGFyZ2V0W3RdPWVbdF07dGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5hdHRhY2hPYnNlcnZlcigpLHRoaXMuYXR0YWNoRXZlbnRzKCksdGhpcy5zdGF0ZT1nLlJlYWR5LHRoaXMuZW1pdChcInJlYWR5XCIpfW9uQ2xpY2sodCl7dmFyIGU7dGhpcy5pc0RyYWdnaW5nJiYobnVsbD09PShlPXRoaXMucG9pbnRlclRyYWNrZXIpfHx2b2lkIDA9PT1lfHxlLmNsZWFyKCksdGhpcy50cmFja2luZ1BvaW50cz1bXSx0aGlzLnN0YXJ0RGVjZWxBbmltKCkpO2NvbnN0IGk9dC50YXJnZXQ7aWYoIWl8fHQuZGVmYXVsdFByZXZlbnRlZClyZXR1cm47aWYoaSYmaS5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSlyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLHZvaWQgdC5zdG9wUHJvcGFnYXRpb24oKTtpZigoKCk9Pntjb25zdCB0PXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtyZXR1cm4gdCYmXCJSYW5nZVwiPT09dC50eXBlfSkoKSYmIWkuY2xvc2VzdChcImJ1dHRvblwiKSlyZXR1cm47Y29uc3Qgbj1pLmNsb3Nlc3QoXCJbZGF0YS1wYW56b29tLWFjdGlvbl1cIikscz1pLmNsb3Nlc3QoXCJbZGF0YS1wYW56b29tLWNoYW5nZV1cIiksbz1ufHxzLGE9byYmeChvKT9vLmRhdGFzZXQ6bnVsbDtpZihhKXtjb25zdCBlPWEucGFuem9vbUNoYW5nZSxpPWEucGFuem9vbUFjdGlvbjtpZigoZXx8aSkmJnQucHJldmVudERlZmF1bHQoKSxlKXtsZXQgdD17fTt0cnl7dD1KU09OLnBhcnNlKGUpfWNhdGNoKHQpe2NvbnNvbGUmJmNvbnNvbGUud2FybihcIlRoZSBnaXZlbiBkYXRhIHdhcyBub3QgdmFsaWQgSlNPTlwiKX1yZXR1cm4gdm9pZCB0aGlzLmFwcGx5Q2hhbmdlKHQpfWlmKGkpcmV0dXJuIHZvaWQodGhpc1tpXSYmdGhpc1tpXSgpKX1pZihNYXRoLmFicyh0aGlzLmRyYWdPZmZzZXQueCk+M3x8TWF0aC5hYnModGhpcy5kcmFnT2Zmc2V0LnkpPjMpcmV0dXJuIHQucHJldmVudERlZmF1bHQoKSx2b2lkIHQuc3RvcFByb3BhZ2F0aW9uKCk7Y29uc3Qgcj10aGlzLmNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYodGhpcy5kcmFnU3RhcnQudGltZSYmIXRoaXMuY2FuWm9vbU91dCgpJiYoTWF0aC5hYnMoci54LXRoaXMuZHJhZ1N0YXJ0LngpPjJ8fE1hdGguYWJzKHIueS10aGlzLmRyYWdTdGFydC55KT4yKSlyZXR1cm47dGhpcy5kcmFnU3RhcnQudGltZT0wO2NvbnN0IGw9ZT0+e3RoaXMub3B0aW9uKFwiem9vbVwiKSYmZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUmJi8oaXRlcmF0ZVpvb20pfCh0b2dnbGUoWm9vbXxGdWxsfENvdmVyfE1heCl8KHpvb21UbyhGaXR8Q292ZXJ8TWF4KSkpLy50ZXN0KGUpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW2VdJiYodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXNbZV0oe2V2ZW50OnR9KSl9LGM9dGhpcy5vcHRpb24oXCJjbGlja1wiLHQpLGg9dGhpcy5vcHRpb24oXCJkYmxDbGlja1wiLHQpO2g/KHRoaXMuY2xpY2tzKyssMT09dGhpcy5jbGlja3MmJih0aGlzLmNsaWNrVGltZXI9c2V0VGltZW91dCgoKCk9PnsxPT09dGhpcy5jbGlja3M/KHRoaXMuZW1pdChcImNsaWNrXCIsdCksIXQuZGVmYXVsdFByZXZlbnRlZCYmYyYmbChjKSk6KHRoaXMuZW1pdChcImRibENsaWNrXCIsdCksdC5kZWZhdWx0UHJldmVudGVkfHxsKGgpKSx0aGlzLmNsaWNrcz0wLHRoaXMuY2xpY2tUaW1lcj1udWxsfSksMzUwKSkpOih0aGlzLmVtaXQoXCJjbGlja1wiLHQpLCF0LmRlZmF1bHRQcmV2ZW50ZWQmJmMmJmwoYykpfWFkZFRyYWNraW5nUG9pbnQodCl7Y29uc3QgZT10aGlzLnRyYWNraW5nUG9pbnRzLmZpbHRlcigodD0+dC50aW1lPkRhdGUubm93KCktMTAwKSk7ZS5wdXNoKHQpLHRoaXMudHJhY2tpbmdQb2ludHM9ZX1vblBvaW50ZXJEb3duKHQsZSxpKXt2YXIgbjt0aGlzLnB3dD0wLHRoaXMuZHJhZ09mZnNldD17eDowLHk6MCx0aW1lOjB9LHRoaXMudHJhY2tpbmdQb2ludHM9W107Y29uc3Qgcz10aGlzLmNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYodGhpcy5kcmFnU3RhcnQ9e3g6cy54LHk6cy55LHRvcDpzLnRvcCxsZWZ0OnMubGVmdCx0aW1lOkRhdGUubm93KCl9LHRoaXMuY2xpY2tUaW1lcilyZXR1cm4hMTtpZihcIm1vdXNlbW92ZVwiPT09dGhpcy5wYW5Nb2RlJiZ0aGlzLnRhcmdldFNjYWxlPjEpcmV0dXJuIHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLCExO2lmKCFpLmxlbmd0aCl7Y29uc3QgZT10LmNvbXBvc2VkUGF0aCgpWzBdO2lmKFtcIkFcIixcIlRFWFRBUkVBXCIsXCJPUFRJT05cIixcIklOUFVUXCIsXCJTRUxFQ1RcIixcIlZJREVPXCJdLmluY2x1ZGVzKGUubm9kZU5hbWUpfHxlLmNsb3Nlc3QoXCJbY29udGVudGVkaXRhYmxlXVwiKXx8ZS5jbG9zZXN0KFwiW2RhdGEtc2VsZWN0YWJsZV1cIil8fGUuY2xvc2VzdChcIltkYXRhLXBhbnpvb20tY2hhbmdlXVwiKXx8ZS5jbG9zZXN0KFwiW2RhdGEtcGFuem9vbS1hY3Rpb25dXCIpKXJldHVybiExO251bGw9PT0obj13aW5kb3cuZ2V0U2VsZWN0aW9uKCkpfHx2b2lkIDA9PT1ufHxuLnJlbW92ZUFsbFJhbmdlcygpfWlmKFwibW91c2Vkb3duXCI9PT10LnR5cGUpdC5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoTWF0aC5hYnModGhpcy52ZWxvY2l0eS5hKT4uMylyZXR1cm4hMTtyZXR1cm4gdGhpcy50YXJnZXQuZT10aGlzLmN1cnJlbnQuZSx0aGlzLnRhcmdldC5mPXRoaXMuY3VycmVudC5mLHRoaXMuc3RvcCgpLHRoaXMuaXNEcmFnZ2luZ3x8KHRoaXMuaXNEcmFnZ2luZz0hMCx0aGlzLmFkZFRyYWNraW5nUG9pbnQoZSksdGhpcy5lbWl0KFwidG91Y2hTdGFydFwiLHQpKSwhMH1vblBvaW50ZXJNb3ZlKGUsbixzKXtpZighMT09PXRoaXMub3B0aW9uKFwidG91Y2hcIixlKSlyZXR1cm47aWYoIXRoaXMuaXNEcmFnZ2luZylyZXR1cm47aWYobi5sZW5ndGg8MiYmdGhpcy5wYW5Pbmx5Wm9vbWVkJiZ0KHRoaXMudGFyZ2V0U2NhbGUpPD10KHRoaXMubWluU2NhbGUpKXJldHVybjtpZih0aGlzLmVtaXQoXCJ0b3VjaE1vdmVcIixlKSxlLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuO3RoaXMuYWRkVHJhY2tpbmdQb2ludChuWzBdKTtjb25zdHtjb250ZW50Om99PXRoaXMsYT1oKHNbMF0sc1sxXSkscj1oKG5bMF0sblsxXSk7bGV0IGw9MCxkPTA7aWYobi5sZW5ndGg+MSl7Y29uc3QgdD1vLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2w9YS5jbGllbnRYLXQubGVmdC0uNSp0LndpZHRoLGQ9YS5jbGllbnRZLXQudG9wLS41KnQuaGVpZ2h0fWNvbnN0IHU9YyhzWzBdLHNbMV0pLHA9YyhuWzBdLG5bMV0pO2xldCBmPXU/cC91OjEsbT1yLmNsaWVudFgtYS5jbGllbnRYLGc9ci5jbGllbnRZLWEuY2xpZW50WTt0aGlzLmRyYWdPZmZzZXQueCs9bSx0aGlzLmRyYWdPZmZzZXQueSs9Zyx0aGlzLmRyYWdPZmZzZXQudGltZT1EYXRlLm5vdygpLXRoaXMuZHJhZ1N0YXJ0LnRpbWU7bGV0IGI9dCh0aGlzLnRhcmdldFNjYWxlKT09PXQodGhpcy5taW5TY2FsZSkmJnRoaXMub3B0aW9uKFwibG9ja0F4aXNcIik7aWYoYiYmIXRoaXMubG9ja2VkQXhpcylpZihcInh5XCI9PT1ifHxcInlcIj09PWJ8fFwidG91Y2htb3ZlXCI9PT1lLnR5cGUpe2lmKE1hdGguYWJzKHRoaXMuZHJhZ09mZnNldC54KTw2JiZNYXRoLmFicyh0aGlzLmRyYWdPZmZzZXQueSk8NilyZXR1cm4gdm9pZCBlLnByZXZlbnREZWZhdWx0KCk7Y29uc3QgdD1NYXRoLmFicygxODAqTWF0aC5hdGFuMih0aGlzLmRyYWdPZmZzZXQueSx0aGlzLmRyYWdPZmZzZXQueCkvTWF0aC5QSSk7dGhpcy5sb2NrZWRBeGlzPXQ+NDUmJnQ8MTM1P1wieVwiOlwieFwiLHRoaXMuZHJhZ09mZnNldC54PTAsdGhpcy5kcmFnT2Zmc2V0Lnk9MCxtPTAsZz0wfWVsc2UgdGhpcy5sb2NrZWRBeGlzPWI7aWYoaShlLnRhcmdldCx0aGlzLmNvbnRlbnQpJiYoYj1cInhcIix0aGlzLmRyYWdPZmZzZXQueT0wKSxiJiZcInh5XCIhPT1iJiZ0aGlzLmxvY2tlZEF4aXMhPT1iJiZ0KHRoaXMudGFyZ2V0U2NhbGUpPT09dCh0aGlzLm1pblNjYWxlKSlyZXR1cm47ZS5jYW5jZWxhYmxlJiZlLnByZXZlbnREZWZhdWx0KCksdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLmNuKFwiaXNEcmFnZ2luZ1wiKSk7Y29uc3Qgdj10aGlzLmNoZWNrQm91bmRzKG0sZyk7dGhpcy5vcHRpb24oXCJydWJiZXJiYW5kXCIpPyhcInhcIiE9PXRoaXMuaXNJbmZpbml0ZSYmKHYueERpZmY+MCYmbTwwfHx2LnhEaWZmPDAmJm0+MCkmJihtKj1NYXRoLm1heCgwLC41LU1hdGguYWJzKC43NS90aGlzLmNvbnRlbnRSZWN0LmZpdFdpZHRoKnYueERpZmYpKSksXCJ5XCIhPT10aGlzLmlzSW5maW5pdGUmJih2LnlEaWZmPjAmJmc8MHx8di55RGlmZjwwJiZnPjApJiYoZyo9TWF0aC5tYXgoMCwuNS1NYXRoLmFicyguNzUvdGhpcy5jb250ZW50UmVjdC5maXRIZWlnaHQqdi55RGlmZikpKSk6KHYueERpZmYmJihtPTApLHYueURpZmYmJihnPTApKTtjb25zdCB5PXRoaXMudGFyZ2V0U2NhbGUsdz10aGlzLm1pblNjYWxlLHg9dGhpcy5tYXhTY2FsZTt5PC41KncmJihmPU1hdGgubWF4KGYsdykpLHk+MS41KngmJihmPU1hdGgubWluKGYseCkpLFwieVwiPT09dGhpcy5sb2NrZWRBeGlzJiZ0KHkpPT09dCh3KSYmKG09MCksXCJ4XCI9PT10aGlzLmxvY2tlZEF4aXMmJnQoeSk9PT10KHcpJiYoZz0wKSx0aGlzLmFwcGx5Q2hhbmdlKHtvcmlnaW5YOmwsb3JpZ2luWTpkLHBhblg6bSxwYW5ZOmcsc2NhbGU6ZixmcmljdGlvbjp0aGlzLm9wdGlvbihcImRyYWdGcmljdGlvblwiKSxpZ25vcmVCb3VuZHM6ITB9KX1vblBvaW50ZXJVcCh0LGUsbil7aWYobi5sZW5ndGgpcmV0dXJuIHRoaXMuZHJhZ09mZnNldC54PTAsdGhpcy5kcmFnT2Zmc2V0Lnk9MCx2b2lkKHRoaXMudHJhY2tpbmdQb2ludHM9W10pO3RoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jbihcImlzRHJhZ2dpbmdcIikpLHRoaXMuaXNEcmFnZ2luZyYmKHRoaXMuYWRkVHJhY2tpbmdQb2ludChlKSx0aGlzLnBhbk9ubHlab29tZWQmJnRoaXMuY29udGVudFJlY3Qud2lkdGgtdGhpcy5jb250ZW50UmVjdC5maXRXaWR0aDwxJiZ0aGlzLmNvbnRlbnRSZWN0LmhlaWdodC10aGlzLmNvbnRlbnRSZWN0LmZpdEhlaWdodDwxJiYodGhpcy50cmFja2luZ1BvaW50cz1bXSksaSh0LnRhcmdldCx0aGlzLmNvbnRlbnQpJiZcInlcIj09PXRoaXMubG9ja2VkQXhpcyYmKHRoaXMudHJhY2tpbmdQb2ludHM9W10pLHRoaXMuZW1pdChcInRvdWNoRW5kXCIsdCksdGhpcy5pc0RyYWdnaW5nPSExLHRoaXMubG9ja2VkQXhpcz0hMSx0aGlzLnN0YXRlIT09Zy5EZXN0cm95JiYodC5kZWZhdWx0UHJldmVudGVkfHx0aGlzLnN0YXJ0RGVjZWxBbmltKCkpKX1zdGFydERlY2VsQW5pbSgpe2NvbnN0IGU9dGhpcy5pc1NjYWxpbmc7dGhpcy5yQUYmJihjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJBRiksdGhpcy5yQUY9bnVsbCksdGhpcy5pc0JvdW5jaW5nWD0hMSx0aGlzLmlzQm91bmNpbmdZPSExO2Zvcihjb25zdCB0IG9mIGIpdGhpcy52ZWxvY2l0eVt0XT0wO3RoaXMudGFyZ2V0LmU9dGhpcy5jdXJyZW50LmUsdGhpcy50YXJnZXQuZj10aGlzLmN1cnJlbnQuZixFKHRoaXMuY29udGFpbmVyLFwiaXMtc2NhbGluZ1wiKSxFKHRoaXMuY29udGFpbmVyLFwiaXMtYW5pbWF0aW5nXCIpLHRoaXMuaXNUaWNraW5nPSExO2NvbnN0e3RyYWNraW5nUG9pbnRzOml9PXRoaXMsbj1pWzBdLHM9aVtpLmxlbmd0aC0xXTtsZXQgbz0wLGE9MCxyPTA7cyYmbiYmKG89cy5jbGllbnRYLW4uY2xpZW50WCxhPXMuY2xpZW50WS1uLmNsaWVudFkscj1zLnRpbWUtbi50aW1lKTtsZXQgbD0wLGM9MCxoPTAsZD0wLHU9dGhpcy5vcHRpb24oXCJkZWNlbEZyaWN0aW9uXCIpO2NvbnN0IHA9dGhpcy50YXJnZXRTY2FsZTtpZihyPjApe2g9TWF0aC5hYnMobyk+Mz9vLyhyLzMwKTowLGQ9TWF0aC5hYnMoYSk+Mz9hLyhyLzMwKTowO2NvbnN0IHQ9dGhpcy5vcHRpb24oXCJtYXhWZWxvY2l0eVwiKTt0JiYoaD1NYXRoLm1heChNYXRoLm1pbihoLHQpLC0xKnQpLGQ9TWF0aC5tYXgoTWF0aC5taW4oZCx0KSwtMSp0KSl9aCYmKGw9aC8oMS8oMS11KS0xKSksZCYmKGM9ZC8oMS8oMS11KS0xKSksKFwieVwiPT09dGhpcy5vcHRpb24oXCJsb2NrQXhpc1wiKXx8XCJ4eVwiPT09dGhpcy5vcHRpb24oXCJsb2NrQXhpc1wiKSYmXCJ5XCI9PT10aGlzLmxvY2tlZEF4aXMmJnQocCk9PT10aGlzLm1pblNjYWxlKSYmKGw9aD0wKSwoXCJ4XCI9PT10aGlzLm9wdGlvbihcImxvY2tBeGlzXCIpfHxcInh5XCI9PT10aGlzLm9wdGlvbihcImxvY2tBeGlzXCIpJiZcInhcIj09PXRoaXMubG9ja2VkQXhpcyYmdChwKT09PXRoaXMubWluU2NhbGUpJiYoYz1kPTApO2NvbnN0IGY9dGhpcy5kcmFnT2Zmc2V0LngsbT10aGlzLmRyYWdPZmZzZXQueSxnPXRoaXMub3B0aW9uKFwiZHJhZ01pblRocmVzaG9sZFwiKXx8MDtNYXRoLmFicyhmKTxnJiZNYXRoLmFicyhtKTxnJiYobD1jPTAsaD1kPTApLChwPHRoaXMubWluU2NhbGUtMWUtNXx8cD50aGlzLm1heFNjYWxlKzFlLTV8fGUmJiFsJiYhYykmJih1PS4zNSksdGhpcy5hcHBseUNoYW5nZSh7cGFuWDpsLHBhblk6YyxmcmljdGlvbjp1fSksdGhpcy5lbWl0KFwiZGVjZWxcIixoLGQsZixtKX1vbldoZWVsKHQpe3ZhciBlPVstdC5kZWx0YVh8fDAsLXQuZGVsdGFZfHwwLC10LmRldGFpbHx8MF0ucmVkdWNlKChmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmFicyhlKT5NYXRoLmFicyh0KT9lOnR9KSk7Y29uc3QgaT1NYXRoLm1heCgtMSxNYXRoLm1pbigxLGUpKTtpZih0aGlzLmVtaXQoXCJ3aGVlbFwiLHQsaSksXCJtb3VzZW1vdmVcIj09PXRoaXMucGFuTW9kZSlyZXR1cm47aWYodC5kZWZhdWx0UHJldmVudGVkKXJldHVybjtjb25zdCBuPXRoaXMub3B0aW9uKFwid2hlZWxcIik7XCJwYW5cIj09PW4/KHQucHJldmVudERlZmF1bHQoKSx0aGlzLnBhbk9ubHlab29tZWQmJiF0aGlzLmNhblpvb21PdXQoKXx8dGhpcy5hcHBseUNoYW5nZSh7cGFuWDoyKi10LmRlbHRhWCxwYW5ZOjIqLXQuZGVsdGFZLGJvdW5jZTohMX0pKTpcInpvb21cIj09PW4mJiExIT09dGhpcy5vcHRpb24oXCJ6b29tXCIpJiZ0aGlzLnpvb21XaXRoV2hlZWwodCl9b25Nb3VzZU1vdmUodCl7dGhpcy5wYW5XaXRoTW91c2UodCl9b25LZXlkb3duKHQpe1wiRXNjYXBlXCI9PT10LmtleSYmdGhpcy50b2dnbGVGUygpfW9uUmVzaXplKCl7dGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5jaGVja0JvdW5kcygpLmluQm91bmRzfHx0aGlzLnJlcXVlc3RUaWNrKCl9c2V0VHJhbnNmb3JtKCl7dGhpcy5lbWl0KFwiYmVmb3JlVHJhbnNmb3JtXCIpO2NvbnN0e2N1cnJlbnQ6ZSx0YXJnZXQ6aSxjb250ZW50Om4sY29udGVudFJlY3Q6c309dGhpcyxvPU9iamVjdC5hc3NpZ24oe30sUCk7Zm9yKGNvbnN0IG4gb2YgYil7Y29uc3Qgcz1cImVcIj09bnx8XCJmXCI9PT1uPzFlMzoxZTU7b1tuXT10KGVbbl0scyksTWF0aC5hYnMoaVtuXS1lW25dKTwoXCJlXCI9PW58fFwiZlwiPT09bj8uNTE6LjAwMSkmJihlW25dPWlbbl0pfWxldHthOmEsYjpyLGM6bCxkOmMsZTpoLGY6ZH09byx1PWBtYXRyaXgoJHthfSwgJHtyfSwgJHtsfSwgJHtjfSwgJHtofSwgJHtkfSlgLHA9bi5wYXJlbnRFbGVtZW50IGluc3RhbmNlb2YgSFRNTFBpY3R1cmVFbGVtZW50P24ucGFyZW50RWxlbWVudDpuO2lmKHRoaXMub3B0aW9uKFwidHJhbnNmb3JtUGFyZW50XCIpJiYocD1wLnBhcmVudEVsZW1lbnR8fHApLHAuc3R5bGUudHJhbnNmb3JtPT09dSlyZXR1cm47cC5zdHlsZS50cmFuc2Zvcm09dTtjb25zdHtjb250ZW50V2lkdGg6Zixjb250ZW50SGVpZ2h0Om19PXRoaXMuY2FsY3VsYXRlQ29udGVudERpbSgpO3Mud2lkdGg9ZixzLmhlaWdodD1tLHRoaXMuZW1pdChcImFmdGVyVHJhbnNmb3JtXCIpfXVwZGF0ZU1ldHJpY3MoZT0hMSl7aWYoIXRoaXN8fHRoaXMuc3RhdGU9PT1nLkRlc3Ryb3kpcmV0dXJuO2lmKHRoaXMuaXNDb250ZW50TG9hZGluZylyZXR1cm47Y29uc3R7Y29udGFpbmVyOmksY29udGVudDpufT10aGlzLHM9biBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQsbz1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGE9Z2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRhaW5lcikscj1vLndpZHRoLGw9by5oZWlnaHQsYz1wYXJzZUZsb2F0KGEucGFkZGluZ1RvcCkrcGFyc2VGbG9hdChhLnBhZGRpbmdCb3R0b20pLGg9ci0ocGFyc2VGbG9hdChhLnBhZGRpbmdMZWZ0KStwYXJzZUZsb2F0KGEucGFkZGluZ1JpZ2h0KSksZD1sLWM7dGhpcy5jb250YWluZXJSZWN0PXt3aWR0aDpyLGhlaWdodDpsLGlubmVyV2lkdGg6aCxpbm5lckhlaWdodDpkfTtsZXQgdT10aGlzLm9wdGlvbihcIndpZHRoXCIpfHxcImF1dG9cIixwPXRoaXMub3B0aW9uKFwiaGVpZ2h0XCIpfHxcImF1dG9cIjtcImF1dG9cIj09PXUmJih1PXBhcnNlRmxvYXQobi5kYXRhc2V0LndpZHRofHxcIlwiKXx8KHQ9PntsZXQgZT0wO3JldHVybiBlPXQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50P3QubmF0dXJhbFdpZHRoOnQgaW5zdGFuY2VvZiBTVkdFbGVtZW50P3Qud2lkdGguYmFzZVZhbC52YWx1ZTpNYXRoLm1heCh0Lm9mZnNldFdpZHRoLHQuc2Nyb2xsV2lkdGgpLGV8fDB9KShuKSksXCJhdXRvXCI9PT1wJiYocD1wYXJzZUZsb2F0KG4uZGF0YXNldC5oZWlnaHR8fFwiXCIpfHwodD0+e2xldCBlPTA7cmV0dXJuIGU9dCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/dC5uYXR1cmFsSGVpZ2h0OnQgaW5zdGFuY2VvZiBTVkdFbGVtZW50P3QuaGVpZ2h0LmJhc2VWYWwudmFsdWU6TWF0aC5tYXgodC5vZmZzZXRIZWlnaHQsdC5zY3JvbGxIZWlnaHQpLGV8fDB9KShuKSk7bGV0IGY9bi5wYXJlbnRFbGVtZW50IGluc3RhbmNlb2YgSFRNTFBpY3R1cmVFbGVtZW50P24ucGFyZW50RWxlbWVudDpuO3RoaXMub3B0aW9uKFwidHJhbnNmb3JtUGFyZW50XCIpJiYoZj1mLnBhcmVudEVsZW1lbnR8fGYpO2NvbnN0IG09Zi5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKXx8XCJcIjtmLnN0eWxlLnNldFByb3BlcnR5KFwidHJhbnNmb3JtXCIsXCJub25lXCIsXCJpbXBvcnRhbnRcIikscyYmKGYuc3R5bGUud2lkdGg9XCJcIixmLnN0eWxlLmhlaWdodD1cIlwiKSxmLm9mZnNldEhlaWdodDtjb25zdCBiPW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bGV0IHY9Yi53aWR0aCx5PWIuaGVpZ2h0LHc9MCx4PTA7cyYmKE1hdGguYWJzKHUtdik+MXx8TWF0aC5hYnMocC15KT4xKSYmKHt3aWR0aDp2LGhlaWdodDp5LHRvcDp3LGxlZnQ6eH09KCh0LGUsaSxuKT0+e2NvbnN0IHM9aS9uO3JldHVybiBzPnQvZT8oaT10LG49dC9zKTooaT1lKnMsbj1lKSx7d2lkdGg6aSxoZWlnaHQ6bix0b3A6LjUqKGUtbiksbGVmdDouNSoodC1pKX19KSh2LHksdSxwKSksdGhpcy5jb250ZW50UmVjdD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5jb250ZW50UmVjdCkse3RvcDpiLnRvcC1vLnRvcCt3LGJvdHRvbTpvLmJvdHRvbS1iLmJvdHRvbSt3LGxlZnQ6Yi5sZWZ0LW8ubGVmdCt4LHJpZ2h0Om8ucmlnaHQtYi5yaWdodCt4LGZpdFdpZHRoOnYsZml0SGVpZ2h0Onksd2lkdGg6dixoZWlnaHQ6eSxmdWxsV2lkdGg6dSxmdWxsSGVpZ2h0OnB9KSxmLnN0eWxlLmNzc1RleHQ9bSxzJiYoZi5zdHlsZS53aWR0aD1gJHt2fXB4YCxmLnN0eWxlLmhlaWdodD1gJHt5fXB4YCksdGhpcy5zZXRUcmFuc2Zvcm0oKSwhMCE9PWUmJnRoaXMuZW1pdChcInJlZnJlc2hcIiksdGhpcy5pZ25vcmVCb3VuZHN8fCh0KHRoaXMudGFyZ2V0U2NhbGUpPHQodGhpcy5taW5TY2FsZSk/dGhpcy56b29tVG8odGhpcy5taW5TY2FsZSx7ZnJpY3Rpb246MH0pOnRoaXMudGFyZ2V0U2NhbGU+dGhpcy5tYXhTY2FsZT90aGlzLnpvb21Ubyh0aGlzLm1heFNjYWxlLHtmcmljdGlvbjowfSk6dGhpcy5zdGF0ZT09PWcuSW5pdHx8dGhpcy5jaGVja0JvdW5kcygpLmluQm91bmRzfHx0aGlzLnJlcXVlc3RUaWNrKCkpLHRoaXMudXBkYXRlQ29udHJvbHMoKX1nZXRCb3VuZHMoKXtjb25zdCBlPXRoaXMub3B0aW9uKFwiYm91bmRzXCIpO2lmKFwiYXV0b1wiIT09ZSlyZXR1cm4gZTtjb25zdHtjb250ZW50V2lkdGg6aSxjb250ZW50SGVpZ2h0Om59PXRoaXMuY2FsY3VsYXRlQ29udGVudERpbSh0aGlzLnRhcmdldCk7bGV0IHM9MCxvPTAsYT0wLHI9MDtjb25zdCBsPXRoaXMub3B0aW9uKFwiaW5maW5pdGVcIik7aWYoITA9PT1sfHx0aGlzLmxvY2tlZEF4aXMmJmw9PT10aGlzLmxvY2tlZEF4aXMpcz0tMS8wLGE9MS8wLG89LTEvMCxyPTEvMDtlbHNle2xldHtjb250YWluZXJSZWN0OmUsY29udGVudFJlY3Q6bH09dGhpcyxjPXQodGhpcy5jb250ZW50UmVjdC5maXRXaWR0aCp0aGlzLnRhcmdldFNjYWxlLDFlMyksaD10KHRoaXMuY29udGVudFJlY3QuZml0SGVpZ2h0KnRoaXMudGFyZ2V0U2NhbGUsMWUzKSx7aW5uZXJXaWR0aDpkLGlubmVySGVpZ2h0OnV9PWU7aWYodGhpcy5jb250YWluZXJSZWN0LndpZHRoPT09YyYmKGQ9ZS53aWR0aCksdGhpcy5jb250YWluZXJSZWN0LndpZHRoPT09aCYmKHU9ZS5oZWlnaHQpLGk+ZCl7YT0uNSooaS1kKSxzPS0xKmE7bGV0IHQ9LjUqKGwucmlnaHQtbC5sZWZ0KTtzKz10LGErPXR9aWYodGhpcy5jb250ZW50UmVjdC5maXRXaWR0aD5kJiZpPGQmJihzLT0uNSoodGhpcy5jb250ZW50UmVjdC5maXRXaWR0aC1kKSxhLT0uNSoodGhpcy5jb250ZW50UmVjdC5maXRXaWR0aC1kKSksbj51KXtyPS41KihuLXUpLG89LTEqcjtsZXQgdD0uNSoobC5ib3R0b20tbC50b3ApO28rPXQscis9dH10aGlzLmNvbnRlbnRSZWN0LmZpdEhlaWdodD51JiZuPHUmJihzLT0uNSoodGhpcy5jb250ZW50UmVjdC5maXRIZWlnaHQtdSksYS09LjUqKHRoaXMuY29udGVudFJlY3QuZml0SGVpZ2h0LXUpKX1yZXR1cm57eDp7bWluOnMsbWF4OmF9LHk6e21pbjpvLG1heDpyfX19dXBkYXRlQ29udHJvbHMoKXtjb25zdCBlPXRoaXMsaT1lLmNvbnRhaW5lcix7cGFuTW9kZTpuLGNvbnRlbnRSZWN0OnMsZnVsbFNjYWxlOmEsdGFyZ2V0U2NhbGU6cixjb3ZlclNjYWxlOmwsbWF4U2NhbGU6YyxtaW5TY2FsZTpofT1lO2xldCBkPXt0b2dnbGVNYXg6ci1oPC41KihjLWgpP2M6aCx0b2dnbGVDb3ZlcjpyLWg8LjUqKGwtaCk/bDpoLHRvZ2dsZVpvb206ci1oPC41KihhLWgpP2E6aH1bZS5vcHRpb24oXCJjbGlja1wiKXx8XCJcIl18fGgsdT1lLmNhblpvb21JbigpLHA9ZS5jYW5ab29tT3V0KCksZj1wJiZcImRyYWdcIj09PW47dChyKTx0KGgpJiYhdGhpcy5wYW5Pbmx5Wm9vbWVkJiYoZj0hMCksKHQocy53aWR0aCwxKT50KHMuZml0V2lkdGgsMSl8fHQocy5oZWlnaHQsMSk+dChzLmZpdEhlaWdodCwxKSkmJihmPSEwKSx0KHMud2lkdGgqciwxKTx0KHMuZml0V2lkdGgsMSkmJihmPSExKSxcIm1vdXNlbW92ZVwiPT09biYmKGY9ITEpO2xldCBtPXUmJnQoZCk+dChyKSxnPSFtJiYhZiYmcCYmdChkKTx0KHIpO28oaSx0aGlzLmNuKFwiY2FuWm9vbUluXCIpLG0pLG8oaSx0aGlzLmNuKFwiY2FuWm9vbU91dFwiKSxnKSxvKGksdGhpcy5jbihcImlzRHJhZ2dhYmxlXCIpLGYpO2Zvcihjb25zdCB0IG9mIGkucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGFuem9vbS1hY3Rpb249XCJ6b29tSW5cIl0nKSl1Pyh0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLHQucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIikpOih0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksdC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIikpO2Zvcihjb25zdCB0IG9mIGkucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGFuem9vbS1hY3Rpb249XCJ6b29tT3V0XCJdJykpcD8odC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSx0LnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpKToodC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiXCIpLHQuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIixcIi0xXCIpKTtmb3IoY29uc3QgdCBvZiBpLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXBhbnpvb20tYWN0aW9uPVwidG9nZ2xlWm9vbVwiXSxbZGF0YS1wYW56b29tLWFjdGlvbj1cIml0ZXJhdGVab29tXCJdJykpe3V8fHA/KHQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSk6KHQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcIlwiKSx0LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCItMVwiKSk7Y29uc3QgZT10LnF1ZXJ5U2VsZWN0b3IoXCJnXCIpO2UmJihlLnN0eWxlLmRpc3BsYXk9dT9cIlwiOlwibm9uZVwiKX19cGFuVG8oe3g6dD10aGlzLnRhcmdldC5lLHk6ZT10aGlzLnRhcmdldC5mLHNjYWxlOmk9dGhpcy50YXJnZXRTY2FsZSxmcmljdGlvbjpuPXRoaXMub3B0aW9uKFwiZnJpY3Rpb25cIiksYW5nbGU6cz0wLG9yaWdpblg6bz0wLG9yaWdpblk6YT0wLGZsaXBYOnI9ITEsZmxpcFk6bD0hMSxpZ25vcmVCb3VuZHM6Yz0hMX0pe3RoaXMuc3RhdGUhPT1nLkRlc3Ryb3kmJnRoaXMuYXBwbHlDaGFuZ2Uoe3Bhblg6dC10aGlzLnRhcmdldC5lLHBhblk6ZS10aGlzLnRhcmdldC5mLHNjYWxlOmkvdGhpcy50YXJnZXRTY2FsZSxhbmdsZTpzLG9yaWdpblg6byxvcmlnaW5ZOmEsZnJpY3Rpb246bixmbGlwWDpyLGZsaXBZOmwsaWdub3JlQm91bmRzOmN9KX1hcHBseUNoYW5nZSh7cGFuWDplPTAscGFuWTppPTAsc2NhbGU6bj0xLGFuZ2xlOnM9MCxvcmlnaW5YOm89LXRoaXMuY3VycmVudC5lLG9yaWdpblk6YT0tdGhpcy5jdXJyZW50LmYsZnJpY3Rpb246cj10aGlzLm9wdGlvbihcImZyaWN0aW9uXCIpLGZsaXBYOmw9ITEsZmxpcFk6Yz0hMSxpZ25vcmVCb3VuZHM6aD0hMSxib3VuY2U6ZD10aGlzLm9wdGlvbihcImJvdW5jZVwiKX0pe2lmKHRoaXMuc3RhdGU9PT1nLkRlc3Ryb3kpcmV0dXJuO3RoaXMuckFGJiYoY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yQUYpLHRoaXMuckFGPW51bGwpLHRoaXMuZnJpY3Rpb249cnx8MCx0aGlzLmlnbm9yZUJvdW5kcz1oO2NvbnN0e2N1cnJlbnQ6dX09dGhpcyxwPXUuZSxmPXUuZixtPXRoaXMuZ2V0TWF0cml4KHRoaXMudGFyZ2V0KTtsZXQgdj0obmV3IERPTU1hdHJpeCkudHJhbnNsYXRlKHAsZikudHJhbnNsYXRlKG8sYSkudHJhbnNsYXRlKGUsaSk7aWYodGhpcy5vcHRpb24oXCJ6b29tXCIpKXtpZighaCl7Y29uc3QgdD10aGlzLnRhcmdldFNjYWxlLGU9dGhpcy5taW5TY2FsZSxpPXRoaXMubWF4U2NhbGU7dCpuPGUmJihuPWUvdCksdCpuPmkmJihuPWkvdCl9dj12LnNjYWxlKG4pfXY9di50cmFuc2xhdGUoLW8sLWEpLnRyYW5zbGF0ZSgtcCwtZikubXVsdGlwbHkobSkscyYmKHY9di5yb3RhdGUocykpLGwmJih2PXYuc2NhbGUoLTEsMSkpLGMmJih2PXYuc2NhbGUoMSwtMSkpO2Zvcihjb25zdCBlIG9mIGIpXCJlXCIhPT1lJiZcImZcIiE9PWUmJih2W2VdPnRoaXMubWluU2NhbGUrMWUtNXx8dltlXTx0aGlzLm1pblNjYWxlLTFlLTUpP3RoaXMudGFyZ2V0W2VdPXZbZV06dGhpcy50YXJnZXRbZV09dCh2W2VdLDFlMyk7KHRoaXMudGFyZ2V0U2NhbGU8dGhpcy5zY2FsZXx8TWF0aC5hYnMobi0xKT4uMXx8XCJtb3VzZW1vdmVcIj09PXRoaXMucGFuTW9kZXx8ITE9PT1kKSYmIWgmJnRoaXMuY2xhbXBUYXJnZXRCb3VuZHMoKSx0aGlzLmlzUmVzdGluZ3x8KHRoaXMuc3RhdGU9Zy5QYW5uaW5nLHRoaXMucmVxdWVzdFRpY2soKSl9c3RvcCh0PSExKXtpZih0aGlzLnN0YXRlPT09Zy5Jbml0fHx0aGlzLnN0YXRlPT09Zy5EZXN0cm95KXJldHVybjtjb25zdCBlPXRoaXMuaXNUaWNraW5nO3RoaXMuckFGJiYoY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yQUYpLHRoaXMuckFGPW51bGwpLHRoaXMuaXNCb3VuY2luZ1g9ITEsdGhpcy5pc0JvdW5jaW5nWT0hMTtmb3IoY29uc3QgZSBvZiBiKXRoaXMudmVsb2NpdHlbZV09MCxcImN1cnJlbnRcIj09PXQ/dGhpcy5jdXJyZW50W2VdPXRoaXMudGFyZ2V0W2VdOlwidGFyZ2V0XCI9PT10JiYodGhpcy50YXJnZXRbZV09dGhpcy5jdXJyZW50W2VdKTt0aGlzLnNldFRyYW5zZm9ybSgpLEUodGhpcy5jb250YWluZXIsXCJpcy1zY2FsaW5nXCIpLEUodGhpcy5jb250YWluZXIsXCJpcy1hbmltYXRpbmdcIiksdGhpcy5pc1RpY2tpbmc9ITEsdGhpcy5zdGF0ZT1nLlJlYWR5LGUmJih0aGlzLmVtaXQoXCJlbmRBbmltYXRpb25cIiksdGhpcy51cGRhdGVDb250cm9scygpKX1yZXF1ZXN0VGljaygpe3RoaXMuaXNUaWNraW5nfHwodGhpcy5lbWl0KFwic3RhcnRBbmltYXRpb25cIiksdGhpcy51cGRhdGVDb250cm9scygpLFModGhpcy5jb250YWluZXIsXCJpcy1hbmltYXRpbmdcIiksdGhpcy5pc1NjYWxpbmcmJlModGhpcy5jb250YWluZXIsXCJpcy1zY2FsaW5nXCIpKSx0aGlzLmlzVGlja2luZz0hMCx0aGlzLnJBRnx8KHRoaXMuckFGPXJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9PnRoaXMuYW5pbWF0ZSgpKSkpfXBhbldpdGhNb3VzZShlLGk9dGhpcy5vcHRpb24oXCJtb3VzZU1vdmVGcmljdGlvblwiKSl7aWYodGhpcy5wbW1lPWUsXCJtb3VzZW1vdmVcIiE9PXRoaXMucGFuTW9kZXx8IWUpcmV0dXJuO2lmKHQodGhpcy50YXJnZXRTY2FsZSk8PXQodGhpcy5taW5TY2FsZSkpcmV0dXJuO3RoaXMuZW1pdChcIm1vdXNlTW92ZVwiLGUpO2NvbnN0e2NvbnRhaW5lcjpuLGNvbnRhaW5lclJlY3Q6cyxjb250ZW50UmVjdDpvfT10aGlzLGE9cy53aWR0aCxyPXMuaGVpZ2h0LGw9bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPShlLmNsaWVudFh8fDApLWwubGVmdCxoPShlLmNsaWVudFl8fDApLWwudG9wO2xldHtjb250ZW50V2lkdGg6ZCxjb250ZW50SGVpZ2h0OnV9PXRoaXMuY2FsY3VsYXRlQ29udGVudERpbSh0aGlzLnRhcmdldCk7Y29uc3QgcD10aGlzLm9wdGlvbihcIm1vdXNlTW92ZUZhY3RvclwiKTtwPjEmJihkIT09YSYmKGQqPXApLHUhPT1yJiYodSo9cCkpO2xldCBmPS41KihkLWEpLWMvYSoxMDAvMTAwKihkLWEpO2YrPS41KihvLnJpZ2h0LW8ubGVmdCk7bGV0IG09LjUqKHUtciktaC9yKjEwMC8xMDAqKHUtcik7bSs9LjUqKG8uYm90dG9tLW8udG9wKSx0aGlzLmFwcGx5Q2hhbmdlKHtwYW5YOmYtdGhpcy50YXJnZXQuZSxwYW5ZOm0tdGhpcy50YXJnZXQuZixmcmljdGlvbjppfSl9em9vbVdpdGhXaGVlbChlKXtpZih0aGlzLnN0YXRlPT09Zy5EZXN0cm95fHx0aGlzLnN0YXRlPT09Zy5Jbml0KXJldHVybjtjb25zdCBpPURhdGUubm93KCk7aWYoaS10aGlzLnB3dDw0NSlyZXR1cm4gdm9pZCBlLnByZXZlbnREZWZhdWx0KCk7dGhpcy5wd3Q9aTt2YXIgbj1bLWUuZGVsdGFYfHwwLC1lLmRlbHRhWXx8MCwtZS5kZXRhaWx8fDBdLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnMoZSk+TWF0aC5hYnModCk/ZTp0fSkpO2NvbnN0IHM9TWF0aC5tYXgoLTEsTWF0aC5taW4oMSxuKSkse3RhcmdldFNjYWxlOm8sbWF4U2NhbGU6YSxtaW5TY2FsZTpyfT10aGlzO2xldCBsPW8qKDEwMCs0NSpzKS8xMDA7dChsKTx0KHIpJiZ0KG8pPD10KHIpPyh0aGlzLmN3ZCs9TWF0aC5hYnMocyksbD1yKTp0KGwpPnQoYSkmJnQobyk+PXQoYSk/KHRoaXMuY3dkKz1NYXRoLmFicyhzKSxsPWEpOih0aGlzLmN3ZD0wLGw9TWF0aC5tYXgoTWF0aC5taW4obCxhKSxyKSksdGhpcy5jd2Q+dGhpcy5vcHRpb24oXCJ3aGVlbExpbWl0XCIpfHwoZS5wcmV2ZW50RGVmYXVsdCgpLHQobCkhPT10KG8pJiZ0aGlzLnpvb21UbyhsLHtldmVudDplfSkpfWNhblpvb21Jbigpe3JldHVybiB0aGlzLm9wdGlvbihcInpvb21cIikmJih0KHRoaXMuY29udGVudFJlY3Qud2lkdGgsMSk8dCh0aGlzLmNvbnRlbnRSZWN0LmZpdFdpZHRoLDEpfHx0KHRoaXMudGFyZ2V0U2NhbGUpPHQodGhpcy5tYXhTY2FsZSkpfWNhblpvb21PdXQoKXtyZXR1cm4gdGhpcy5vcHRpb24oXCJ6b29tXCIpJiZ0KHRoaXMudGFyZ2V0U2NhbGUpPnQodGhpcy5taW5TY2FsZSl9em9vbUluKHQ9MS4yNSxlKXt0aGlzLnpvb21Ubyh0aGlzLnRhcmdldFNjYWxlKnQsZSl9em9vbU91dCh0PS44LGUpe3RoaXMuem9vbVRvKHRoaXMudGFyZ2V0U2NhbGUqdCxlKX16b29tVG9GaXQodCl7dGhpcy56b29tVG8oXCJmaXRcIix0KX16b29tVG9Db3Zlcih0KXt0aGlzLnpvb21UbyhcImNvdmVyXCIsdCl9em9vbVRvRnVsbCh0KXt0aGlzLnpvb21UbyhcImZ1bGxcIix0KX16b29tVG9NYXgodCl7dGhpcy56b29tVG8oXCJtYXhcIix0KX10b2dnbGVab29tKHQpe3RoaXMuem9vbVRvKHRoaXMudGFyZ2V0U2NhbGUtdGhpcy5taW5TY2FsZTwuNSoodGhpcy5mdWxsU2NhbGUtdGhpcy5taW5TY2FsZSk/XCJmdWxsXCI6XCJmaXRcIix0KX10b2dnbGVNYXgodCl7dGhpcy56b29tVG8odGhpcy50YXJnZXRTY2FsZS10aGlzLm1pblNjYWxlPC41Kih0aGlzLm1heFNjYWxlLXRoaXMubWluU2NhbGUpP1wibWF4XCI6XCJmaXRcIix0KX10b2dnbGVDb3Zlcih0KXt0aGlzLnpvb21Ubyh0aGlzLnRhcmdldFNjYWxlLXRoaXMubWluU2NhbGU8LjUqKHRoaXMuY292ZXJTY2FsZS10aGlzLm1pblNjYWxlKT9cImNvdmVyXCI6XCJmaXRcIix0KX1pdGVyYXRlWm9vbSh0KXt0aGlzLnpvb21UbyhcIm5leHRcIix0KX16b29tVG8odD0xLHtmcmljdGlvbjplPVwiYXV0b1wiLG9yaWdpblg6aT0wLG9yaWdpblk6bj0wLGV2ZW50OnN9PXt9KXtpZih0aGlzLmlzQ29udGVudExvYWRpbmd8fHRoaXMuc3RhdGU9PT1nLkRlc3Ryb3kpcmV0dXJuO2NvbnN0e3RhcmdldFNjYWxlOm99PXRoaXM7dGhpcy5zdG9wKCk7bGV0IGE9MTtpZihcIm1vdXNlbW92ZVwiPT09dGhpcy5wYW5Nb2RlJiYocz10aGlzLnBtbWV8fHMpLHMpe2NvbnN0IHQ9dGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9cy5jbGllbnRYfHwwLG89cy5jbGllbnRZfHwwO2k9ZS10LmxlZnQtLjUqdC53aWR0aCxuPW8tdC50b3AtLjUqdC5oZWlnaHR9Y29uc3Qgcj10aGlzLmZ1bGxTY2FsZSxsPXRoaXMubWF4U2NhbGU7bGV0IGM9dGhpcy5jb3ZlclNjYWxlO1wibnVtYmVyXCI9PXR5cGVvZiB0P2E9dC9vOihcIm5leHRcIj09PXQmJihyLWM8LjImJihjPXIpLHQ9bzxyLTFlLTU/XCJmdWxsXCI6bzxsLTFlLTU/XCJtYXhcIjpcImZpdFwiKSxhPVwiZnVsbFwiPT09dD9yL298fDE6XCJjb3ZlclwiPT09dD9jL298fDE6XCJtYXhcIj09PXQ/bC9vfHwxOjEvb3x8MSksZT1cImF1dG9cIj09PWU/YT4xPy4xNTouMjU6ZSx0aGlzLmFwcGx5Q2hhbmdlKHtzY2FsZTphLG9yaWdpblg6aSxvcmlnaW5ZOm4sZnJpY3Rpb246ZX0pLHMmJlwibW91c2Vtb3ZlXCI9PT10aGlzLnBhbk1vZGUmJnRoaXMucGFuV2l0aE1vdXNlKHMsZSl9cm90YXRlQ0NXKCl7dGhpcy5hcHBseUNoYW5nZSh7YW5nbGU6LTkwfSl9cm90YXRlQ1coKXt0aGlzLmFwcGx5Q2hhbmdlKHthbmdsZTo5MH0pfWZsaXBYKCl7dGhpcy5hcHBseUNoYW5nZSh7ZmxpcFg6ITB9KX1mbGlwWSgpe3RoaXMuYXBwbHlDaGFuZ2Uoe2ZsaXBZOiEwfSl9Zml0WCgpe3RoaXMuc3RvcChcInRhcmdldFwiKTtjb25zdHtjb250YWluZXJSZWN0OnQsY29udGVudFJlY3Q6ZSx0YXJnZXQ6aX09dGhpczt0aGlzLmFwcGx5Q2hhbmdlKHtwYW5YOi41KnQud2lkdGgtKGUubGVmdCsuNSplLmZpdFdpZHRoKS1pLmUscGFuWTouNSp0LmhlaWdodC0oZS50b3ArLjUqZS5maXRIZWlnaHQpLWkuZixzY2FsZTp0LndpZHRoL2UuZml0V2lkdGgvdGhpcy50YXJnZXRTY2FsZSxvcmlnaW5YOjAsb3JpZ2luWTowLGlnbm9yZUJvdW5kczohMH0pfWZpdFkoKXt0aGlzLnN0b3AoXCJ0YXJnZXRcIik7Y29uc3R7Y29udGFpbmVyUmVjdDp0LGNvbnRlbnRSZWN0OmUsdGFyZ2V0Oml9PXRoaXM7dGhpcy5hcHBseUNoYW5nZSh7cGFuWDouNSp0LndpZHRoLShlLmxlZnQrLjUqZS5maXRXaWR0aCktaS5lLHBhblk6LjUqdC5pbm5lckhlaWdodC0oZS50b3ArLjUqZS5maXRIZWlnaHQpLWkuZixzY2FsZTp0LmhlaWdodC9lLmZpdEhlaWdodC90aGlzLnRhcmdldFNjYWxlLG9yaWdpblg6MCxvcmlnaW5ZOjAsaWdub3JlQm91bmRzOiEwfSl9dG9nZ2xlRlMoKXtjb25zdHtjb250YWluZXI6dH09dGhpcyxlPXRoaXMuY24oXCJpbkZ1bGxzY3JlZW5cIiksaT10aGlzLmNuKFwiaHRtbEhhc0Z1bGxzY3JlZW5cIik7dC5jbGFzc0xpc3QudG9nZ2xlKGUpO2NvbnN0IG49dC5jbGFzc0xpc3QuY29udGFpbnMoZSk7bj8oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLm9uS2V5ZG93biwhMCkpOihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMub25LZXlkb3duLCEwKSksdGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5lbWl0KG4/XCJlbnRlckZTXCI6XCJleGl0RlNcIil9Z2V0TWF0cml4KHQ9dGhpcy5jdXJyZW50KXtjb25zdHthOmUsYjppLGM6bixkOnMsZTpvLGY6YX09dDtyZXR1cm4gbmV3IERPTU1hdHJpeChbZSxpLG4scyxvLGFdKX1yZXNldCh0KXtpZih0aGlzLnN0YXRlIT09Zy5Jbml0JiZ0aGlzLnN0YXRlIT09Zy5EZXN0cm95KXt0aGlzLnN0b3AoXCJjdXJyZW50XCIpO2Zvcihjb25zdCB0IG9mIGIpdGhpcy50YXJnZXRbdF09UFt0XTt0aGlzLnRhcmdldC5hPXRoaXMubWluU2NhbGUsdGhpcy50YXJnZXQuZD10aGlzLm1pblNjYWxlLHRoaXMuY2xhbXBUYXJnZXRCb3VuZHMoKSx0aGlzLmlzUmVzdGluZ3x8KHRoaXMuZnJpY3Rpb249dm9pZCAwPT09dD90aGlzLm9wdGlvbihcImZyaWN0aW9uXCIpOnQsdGhpcy5zdGF0ZT1nLlBhbm5pbmcsdGhpcy5yZXF1ZXN0VGljaygpKX19ZGVzdHJveSgpe3RoaXMuc3RvcCgpLHRoaXMuc3RhdGU9Zy5EZXN0cm95LHRoaXMuZGV0YWNoRXZlbnRzKCksdGhpcy5kZXRhY2hPYnNlcnZlcigpO2NvbnN0e2NvbnRhaW5lcjp0LGNvbnRlbnQ6ZX09dGhpcyxpPXRoaXMub3B0aW9uKFwiY2xhc3Nlc1wiKXx8e307Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LnZhbHVlcyhpKSl0LmNsYXNzTGlzdC5yZW1vdmUoZStcIlwiKTtlJiYoZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMub25Mb2FkKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHRoaXMub25FcnJvcikpLHRoaXMuZGV0YWNoUGx1Z2lucygpfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoVCxcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVCxcIlBsdWdpbnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e319KTtjb25zdCBPPWZ1bmN0aW9uKHQsZSl7bGV0IGk9ITA7cmV0dXJuKC4uLm4pPT57aSYmKGk9ITEsdCguLi5uKSxzZXRUaW1lb3V0KCgoKT0+e2k9ITB9KSxlKSl9fSxBPSh0LGUpPT57bGV0IGk9W107cmV0dXJuIHQuY2hpbGROb2Rlcy5mb3JFYWNoKCh0PT57dC5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHxlJiYhdC5tYXRjaGVzKGUpfHxpLnB1c2godCl9KSksaX0sej17dmlld3BvcnQ6bnVsbCx0cmFjazpudWxsLGVuYWJsZWQ6ITAsc2xpZGVzOltdLGF4aXM6XCJ4XCIsdHJhbnNpdGlvbjpcImZhZGVcIixwcmVsb2FkOjEsc2xpZGVzUGVyUGFnZTpcImF1dG9cIixpbml0aWFsUGFnZTowLGZyaWN0aW9uOi4xMixQYW56b29tOntkZWNlbEZyaWN0aW9uOi4xMn0sY2VudGVyOiEwLGluZmluaXRlOiEwLGZpbGw6ITAsZHJhZ0ZyZWU6ITEsYWRhcHRpdmVIZWlnaHQ6ITEsZGlyZWN0aW9uOlwibHRyXCIsY2xhc3Nlczp7Y29udGFpbmVyOlwiZi1jYXJvdXNlbFwiLHZpZXdwb3J0OlwiZi1jYXJvdXNlbF9fdmlld3BvcnRcIix0cmFjazpcImYtY2Fyb3VzZWxfX3RyYWNrXCIsc2xpZGU6XCJmLWNhcm91c2VsX19zbGlkZVwiLGlzTFRSOlwiaXMtbHRyXCIsaXNSVEw6XCJpcy1ydGxcIixpc0hvcml6b250YWw6XCJpcy1ob3Jpem9udGFsXCIsaXNWZXJ0aWNhbDpcImlzLXZlcnRpY2FsXCIsaW5UcmFuc2l0aW9uOlwiaW4tdHJhbnNpdGlvblwiLGlzU2VsZWN0ZWQ6XCJpcy1zZWxlY3RlZFwifSxsMTBuOntORVhUOlwiTmV4dCBzbGlkZVwiLFBSRVY6XCJQcmV2aW91cyBzbGlkZVwiLEdPVE86XCJHbyB0byBzbGlkZSAjJWRcIn19O3ZhciBMOyFmdW5jdGlvbih0KXt0W3QuSW5pdD0wXT1cIkluaXRcIix0W3QuUmVhZHk9MV09XCJSZWFkeVwiLHRbdC5EZXN0cm95PTJdPVwiRGVzdHJveVwifShMfHwoTD17fSkpO2NvbnN0IFI9dD0+e2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD17aHRtbDp0fSksISh0IGluc3RhbmNlb2YgU3RyaW5nfHx0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKXtjb25zdCBlPXQudGh1bWI7dm9pZCAwIT09ZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYodC50aHVtYlNyYz1lKSxlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCYmKHQudGh1bWJFbD1lLHQudGh1bWJFbFNyYz1lLnNyYyx0LnRodW1iU3JjPWUuc3JjKSxkZWxldGUgdC50aHVtYil9cmV0dXJuIE9iamVjdC5hc3NpZ24oe2h0bWw6XCJcIixlbDpudWxsLGlzRG9tOiExLGNsYXNzOlwiXCIsaW5kZXg6LTEsZGltOjAsZ2FwOjAscG9zOjAsdHJhbnNpdGlvbjohMX0sdCl9LGs9KHQ9e30pPT5PYmplY3QuYXNzaWduKHtpbmRleDotMSxzbGlkZXM6W10sZGltOjAscG9zOi0xfSx0KTtjbGFzcyBJIGV4dGVuZHMgZntjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaW5zdGFuY2VcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pfWF0dGFjaCgpe31kZXRhY2goKXt9fWNvbnN0IEQ9e2NsYXNzZXM6e2xpc3Q6XCJmLWNhcm91c2VsX19kb3RzXCIsaXNEeW5hbWljOlwiaXMtZHluYW1pY1wiLGhhc0RvdHM6XCJoYXMtZG90c1wiLGRvdDpcImYtY2Fyb3VzZWxfX2RvdFwiLGlzQmVmb3JlUHJldjpcImlzLWJlZm9yZS1wcmV2XCIsaXNQcmV2OlwiaXMtcHJldlwiLGlzQ3VycmVudDpcImlzLWN1cnJlbnRcIixpc05leHQ6XCJpcy1uZXh0XCIsaXNBZnRlck5leHQ6XCJpcy1hZnRlci1uZXh0XCJ9LGRvdFRwbDonPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1jYXJvdXNlbC1wYWdlPVwiJWlcIiBhcmlhLWxhYmVsPVwie3tHT1RPfX1cIj48c3BhbiBjbGFzcz1cImYtY2Fyb3VzZWxfX2RvdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48L2J1dHRvbj4nLGR5bmFtaWNGcm9tOjExLG1heENvdW50OjEvMCxtaW5Db3VudDoyfTtjbGFzcyBGIGV4dGVuZHMgSXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0R5bmFtaWNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ITF9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImxpc3RcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pfW9uUmVmcmVzaCgpe3RoaXMucmVmcmVzaCgpfWJ1aWxkKCl7bGV0IHQ9dGhpcy5saXN0O3JldHVybiB0fHwodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIiksUyh0LHRoaXMuY24oXCJsaXN0XCIpKSx0LnNldEF0dHJpYnV0ZShcInJvbGVcIixcInRhYmxpc3RcIiksdGhpcy5pbnN0YW5jZS5jb250YWluZXIuYXBwZW5kQ2hpbGQodCksUyh0aGlzLmluc3RhbmNlLmNvbnRhaW5lcix0aGlzLmNuKFwiaGFzRG90c1wiKSksdGhpcy5saXN0PXQpLHR9cmVmcmVzaCgpe3ZhciB0O2NvbnN0IGU9dGhpcy5pbnN0YW5jZS5wYWdlcy5sZW5ndGgsaT1NYXRoLm1pbigyLHRoaXMub3B0aW9uKFwibWluQ291bnRcIikpLG49TWF0aC5tYXgoMmUzLHRoaXMub3B0aW9uKFwibWF4Q291bnRcIikpLHM9dGhpcy5vcHRpb24oXCJkeW5hbWljRnJvbVwiKTtpZihlPGl8fGU+bilyZXR1cm4gdm9pZCB0aGlzLmNsZWFudXAoKTtjb25zdCBhPVwibnVtYmVyXCI9PXR5cGVvZiBzJiZlPjUmJmU+PXMscj0hdGhpcy5saXN0fHx0aGlzLmlzRHluYW1pYyE9PWF8fHRoaXMubGlzdC5jaGlsZHJlbi5sZW5ndGghPT1lO3ImJnRoaXMuY2xlYW51cCgpO2NvbnN0IGw9dGhpcy5idWlsZCgpO2lmKG8obCx0aGlzLmNuKFwiaXNEeW5hbWljXCIpLCEhYSkscilmb3IobGV0IHQ9MDt0PGU7dCsrKWwuYXBwZW5kKHRoaXMuY3JlYXRlSXRlbSh0KSk7bGV0IGMsaD0wO2Zvcihjb25zdCBlIG9mWy4uLmwuY2hpbGRyZW5dKXtjb25zdCBpPWg9PT10aGlzLmluc3RhbmNlLnBhZ2U7aSYmKGM9ZSksbyhlLHRoaXMuY24oXCJpc0N1cnJlbnRcIiksaSksbnVsbD09PSh0PWUuY2hpbGRyZW5bMF0pfHx2b2lkIDA9PT10fHx0LnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIixpP1widHJ1ZVwiOlwiZmFsc2VcIik7Zm9yKGNvbnN0IHQgb2ZbXCJpc0JlZm9yZVByZXZcIixcImlzUHJldlwiLFwiaXNOZXh0XCIsXCJpc0FmdGVyTmV4dFwiXSlFKGUsdGhpcy5jbih0KSk7aCsrfWlmKGM9Y3x8bC5maXJzdENoaWxkLGEmJmMpe2NvbnN0IHQ9Yy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLGU9dCYmdC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1ModCx0aGlzLmNuKFwiaXNQcmV2XCIpKSxTKGUsdGhpcy5jbihcImlzQmVmb3JlUHJldlwiKSk7Y29uc3QgaT1jLm5leHRFbGVtZW50U2libGluZyxuPWkmJmkubmV4dEVsZW1lbnRTaWJsaW5nO1MoaSx0aGlzLmNuKFwiaXNOZXh0XCIpKSxTKG4sdGhpcy5jbihcImlzQWZ0ZXJOZXh0XCIpKX10aGlzLmlzRHluYW1pYz1hfWNyZWF0ZUl0ZW0odD0wKXt2YXIgZTtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtpLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKTtjb25zdCBzPW4odGhpcy5pbnN0YW5jZS5sb2NhbGl6ZSh0aGlzLm9wdGlvbihcImRvdFRwbFwiKSxbW1wiJWRcIix0KzFdXSkucmVwbGFjZSgvXFwlaS9nLHQrXCJcIikpO3JldHVybiBpLmFwcGVuZENoaWxkKHMpLG51bGw9PT0oZT1pLmNoaWxkcmVuWzBdKXx8dm9pZCAwPT09ZXx8ZS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJ0YWJcIiksaX1jbGVhbnVwKCl7dGhpcy5saXN0JiYodGhpcy5saXN0LnJlbW92ZSgpLHRoaXMubGlzdD1udWxsKSx0aGlzLmlzRHluYW1pYz0hMSxFKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyLHRoaXMuY24oXCJoYXNEb3RzXCIpKX1hdHRhY2goKXt0aGlzLmluc3RhbmNlLm9uKFtcInJlZnJlc2hcIixcImNoYW5nZVwiXSx0aGlzLm9uUmVmcmVzaCl9ZGV0YWNoKCl7dGhpcy5pbnN0YW5jZS5vZmYoW1wicmVmcmVzaFwiLFwiY2hhbmdlXCJdLHRoaXMub25SZWZyZXNoKSx0aGlzLmNsZWFudXAoKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KEYsXCJkZWZhdWx0c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpEfSk7Y2xhc3MgaiBleHRlbmRzIEl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGFpbmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInByZXZcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibmV4dFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSl9b25SZWZyZXNoKCl7Y29uc3QgdD10aGlzLmluc3RhbmNlLGU9dC5wYWdlcy5sZW5ndGgsaT10LnBhZ2U7aWYoZTwyKXJldHVybiB2b2lkIHRoaXMuY2xlYW51cCgpO3RoaXMuYnVpbGQoKTtsZXQgbj10aGlzLnByZXYscz10aGlzLm5leHQ7biYmcyYmKG4ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikscy5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSx0LmlzSW5maW5pdGV8fChpPD0wJiZuLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksaT49ZS0xJiZzLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIikpKX1jcmVhdGVCdXR0b24odCl7Y29uc3QgZT10aGlzLmluc3RhbmNlLGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtpLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCIwXCIpLGkuc2V0QXR0cmlidXRlKFwidGl0bGVcIixlLmxvY2FsaXplKGB7eyR7dC50b1VwcGVyQ2FzZSgpfX19YCkpLFMoaSx0aGlzLmNuKFwiYnV0dG9uXCIpK1wiIFwiK3RoaXMuY24oXCJuZXh0XCI9PT10P1wiaXNOZXh0XCI6XCJpc1ByZXZcIikpO2NvbnN0IG49ZS5pc1JUTD9cIm5leHRcIj09PXQ/XCJwcmV2XCI6XCJuZXh0XCI6dDt2YXIgcztyZXR1cm4gaS5pbm5lckhUTUw9ZS5sb2NhbGl6ZSh0aGlzLm9wdGlvbihgJHtufVRwbGApKSxpLmRhdGFzZXRbYGNhcm91c2VsJHtzPXQscz9zLm1hdGNoKFwiXlthLXpdXCIpP3MuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcy5zdWJzdHJpbmcoMSk6czpcIlwifWBdPVwidHJ1ZVwiLGl9YnVpbGQoKXtsZXQgdD10aGlzLmNvbnRhaW5lcjt0fHwodGhpcy5jb250YWluZXI9dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFModCx0aGlzLmNuKFwiY29udGFpbmVyXCIpKSx0aGlzLmluc3RhbmNlLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0KSksdGhpcy5uZXh0fHwodGhpcy5uZXh0PXQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVCdXR0b24oXCJuZXh0XCIpKSksdGhpcy5wcmV2fHwodGhpcy5wcmV2PXQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVCdXR0b24oXCJwcmV2XCIpKSl9Y2xlYW51cCgpe3RoaXMucHJldiYmdGhpcy5wcmV2LnJlbW92ZSgpLHRoaXMubmV4dCYmdGhpcy5uZXh0LnJlbW92ZSgpLHRoaXMuY29udGFpbmVyJiZ0aGlzLmNvbnRhaW5lci5yZW1vdmUoKSx0aGlzLnByZXY9bnVsbCx0aGlzLm5leHQ9bnVsbCx0aGlzLmNvbnRhaW5lcj1udWxsfWF0dGFjaCgpe3RoaXMuaW5zdGFuY2Uub24oW1wicmVmcmVzaFwiLFwiY2hhbmdlXCJdLHRoaXMub25SZWZyZXNoKX1kZXRhY2goKXt0aGlzLmluc3RhbmNlLm9mZihbXCJyZWZyZXNoXCIsXCJjaGFuZ2VcIl0sdGhpcy5vblJlZnJlc2gpLHRoaXMuY2xlYW51cCgpfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoaixcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOntjbGFzc2VzOntjb250YWluZXI6XCJmLWNhcm91c2VsX19uYXZcIixidXR0b246XCJmLWJ1dHRvblwiLGlzTmV4dDpcImlzLW5leHRcIixpc1ByZXY6XCJpcy1wcmV2XCJ9LG5leHRUcGw6JzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB0YWJpbmRleD1cIi0xXCI+PHBhdGggZD1cIk05IDNsOSA5LTkgOVwiLz48L3N2Zz4nLHByZXZUcGw6JzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB0YWJpbmRleD1cIi0xXCI+PHBhdGggZD1cIk0xNSAzbC05IDkgOSA5XCIvPjwvc3ZnPid9fSk7Y2xhc3MgSCBleHRlbmRzIEl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic2VsZWN0ZWRJbmRleFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0YXJnZXRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibmF2XCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KX1hZGRBc1RhcmdldEZvcih0KXt0aGlzLnRhcmdldD10aGlzLmluc3RhbmNlLHRoaXMubmF2PXQsdGhpcy5hdHRhY2hFdmVudHMoKX1hZGRBc05hdkZvcih0KXt0aGlzLm5hdj10aGlzLmluc3RhbmNlLHRoaXMudGFyZ2V0PXQsdGhpcy5hdHRhY2hFdmVudHMoKX1hdHRhY2hFdmVudHMoKXt0aGlzLm5hdiYmdGhpcy50YXJnZXQmJih0aGlzLm5hdi5vcHRpb25zLmluaXRpYWxTbGlkZT10aGlzLnRhcmdldC5vcHRpb25zLmluaXRpYWxQYWdlLHRoaXMubmF2Lm9uKFwicmVhZHlcIix0aGlzLm9uTmF2UmVhZHkpLHRoaXMubmF2LnN0YXRlPT09TC5SZWFkeSYmdGhpcy5vbk5hdlJlYWR5KHRoaXMubmF2KSx0aGlzLnRhcmdldC5vbihcInJlYWR5XCIsdGhpcy5vblRhcmdldFJlYWR5KSx0aGlzLnRhcmdldC5zdGF0ZT09PUwuUmVhZHkmJnRoaXMub25UYXJnZXRSZWFkeSh0aGlzLnRhcmdldCkpfW9uTmF2UmVhZHkodCl7dC5vbihcImNyZWF0ZVNsaWRlXCIsdGhpcy5vbk5hdkNyZWF0ZVNsaWRlKSx0Lm9uKFwiUGFuem9vbS5jbGlja1wiLHRoaXMub25OYXZDbGljayksdC5vbihcIlBhbnpvb20udG91Y2hFbmRcIix0aGlzLm9uTmF2VG91Y2gpLHRoaXMub25UYXJnZXRDaGFuZ2UoKX1vblRhcmdldFJlYWR5KHQpe3Qub24oXCJjaGFuZ2VcIix0aGlzLm9uVGFyZ2V0Q2hhbmdlKSx0Lm9uKFwiUGFuem9vbS5yZWZyZXNoXCIsdGhpcy5vblRhcmdldENoYW5nZSksdGhpcy5vblRhcmdldENoYW5nZSgpfW9uTmF2Q2xpY2sodCxlLGkpe2kucG9pbnRlclR5cGV8fHRoaXMub25OYXZUb3VjaCh0LHQucGFuem9vbSxpKX1vbk5hdlRvdWNoKHQsZSxpKXt2YXIgbixzO2lmKE1hdGguYWJzKGUuZHJhZ09mZnNldC54KT4zfHxNYXRoLmFicyhlLmRyYWdPZmZzZXQueSk+MylyZXR1cm47Y29uc3Qgbz1pLnRhcmdldCx7bmF2OmEsdGFyZ2V0OnJ9PXRoaXM7aWYoIWF8fCFyfHwhbylyZXR1cm47Y29uc3QgbD1vLmNsb3Nlc3QoXCJbZGF0YS1pbmRleF1cIik7aWYoaS5zdG9wUHJvcGFnYXRpb24oKSxpLnByZXZlbnREZWZhdWx0KCksIWwpcmV0dXJuO2NvbnN0IGM9cGFyc2VJbnQobC5kYXRhc2V0LmluZGV4fHxcIlwiLDEwKXx8MCxoPXIuZ2V0UGFnZUZvclNsaWRlKGMpLGQ9YS5nZXRQYWdlRm9yU2xpZGUoYyk7YS5zbGlkZVRvKGQpLHIuc2xpZGVUbyhoLHtmcmljdGlvbjpudWxsPT09KHM9bnVsbD09PShuPXRoaXMubmF2KXx8dm9pZCAwPT09bj92b2lkIDA6bi5wbHVnaW5zKXx8dm9pZCAwPT09cz92b2lkIDA6cy5TeW5jLm9wdGlvbihcImZyaWN0aW9uXCIpfSksdGhpcy5tYXJrU2VsZWN0ZWRTbGlkZShjKX1vbk5hdkNyZWF0ZVNsaWRlKHQsZSl7ZS5pbmRleD09PXRoaXMuc2VsZWN0ZWRJbmRleCYmdGhpcy5tYXJrU2VsZWN0ZWRTbGlkZShlLmluZGV4KX1vblRhcmdldENoYW5nZSgpe2NvbnN0e3RhcmdldDp0LG5hdjplfT10aGlzO2lmKCF0fHwhZSlyZXR1cm47aWYoZS5zdGF0ZSE9PUwuUmVhZHl8fHQuc3RhdGUhPT1MLlJlYWR5KXJldHVybjtjb25zdCBpPXQucGFnZXNbdC5wYWdlXS5zbGlkZXNbMF0uaW5kZXgsbj1lLmdldFBhZ2VGb3JTbGlkZShpKTt0aGlzLm1hcmtTZWxlY3RlZFNsaWRlKGkpLGUuc2xpZGVUbyhuKX1tYXJrU2VsZWN0ZWRTbGlkZSh0KXtjb25zdHtuYXY6ZX09dGhpcztlJiZlLnN0YXRlPT09TC5SZWFkeSYmKHRoaXMuc2VsZWN0ZWRJbmRleD10LFsuLi5lLnNsaWRlc10ubWFwKChlPT57ZS5lbCYmZS5lbC5jbGFzc0xpc3RbZS5pbmRleD09PXQ/XCJhZGRcIjpcInJlbW92ZVwiXShcImlzLW5hdi1zZWxlY3RlZFwiKX0pKSl9YXR0YWNoKCl7bGV0IHQ9dGhpcy5vcHRpb25zLnRhcmdldCxlPXRoaXMub3B0aW9ucy5uYXY7dD90aGlzLmFkZEFzTmF2Rm9yKHQpOmUmJnRoaXMuYWRkQXNUYXJnZXRGb3IoZSl9ZGV0YWNoKCl7dGhpcy5uYXYmJih0aGlzLm5hdi5vZmYoXCJyZWFkeVwiLHRoaXMub25OYXZSZWFkeSksdGhpcy5uYXYub2ZmKFwiY3JlYXRlU2xpZGVcIix0aGlzLm9uTmF2Q3JlYXRlU2xpZGUpLHRoaXMubmF2Lm9mZihcIlBhbnpvb20uY2xpY2tcIix0aGlzLm9uTmF2Q2xpY2spLHRoaXMubmF2Lm9mZihcIlBhbnpvb20udG91Y2hFbmRcIix0aGlzLm9uTmF2VG91Y2gpKSx0aGlzLm5hdj1udWxsLHRoaXMudGFyZ2V0JiYodGhpcy50YXJnZXQub2ZmKFwicmVhZHlcIix0aGlzLm9uVGFyZ2V0UmVhZHkpLHRoaXMudGFyZ2V0Lm9mZihcInJlZnJlc2hcIix0aGlzLm9uVGFyZ2V0Q2hhbmdlKSx0aGlzLnRhcmdldC5vZmYoXCJjaGFuZ2VcIix0aGlzLm9uVGFyZ2V0Q2hhbmdlKSksdGhpcy50YXJnZXQ9bnVsbH19T2JqZWN0LmRlZmluZVByb3BlcnR5KEgsXCJkZWZhdWx0c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7ZnJpY3Rpb246LjM1fX0pO2NvbnN0IEI9e05hdmlnYXRpb246aixEb3RzOkYsU3luYzpIfTtjbGFzcyBfIGV4dGVuZHMgbXtnZXQgYXhpcygpe3JldHVybiB0aGlzLmlzSG9yaXpvbnRhbD9cImVcIjpcImZcIn1nZXQgaXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuc3RhdGU9PT1MLlJlYWR5fWdldCBpc0luZmluaXRlKCl7bGV0IHQ9ITE7Y29uc3QgZT10aGlzLmNvbnRlbnREaW0saT10aGlzLnZpZXdwb3J0RGltO3JldHVybiB0aGlzLnBhZ2VzLmxlbmd0aD49MiYmZT4xLjUqaSYmKHQ9dGhpcy5vcHRpb24oXCJpbmZpbml0ZVwiKSksdH1nZXQgaXNSVEwoKXtyZXR1cm5cInJ0bFwiPT09dGhpcy5vcHRpb24oXCJkaXJlY3Rpb25cIil9Z2V0IGlzSG9yaXpvbnRhbCgpe3JldHVyblwieFwiPT09dGhpcy5vcHRpb24oXCJheGlzXCIpfWNvbnN0cnVjdG9yKHQsZT17fSxpPXt9KXtpZihzdXBlcigpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidXNlck9wdGlvbnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e319KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInVzZXJQbHVnaW5zXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnt9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJicFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpcIlwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJscFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzdGF0ZVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpMLkluaXR9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBhZ2VcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicHJldlBhZ2VcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGFpbmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidmlld3BvcnRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidHJhY2tcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic2xpZGVzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOltdfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwYWdlc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpbXX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicGFuem9vbVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpblRyYW5zaXRpb25cIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bmV3IFNldH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGVudERpbVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ2aWV3cG9ydERpbVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCkpLCF0fHwheCh0KSl0aHJvdyBuZXcgRXJyb3IoXCJObyBFbGVtZW50IGZvdW5kXCIpO3RoaXMuY29udGFpbmVyPXQsdGhpcy5zbGlkZU5leHQ9Tyh0aGlzLnNsaWRlTmV4dC5iaW5kKHRoaXMpLDE1MCksdGhpcy5zbGlkZVByZXY9Tyh0aGlzLnNsaWRlUHJldi5iaW5kKHRoaXMpLDE1MCksdGhpcy51c2VyT3B0aW9ucz1lLHRoaXMudXNlclBsdWdpbnM9aSxxdWV1ZU1pY3JvdGFzaygoKCk9Pnt0aGlzLnByb2Nlc3NPcHRpb25zKCl9KSl9cHJvY2Vzc09wdGlvbnMoKXtjb25zdCB0PXUoe30sXy5kZWZhdWx0cyx0aGlzLnVzZXJPcHRpb25zKTtsZXQgZT1cIlwiO2NvbnN0IGk9dC5icmVha3BvaW50cztpZihpJiZkKGkpKWZvcihjb25zdFtuLHNdb2YgT2JqZWN0LmVudHJpZXMoaSkpd2luZG93Lm1hdGNoTWVkaWEobikubWF0Y2hlcyYmZChzKSYmKGUrPW4sdSh0LHMpKTtlPT09dGhpcy5icCYmdGhpcy5zdGF0ZSE9PUwuSW5pdHx8KHRoaXMuYnA9ZSx0aGlzLnN0YXRlPT09TC5SZWFkeSYmKHQuaW5pdGlhbFNsaWRlPXRoaXMucGFnZXNbdGhpcy5wYWdlXS5zbGlkZXNbMF0uaW5kZXgpLHRoaXMuc3RhdGUhPT1MLkluaXQmJnRoaXMuZGVzdHJveSgpLHN1cGVyLnNldE9wdGlvbnModCksITE9PT10aGlzLm9wdGlvbihcImVuYWJsZWRcIik/dGhpcy5hdHRhY2hFdmVudHMoKTpzZXRUaW1lb3V0KCgoKT0+e3RoaXMuaW5pdCgpfSksMCkpfWluaXQoKXt0aGlzLnN0YXRlPUwuSW5pdCx0aGlzLmVtaXQoXCJpbml0XCIpLHRoaXMuYXR0YWNoUGx1Z2lucyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sXy5QbHVnaW5zKSx0aGlzLnVzZXJQbHVnaW5zKSksdGhpcy5pbml0TGF5b3V0KCksdGhpcy5pbml0U2xpZGVzKCksdGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5zZXRJbml0aWFsUG9zaXRpb24oKSx0aGlzLmluaXRQYW56b29tKCksdGhpcy5hdHRhY2hFdmVudHMoKSx0aGlzLnN0YXRlPUwuUmVhZHksdGhpcy5lbWl0KFwicmVhZHlcIil9aW5pdExheW91dCgpe2NvbnN0e2NvbnRhaW5lcjp0fT10aGlzLGU9dGhpcy5vcHRpb24oXCJjbGFzc2VzXCIpO1ModCx0aGlzLmNuKFwiY29udGFpbmVyXCIpKSxvKHQsZS5pc0xUUiwhdGhpcy5pc1JUTCksbyh0LGUuaXNSVEwsdGhpcy5pc1JUTCksbyh0LGUuaXNWZXJ0aWNhbCwhdGhpcy5pc0hvcml6b250YWwpLG8odCxlLmlzSG9yaXpvbnRhbCx0aGlzLmlzSG9yaXpvbnRhbCk7bGV0IGk9dGhpcy5vcHRpb24oXCJ2aWV3cG9ydFwiKXx8dC5xdWVyeVNlbGVjdG9yKGAuJHtlLnZpZXdwb3J0fWApO2l8fChpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksUyhpLGUudmlld3BvcnQpLGkuYXBwZW5kKC4uLkEodCxgLiR7ZS5zbGlkZX1gKSksdC5wcmVwZW5kKGkpKTtsZXQgbj10aGlzLm9wdGlvbihcInRyYWNrXCIpfHx0LnF1ZXJ5U2VsZWN0b3IoYC4ke2UudHJhY2t9YCk7bnx8KG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxTKG4sZS50cmFjayksbi5hcHBlbmQoLi4uQXJyYXkuZnJvbShpLmNoaWxkTm9kZXMpKSksbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIixcInBvbGl0ZVwiKSxpLmNvbnRhaW5zKG4pfHxpLnByZXBlbmQobiksdGhpcy52aWV3cG9ydD1pLHRoaXMudHJhY2s9bix0aGlzLmVtaXQoXCJpbml0TGF5b3V0XCIpfWluaXRTbGlkZXMoKXtjb25zdHt0cmFjazp0fT10aGlzO2lmKHQpe3RoaXMuc2xpZGVzPVtdLFsuLi5BKHQsYC4ke3RoaXMuY24oXCJzbGlkZVwiKX1gKV0uZm9yRWFjaCgodD0+e2lmKHgodCkpe2NvbnN0IGU9Uih7ZWw6dCxpc0RvbTohMCxpbmRleDp0aGlzLnNsaWRlcy5sZW5ndGh9KTt0aGlzLnNsaWRlcy5wdXNoKGUpLHRoaXMuZW1pdChcImluaXRTbGlkZVwiLGUsdGhpcy5zbGlkZXMubGVuZ3RoKX19KSk7Zm9yKGxldCB0IG9mIHRoaXMub3B0aW9uKFwic2xpZGVzXCIsW10pKXtjb25zdCBlPVIodCk7ZS5pbmRleD10aGlzLnNsaWRlcy5sZW5ndGgsdGhpcy5zbGlkZXMucHVzaChlKSx0aGlzLmVtaXQoXCJpbml0U2xpZGVcIixlLHRoaXMuc2xpZGVzLmxlbmd0aCl9dGhpcy5lbWl0KFwiaW5pdFNsaWRlc1wiKX19c2V0SW5pdGlhbFBhZ2UoKXtsZXQgdD0wO2NvbnN0IGU9dGhpcy5vcHRpb24oXCJpbml0aWFsU2xpZGVcIik7dD1cIm51bWJlclwiPT10eXBlb2YgZT90aGlzLmdldFBhZ2VGb3JTbGlkZShlKTpwYXJzZUludCh0aGlzLm9wdGlvbihcImluaXRpYWxQYWdlXCIsMCkrXCJcIiwxMCl8fDAsdGhpcy5wYWdlPXR9c2V0SW5pdGlhbFBvc2l0aW9uKCl7aWYoIXRoaXMudHJhY2t8fCF0aGlzLnBhZ2VzLmxlbmd0aClyZXR1cm47Y29uc3QgdD10aGlzLmlzSG9yaXpvbnRhbDtsZXQgZT10aGlzLnBhZ2U7dGhpcy5wYWdlc1tlXXx8KHRoaXMucGFnZT1lPTApO2NvbnN0IGk9dGhpcy5wYWdlc1tlXS5wb3MqKHRoaXMuaXNSVEwmJnQ/MTotMSksbj10P2Ake2l9cHhgOlwiMFwiLHM9dD9cIjBcIjpgJHtpfXB4YDt0aGlzLnRyYWNrLnN0eWxlLnRyYW5zZm9ybT1gdHJhbnNsYXRlM2QoJHtufSwgJHtzfSwgMCkgc2NhbGUoMSlgLHRoaXMub3B0aW9uKFwiYWRhcHRpdmVIZWlnaHRcIikmJnRoaXMuc2V0Vmlld3BvcnRIZWlnaHQoKX1pbml0UGFuem9vbSgpe3RoaXMucGFuem9vbSYmKHRoaXMucGFuem9vbS5kZXN0cm95KCksdGhpcy5wYW56b29tPW51bGwpO2NvbnN0IHQ9dGhpcy5vcHRpb24oXCJQYW56b29tXCIpfHx7fTt0aGlzLnBhbnpvb209bmV3IFQodGhpcy52aWV3cG9ydCx1KHt9LHtjb250ZW50OnRoaXMudHJhY2ssem9vbTohMSxwYW5Pbmx5Wm9vbWVkOiExLGxvY2tBeGlzOnRoaXMuaXNIb3Jpem9udGFsP1wieFwiOlwieVwiLGluZmluaXRlOnRoaXMuaXNJbmZpbml0ZSxjbGljazohMSxkYmxDbGljazohMSx0b3VjaDp0PT4hKHRoaXMucGFnZXMubGVuZ3RoPDImJiF0Lm9wdGlvbnMuaW5maW5pdGUpLGJvdW5kczooKT0+dGhpcy5nZXRCb3VuZHMoKSxtYXhWZWxvY2l0eTp0PT5NYXRoLmFicyh0LnRhcmdldFt0aGlzLmF4aXNdLXQuY3VycmVudFt0aGlzLmF4aXNdKTwyKnRoaXMudmlld3BvcnREaW0/MTAwOjB9LHQpKSx0aGlzLnBhbnpvb20ub24oXCIqXCIsKCh0LGUsLi4uaSk9Pnt0aGlzLmVtaXQoYFBhbnpvb20uJHtlfWAsdCwuLi5pKX0pKSx0aGlzLnBhbnpvb20ub24oXCJkZWNlbFwiLHRoaXMub25EZWNlbCksdGhpcy5wYW56b29tLm9uKFwicmVmcmVzaFwiLHRoaXMub25SZWZyZXNoKSx0aGlzLnBhbnpvb20ub24oXCJiZWZvcmVUcmFuc2Zvcm1cIix0aGlzLm9uQmVmb3JlVHJhbnNmb3JtKSx0aGlzLnBhbnpvb20ub24oXCJlbmRBbmltYXRpb25cIix0aGlzLm9uRW5kQW5pbWF0aW9uKX1hdHRhY2hFdmVudHMoKXtjb25zdCB0PXRoaXMuY29udGFpbmVyO3QmJih0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub25DbGljayx7cGFzc2l2ZTohMSxjYXB0dXJlOiExfSksdC5hZGRFdmVudExpc3RlbmVyKFwic2xpZGVUb1wiLHRoaXMub25TbGlkZVRvKSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplKX1jcmVhdGVQYWdlcygpe2xldCB0PVtdO2NvbnN0e2NvbnRlbnREaW06ZSx2aWV3cG9ydERpbTppfT10aGlzLG49dGhpcy5vcHRpb24oXCJzbGlkZXNQZXJQYWdlXCIpO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBuJiZlPmkpe2ZvcihsZXQgZT0wO2U8dGhpcy5zbGlkZXMubGVuZ3RoO2UrPW4pdC5wdXNoKGsoe2luZGV4OmUsc2xpZGVzOnRoaXMuc2xpZGVzLnNsaWNlKGUsZStuKX0pKTtyZXR1cm4gdH1sZXQgcz0wLG89MDtmb3IoY29uc3QgZSBvZiB0aGlzLnNsaWRlcykoIXQubGVuZ3RofHxvK2UuZGltPmkpJiYodC5wdXNoKGsoKSkscz10Lmxlbmd0aC0xLG89MCksbys9ZS5kaW0rZS5nYXAsdFtzXS5zbGlkZXMucHVzaChlKTtyZXR1cm4gdH1wcm9jZXNzUGFnZXMoKXtjb25zdCBlPXRoaXMucGFnZXMse2NvbnRlbnREaW06aSx2aWV3cG9ydERpbTpufT10aGlzLHM9dGhpcy5vcHRpb24oXCJjZW50ZXJcIiksbz10aGlzLm9wdGlvbihcImZpbGxcIiksYT1vJiZzJiZpPm4mJiF0aGlzLmlzSW5maW5pdGU7aWYoZS5mb3JFYWNoKCgodCxlKT0+e3QuaW5kZXg9ZSx0LnBvcz10LnNsaWRlc1swXS5wb3MsdC5kaW09MDtmb3IoY29uc3RbZSxpXW9mIHQuc2xpZGVzLmVudHJpZXMoKSl0LmRpbSs9aS5kaW0sZTx0LnNsaWRlcy5sZW5ndGgtMSYmKHQuZGltKz1pLmdhcCk7YSYmdC5wb3MrLjUqdC5kaW08LjUqbj90LnBvcz0wOmEmJnQucG9zKy41KnQuZGltPj1pLS41Km4/dC5wb3M9aS1uOnMmJih0LnBvcys9LS41KihuLXQuZGltKSl9KSksZS5mb3JFYWNoKCgoZSxzKT0+e28mJiF0aGlzLmlzSW5maW5pdGUmJmk+biYmKGUucG9zPU1hdGgubWF4KGUucG9zLDApLGUucG9zPU1hdGgubWluKGUucG9zLGktbikpLGUucG9zPXQoZS5wb3MsMWUzKSxlLmRpbT10KGUuZGltLDFlMyksZS5wb3M8LjEmJmUucG9zPi0uMSYmKGUucG9zPTApfSkpLHRoaXMuaXNJbmZpbml0ZSlyZXR1cm4gZTtjb25zdCByPVtdO2xldCBsO3JldHVybiBlLmZvckVhY2goKHQ9Pntjb25zdCBlPU9iamVjdC5hc3NpZ24oe30sdCk7bCYmZS5wb3M9PT1sLnBvcz8obC5kaW0rPWUuZGltLGwuc2xpZGVzPVsuLi5sLnNsaWRlcywuLi5lLnNsaWRlc10pOihlLmluZGV4PXIubGVuZ3RoLGw9ZSxyLnB1c2goZSkpfSkpLHJ9Z2V0UGFnZUZyb21JbmRleCh0PTApe2NvbnN0IGU9dGhpcy5wYWdlcy5sZW5ndGg7bGV0IGk7cmV0dXJuIHQ9cGFyc2VJbnQoKHR8fDApLnRvU3RyaW5nKCkpfHwwLGk9dGhpcy5pc0luZmluaXRlPyh0JWUrZSklZTpNYXRoLm1heChNYXRoLm1pbih0LGUtMSksMCksaX1nZXRTbGlkZU1ldHJpY3MoZSl7Y29uc3QgaT10aGlzLmlzSG9yaXpvbnRhbD9cIndpZHRoXCI6XCJoZWlnaHRcIjtsZXQgbj0wLHM9MCxvPWUuZWw7bz9uPXBhcnNlRmxvYXQoby5kYXRhc2V0W2ldfHxcIlwiKXx8MDoobz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG8uc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLFMobyx0aGlzLmNuKFwic2xpZGVcIikrXCIgXCIrZS5jbGFzcyksKHRoaXMudHJhY2t8fGRvY3VtZW50LmJvZHkpLnByZXBlbmQobykpLG4/KG8uc3R5bGVbaV09YCR7bn1weGAsby5zdHlsZVtcIndpZHRoXCI9PT1pP1wiaGVpZ2h0XCI6XCJ3aWR0aFwiXT1cIlwiKTpuPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbaV07Y29uc3QgYT1nZXRDb21wdXRlZFN0eWxlKG8pO3JldHVyblwiY29udGVudC1ib3hcIj09PWEuYm94U2l6aW5nJiYodGhpcy5pc0hvcml6b250YWw/KG4rPXBhcnNlRmxvYXQoYS5wYWRkaW5nTGVmdCl8fDAsbis9cGFyc2VGbG9hdChhLnBhZGRpbmdSaWdodCl8fDApOihuKz1wYXJzZUZsb2F0KGEucGFkZGluZ1RvcCl8fDAsbis9cGFyc2VGbG9hdChhLnBhZGRpbmdCb3R0b20pfHwwKSkscz1wYXJzZUZsb2F0KGFbdGhpcy5pc0hvcml6b250YWw/XCJtYXJnaW5SaWdodFwiOlwibWFyZ2luQm90dG9tXCJdKXx8MCx0aGlzLmlzSG9yaXpvbnRhbCxlLmVsfHxvLnJlbW92ZSgpLHtkaW06dChuLDFlMyksZ2FwOnQocywxZTMpfX1nZXRCb3VuZHMoKXtsZXQgdD17bWluOjAsbWF4OjB9O2lmKHRoaXMuaXNJbmZpbml0ZSl0PXttaW46LTEvMCxtYXg6MS8wfTtlbHNlIGlmKHRoaXMucGFnZXMubGVuZ3RoKXtjb25zdCBlPXRoaXMucGFnZXNbMF0ucG9zLGk9dGhpcy5wYWdlc1t0aGlzLnBhZ2VzLmxlbmd0aC0xXS5wb3M7dD10aGlzLmlzUlRMJiZ0aGlzLmlzSG9yaXpvbnRhbD97bWluOmUsbWF4Oml9OnttaW46LTEqaSxtYXg6LTEqZX19cmV0dXJue3g6dGhpcy5pc0hvcml6b250YWw/dDp7bWluOjAsbWF4OjB9LHk6dGhpcy5pc0hvcml6b250YWw/e21pbjowLG1heDowfTp0fX1yZXBvc2l0aW9uU2xpZGVzKCl7bGV0IGUse3ZpZXdwb3J0Omksdmlld3BvcnREaW06bixjb250ZW50RGltOnMscGFnZTpvLHBhZ2VzOmF9PXRoaXMscj0wLGw9MCxjPTAsaD0wO3RoaXMucGFuem9vbT9oPS0xKnRoaXMucGFuem9vbS5jdXJyZW50W3RoaXMuYXhpc106YVtvXSYmKGg9YVtvXS5wb3N8fDApLGU9dGhpcy5pc0hvcml6b250YWw/dGhpcy5pc1JUTD9cInJpZ2h0XCI6XCJsZWZ0XCI6XCJ0b3BcIix0aGlzLmlzUlRMJiZ0aGlzLmlzSG9yaXpvbnRhbCYmKGgqPS0xKTtmb3IoY29uc3QgaSBvZiB0aGlzLnNsaWRlcylpLmVsPyhcInRvcFwiPT09ZT8oaS5lbC5zdHlsZS5yaWdodD1cIlwiLGkuZWwuc3R5bGUubGVmdD1cIlwiKTppLmVsLnN0eWxlLnRvcD1cIlwiLGkuaW5kZXghPT1yP2kuZWwuc3R5bGVbZV09MD09PWw/XCJcIjpgJHt0KGwsMWUzKX1weGA6aS5lbC5zdHlsZVtlXT1cIlwiLGMrPWkuZGltK2kuZ2FwLHIrKyk6bCs9aS5kaW0raS5nYXA7aWYodGhpcy5pc0luZmluaXRlJiZjJiZpKXtjb25zdCBvPXRoaXMuaXNIb3Jpem9udGFsO2xldCBhPWdldENvbXB1dGVkU3R5bGUoaSkscj1cInBhZGRpbmdcIixkPW8/XCJSaWdodFwiOlwiQm90dG9tXCIsdT1wYXJzZUZsb2F0KGFbcisobz9cIkxlZnRcIjpcIlRvcFwiKV0pO2gtPXUsbis9dSxuKz1wYXJzZUZsb2F0KGFbcitkXSk7Zm9yKGNvbnN0IGkgb2YgdGhpcy5zbGlkZXMpaS5lbCYmKHQoaS5wb3MpPHQobikmJnQoaS5wb3MraS5kaW0raS5nYXApPHQoaCkmJnQoaCk+dChzLW4pJiYoaS5lbC5zdHlsZVtlXT1gJHt0KGwrYywxZTMpfXB4YCksdChpLnBvcytpLmdhcCk+PXQocy1uKSYmdChpLnBvcyk+dChoK24pJiZ0KGgpPHQobikmJihpLmVsLnN0eWxlW2VdPWAtJHt0KGMsMWUzKX1weGApKX1sZXQgZCx1LHA9Wy4uLnRoaXMuaW5UcmFuc2l0aW9uXTtpZihwLmxlbmd0aD4xJiYoZD10aGlzLnBhZ2VzW3BbMF1dLHU9dGhpcy5wYWdlc1twWzFdXSksZCYmdSl7bGV0IGk9MDtmb3IoY29uc3QgbiBvZiB0aGlzLnNsaWRlcyluLmVsP3RoaXMuaW5UcmFuc2l0aW9uLmhhcyhuLmluZGV4KSYmZC5zbGlkZXMuaW5kZXhPZihuKTwwJiYobi5lbC5zdHlsZVtlXT1gJHt0KGkrKGQucG9zLXUucG9zKSwxZTMpfXB4YCk6aSs9bi5kaW0rbi5nYXB9fWNyZWF0ZVNsaWRlRWwodCl7aWYoIXRoaXMudHJhY2t8fCF0KXJldHVybjtpZih0LmVsKXJldHVybjtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7UyhlLHRoaXMuY24oXCJzbGlkZVwiKSksUyhlLHQuY2xhc3MpLFMoZSx0LmN1c3RvbUNsYXNzKSx0Lmh0bWwmJihlLmlubmVySFRNTD10Lmh0bWwpO2NvbnN0IGk9W107dGhpcy5zbGlkZXMuZm9yRWFjaCgoKHQsZSk9Pnt0LmVsJiZpLnB1c2goZSl9KSk7Y29uc3Qgbj10LmluZGV4O2xldCBzPW51bGw7aWYoaS5sZW5ndGgpe2xldCB0PWkucmVkdWNlKCgodCxlKT0+TWF0aC5hYnMoZS1uKTxNYXRoLmFicyh0LW4pP2U6dCkpO3M9dGhpcy5zbGlkZXNbdF19Y29uc3Qgbz1zJiZzLmVsP3MuaW5kZXg8dC5pbmRleD9zLmVsLm5leHRTaWJsaW5nOnMuZWw6bnVsbDt0aGlzLnRyYWNrLmluc2VydEJlZm9yZShlLHRoaXMudHJhY2suY29udGFpbnMobyk/bzpudWxsKSx0LmVsPWUsdGhpcy5lbWl0KFwiY3JlYXRlU2xpZGVcIix0KX1yZW1vdmVTbGlkZUVsKHQsZT0hMSl7Y29uc3QgaT10LmVsO2lmKCFpKXJldHVybjtpZihFKGksdGhpcy5jbihcImlzU2VsZWN0ZWRcIikpLHQuaXNEb20mJiFlKXJldHVybiBpLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpLGkucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKSxFKGksdGhpcy5jbihcImlzU2VsZWN0ZWRcIikpLHZvaWQoaS5zdHlsZS5sZWZ0PVwiXCIpO3RoaXMuZW1pdChcInJlbW92ZVNsaWRlXCIsdCk7Y29uc3Qgbj1uZXcgQ3VzdG9tRXZlbnQoXCJhbmltYXRpb25lbmRcIik7aS5kaXNwYXRjaEV2ZW50KG4pLHQuZWwmJnQuZWwucmVtb3ZlKCksdC5lbD1udWxsfXRyYW5zaXRpb25UbyhlPTAsaT10aGlzLm9wdGlvbihcInRyYW5zaXRpb25cIikpe2lmKCFpKXJldHVybiExO2NvbnN0e3BhZ2VzOm4scGFuem9vbTpzfT10aGlzO2U9cGFyc2VJbnQoKGV8fDApLnRvU3RyaW5nKCkpfHwwO2NvbnN0IG89dGhpcy5nZXRQYWdlRnJvbUluZGV4KGUpO2lmKCFzfHwhbltvXXx8bi5sZW5ndGg8Mnx8blt0aGlzLnBhZ2VdLnNsaWRlc1swXS5kaW08dGhpcy52aWV3cG9ydERpbSlyZXR1cm4hMTtjb25zdCBhPWU+dGhpcy5wYWdlPzE6LTEscj10aGlzLnBhZ2VzW29dLnBvcyoodGhpcy5pc1JUTD8xOi0xKTtpZih0aGlzLnBhZ2U9PT1vJiZ0KHIsMWUzKT09PXQocy50YXJnZXRbdGhpcy5heGlzXSwxZTMpKXJldHVybiExO3RoaXMuY2xlYXJUcmFuc2l0aW9ucygpO2NvbnN0IGw9cy5pc1Jlc3Rpbmc7Uyh0aGlzLmNvbnRhaW5lcix0aGlzLmNuKFwiaW5UcmFuc2l0aW9uXCIpKTtjb25zdCBjPXRoaXMucGFnZXNbdGhpcy5wYWdlXS5zbGlkZXNbMF0saD10aGlzLnBhZ2VzW29dLnNsaWRlc1swXTt0aGlzLmluVHJhbnNpdGlvbi5hZGQoaC5pbmRleCksdGhpcy5jcmVhdGVTbGlkZUVsKGgpO2xldCBkPWMuZWwsdT1oLmVsO2x8fFwic2xpZGVcIj09PWl8fChpPVwiZmFkZUZhc3RcIixkPW51bGwpO2NvbnN0IHA9dGhpcy5pc1JUTD9cIm5leHRcIjpcInByZXZcIixmPXRoaXMuaXNSVEw/XCJwcmV2XCI6XCJuZXh0XCI7cmV0dXJuIGQmJih0aGlzLmluVHJhbnNpdGlvbi5hZGQoYy5pbmRleCksYy50cmFuc2l0aW9uPWksZC5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsdGhpcy5vbkFuaW1hdGlvbkVuZCksZC5jbGFzc0xpc3QuYWRkKGBmLSR7aX1PdXRgLGB0by0ke2E+MD9mOnB9YCkpLHUmJihoLnRyYW5zaXRpb249aSx1LmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIix0aGlzLm9uQW5pbWF0aW9uRW5kKSx1LmNsYXNzTGlzdC5hZGQoYGYtJHtpfUluYCxgZnJvbS0ke2E+MD9wOmZ9YCkpLHMucGFuVG8oe3g6dGhpcy5pc0hvcml6b250YWw/cjowLHk6dGhpcy5pc0hvcml6b250YWw/MDpyLGZyaWN0aW9uOjB9KSx0aGlzLm9uQ2hhbmdlKG8pLCEwfW1hbmFnZVNsaWRlVmlzaWJsaXR5KCl7Y29uc3QgdD1uZXcgU2V0LGU9bmV3IFNldCxpPXRoaXMuZ2V0VmlzaWJsZVNsaWRlcyhwYXJzZUZsb2F0KHRoaXMub3B0aW9uKFwicHJlbG9hZFwiLDApK1wiXCIpfHwwKTtmb3IoY29uc3QgbiBvZiB0aGlzLnNsaWRlcylpLmhhcyhuKT90LmFkZChuKTplLmFkZChuKTtmb3IoY29uc3QgZSBvZiB0aGlzLmluVHJhbnNpdGlvbil0LmFkZCh0aGlzLnNsaWRlc1tlXSk7Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLmNyZWF0ZVNsaWRlRWwoZSksdGhpcy5sYXp5TG9hZFNsaWRlKGUpO2Zvcihjb25zdCBpIG9mIGUpdC5oYXMoaSl8fHRoaXMucmVtb3ZlU2xpZGVFbChpKTt0aGlzLm1hcmtTZWxlY3RlZFNsaWRlcygpLHRoaXMucmVwb3NpdGlvblNsaWRlcygpfW1hcmtTZWxlY3RlZFNsaWRlcygpe2lmKCF0aGlzLnBhZ2VzW3RoaXMucGFnZV18fCF0aGlzLnBhZ2VzW3RoaXMucGFnZV0uc2xpZGVzKXJldHVybjtjb25zdCB0PVwiYXJpYS1oaWRkZW5cIjtsZXQgZT10aGlzLmNuKFwiaXNTZWxlY3RlZFwiKTtpZihlKWZvcihjb25zdCBpIG9mIHRoaXMuc2xpZGVzKWkuZWwmJihpLmVsLmRhdGFzZXQuaW5kZXg9YCR7aS5pbmRleH1gLHRoaXMucGFnZXNbdGhpcy5wYWdlXS5zbGlkZXMuaW5jbHVkZXMoaSk/KGkuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGUpfHwoUyhpLmVsLGUpLHRoaXMuZW1pdChcInNlbGVjdFNsaWRlXCIsaSkpLGkuZWwucmVtb3ZlQXR0cmlidXRlKHQpKTooaS5lbC5jbGFzc0xpc3QuY29udGFpbnMoZSkmJihFKGkuZWwsZSksdGhpcy5lbWl0KFwidW5zZWxlY3RTbGlkZVwiLGkpKSxpLmVsLnNldEF0dHJpYnV0ZSh0LFwidHJ1ZVwiKSkpfWZsaXBJbmZpbml0ZVRyYWNrKCl7Y29uc3QgdD10aGlzLnBhbnpvb207aWYoIXR8fCF0aGlzLmlzSW5maW5pdGUpcmV0dXJuO2NvbnN0IGU9XCJ4XCI9PT10aGlzLm9wdGlvbihcImF4aXNcIik/XCJlXCI6XCJmXCIse3ZpZXdwb3J0RGltOmksY29udGVudERpbTpufT10aGlzO2xldCBzPXQuY3VycmVudFtlXSxvPXQudGFyZ2V0W2VdLXMsYT0wLHI9LjUqaSxsPW47dGhpcy5pc1JUTCYmdGhpcy5pc0hvcml6b250YWw/KHM8LXImJihhPS0xLHMrPWwpLHM+bC1yJiYoYT0xLHMtPWwpKToocz5yJiYoYT0xLHMtPWwpLHM8LWwrciYmKGE9LTEscys9bCkpLGEmJih0LmN1cnJlbnRbZV09cyx0LnRhcmdldFtlXT1zK28pfWxhenlMb2FkU2xpZGUodCl7Y29uc3QgZT10aGlzLGk9dCYmdC5lbDtpZighaSlyZXR1cm47Y29uc3Qgcz1uZXcgU2V0LG89XCJmLWZhZGVJblwiO2kucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWxhenktc3Jjc2V0XVwiKS5mb3JFYWNoKCh0PT57dCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQmJnMuYWRkKHQpfSkpO2xldCBhPUFycmF5LmZyb20oaS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtbGF6eS1zcmNdXCIpKTtpLmRhdGFzZXQubGF6eVNyYyYmYS5wdXNoKGkpLGEubWFwKCh0PT57dCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/cy5hZGQodCk6eCh0KSYmKHQuc3R5bGUuYmFja2dyb3VuZEltYWdlPWB1cmwoJyR7dC5kYXRhc2V0LmxhenlTcmN8fFwiXCJ9JylgLGRlbGV0ZSB0LmRhdGFzZXQubGF6eVNyYyl9KSk7Y29uc3Qgcj0odCxpLG4pPT57biYmKG4ucmVtb3ZlKCksbj1udWxsKSxpLmNvbXBsZXRlJiYoaS5jbGFzc0xpc3QuYWRkKG8pLHNldFRpbWVvdXQoKCgpPT57aS5jbGFzc0xpc3QucmVtb3ZlKG8pfSksMzUwKSxpLnN0eWxlLmRpc3BsYXk9XCJcIiksdGhpcy5vcHRpb24oXCJhZGFwdGl2ZUhlaWdodFwiKSYmdC5lbCYmdGhpcy5wYWdlc1t0aGlzLnBhZ2VdLnNsaWRlcy5pbmRleE9mKHQpPi0xJiYoZS51cGRhdGVNZXRyaWNzKCksZS5zZXRWaWV3cG9ydEhlaWdodCgpKSx0aGlzLmVtaXQoXCJsb2FkXCIsdCl9O2Zvcihjb25zdCBlIG9mIHMpe2xldCBpPW51bGw7ZS5zcmM9ZS5kYXRhc2V0LmxhenlTcmNzZXR8fGUuZGF0YXNldC5sYXp5U3JjfHxcIlwiLGRlbGV0ZSBlLmRhdGFzZXQubGF6eVNyYyxkZWxldGUgZS5kYXRhc2V0LmxhenlTcmNzZXQsZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGUuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsKCgpPT57cih0LGUsaSl9KSksZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCgoKT0+e3IodCxlLGkpfSkpLHNldFRpbWVvdXQoKCgpPT57ZS5wYXJlbnROb2RlJiZ0LmVsJiYoZS5jb21wbGV0ZT9yKHQsZSxpKTooaT1uKHcpLGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaSxlKSkpfSksMzAwKX19b25BbmltYXRpb25FbmQodCl7dmFyIGU7Y29uc3QgaT10LnRhcmdldCxuPWk/cGFyc2VJbnQoaS5kYXRhc2V0LmluZGV4fHxcIlwiLDEwKXx8MDotMSxzPXRoaXMuc2xpZGVzW25dLG89dC5hbmltYXRpb25OYW1lO2lmKCFpfHwhc3x8IW8pcmV0dXJuO2NvbnN0IGE9ISF0aGlzLmluVHJhbnNpdGlvbi5oYXMobikmJnMudHJhbnNpdGlvbjthJiZvLnN1YnN0cmluZygwLGEubGVuZ3RoKzIpPT09YGYtJHthfWAmJnRoaXMuaW5UcmFuc2l0aW9uLmRlbGV0ZShuKSx0aGlzLmluVHJhbnNpdGlvbi5zaXplfHx0aGlzLmNsZWFyVHJhbnNpdGlvbnMoKSxuPT09dGhpcy5wYWdlJiYobnVsbD09PShlPXRoaXMucGFuem9vbSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuaXNSZXN0aW5nKSYmdGhpcy5lbWl0KFwic2V0dGxlXCIpfW9uRGVjZWwodCxlPTAsaT0wKXtjb25zdHtpc1JUTDpuLGlzSG9yaXpvbnRhbDpzLGF4aXM6byxwYWdlczphfT10aGlzLHI9YS5sZW5ndGgsbD1NYXRoLmFicyhNYXRoLmF0YW4yKGksZSkvKE1hdGguUEkvMTgwKSk7bGV0IGM9MDtpZihjPWw+NDUmJmw8MTM1P3M/MDppOnM/ZTowLCFyKXJldHVybjtjb25zdCBoPXRoaXMub3B0aW9uKFwiZHJhZ0ZyZWVcIik7bGV0IGQ9dGhpcy5wYWdlLHU9biYmcz8xOi0xO2NvbnN0IHA9dC50YXJnZXRbb10qdSxmPXQuY3VycmVudFtvXSp1O2xldHtwYWdlSW5kZXg6bX09dGhpcy5nZXRQYWdlRnJvbVBvc2l0aW9uKHApLHtwYWdlSW5kZXg6Z309dGhpcy5nZXRQYWdlRnJvbVBvc2l0aW9uKGYpO2g/dGhpcy5vbkNoYW5nZShtKTooZD1nLE1hdGguYWJzKGMpPjUmJihkPW4mJnM/YzwwP2QtMTpkKzE6YzwwP2QrMTpkLTEpLHRoaXMuc2xpZGVUbyhkLHt0cmFuc2l0aW9uOiExLGZyaWN0aW9uOnQub3B0aW9uKFwiZGVjZWxGcmljdGlvblwiKX0pKX1vbkNsaWNrKHQpe2NvbnN0IGU9dC50YXJnZXQsaT1lJiZ4KGUpP2UuZGF0YXNldDpudWxsO2xldCBuLHM7aSYmKHZvaWQgMCE9PWkuY2Fyb3VzZWxQYWdlPyhzPVwic2xpZGVUb1wiLG49aS5jYXJvdXNlbFBhZ2UpOnZvaWQgMCE9PWkuY2Fyb3VzZWxOZXh0P3M9XCJzbGlkZU5leHRcIjp2b2lkIDAhPT1pLmNhcm91c2VsUHJldiYmKHM9XCJzbGlkZVByZXZcIikpLHM/KHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLGUmJiFlLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpJiZ0aGlzW3NdKG4pKTp0aGlzLmVtaXQoXCJjbGlja1wiLHQpfW9uU2xpZGVUbyh0KXtjb25zdCBlPXQuZGV0YWlsfHwwO3RoaXMuc2xpZGVUbyh0aGlzLmdldFBhZ2VGb3JTbGlkZShlKSx7ZnJpY3Rpb246MH0pfW9uQ2hhbmdlKHQsZT0wKXtjb25zdCBpPXRoaXMucGFnZTt0aGlzLnByZXZQYWdlPWksdGhpcy5wYWdlPXQsdGhpcy5vcHRpb24oXCJhZGFwdGl2ZUhlaWdodFwiKSYmdGhpcy5zZXRWaWV3cG9ydEhlaWdodCgpLHQhPT1pJiYodGhpcy5tYXJrU2VsZWN0ZWRTbGlkZXMoKSx0aGlzLmVtaXQoXCJjaGFuZ2VcIix0LGksZSkpfW9uUmVmcmVzaCgpe2xldCB0PXRoaXMuY29udGVudERpbSxlPXRoaXMudmlld3BvcnREaW07dGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5jb250ZW50RGltPT09dCYmdGhpcy52aWV3cG9ydERpbT09PWV8fHRoaXMuc2xpZGVUbyh0aGlzLnBhZ2Use2ZyaWN0aW9uOjAsdHJhbnNpdGlvbjohMX0pfW9uUmVzaXplKCl7dGhpcy5vcHRpb24oXCJicmVha3BvaW50c1wiKSYmdGhpcy5wcm9jZXNzT3B0aW9ucygpfW9uQmVmb3JlVHJhbnNmb3JtKHQpe3RoaXMubHAhPT10LmN1cnJlbnRbdGhpcy5heGlzXSYmKHRoaXMuZmxpcEluZmluaXRlVHJhY2soKSx0aGlzLm1hbmFnZVNsaWRlVmlzaWJsaXR5KCkpLHRoaXMubHA9dC5jdXJyZW50LmV9b25FbmRBbmltYXRpb24oKXt0aGlzLmluVHJhbnNpdGlvbi5zaXplfHx0aGlzLmVtaXQoXCJzZXR0bGVcIil9cmVJbml0KHQ9bnVsbCxlPW51bGwpe3RoaXMuZGVzdHJveSgpLHRoaXMuc3RhdGU9TC5Jbml0LHRoaXMudXNlck9wdGlvbnM9dHx8dGhpcy51c2VyT3B0aW9ucyx0aGlzLnVzZXJQbHVnaW5zPWV8fHRoaXMudXNlclBsdWdpbnMsdGhpcy5wcm9jZXNzT3B0aW9ucygpfXNsaWRlVG8odD0wLHtmcmljdGlvbjplPXRoaXMub3B0aW9uKFwiZnJpY3Rpb25cIiksdHJhbnNpdGlvbjppPXRoaXMub3B0aW9uKFwidHJhbnNpdGlvblwiKX09e30pe2lmKHRoaXMuc3RhdGU9PT1MLkRlc3Ryb3kpcmV0dXJuO2NvbnN0e2F4aXM6bixpc0hvcml6b250YWw6cyxpc1JUTDpvLHBhZ2VzOmEscGFuem9vbTpyfT10aGlzLGw9YS5sZW5ndGgsYz1vJiZzPzE6LTE7aWYoIXJ8fCFsKXJldHVybjtpZih0aGlzLnRyYW5zaXRpb25Ubyh0LGkpKXJldHVybjtjb25zdCBoPXRoaXMuZ2V0UGFnZUZyb21JbmRleCh0KTtsZXQgZD1hW2hdLnBvcztpZih0aGlzLmlzSW5maW5pdGUpe2NvbnN0IGU9dGhpcy5jb250ZW50RGltLGk9ci50YXJnZXRbbl0qYztpZigyPT09bClkKz1lKk1hdGguZmxvb3IocGFyc2VGbG9hdCh0K1wiXCIpLzIpO2Vsc2V7Y29uc3QgdD1pO2Q9W2QsZC1lLGQrZV0ucmVkdWNlKChmdW5jdGlvbihlLGkpe3JldHVybiBNYXRoLmFicyhpLXQpPE1hdGguYWJzKGUtdCk/aTplfSkpfX1kKj1jLE1hdGguYWJzKHIudGFyZ2V0W25dLWQpPC4xfHwoci5wYW5Ubyh7eDpzP2Q6MCx5OnM/MDpkLGZyaWN0aW9uOmV9KSx0aGlzLm9uQ2hhbmdlKGgpKX1zbGlkZVRvQ2xvc2VzdCh0KXtpZih0aGlzLnBhbnpvb20pe2NvbnN0e3BhZ2VJbmRleDplfT10aGlzLmdldFBhZ2VGcm9tUG9zaXRpb24odGhpcy5wYW56b29tLmN1cnJlbnRbdGhpcy5pc0hvcml6b250YWw/XCJlXCI6XCJmXCJdKTt0aGlzLnNsaWRlVG8oZSx0KX19c2xpZGVOZXh0KCl7dGhpcy5zbGlkZVRvKHRoaXMucGFnZSsxKX1zbGlkZVByZXYoKXt0aGlzLnNsaWRlVG8odGhpcy5wYWdlLTEpfWNsZWFyVHJhbnNpdGlvbnMoKXt0aGlzLmluVHJhbnNpdGlvbi5jbGVhcigpLEUodGhpcy5jb250YWluZXIsdGhpcy5jbihcImluVHJhbnNpdGlvblwiKSk7Y29uc3QgdD1bXCJ0by1wcmV2XCIsXCJ0by1uZXh0XCIsXCJmcm9tLXByZXZcIixcImZyb20tbmV4dFwiXTtmb3IoY29uc3QgZSBvZiB0aGlzLnNsaWRlcyl7Y29uc3QgaT1lLmVsO2lmKGkpe2kucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLHRoaXMub25BbmltYXRpb25FbmQpLGkuY2xhc3NMaXN0LnJlbW92ZSguLi50KTtjb25zdCBuPWUudHJhbnNpdGlvbjtuJiZpLmNsYXNzTGlzdC5yZW1vdmUoYGYtJHtufU91dGAsYGYtJHtufUluYCl9fXRoaXMubWFuYWdlU2xpZGVWaXNpYmxpdHkoKX1wcmVwZW5kU2xpZGUodCl7dmFyIGUsaTtsZXQgbj1BcnJheS5pc0FycmF5KHQpP3Q6W3RdO2Zvcihjb25zdCB0IG9mIG4ucmV2ZXJzZSgpKXRoaXMuc2xpZGVzLnVuc2hpZnQoUih0KSk7Zm9yKGxldCB0PTA7dDx0aGlzLnNsaWRlcy5sZW5ndGg7dCsrKXRoaXMuc2xpZGVzW3RdLmluZGV4PXQ7Y29uc3Qgcz0obnVsbD09PShlPXRoaXMucGFnZXNbdGhpcy5wYWdlXSl8fHZvaWQgMD09PWU/dm9pZCAwOmUucG9zKXx8MDt0aGlzLnBhZ2UrPW4ubGVuZ3RoLHRoaXMudXBkYXRlTWV0cmljcygpO2NvbnN0IG89KG51bGw9PT0oaT10aGlzLnBhZ2VzW3RoaXMucGFnZV0pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnBvcyl8fDA7aWYodGhpcy5wYW56b29tKXtjb25zdCB0PXRoaXMuaXNSVEw/cy1vOm8tczt0aGlzLnBhbnpvb20udGFyZ2V0LmUtPXQsdGhpcy5wYW56b29tLmN1cnJlbnQuZS09dCx0aGlzLnBhbnpvb20ucmVxdWVzdFRpY2soKX19YXBwZW5kU2xpZGUodCl7bGV0IGU9QXJyYXkuaXNBcnJheSh0KT90Olt0XTtmb3IoY29uc3QgdCBvZiBlKXtjb25zdCBlPVIodCk7ZS5pbmRleD10aGlzLnNsaWRlcy5sZW5ndGgsdGhpcy5zbGlkZXMucHVzaChlKSx0aGlzLmVtaXQoXCJpbml0U2xpZGVcIix0LHRoaXMuc2xpZGVzLmxlbmd0aCl9dGhpcy51cGRhdGVNZXRyaWNzKCl9cmVtb3ZlU2xpZGUodCl7Y29uc3QgZT10aGlzLnNsaWRlcy5sZW5ndGg7dD0odCVlK2UpJWUsdGhpcy5yZW1vdmVTbGlkZUVsKHRoaXMuc2xpZGVzW3RdLCEwKSx0aGlzLnNsaWRlcy5zcGxpY2UodCwxKTtmb3IobGV0IHQ9MDt0PHRoaXMuc2xpZGVzLmxlbmd0aDt0KyspdGhpcy5zbGlkZXNbdF0uaW5kZXg9dDt0aGlzLnVwZGF0ZU1ldHJpY3MoKSx0aGlzLnNsaWRlVG8odGhpcy5wYWdlLHtmcmljdGlvbjowLHRyYW5zaXRpb246ITF9KX11cGRhdGVNZXRyaWNzKCl7Y29uc3R7cGFuem9vbTplLHZpZXdwb3J0OmksdHJhY2s6bixpc0hvcml6b250YWw6c309dGhpcztpZighbilyZXR1cm47Y29uc3Qgbz1zP1wid2lkdGhcIjpcImhlaWdodFwiO2lmKGkpe2xldCBlPXQoaS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtvXSwxZTMpLG49Z2V0Q29tcHV0ZWRTdHlsZShpKSxhPVwicGFkZGluZ1wiLHI9cz9cIlJpZ2h0XCI6XCJCb3R0b21cIjtlLT1wYXJzZUZsb2F0KG5bYSsocz9cIkxlZnRcIjpcIlRvcFwiKV0pK3BhcnNlRmxvYXQoblthK3JdKSx0aGlzLnZpZXdwb3J0RGltPWV9bGV0IGEscj10aGlzLnBhZ2VzLmxlbmd0aCxsPTA7Zm9yKGNvbnN0W2UsaV1vZiB0aGlzLnNsaWRlcy5lbnRyaWVzKCkpe2xldCBuPTAscz0wOyFpLmVsJiZhPyhuPWEuZGltLHM9YS5nYXApOigoe2RpbTpuLGdhcDpzfT10aGlzLmdldFNsaWRlTWV0cmljcyhpKSksYT1pKSxuPXQobiwxZTMpLHM9dChzLDFlMyksaS5kaW09bixpLmdhcD1zLGkucG9zPWwsbCs9biwodGhpcy5pc0luZmluaXRlfHxlPHRoaXMuc2xpZGVzLmxlbmd0aC0xKSYmKGwrPXMpfWNvbnN0IGM9dGhpcy5jb250ZW50RGltO2w9dChsLDFlMyksdGhpcy5jb250ZW50RGltPWwsZSYmKGUuY29udGVudFJlY3Rbb109bCxlLmNvbnRlbnRSZWN0W1wiZVwiPT09dGhpcy5heGlzP1wiZnVsbFdpZHRoXCI6XCJmdWxsSGVpZ2h0XCJdPWwpLHRoaXMucGFnZXM9dGhpcy5jcmVhdGVQYWdlcygpLHRoaXMucGFnZXM9dGhpcy5wcm9jZXNzUGFnZXMoKSx0aGlzLnN0YXRlPT09TC5Jbml0JiZ0aGlzLnNldEluaXRpYWxQYWdlKCksdGhpcy5wYWdlPU1hdGgubWF4KDAsTWF0aC5taW4odGhpcy5wYWdlLHRoaXMucGFnZXMubGVuZ3RoLTEpKSxlJiZyPT09dGhpcy5wYWdlcy5sZW5ndGgmJk1hdGguYWJzKGwtYyk+LjUmJihlLnRhcmdldFt0aGlzLmF4aXNdPS0xKnRoaXMucGFnZXNbdGhpcy5wYWdlXS5wb3MsZS5jdXJyZW50W3RoaXMuYXhpc109LTEqdGhpcy5wYWdlc1t0aGlzLnBhZ2VdLnBvcyxlLnN0b3AoKSksdGhpcy5tYW5hZ2VTbGlkZVZpc2libGl0eSgpLHRoaXMuZW1pdChcInJlZnJlc2hcIil9Z2V0UHJvZ3Jlc3MoZSxpPSExKXt2b2lkIDA9PT1lJiYoZT10aGlzLnBhZ2UpO2NvbnN0IG49dGhpcyxzPW4ucGFuem9vbSxvPW4ucGFnZXNbZV18fDA7aWYoIW98fCFzKXJldHVybiAwO2xldCBhPS0xKnMuY3VycmVudC5lLHI9bi5jb250ZW50RGltO3ZhciBsPVt0KChhLW8ucG9zKS8oMSpvLmRpbSksMWUzKSx0KChhK3Itby5wb3MpLygxKm8uZGltKSwxZTMpLHQoKGEtci1vLnBvcykvKDEqby5kaW0pLDFlMyldLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnMoZSk8TWF0aC5hYnModCk/ZTp0fSkpO3JldHVybiBpP2w6TWF0aC5tYXgoLTEsTWF0aC5taW4oMSxsKSl9c2V0Vmlld3BvcnRIZWlnaHQoKXtjb25zdHtwYWdlOnQscGFnZXM6ZSx2aWV3cG9ydDppLGlzSG9yaXpvbnRhbDpufT10aGlzO2lmKCFpfHwhZVt0XSlyZXR1cm47bGV0IHM9MDtuJiZ0aGlzLnRyYWNrJiYodGhpcy50cmFjay5zdHlsZS5oZWlnaHQ9XCJhdXRvXCIsZVt0XS5zbGlkZXMuZm9yRWFjaCgodD0+e3QuZWwmJihzPU1hdGgubWF4KHMsdC5lbC5vZmZzZXRIZWlnaHQpKX0pKSksaS5zdHlsZS5oZWlnaHQ9cz9gJHtzfXB4YDpcIlwifWdldFBhZ2VGb3JTbGlkZSh0KXtmb3IoY29uc3QgZSBvZiB0aGlzLnBhZ2VzKWZvcihjb25zdCBpIG9mIGUuc2xpZGVzKWlmKGkuaW5kZXg9PT10KXJldHVybiBlLmluZGV4O3JldHVybi0xfWdldFZpc2libGVTbGlkZXModD0wKXt2YXIgZTtjb25zdCBpPW5ldyBTZXQ7bGV0e2NvbnRlbnREaW06bix2aWV3cG9ydERpbTpzLHBhZ2VzOm8scGFnZTphfT10aGlzO249bisobnVsbD09PShlPXRoaXMuc2xpZGVzW3RoaXMuc2xpZGVzLmxlbmd0aC0xXSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2FwKXx8MDtsZXQgcj0wO3I9dGhpcy5wYW56b29tPy0xKnRoaXMucGFuem9vbS5jdXJyZW50W3RoaXMuYXhpc106b1thXSYmb1thXS5wb3N8fDAsdGhpcy5pc0luZmluaXRlJiYoci09TWF0aC5mbG9vcihyL24pKm4pLHRoaXMuaXNSVEwmJnRoaXMuaXNIb3Jpem9udGFsJiYocio9LTEpO2NvbnN0IGw9ci1zKnQsYz1yK3MqKHQrMSksaD10aGlzLmlzSW5maW5pdGU/Wy0xLDAsMV06WzBdO2Zvcihjb25zdCB0IG9mIHRoaXMuc2xpZGVzKWZvcihjb25zdCBlIG9mIGgpe2NvbnN0IHM9dC5wb3MrZSpuLG89dC5wb3MrdC5kaW0rdC5nYXArZSpuO3M8YyYmbz5sJiZpLmFkZCh0KX1yZXR1cm4gaX1nZXRQYWdlRnJvbVBvc2l0aW9uKHQpe2NvbnN0e3ZpZXdwb3J0RGltOmUsY29udGVudERpbTppfT10aGlzLG49dGhpcy5wYWdlcy5sZW5ndGgscz10aGlzLnNsaWRlcy5sZW5ndGgsbz10aGlzLnNsaWRlc1tzLTFdO2xldCBhPTAscj0wLGw9MDtjb25zdCBjPXRoaXMub3B0aW9uKFwiY2VudGVyXCIpO2MmJih0Kz0uNSplKSx0aGlzLmlzSW5maW5pdGV8fCh0PU1hdGgubWF4KHRoaXMuc2xpZGVzWzBdLnBvcyxNYXRoLm1pbih0LG8ucG9zKSkpO2NvbnN0IGg9aStvLmdhcDtsPU1hdGguZmxvb3IodC9oKXx8MCx0LT1sKmg7bGV0IGQ9byx1PXRoaXMuc2xpZGVzLmZpbmQoKGU9Pntjb25zdCBpPXQrKGQmJiFjPy41KmQuZGltOjApO3JldHVybiBkPWUsZS5wb3M8PWkmJmUucG9zK2UuZGltK2UuZ2FwPml9KSk7cmV0dXJuIHV8fCh1PW8pLHI9dGhpcy5nZXRQYWdlRm9yU2xpZGUodS5pbmRleCksYT1yK2wqbix7cGFnZTphLHBhZ2VJbmRleDpyfX1kZXN0cm95KCl7aWYoW0wuRGVzdHJveV0uaW5jbHVkZXModGhpcy5zdGF0ZSkpcmV0dXJuO3RoaXMuc3RhdGU9TC5EZXN0cm95O2NvbnN0e2NvbnRhaW5lcjp0LHZpZXdwb3J0OmUsdHJhY2s6aSxzbGlkZXM6bixwYW56b29tOnN9PXRoaXMsbz10aGlzLm9wdGlvbihcImNsYXNzZXNcIik7dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNsaWRlVG9cIix0aGlzLm9uU2xpZGVUbyksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplKSxzJiYocy5kZXN0cm95KCksdGhpcy5wYW56b29tPW51bGwpLG4mJm4uZm9yRWFjaCgodD0+e3RoaXMucmVtb3ZlU2xpZGVFbCh0KX0pKSx0aGlzLmRldGFjaFBsdWdpbnMoKSxlJiZlLm9mZnNldFBhcmVudCYmaSYmaS5vZmZzZXRQYXJlbnQmJmUucmVwbGFjZVdpdGgoLi4uaS5jaGlsZE5vZGVzKTtmb3IoY29uc3RbZSxpXW9mIE9iamVjdC5lbnRyaWVzKG8pKVwiY29udGFpbmVyXCIhPT1lJiZpJiZ0LmNsYXNzTGlzdC5yZW1vdmUoaSk7dGhpcy50cmFjaz1udWxsLHRoaXMudmlld3BvcnQ9bnVsbCx0aGlzLnBhZ2U9MCx0aGlzLnNsaWRlcz1bXTtjb25zdCBhPXRoaXMuZXZlbnRzLmdldChcInJlYWR5XCIpO3RoaXMuZXZlbnRzPW5ldyBNYXAsYSYmdGhpcy5ldmVudHMuc2V0KFwicmVhZHlcIixhKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KF8sXCJQYW56b29tXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOlR9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoXyxcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnp9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoXyxcIlBsdWdpbnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Qn0pO2NvbnN0IE49ZnVuY3Rpb24odCl7Y29uc3QgZT13aW5kb3cucGFnZVlPZmZzZXQsaT13aW5kb3cucGFnZVlPZmZzZXQrd2luZG93LmlubmVySGVpZ2h0O2lmKCF4KHQpKXJldHVybiAwO2NvbnN0IG49dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxzPW4ueSt3aW5kb3cucGFnZVlPZmZzZXQsbz1uLnkrbi5oZWlnaHQrd2luZG93LnBhZ2VZT2Zmc2V0O2lmKGU+b3x8aTxzKXJldHVybiAwO2lmKGU8cyYmaT5vKXJldHVybiAxMDA7aWYoczxlJiZvPmkpcmV0dXJuIDEwMDtsZXQgYT1uLmhlaWdodDtzPGUmJihhLT13aW5kb3cucGFnZVlPZmZzZXQtcyksbz5pJiYoYS09by1pKTtjb25zdCByPWEvd2luZG93LmlubmVySGVpZ2h0KjEwMDtyZXR1cm4gTWF0aC5yb3VuZChyKX0sVz0hKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cuZG9jdW1lbnR8fCF3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7bGV0ICQ7Y29uc3QgWD1bXCJhW2hyZWZdXCIsXCJhcmVhW2hyZWZdXCIsJ2lucHV0Om5vdChbZGlzYWJsZWRdKTpub3QoW3R5cGU9XCJoaWRkZW5cIl0pOm5vdChbYXJpYS1oaWRkZW5dKScsXCJzZWxlY3Q6bm90KFtkaXNhYmxlZF0pOm5vdChbYXJpYS1oaWRkZW5dKVwiLFwidGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pOm5vdChbYXJpYS1oaWRkZW5dKVwiLFwiYnV0dG9uOm5vdChbZGlzYWJsZWRdKTpub3QoW2FyaWEtaGlkZGVuXSk6bm90KC5mYW5jeWJveC1mb2N1cy1ndWFyZClcIixcImlmcmFtZVwiLFwib2JqZWN0XCIsXCJlbWJlZFwiLFwidmlkZW9cIixcImF1ZGlvXCIsXCJbY29udGVudGVkaXRhYmxlXVwiLCdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXhePVwiLVwiXSk6bm90KFtkaXNhYmxlZF0pOm5vdChbYXJpYS1oaWRkZW5dKSddLmpvaW4oXCIsXCIpLFk9dD0+e2lmKHQmJlcpe3ZvaWQgMD09PSQmJmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuZm9jdXMoe2dldCBwcmV2ZW50U2Nyb2xsKCl7cmV0dXJuICQ9ITAsITF9fSk7dHJ5e2lmKCQpdC5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pO2Vsc2V7Y29uc3QgZT13aW5kb3cucGFnZVhPZmZzZXR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLGk9d2luZG93LnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7dC5mb2N1cygpLGRvY3VtZW50LmJvZHkuc2Nyb2xsVG8oe3RvcDplLGxlZnQ6aSxiZWhhdmlvcjpcImF1dG9cIn0pfX1jYXRjaCh0KXt9fX0scT17ZHJhZ1RvQ2xvc2U6ITAsaGlkZVNjcm9sbGJhcjohMCxDYXJvdXNlbDp7Y2xhc3Nlczp7Y29udGFpbmVyOlwiZmFuY3lib3hfX2Nhcm91c2VsXCIsdmlld3BvcnQ6XCJmYW5jeWJveF9fdmlld3BvcnRcIix0cmFjazpcImZhbmN5Ym94X190cmFja1wiLHNsaWRlOlwiZmFuY3lib3hfX3NsaWRlXCJ9fSxjb250ZW50Q2xpY2s6XCJ0b2dnbGVab29tXCIsY29udGVudERibENsaWNrOiExLGJhY2tkcm9wQ2xpY2s6XCJjbG9zZVwiLGFuaW1hdGVkOiEwLGlkbGU6MzUwMCxzaG93Q2xhc3M6XCJmLXpvb21JblVwXCIsaGlkZUNsYXNzOlwiZi1mYWRlT3V0XCIsY29tbW9uQ2FwdGlvbjohMSxwYXJlbnRFbDpudWxsLHN0YXJ0SW5kZXg6MCxsMTBuOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx2KSx7Q0xPU0U6XCJDbG9zZVwiLE5FWFQ6XCJOZXh0XCIsUFJFVjpcIlByZXZpb3VzXCIsTU9EQUw6XCJZb3UgY2FuIGNsb3NlIHRoaXMgbW9kYWwgY29udGVudCB3aXRoIHRoZSBFU0Mga2V5XCIsRVJST1I6XCJTb21ldGhpbmcgV2VudCBXcm9uZywgUGxlYXNlIFRyeSBBZ2FpbiBMYXRlclwiLElNQUdFX0VSUk9SOlwiSW1hZ2UgTm90IEZvdW5kXCIsRUxFTUVOVF9OT1RfRk9VTkQ6XCJIVE1MIEVsZW1lbnQgTm90IEZvdW5kXCIsQUpBWF9OT1RfRk9VTkQ6XCJFcnJvciBMb2FkaW5nIEFKQVggOiBOb3QgRm91bmRcIixBSkFYX0ZPUkJJRERFTjpcIkVycm9yIExvYWRpbmcgQUpBWCA6IEZvcmJpZGRlblwiLElGUkFNRV9FUlJPUjpcIkVycm9yIExvYWRpbmcgUGFnZVwiLFRPR0dMRV9aT09NOlwiVG9nZ2xlIHpvb20gbGV2ZWxcIixUT0dHTEVfVEhVTUJTOlwiVG9nZ2xlIHRodW1ibmFpbHNcIixUT0dHTEVfU0xJREVTSE9XOlwiVG9nZ2xlIHNsaWRlc2hvd1wiLFRPR0dMRV9GVUxMU0NSRUVOOlwiVG9nZ2xlIGZ1bGwtc2NyZWVuIG1vZGVcIixET1dOTE9BRDpcIkRvd25sb2FkXCJ9KSx0cGw6e2Nsb3NlQnV0dG9uOic8YnV0dG9uIGRhdGEtZmFuY3lib3gtY2xvc2UgY2xhc3M9XCJmLWJ1dHRvbiBpcy1jbG9zZS1idG5cIiB0aXRsZT1cInt7Q0xPU0V9fVwiPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB0YWJpbmRleD1cIi0xXCI+PHBhdGggZD1cIk0yMCAyMEw0IDRtMTYgMEw0IDIwXCIvPjwvc3ZnPjwvYnV0dG9uPicsbWFpbjonPGRpdiBjbGFzcz1cImZhbmN5Ym94X19jb250YWluZXJcIiByb2xlPVwiZGlhbG9nXCIgYXJpYS1tb2RhbD1cInRydWVcIiBhcmlhLWxhYmVsPVwie3tNT0RBTH19XCIgdGFiaW5kZXg9XCItMVwiPlxcbiAgICA8ZGl2IGNsYXNzPVwiZmFuY3lib3hfX2JhY2tkcm9wXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJmYW5jeWJveF9fY2Fyb3VzZWxcIj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImZhbmN5Ym94X19mb290ZXJcIj48L2Rpdj5cXG4gIDwvZGl2Pid9LGdyb3VwQWxsOiExLGdyb3VwQXR0cjpcImRhdGEtZmFuY3lib3hcIixkZWZhdWx0VHlwZTpcImltYWdlXCIsZGVmYXVsdERpc3BsYXk6XCJibG9ja1wiLGF1dG9Gb2N1czohMCx0cmFwRm9jdXM6ITAscGxhY2VGb2N1c0JhY2s6ITAsY2xvc2VCdXR0b246XCJhdXRvXCIsa2V5Ym9hcmQ6e0VzY2FwZTpcImNsb3NlXCIsRGVsZXRlOlwiY2xvc2VcIixCYWNrc3BhY2U6XCJjbG9zZVwiLFBhZ2VVcDpcIm5leHRcIixQYWdlRG93bjpcInByZXZcIixBcnJvd1VwOlwicHJldlwiLEFycm93RG93bjpcIm5leHRcIixBcnJvd1JpZ2h0OlwibmV4dFwiLEFycm93TGVmdDpcInByZXZcIn0sRnVsbHNjcmVlbjp7YXV0b1N0YXJ0OiExfSxjb21wYWN0OigpPT53aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDU3OHB4KSwgKG1heC1oZWlnaHQ6IDU3OHB4KVwiKS5tYXRjaGVzLHdoZWVsOlwiem9vbVwifTt2YXIgWixWOyFmdW5jdGlvbih0KXt0W3QuSW5pdD0wXT1cIkluaXRcIix0W3QuUmVhZHk9MV09XCJSZWFkeVwiLHRbdC5DbG9zaW5nPTJdPVwiQ2xvc2luZ1wiLHRbdC5DdXN0b21DbG9zaW5nPTNdPVwiQ3VzdG9tQ2xvc2luZ1wiLHRbdC5EZXN0cm95PTRdPVwiRGVzdHJveVwifShafHwoWj17fSkpLGZ1bmN0aW9uKHQpe3RbdC5Mb2FkaW5nPTBdPVwiTG9hZGluZ1wiLHRbdC5PcGVuaW5nPTFdPVwiT3BlbmluZ1wiLHRbdC5SZWFkeT0yXT1cIlJlYWR5XCIsdFt0LkNsb3Npbmc9M109XCJDbG9zaW5nXCJ9KFZ8fChWPXt9KSk7Y29uc3QgRz0oKT0+e3F1ZXVlTWljcm90YXNrKCgoKT0+eygoKT0+e2NvbnN0e3NsdWc6dCxpbmRleDplfT1VLnBhcnNlVVJMKCksaT14dC5nZXRJbnN0YW5jZSgpO2lmKGkmJiExIT09aS5vcHRpb24oXCJIYXNoXCIpKXtjb25zdCBuPWkuY2Fyb3VzZWw7aWYodCYmbil7Zm9yKGxldCBlIG9mIG4uc2xpZGVzKWlmKGUuc2x1ZyYmZS5zbHVnPT09dClyZXR1cm4gbi5zbGlkZVRvKGUuaW5kZXgpO2lmKHQ9PT1pLm9wdGlvbihcInNsdWdcIikpcmV0dXJuIG4uc2xpZGVUbyhlLTEpO2NvbnN0IHM9aS5nZXRTbGlkZSgpLG89cyYmcy50cmlnZ2VyRWwmJnMudHJpZ2dlckVsLmRhdGFzZXQ7aWYobyYmby5mYW5jeWJveD09PXQpcmV0dXJuIG4uc2xpZGVUbyhlLTEpfVUuaGFzU2lsZW50Q2xvc2U9ITAsaS5jbG9zZSgpfVUuc3RhcnRGcm9tVXJsKCl9KSgpfSkpfTtjbGFzcyBVIGV4dGVuZHMgSXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJvcmlnSGFzaFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpcIlwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0aW1lclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSl9b25DaGFuZ2UoKXtjb25zdCB0PXRoaXMuaW5zdGFuY2UsZT10LmNhcm91c2VsO3RoaXMudGltZXImJmNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtjb25zdCBpPXQuZ2V0U2xpZGUoKTtpZighZXx8IWkpcmV0dXJuO2NvbnN0IG49dC5pc09wZW5pbmdTbGlkZShpKSxzPW5ldyBVUkwoZG9jdW1lbnQuVVJMKS5oYXNoO2xldCBvLGE9aS5zbHVnfHx2b2lkIDA7bz1hfHx0aGlzLmluc3RhbmNlLm9wdGlvbihcInNsdWdcIiksIW8mJmkudHJpZ2dlckVsJiZpLnRyaWdnZXJFbC5kYXRhc2V0JiYobz1pLnRyaWdnZXJFbC5kYXRhc2V0LmZhbmN5Ym94KTtsZXQgcj1cIlwiO28mJlwidHJ1ZVwiIT09byYmKHI9XCIjXCIrbysoIWEmJmUuc2xpZGVzLmxlbmd0aD4xP1wiLVwiKyhpLmluZGV4KzEpOlwiXCIpKSxuJiYodGhpcy5vcmlnSGFzaD1zIT09cj9zOlwiXCIpLHImJnMhPT1yJiYodGhpcy50aW1lcj1zZXRUaW1lb3V0KCgoKT0+e3RyeXt3aW5kb3cuaGlzdG9yeVtuP1wicHVzaFN0YXRlXCI6XCJyZXBsYWNlU3RhdGVcIl0oe30sZG9jdW1lbnQudGl0bGUsd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lK3dpbmRvdy5sb2NhdGlvbi5zZWFyY2grcil9Y2F0Y2godCl7fX0pLDMwMCkpfW9uQ2xvc2UoKXtpZih0aGlzLnRpbWVyJiZjbGVhclRpbWVvdXQodGhpcy50aW1lciksITAhPT1VLmhhc1NpbGVudENsb3NlKXRyeXt3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sZG9jdW1lbnQudGl0bGUsd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lK3dpbmRvdy5sb2NhdGlvbi5zZWFyY2grKHRoaXMub3JpZ0hhc2h8fFwiXCIpKX1jYXRjaCh0KXt9fWF0dGFjaCgpe3RoaXMuaW5zdGFuY2Uub24oXCJDYXJvdXNlbC5yZWFkeVwiLHRoaXMub25DaGFuZ2UpLHRoaXMuaW5zdGFuY2Uub24oXCJDYXJvdXNlbC5jaGFuZ2VcIix0aGlzLm9uQ2hhbmdlKSx0aGlzLmluc3RhbmNlLm9uKFwiY2xvc2VcIix0aGlzLm9uQ2xvc2UpfWRldGFjaCgpe3RoaXMuaW5zdGFuY2Uub2ZmKFwiQ2Fyb3VzZWwucmVhZHlcIix0aGlzLm9uQ2hhbmdlKSx0aGlzLmluc3RhbmNlLm9mZihcIkNhcm91c2VsLmNoYW5nZVwiLHRoaXMub25DaGFuZ2UpLHRoaXMuaW5zdGFuY2Uub2ZmKFwiY2xvc2VcIix0aGlzLm9uQ2xvc2UpfXN0YXRpYyBwYXJzZVVSTCgpe2NvbnN0IHQ9d2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSksZT10LnNwbGl0KFwiLVwiKSxpPWVbZS5sZW5ndGgtMV0sbj1pJiYvXlxcKz9cXGQrJC8udGVzdChpKSYmcGFyc2VJbnQoZS5wb3AoKXx8XCIxXCIsMTApfHwxO3JldHVybntoYXNoOnQsc2x1ZzplLmpvaW4oXCItXCIpLGluZGV4Om59fXN0YXRpYyBzdGFydEZyb21VcmwoKXtpZihVLmhhc1NpbGVudENsb3NlPSExLHh0LmdldEluc3RhbmNlKCl8fCExPT09eHQuZGVmYXVsdHMuSGFzaClyZXR1cm47Y29uc3R7aGFzaDp0LHNsdWc6ZSxpbmRleDppfT1VLnBhcnNlVVJMKCk7aWYoIWUpcmV0dXJuO2xldCBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXNsdWc9XCIke3R9XCJdYCk7aWYobiYmbi5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImNsaWNrXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pKSx4dC5nZXRJbnN0YW5jZSgpKXJldHVybjtjb25zdCBzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLWZhbmN5Ym94PVwiJHtlfVwiXWApO3MubGVuZ3RoJiYobj1zW2ktMV0sbiYmbi5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImNsaWNrXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pKSl9c3RhdGljIGRlc3Ryb3koKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImhhc2hjaGFuZ2VcIixHLCExKX19ZnVuY3Rpb24gSygpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLEcsITEpLHNldFRpbWVvdXQoKCgpPT57VS5zdGFydEZyb21VcmwoKX0pLDUwMCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KFUsXCJkZWZhdWx0c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVLFwiaGFzU2lsZW50Q2xvc2VcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ITF9KSxXJiYoL2NvbXBsZXRlfGludGVyYWN0aXZlfGxvYWRlZC8udGVzdChkb2N1bWVudC5yZWFkeVN0YXRlKT9LKCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixLKSk7Y2xhc3MgSiBleHRlbmRzIEl7b25DcmVhdGVTbGlkZSh0LGUsaSl7Y29uc3Qgbj10aGlzLmluc3RhbmNlLHM9bi5vcHRpb25Gb3IoaSxcInNyY1wiKXx8XCJcIix7ZWw6byx0eXBlOmF9PWk7byYmXCJpbWFnZVwiPT09YSYmXCJzdHJpbmdcIj09dHlwZW9mIHMmJnRoaXMuc2V0Q29udGVudChpLHMpLnRoZW4oKHQ9Pntjb25zdCBlPWkuY29udGVudEVsLHM9aS5pbWFnZUVsLGE9aS50aHVtYkVsU3JjO2lmKG4uaXNDbG9zaW5nKCl8fCFlfHwhcylyZXR1cm47ZS5vZmZzZXRIZWlnaHQ7Y29uc3Qgcj0hIW4uaXNPcGVuaW5nU2xpZGUoaSkmJnRoaXMuZ2V0Wm9vbUluZm8oaSk7aWYodGhpcy5vcHRpb24oXCJwcm90ZWN0ZWRcIikpe28uYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsKHQ9Pnt0LnByZXZlbnREZWZhdWx0KCl9KSk7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1ModCxcImZhbmN5Ym94LXByb3RlY3RlZFwiKSxlLmFwcGVuZENoaWxkKHQpfWlmKGEmJnIpe2NvbnN0IHM9dC5jb250ZW50UmVjdCxvPU1hdGgubWF4KHMuZnVsbFdpZHRoLHMuZnVsbEhlaWdodCk7bGV0IGM9bnVsbDshci5vcGFjaXR5JiZvPjEyMDAmJihjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksUyhjLFwiZmFuY3lib3gtZ2hvc3RcIiksYy5zcmM9YSxlLmFwcGVuZENoaWxkKGMpKTtjb25zdCBoPSgpPT57YyYmKFMoYyxcImYtZmFkZUZhc3RPdXRcIiksc2V0VGltZW91dCgoKCk9PntjJiYoYy5yZW1vdmUoKSxjPW51bGwpfSksMjAwKSl9OyhsPWEsbmV3IFByb21pc2UoKCh0LGUpPT57Y29uc3QgaT1uZXcgSW1hZ2U7aS5vbmxvYWQ9dCxpLm9uZXJyb3I9ZSxpLnNyYz1sfSkpKS50aGVuKCgoKT0+e2kuc3RhdGU9Vi5PcGVuaW5nLHRoaXMuaW5zdGFuY2UuZW1pdChcInJldmVhbFwiLGkpLHRoaXMuem9vbUluKGkpLnRoZW4oKCgpPT57aCgpLHRoaXMuaW5zdGFuY2UuZG9uZShpKX0pLCgoKT0+e24uaGlkZUxvYWRpbmcoaSl9KSksYyYmc2V0VGltZW91dCgoKCk9PntoKCl9KSxvPjI1MDA/ODAwOjIwMCl9KSwoKCk9PntuLmhpZGVMb2FkaW5nKGkpLG4ucmV2ZWFsQ29udGVudChpKX0pKX1lbHNle2NvbnN0IGU9dGhpcy5vcHRpb25Gb3IoaSxcImluaXRpYWxTaXplXCIpLHM9dGhpcy5vcHRpb25Gb3IoaSxcInpvb21cIiksbz17ZXZlbnQ6bi5wcmV2TW91c2VNb3ZlRXZlbnR8fG4ub3B0aW9ucy5ldmVudCxmcmljdGlvbjpzPy4xMjowfTtsZXQgYT1uLm9wdGlvbkZvcihpLFwic2hvd0NsYXNzXCIpfHx2b2lkIDAscj0hMDtuLmlzT3BlbmluZ1NsaWRlKGkpJiYoXCJmdWxsXCI9PT1lP3Quem9vbVRvRnVsbChvKTpcImNvdmVyXCI9PT1lP3Quem9vbVRvQ292ZXIobyk6XCJtYXhcIj09PWU/dC56b29tVG9NYXgobyk6cj0hMSx0LnN0b3AoXCJjdXJyZW50XCIpKSxyJiZhJiYoYT10LmlzRHJhZ2dpbmc/XCJmLWZhZGVJblwiOlwiXCIpLG4ucmV2ZWFsQ29udGVudChpLGEpfXZhciBsfSksKCgpPT57bi5zZXRFcnJvcihpLFwie3tJTUFHRV9FUlJPUn19XCIpfSkpfW9uUmVtb3ZlU2xpZGUodCxlLGkpe2kucGFuem9vbSYmaS5wYW56b29tLmRlc3Ryb3koKSxpLnBhbnpvb209dm9pZCAwLGkuaW1hZ2VFbD12b2lkIDB9b25DaGFuZ2UodCxlLGksbil7Zm9yKGNvbnN0IHQgb2YgZS5zbGlkZXMpe2NvbnN0IGU9dC5wYW56b29tO2UmJnQuaW5kZXghPT1pJiZlLnJlc2V0KC4zNSl9fW9uQ2xvc2UoKXtjb25zdCB0PXRoaXMuaW5zdGFuY2UsZT10LmNvbnRhaW5lcixpPXQuZ2V0U2xpZGUoKTtpZighZXx8IWUucGFyZW50RWxlbWVudHx8IWkpcmV0dXJuO2NvbnN0e2VsOm4sY29udGVudEVsOnMscGFuem9vbTpvfT1pLGE9aS50aHVtYkVsU3JjO2lmKCFufHwhYXx8IXN8fCFvfHxvLmlzQ29udGVudExvYWRpbmd8fG8uc3RhdGU9PT1nLkluaXR8fG8uc3RhdGU9PT1nLkRlc3Ryb3kpcmV0dXJuO28udXBkYXRlTWV0cmljcygpO2xldCByPXRoaXMuZ2V0Wm9vbUluZm8oaSk7aWYoIXIpcmV0dXJuO3RoaXMuaW5zdGFuY2Uuc3RhdGU9Wi5DdXN0b21DbG9zaW5nLGUuY2xhc3NMaXN0LnJlbW92ZShcImlzLXpvb21pbmctaW5cIiksZS5jbGFzc0xpc3QuYWRkKFwiaXMtem9vbWluZy1vdXRcIikscy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9YHVybCgnJHthfScpYDtjb25zdCBsPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7T2JqZWN0LmFzc2lnbihlLnN0eWxlLHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOmAke3dpbmRvdy5wYWdlWU9mZnNldH1weGAsbGVmdDpgJHt3aW5kb3cucGFnZVhPZmZzZXR9cHhgLGJvdHRvbTpcImF1dG9cIixyaWdodDpcImF1dG9cIix3aWR0aDpgJHtsLndpZHRofXB4YCxoZWlnaHQ6YCR7bC5oZWlnaHR9cHhgLG92ZXJmbG93OlwiaGlkZGVuXCJ9KTtjb25zdHt4OmMseTpoLHNjYWxlOmQsb3BhY2l0eTp1fT1yO2lmKHUpe2NvbnN0IHQ9KCh0LGUsaSxuKT0+e2NvbnN0IHM9ZS10LG89bi1pO3JldHVybiBlPT5pKygoZS10KS9zKm98fDApfSkoby5zY2FsZSxkLDEsMCk7by5vbihcImFmdGVyVHJhbnNmb3JtXCIsKCgpPT57cy5zdHlsZS5vcGFjaXR5PXQoby5zY2FsZSkrXCJcIn0pKX1vLm9uKFwiZW5kQW5pbWF0aW9uXCIsKCgpPT57dC5kZXN0cm95KCl9KSksby50YXJnZXQuYT1kLG8udGFyZ2V0LmI9MCxvLnRhcmdldC5jPTAsby50YXJnZXQuZD1kLG8ucGFuVG8oe3g6Yyx5Omgsc2NhbGU6ZCxmcmljdGlvbjp1Py4yOi4zMyxpZ25vcmVCb3VuZHM6ITB9KSxvLmlzUmVzdGluZyYmdC5kZXN0cm95KCl9c2V0Q29udGVudCh0LGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKGkscyk9Pnt2YXIgbyxhO2NvbnN0IHI9dGhpcy5pbnN0YW5jZSxsPXQuZWw7aWYoIWwpcmV0dXJuIHZvaWQgcygpO3Iuc2hvd0xvYWRpbmcodCk7bGV0IGM9dGhpcy5vcHRpb25Gb3IodCxcImNvbnRlbnRcIik7XCJzdHJpbmdcIj09dHlwZW9mIGMmJihjPW4oYykpLGMmJngoYyl8fChjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksYyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQmJihjLnNyYz1lfHxcIlwiLGMuYWx0PShudWxsPT09KG89dC5jYXB0aW9uKXx8dm9pZCAwPT09bz92b2lkIDA6by5yZXBsYWNlKC88W14+XSs+L2dpLFwiXCIpLnN1YnN0cmluZygwLDFlMykpfHxgSW1hZ2UgJHt0LmluZGV4KzF9IG9mICR7bnVsbD09PShhPXIuY2Fyb3VzZWwpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLnBhZ2VzLmxlbmd0aH1gLGMuZHJhZ2dhYmxlPSExLHQuc3Jjc2V0JiZjLnNldEF0dHJpYnV0ZShcInNyY3NldFwiLHQuc3Jjc2V0KSksdC5zaXplcyYmYy5zZXRBdHRyaWJ1dGUoXCJzaXplc1wiLHQuc2l6ZXMpKSxjLmNsYXNzTGlzdC5hZGQoXCJmYW5jeWJveC1pbWFnZVwiKSx0LmltYWdlRWw9YyxyLnNldENvbnRlbnQodCxjLCExKTt0LnBhbnpvb209bmV3IFQobCx1KHt9LHRoaXMub3B0aW9uKFwiUGFuem9vbVwiKXx8e30se2NvbnRlbnQ6Yyx3aWR0aDpyLm9wdGlvbkZvcih0LFwid2lkdGhcIixcImF1dG9cIiksaGVpZ2h0OnIub3B0aW9uRm9yKHQsXCJoZWlnaHRcIixcImF1dG9cIiksd2hlZWw6KCk9Pntjb25zdCB0PXIub3B0aW9uKFwid2hlZWxcIik7cmV0dXJuKFwiem9vbVwiPT09dHx8XCJwYW5cIj09dCkmJnR9LGNsaWNrOihlLGkpPT57dmFyIG4scztpZihyLmlzQ29tcGFjdHx8ci5pc0Nsb3NpbmcoKSlyZXR1cm4hMTtpZih0LmluZGV4IT09KG51bGw9PT0obj1yLmdldFNsaWRlKCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmluZGV4KSlyZXR1cm4hMTtsZXQgbz0haXx8aS50YXJnZXQmJihudWxsPT09KHM9dC5jb250ZW50RWwpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmNvbnRhaW5zKGkudGFyZ2V0KSk7cmV0dXJuIHIub3B0aW9uKG8/XCJjb250ZW50Q2xpY2tcIjpcImJhY2tkcm9wQ2xpY2tcIil8fCExfSxkYmxDbGljazooKT0+ci5pc0NvbXBhY3Q/XCJ0b2dnbGVab29tXCI6ci5vcHRpb24oXCJjb250ZW50RGJsQ2xpY2tcIil8fCExLHNwaW5uZXI6ITEscGFuT25seVpvb21lZDohMCx3aGVlbExpbWl0OjEvMCx0cmFuc2Zvcm1QYXJlbnQ6ITAsb246e3JlYWR5OnQ9PntpKHQpfSxlcnJvcjooKT0+e3MoKX0sZGVzdHJveTooKT0+e3MoKX19fSkpfSkpfXpvb21Jbih0KXtyZXR1cm4gbmV3IFByb21pc2UoKChlLGkpPT57Y29uc3Qgbj10aGlzLmluc3RhbmNlLHM9bi5jb250YWluZXIse3Bhbnpvb206byxjb250ZW50RWw6YSxlbDpyfT10O28mJm8udXBkYXRlTWV0cmljcygpO2NvbnN0IGw9dGhpcy5nZXRab29tSW5mbyh0KTtpZighKGwmJnImJmEmJm8mJnMpKXJldHVybiB2b2lkIGkoKTtjb25zdHt4OmMseTpoLHNjYWxlOmQsb3BhY2l0eTp1fT1sLHA9KCk9Pnt0LnN0YXRlIT09Vi5DbG9zaW5nJiYodSYmKGEuc3R5bGUub3BhY2l0eT1NYXRoLm1heChNYXRoLm1pbigxLDEtKDEtby5zY2FsZSkvKDEtZCkpLDApK1wiXCIpLG8uc2NhbGU+PTEmJm8uc2NhbGU+by50YXJnZXRTY2FsZS0uMSYmZShvKSl9LGY9dD0+e3Quc2NhbGU8Ljk5fHx0LnNjYWxlPjEuMDF8fChhLnN0eWxlLm9wYWNpdHk9XCJcIixFKHMsXCJpcy16b29taW5nLWluXCIpLHQub2ZmKFwiZW5kQW5pbWF0aW9uXCIsZiksdC5vZmYoXCJ0b3VjaFN0YXJ0XCIsZiksdC5vZmYoXCJhZnRlclRyYW5zZm9ybVwiLHApLGUodCkpfTtvLm9uKFwiZW5kQW5pbWF0aW9uXCIsZiksby5vbihcInRvdWNoU3RhcnRcIixmKSxvLm9uKFwiYWZ0ZXJUcmFuc2Zvcm1cIixwKSxvLm9uKFtcImVycm9yXCIsXCJkZXN0cm95XCJdLCgoKT0+e2koKX0pKSxvLnBhblRvKHt4OmMseTpoLHNjYWxlOmQsZnJpY3Rpb246MCxpZ25vcmVCb3VuZHM6ITB9KSxvLnN0b3AoXCJjdXJyZW50XCIpO2NvbnN0IG09e2V2ZW50OlwibW91c2Vtb3ZlXCI9PT1vLnBhbk1vZGU/bi5wcmV2TW91c2VNb3ZlRXZlbnR8fG4ub3B0aW9ucy5ldmVudDp2b2lkIDB9LGc9dGhpcy5vcHRpb25Gb3IodCxcImluaXRpYWxTaXplXCIpO1MocyxcImlzLXpvb21pbmctaW5cIiksbi5oaWRlTG9hZGluZyh0KSxcImZ1bGxcIj09PWc/by56b29tVG9GdWxsKG0pOlwiY292ZXJcIj09PWc/by56b29tVG9Db3ZlcihtKTpcIm1heFwiPT09Zz9vLnpvb21Ub01heChtKTpvLnJlc2V0KC4xNzIpfSkpfWdldFpvb21JbmZvKHQpe2NvbnN0e2VsOmUsaW1hZ2VFbDppLHRodW1iRWw6bixwYW56b29tOnN9PXQ7aWYoIWV8fCFpfHwhbnx8IXN8fE4obik8M3x8IXRoaXMub3B0aW9uRm9yKHQsXCJ6b29tXCIpfHx0aGlzLmluc3RhbmNlLnN0YXRlPT09Wi5EZXN0cm95KXJldHVybiExO2NvbnN0e3RvcDpvLGxlZnQ6YSx3aWR0aDpyLGhlaWdodDpsfT1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2xldHt0b3A6YyxsZWZ0OmgsZml0V2lkdGg6ZCxmaXRIZWlnaHQ6dX09cy5jb250ZW50UmVjdDtpZighKHImJmwmJmQmJnUpKXJldHVybiExO2NvbnN0IHA9ci9kLGY9cy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7Yys9Zi50b3AsaCs9Zi5sZWZ0O2NvbnN0IG09LTEqKGgrLjUqZC0oYSsuNSpyKSksZz0tMSooYysuNSp1LShvKy41KmwpKTtsZXQgYj10aGlzLm9wdGlvbihcInpvb21PcGFjaXR5XCIpfHwhMTtyZXR1cm5cImF1dG9cIj09PWImJihiPU1hdGguYWJzKHIvbC1kL3UpPi4xKSx7eDptLHk6ZyxzY2FsZTpwLG9wYWNpdHk6Yn19YXR0YWNoKCl7dGhpcy5pbnN0YW5jZS5vbihcIkNhcm91c2VsLmNoYW5nZVwiLHRoaXMub25DaGFuZ2UpLHRoaXMuaW5zdGFuY2Uub24oXCJDYXJvdXNlbC5jcmVhdGVTbGlkZVwiLHRoaXMub25DcmVhdGVTbGlkZSksdGhpcy5pbnN0YW5jZS5vbihcIkNhcm91c2VsLnJlbW92ZVNsaWRlXCIsdGhpcy5vblJlbW92ZVNsaWRlKSx0aGlzLmluc3RhbmNlLm9uKFwiY2xvc2VcIix0aGlzLm9uQ2xvc2UpfWRldGFjaCgpe3RoaXMuaW5zdGFuY2Uub2ZmKFwiQ2Fyb3VzZWwuY2hhbmdlXCIsdGhpcy5vbkNoYW5nZSksdGhpcy5pbnN0YW5jZS5vZmYoXCJDYXJvdXNlbC5jcmVhdGVTbGlkZVwiLHRoaXMub25DcmVhdGVTbGlkZSksdGhpcy5pbnN0YW5jZS5vZmYoXCJDYXJvdXNlbC5yZW1vdmVTbGlkZVwiLHRoaXMub25SZW1vdmVTbGlkZSksdGhpcy5pbnN0YW5jZS5vZmYoXCJjbG9zZVwiLHRoaXMub25DbG9zZSl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShKLFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e2luaXRpYWxTaXplOlwiZml0XCIsUGFuem9vbTp7bWF4U2NhbGU6MX0scHJvdGVjdGVkOiExLHpvb206ITAsem9vbU9wYWNpdHk6XCJhdXRvXCJ9fSk7Y29uc3QgUT0odCxlPXt9KT0+e2NvbnN0IGk9bmV3IFVSTCh0KSxuPW5ldyBVUkxTZWFyY2hQYXJhbXMoaS5zZWFyY2gpLHM9bmV3IFVSTFNlYXJjaFBhcmFtcztmb3IoY29uc3RbdCxpXW9mWy4uLm4sLi4uT2JqZWN0LmVudHJpZXMoZSldKXtsZXQgZT1pLnRvU3RyaW5nKCk7XCJ0XCI9PT10P3Muc2V0KFwic3RhcnRcIixwYXJzZUludChlKS50b1N0cmluZygpKTpzLnNldCh0LGUpfWxldCBvPXMudG9TdHJpbmcoKSxhPXQubWF0Y2goLyN0PSgoLiopP1xcZCtzKS8pO3JldHVybiBhJiYobys9YCN0PSR7YVsxXX1gKSxvfSx0dD17YWpheDpudWxsLGF1dG9TaXplOiEwLHByZWxvYWQ6ITAsdmlkZW9BdXRvcGxheTohMCx2aWRlb1JhdGlvOjE2LzksdmlkZW9UcGw6Jzx2aWRlbyBjbGFzcz1cImZhbmN5Ym94X19odG1sNXZpZGVvXCIgcGxheXNpbmxpbmUgY29udHJvbHMgY29udHJvbHNMaXN0PVwibm9kb3dubG9hZFwiIHBvc3Rlcj1cInt7cG9zdGVyfX1cIj5cXG4gIDxzb3VyY2Ugc3JjPVwie3tzcmN9fVwiIHR5cGU9XCJ7e2Zvcm1hdH19XCIgLz5Tb3JyeSwgeW91ciBicm93c2VyIGRvZXNuXFwndCBzdXBwb3J0IGVtYmVkZGVkIHZpZGVvcy48L3ZpZGVvPicsdmlkZW9Gb3JtYXQ6XCJcIix2aW1lbzp7YnlsaW5lOjEsY29sb3I6XCIwMGFkZWZcIixjb250cm9sczoxLGRudDoxLG11dGVkOjB9LHlvdXR1YmU6e2NvbnRyb2xzOjEsZW5hYmxlanNhcGk6MSxub2Nvb2tpZToxLHJlbDowLGZzOjF9fSxldD1bXCJpbWFnZVwiLFwiaHRtbFwiLFwiYWpheFwiLFwiaW5saW5lXCIsXCJjbG9uZVwiLFwiaWZyYW1lXCIsXCJtYXBcIixcInBkZlwiLFwiaHRtbDV2aWRlb1wiLFwieW91dHViZVwiLFwidmltZW9cIixcInZpZGVvXCJdO2NsYXNzIGl0IGV4dGVuZHMgSXtvbkluaXRTbGlkZSh0LGUsaSl7dGhpcy5wcm9jZXNzVHlwZShpKX1vbkNyZWF0ZVNsaWRlKHQsZSxpKXt0aGlzLnNldENvbnRlbnQoaSl9b25SZW1vdmVTbGlkZSh0LGUsaSl7aS5jbG9zZUJ0bkVsJiYoaS5jbG9zZUJ0bkVsLnJlbW92ZSgpLGkuY2xvc2VCdG5FbD12b2lkIDApLGkueGhyJiYoaS54aHIuYWJvcnQoKSxpLnhocj1udWxsKSxpLmlmcmFtZUVsJiYoaS5pZnJhbWVFbC5vbmxvYWQ9aS5pZnJhbWVFbC5vbmVycm9yPW51bGwsaS5pZnJhbWVFbC5zcmM9XCIvL2Fib3V0OmJsYW5rXCIsaS5pZnJhbWVFbD1udWxsKTtjb25zdCBuPWkuY29udGVudEVsLHM9aS5wbGFjZWhvbGRlckVsO2lmKFwiaW5saW5lXCI9PT1pLnR5cGUmJm4mJnMpbi5jbGFzc0xpc3QucmVtb3ZlKFwiZmFuY3lib3hfX2NvbnRlbnRcIiksXCJub25lXCIhPT1uLnN0eWxlLmRpc3BsYXkmJihuLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHMucGFyZW50Tm9kZSYmcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuLHMpLHMucmVtb3ZlKCksaS5wbGFjZWhvbGRlckVsPW51bGw7ZWxzZSBmb3IoO2kuZWwmJmkuZWwuZmlyc3RDaGlsZDspaS5lbC5yZW1vdmVDaGlsZChpLmVsLmZpcnN0Q2hpbGQpfW9uU2VsZWN0U2xpZGUodCxlLGkpe2kuc3RhdGU9PT1WLlJlYWR5JiZ0aGlzLnBsYXlWaWRlbygpfW9uVW5zZWxlY3RTbGlkZSh0LGUsaSl7dmFyIG4scztpZihcImh0bWw1dmlkZW9cIj09PWkudHlwZSl7dHJ5e251bGw9PT0ocz1udWxsPT09KG49aS5lbCl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucXVlcnlTZWxlY3RvcihcInZpZGVvXCIpKXx8dm9pZCAwPT09c3x8cy5wYXVzZSgpfWNhdGNoKHQpe31yZXR1cm59bGV0IG87XCJ2aW1lb1wiPT09aS50eXBlP289e21ldGhvZDpcInBhdXNlXCIsdmFsdWU6XCJ0cnVlXCJ9OlwieW91dHViZVwiPT09aS50eXBlJiYobz17ZXZlbnQ6XCJjb21tYW5kXCIsZnVuYzpcInBhdXNlVmlkZW9cIn0pLG8mJmkuaWZyYW1lRWwmJmkuaWZyYW1lRWwuY29udGVudFdpbmRvdyYmaS5pZnJhbWVFbC5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KG8pLFwiKlwiKSxpLnBvbGxlciYmY2xlYXJUaW1lb3V0KGkucG9sbGVyKX1vbkRvbmUodCxlKXt0LmlzQ3VycmVudFNsaWRlKGUpJiYhdC5pc0Nsb3NpbmcoKSYmdGhpcy5wbGF5VmlkZW8oKX1vblJlZnJlc2godCxlKXtlLnNsaWRlcy5mb3JFYWNoKCh0PT57dC5lbCYmKHRoaXMuc2V0QXNwZWN0UmF0aW8odCksdGhpcy5yZXNpemVJZnJhbWUodCkpfSkpfW9uTWVzc2FnZSh0KXt0cnl7bGV0IGU9SlNPTi5wYXJzZSh0LmRhdGEpO2lmKFwiaHR0cHM6Ly9wbGF5ZXIudmltZW8uY29tXCI9PT10Lm9yaWdpbil7aWYoXCJyZWFkeVwiPT09ZS5ldmVudClmb3IobGV0IGUgb2YgQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZmFuY3lib3hfX2lmcmFtZVwiKSkpZSBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50JiZlLmNvbnRlbnRXaW5kb3c9PT10LnNvdXJjZSYmKGUuZGF0YXNldC5yZWFkeT1cInRydWVcIil9ZWxzZSBpZih0Lm9yaWdpbi5tYXRjaCgvXmh0dHBzOlxcL1xcLyh3d3cuKT95b3V0dWJlKC1ub2Nvb2tpZSk/LmNvbSQvKSYmXCJvblJlYWR5XCI9PT1lLmV2ZW50KXtjb25zdCB0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUuaWQpO3QmJih0LmRhdGFzZXQucmVhZHk9XCJ0cnVlXCIpfX1jYXRjaCh0KXt9fWxvYWRBamF4Q29udGVudCh0KXtjb25zdCBlPXRoaXMuaW5zdGFuY2Uub3B0aW9uRm9yKHQsXCJzcmNcIil8fFwiXCI7dGhpcy5pbnN0YW5jZS5zaG93TG9hZGluZyh0KTtjb25zdCBpPXRoaXMuaW5zdGFuY2Usbj1uZXcgWE1MSHR0cFJlcXVlc3Q7aS5zaG93TG9hZGluZyh0KSxuLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe24ucmVhZHlTdGF0ZT09PVhNTEh0dHBSZXF1ZXN0LkRPTkUmJmkuc3RhdGU9PT1aLlJlYWR5JiYoaS5oaWRlTG9hZGluZyh0KSwyMDA9PT1uLnN0YXR1cz9pLnNldENvbnRlbnQodCxuLnJlc3BvbnNlVGV4dCk6aS5zZXRFcnJvcih0LDQwND09PW4uc3RhdHVzP1wie3tBSkFYX05PVF9GT1VORH19XCI6XCJ7e0FKQVhfRk9SQklEREVOfX1cIikpfTtjb25zdCBzPXQuYWpheHx8bnVsbDtuLm9wZW4ocz9cIlBPU1RcIjpcIkdFVFwiLGUrXCJcIiksbi5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiksbi5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1SZXF1ZXN0ZWQtV2l0aFwiLFwiWE1MSHR0cFJlcXVlc3RcIiksbi5zZW5kKHMpLHQueGhyPW59c2V0SW5saW5lQ29udGVudCh0KXtsZXQgZT1udWxsO2lmKHgodC5zcmMpKWU9dC5zcmM7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdC5zcmMpe2NvbnN0IGk9dC5zcmMuc3BsaXQoXCIjXCIsMikucG9wKCk7ZT1pP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGkpOm51bGx9aWYoZSl7aWYoXCJjbG9uZVwiPT09dC50eXBlfHxlLmNsb3Nlc3QoXCIuZmFuY3lib3hfX3NsaWRlXCIpKXtlPWUuY2xvbmVOb2RlKCEwKTtjb25zdCBpPWUuZGF0YXNldC5hbmltYXRpb25OYW1lO2kmJihlLmNsYXNzTGlzdC5yZW1vdmUoaSksZGVsZXRlIGUuZGF0YXNldC5hbmltYXRpb25OYW1lKTtsZXQgbj1lLmdldEF0dHJpYnV0ZShcImlkXCIpO249bj9gJHtufS0tY2xvbmVgOmBjbG9uZS0ke3RoaXMuaW5zdGFuY2UuaWR9LSR7dC5pbmRleH1gLGUuc2V0QXR0cmlidXRlKFwiaWRcIixuKX1lbHNlIGlmKGUucGFyZW50Tm9kZSl7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NMaXN0LmFkZChcImZhbmN5Ym94LXBsYWNlaG9sZGVyXCIpLGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaSxlKSx0LnBsYWNlaG9sZGVyRWw9aX10aGlzLmluc3RhbmNlLnNldENvbnRlbnQodCxlKX1lbHNlIHRoaXMuaW5zdGFuY2Uuc2V0RXJyb3IodCxcInt7RUxFTUVOVF9OT1RfRk9VTkR9fVwiKX1zZXRJZnJhbWVDb250ZW50KHQpe2NvbnN0e3NyYzplLGVsOml9PXQ7aWYoIWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlfHwhaSlyZXR1cm47Y29uc3Qgbj10aGlzLmluc3RhbmNlLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtzLmNsYXNzTmFtZT1cImZhbmN5Ym94X19pZnJhbWVcIixzLnNldEF0dHJpYnV0ZShcImlkXCIsYGZhbmN5Ym94X19pZnJhbWVfJHtuLmlkfV8ke3QuaW5kZXh9YCkscy5zZXRBdHRyaWJ1dGUoXCJhbGxvd1wiLFwiYXV0b3BsYXk7IGZ1bGxzY3JlZW5cIikscy5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIixcImF1dG9cIikscy5vbmVycm9yPSgpPT57bi5zZXRFcnJvcih0LFwie3tJRlJBTUVfRVJST1J9fVwiKX0sdC5pZnJhbWVFbD1zO2NvbnN0IG89dGhpcy5vcHRpb25Gb3IodCxcInByZWxvYWRcIik7aWYoaS5jbGFzc0xpc3QuYWRkKFwiaXMtbG9hZGluZ1wiKSxcImlmcmFtZVwiIT09dC50eXBlfHwhMT09PW8pcmV0dXJuIHMuc2V0QXR0cmlidXRlKFwic3JjXCIsdC5zcmMrXCJcIiksdGhpcy5yZXNpemVJZnJhbWUodCksdm9pZCBuLnNldENvbnRlbnQodCxzKTtuLnNob3dMb2FkaW5nKHQpLHMub25sb2FkPSgpPT57aWYoIXMuc3JjLmxlbmd0aClyZXR1cm47Y29uc3QgZT1cInRydWVcIiE9PXMuZGF0YXNldC5yZWFkeTtzLmRhdGFzZXQucmVhZHk9XCJ0cnVlXCIsdGhpcy5yZXNpemVJZnJhbWUodCksZT9uLnJldmVhbENvbnRlbnQodCk6bi5oaWRlTG9hZGluZyh0KX0scy5zZXRBdHRyaWJ1dGUoXCJzcmNcIixlKSxuLnNldENvbnRlbnQodCxzLCExKX1yZXNpemVJZnJhbWUodCl7Y29uc3QgZT10LmlmcmFtZUVsLGk9bnVsbD09ZT92b2lkIDA6ZS5wYXJlbnRFbGVtZW50O2lmKCFlfHwhaSlyZXR1cm47bGV0IG49dC5hdXRvU2l6ZSxzPXQud2lkdGh8fDAsbz10LmhlaWdodHx8MDtzJiZvJiYobj0hMSk7Y29uc3QgYT1pJiZpLnN0eWxlO2lmKCExIT09dC5wcmVsb2FkJiYhMSE9PW4mJmEpdHJ5e2NvbnN0IHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUoaSksbj1wYXJzZUZsb2F0KHQucGFkZGluZ0xlZnQpK3BhcnNlRmxvYXQodC5wYWRkaW5nUmlnaHQpLHI9cGFyc2VGbG9hdCh0LnBhZGRpbmdUb3ApK3BhcnNlRmxvYXQodC5wYWRkaW5nQm90dG9tKSxsPWUuY29udGVudFdpbmRvdztpZihsKXtjb25zdCB0PWwuZG9jdW1lbnQsZT10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKVswXSxpPXQuYm9keTthLndpZHRoPVwiXCIsaS5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLHM9c3x8ZS5zY3JvbGxXaWR0aCtuLGEud2lkdGg9YCR7c31weGAsaS5zdHlsZS5vdmVyZmxvdz1cIlwiLGEuZmxleD1cIjAgMCBhdXRvXCIsYS5oZWlnaHQ9YCR7aS5zY3JvbGxIZWlnaHR9cHhgLG89ZS5zY3JvbGxIZWlnaHQrcn19Y2F0Y2godCl7fWlmKHN8fG8pe2NvbnN0IHQ9e2ZsZXg6XCIwIDEgYXV0b1wiLHdpZHRoOlwiXCIsaGVpZ2h0OlwiXCJ9O3MmJih0LndpZHRoPWAke3N9cHhgKSxvJiYodC5oZWlnaHQ9YCR7b31weGApLE9iamVjdC5hc3NpZ24oYSx0KX19cGxheVZpZGVvKCl7Y29uc3QgdD10aGlzLmluc3RhbmNlLmdldFNsaWRlKCk7aWYoIXQpcmV0dXJuO2NvbnN0e2VsOmV9PXQ7aWYoIWV8fCFlLm9mZnNldFBhcmVudClyZXR1cm47aWYoIXRoaXMub3B0aW9uRm9yKHQsXCJ2aWRlb0F1dG9wbGF5XCIpKXJldHVybjtpZihcImh0bWw1dmlkZW9cIj09PXQudHlwZSl0cnl7Y29uc3QgdD1lLnF1ZXJ5U2VsZWN0b3IoXCJ2aWRlb1wiKTtpZih0KXtjb25zdCBlPXQucGxheSgpO3ZvaWQgMCE9PWUmJmUudGhlbigoKCk9Pnt9KSkuY2F0Y2goKGU9Pnt0Lm11dGVkPSEwLHQucGxheSgpfSkpfX1jYXRjaCh0KXt9aWYoXCJ5b3V0dWJlXCIhPT10LnR5cGUmJlwidmltZW9cIiE9PXQudHlwZSlyZXR1cm47Y29uc3QgaT0oKT0+e2lmKHQuaWZyYW1lRWwmJnQuaWZyYW1lRWwuY29udGVudFdpbmRvdyl7bGV0IGU7aWYoXCJ0cnVlXCI9PT10LmlmcmFtZUVsLmRhdGFzZXQucmVhZHkpcmV0dXJuIGU9XCJ5b3V0dWJlXCI9PT10LnR5cGU/e2V2ZW50OlwiY29tbWFuZFwiLGZ1bmM6XCJwbGF5VmlkZW9cIn06e21ldGhvZDpcInBsYXlcIix2YWx1ZTpcInRydWVcIn0sZSYmdC5pZnJhbWVFbC5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGUpLFwiKlwiKSx2b2lkKHQucG9sbGVyPXZvaWQgMCk7XCJ5b3V0dWJlXCI9PT10LnR5cGUmJihlPXtldmVudDpcImxpc3RlbmluZ1wiLGlkOnQuaWZyYW1lRWwuZ2V0QXR0cmlidXRlKFwiaWRcIil9LHQuaWZyYW1lRWwuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeShlKSxcIipcIikpfXQucG9sbGVyPXNldFRpbWVvdXQoaSwyNTApfTtpKCl9cHJvY2Vzc1R5cGUodCl7aWYodC5odG1sKXJldHVybiB0LnR5cGU9XCJodG1sXCIsdC5zcmM9dC5odG1sLHZvaWQodC5odG1sPVwiXCIpO2NvbnN0IGU9dGhpcy5pbnN0YW5jZS5vcHRpb25Gb3IodCxcInNyY1wiLFwiXCIpO2lmKCFlfHxcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm47bGV0IGk9dC50eXBlLG49bnVsbDtpZihuPWUubWF0Y2goLyh5b3V0dWJlXFwuY29tfHlvdXR1XFwuYmV8eW91dHViZVxcLW5vY29va2llXFwuY29tKVxcLyg/OndhdGNoXFw/KD86LiomKT92PXx2XFwvfHVcXC98ZW1iZWRcXC8/KT8odmlkZW9zZXJpZXNcXD9saXN0PSg/Oi4qKXxbXFx3LV17MTF9fFxcP2xpc3RUeXBlPSg/Oi4qKSZsaXN0PSg/Oi4qKSkoPzouKikvaSkpe2NvbnN0IHM9dGhpcy5vcHRpb25Gb3IodCxcInlvdXR1YmVcIikse25vY29va2llOm99PXMsYT1mdW5jdGlvbih0LGUpe3ZhciBpPXt9O2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiZlLmluZGV4T2Yobik8MCYmKGlbbl09dFtuXSk7aWYobnVsbCE9dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHM9MDtmb3Iobj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO3M8bi5sZW5ndGg7cysrKWUuaW5kZXhPZihuW3NdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodCxuW3NdKSYmKGlbbltzXV09dFtuW3NdXSl9cmV0dXJuIGl9KHMsW1wibm9jb29raWVcIl0pLHI9YHd3dy55b3V0dWJlJHtvP1wiLW5vY29va2llXCI6XCJcIn0uY29tYCxsPVEoZSxhKSxjPWVuY29kZVVSSUNvbXBvbmVudChuWzJdKTt0LnZpZGVvSWQ9Yyx0LnNyYz1gaHR0cHM6Ly8ke3J9L2VtYmVkLyR7Y30/JHtsfWAsdC50aHVtYlNyYz10LnRodW1iU3JjfHxgaHR0cHM6Ly9pLnl0aW1nLmNvbS92aS8ke2N9L21xZGVmYXVsdC5qcGdgLGk9XCJ5b3V0dWJlXCJ9ZWxzZSBpZihuPWUubWF0Y2goL14uK3ZpbWVvLmNvbVxcLyg/OlxcLyk/KFtcXGRdKykoKFxcL3xcXD9oPSkoW2EtejAtOV0rKSk/KC4qKT8vKSl7Y29uc3Qgcz1RKGUsdGhpcy5vcHRpb25Gb3IodCxcInZpbWVvXCIpKSxvPWVuY29kZVVSSUNvbXBvbmVudChuWzFdKSxhPW5bNF18fFwiXCI7dC52aWRlb0lkPW8sdC5zcmM9YGh0dHBzOi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8ke299PyR7YT9gaD0ke2F9JHtzP1wiJlwiOlwiXCJ9YDpcIlwifSR7c31gLGk9XCJ2aW1lb1wifWlmKCFpJiZ0LnRyaWdnZXJFbCl7Y29uc3QgZT10LnRyaWdnZXJFbC5kYXRhc2V0LnR5cGU7ZXQuaW5jbHVkZXMoZSkmJihpPWUpfWl8fFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoXCIjXCI9PT1lLmNoYXJBdCgwKT9pPVwiaW5saW5lXCI6KG49ZS5tYXRjaCgvXFwuKG1wNHxtb3Z8b2d2fHdlYm0pKChcXD98IykuKik/JC9pKSk/KGk9XCJodG1sNXZpZGVvXCIsdC52aWRlb0Zvcm1hdD10LnZpZGVvRm9ybWF0fHxcInZpZGVvL1wiKyhcIm9ndlwiPT09blsxXT9cIm9nZ1wiOm5bMV0pKTplLm1hdGNoKC8oXmRhdGE6aW1hZ2VcXC9bYS16MC05K1xcLz1dKiwpfChcXC4oanAoZXxnfGVnKXxnaWZ8cG5nfGJtcHx3ZWJwfHN2Z3xpY28pKChcXD98IykuKik/JCkvaSk/aT1cImltYWdlXCI6ZS5tYXRjaCgvXFwuKHBkZikoKFxcP3wjKS4qKT8kL2kpP2k9XCJwZGZcIjoobj1lLm1hdGNoKC8oPzptYXBzXFwuKT9nb29nbGVcXC4oW2Etel17MiwzfSg/OlxcLlthLXpdezJ9KT8pXFwvKD86KD86KD86bWFwc1xcLyg/OnBsYWNlXFwvKD86LiopXFwvKT9cXEAoLiopLChcXGQrLj9cXGQrPyl6KSl8KD86XFw/bGw9KSkoLiopPy9pKSk/KHQuc3JjPWBodHRwczovL21hcHMuZ29vZ2xlLiR7blsxXX0vP2xsPSR7KG5bMl0/blsyXStcIiZ6PVwiK01hdGguZmxvb3IocGFyc2VGbG9hdChuWzNdKSkrKG5bNF0/bls0XS5yZXBsYWNlKC9eXFwvLyxcIiZcIik6XCJcIik6bls0XStcIlwiKS5yZXBsYWNlKC9cXD8vLFwiJlwiKX0mb3V0cHV0PSR7bls0XSYmbls0XS5pbmRleE9mKFwibGF5ZXI9Y1wiKT4wP1wic3ZlbWJlZFwiOlwiZW1iZWRcIn1gLGk9XCJtYXBcIik6KG49ZS5tYXRjaCgvKD86bWFwc1xcLik/Z29vZ2xlXFwuKFthLXpdezIsM30oPzpcXC5bYS16XXsyfSk/KVxcLyg/Om1hcHNcXC9zZWFyY2hcXC8pKC4qKS9pKSkmJih0LnNyYz1gaHR0cHM6Ly9tYXBzLmdvb2dsZS4ke25bMV19L21hcHM/cT0ke25bMl0ucmVwbGFjZShcInF1ZXJ5PVwiLFwicT1cIikucmVwbGFjZShcImFwaT0xXCIsXCJcIil9Jm91dHB1dD1lbWJlZGAsaT1cIm1hcFwiKSksaT1pfHx0aGlzLmluc3RhbmNlLm9wdGlvbihcImRlZmF1bHRUeXBlXCIpLHQudHlwZT1pLFwiaW1hZ2VcIj09PWkmJih0LnRodW1iU3JjPXQudGh1bWJTcmN8fHQuc3JjKX1zZXRDb250ZW50KHQpe2NvbnN0IGU9dGhpcy5pbnN0YW5jZS5vcHRpb25Gb3IodCxcInNyY1wiKXx8XCJcIjtpZih0JiZ0LnR5cGUmJmUpe3N3aXRjaCh0LnR5cGUpe2Nhc2VcImh0bWxcIjp0aGlzLmluc3RhbmNlLnNldENvbnRlbnQodCxlKTticmVhaztjYXNlXCJodG1sNXZpZGVvXCI6Y29uc3QgaT10aGlzLm9wdGlvbihcInZpZGVvVHBsXCIpO2kmJnRoaXMuaW5zdGFuY2Uuc2V0Q29udGVudCh0LGkucmVwbGFjZSgvXFx7XFx7c3JjXFx9XFx9L2dpLGUrXCJcIikucmVwbGFjZSgvXFx7XFx7Zm9ybWF0XFx9XFx9L2dpLHRoaXMub3B0aW9uRm9yKHQsXCJ2aWRlb0Zvcm1hdFwiKXx8XCJcIikucmVwbGFjZSgvXFx7XFx7cG9zdGVyXFx9XFx9L2dpLHQucG9zdGVyfHx0LnRodW1iU3JjfHxcIlwiKSk7YnJlYWs7Y2FzZVwiaW5saW5lXCI6Y2FzZVwiY2xvbmVcIjp0aGlzLnNldElubGluZUNvbnRlbnQodCk7YnJlYWs7Y2FzZVwiYWpheFwiOnRoaXMubG9hZEFqYXhDb250ZW50KHQpO2JyZWFrO2Nhc2VcInBkZlwiOmNhc2VcIm1hcFwiOmNhc2VcInlvdXR1YmVcIjpjYXNlXCJ2aW1lb1wiOnQucHJlbG9hZD0hMTtjYXNlXCJpZnJhbWVcIjp0aGlzLnNldElmcmFtZUNvbnRlbnQodCl9dGhpcy5zZXRBc3BlY3RSYXRpbyh0KX19c2V0QXNwZWN0UmF0aW8odCl7dmFyIGU7Y29uc3QgaT10LmNvbnRlbnRFbCxuPXRoaXMub3B0aW9uRm9yKHQsXCJ2aWRlb1JhdGlvXCIpLHM9bnVsbD09PShlPXQuZWwpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKCEoaSYmcyYmbiYmMSE9PW4mJnQudHlwZSYmW1widmlkZW9cIixcInlvdXR1YmVcIixcInZpbWVvXCIsXCJodG1sNXZpZGVvXCJdLmluY2x1ZGVzKHQudHlwZSkpKXJldHVybjtjb25zdCBvPXMud2lkdGgsYT1zLmhlaWdodDtpLnN0eWxlLmFzcGVjdFJhdGlvPW4rXCJcIixpLnN0eWxlLndpZHRoPW8vYT5uP1wiYXV0b1wiOlwiXCIsaS5zdHlsZS5oZWlnaHQ9by9hPm4/XCJcIjpcImF1dG9cIn1hdHRhY2goKXt0aGlzLmluc3RhbmNlLm9uKFwiQ2Fyb3VzZWwuaW5pdFNsaWRlXCIsdGhpcy5vbkluaXRTbGlkZSksdGhpcy5pbnN0YW5jZS5vbihcIkNhcm91c2VsLmNyZWF0ZVNsaWRlXCIsdGhpcy5vbkNyZWF0ZVNsaWRlKSx0aGlzLmluc3RhbmNlLm9uKFwiQ2Fyb3VzZWwucmVtb3ZlU2xpZGVcIix0aGlzLm9uUmVtb3ZlU2xpZGUpLHRoaXMuaW5zdGFuY2Uub24oXCJDYXJvdXNlbC5zZWxlY3RTbGlkZVwiLHRoaXMub25TZWxlY3RTbGlkZSksdGhpcy5pbnN0YW5jZS5vbihcIkNhcm91c2VsLnVuc2VsZWN0U2xpZGVcIix0aGlzLm9uVW5zZWxlY3RTbGlkZSksdGhpcy5pbnN0YW5jZS5vbihcIkNhcm91c2VsLlBhbnpvb20ucmVmcmVzaFwiLHRoaXMub25SZWZyZXNoKSx0aGlzLmluc3RhbmNlLm9uKFwiZG9uZVwiLHRoaXMub25Eb25lKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0aGlzLm9uTWVzc2FnZSl9ZGV0YWNoKCl7dGhpcy5pbnN0YW5jZS5vZmYoXCJDYXJvdXNlbC5pbml0U2xpZGVcIix0aGlzLm9uSW5pdFNsaWRlKSx0aGlzLmluc3RhbmNlLm9mZihcIkNhcm91c2VsLmNyZWF0ZVNsaWRlXCIsdGhpcy5vbkNyZWF0ZVNsaWRlKSx0aGlzLmluc3RhbmNlLm9mZihcIkNhcm91c2VsLnJlbW92ZVNsaWRlXCIsdGhpcy5vblJlbW92ZVNsaWRlKSx0aGlzLmluc3RhbmNlLm9mZihcIkNhcm91c2VsLnNlbGVjdFNsaWRlXCIsdGhpcy5vblNlbGVjdFNsaWRlKSx0aGlzLmluc3RhbmNlLm9mZihcIkNhcm91c2VsLnVuc2VsZWN0U2xpZGVcIix0aGlzLm9uVW5zZWxlY3RTbGlkZSksdGhpcy5pbnN0YW5jZS5vZmYoXCJDYXJvdXNlbC5QYW56b29tLnJlZnJlc2hcIix0aGlzLm9uUmVmcmVzaCksdGhpcy5pbnN0YW5jZS5vZmYoXCJkb25lXCIsdGhpcy5vbkRvbmUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMub25NZXNzYWdlKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGl0LFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dHR9KTtjbGFzcyBudCBleHRlbmRzIEl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic3RhdGVcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6XCJyZWFkeVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpbkhvdmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0aW1lclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwcm9ncmVzc0JhclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSl9Z2V0IGlzQWN0aXZlKCl7cmV0dXJuXCJyZWFkeVwiIT09dGhpcy5zdGF0ZX1vblJlYWR5KHQpe3RoaXMub3B0aW9uKFwiYXV0b1N0YXJ0XCIpJiYodC5pc0luZmluaXRlfHx0LnBhZ2U8dC5wYWdlcy5sZW5ndGgtMSkmJnRoaXMuc3RhcnQoKX1vbkNoYW5nZSgpe3ZhciB0OyhudWxsPT09KHQ9dGhpcy5pbnN0YW5jZS5wYW56b29tKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc1Jlc3RpbmcpfHwodGhpcy5yZW1vdmVQcm9ncmVzc0JhcigpLHRoaXMucGF1c2UoKSl9b25TZXR0bGUoKXt0aGlzLnJlc3VtZSgpfW9uVmlzaWJpbGl0eUNoYW5nZSgpe1widmlzaWJsZVwiPT09ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlP3RoaXMucmVzdW1lKCk6dGhpcy5wYXVzZSgpfW9uTW91c2VFbnRlcigpe3RoaXMuaW5Ib3Zlcj0hMCx0aGlzLnBhdXNlKCl9b25Nb3VzZUxlYXZlKCl7dmFyIHQ7dGhpcy5pbkhvdmVyPSExLChudWxsPT09KHQ9dGhpcy5pbnN0YW5jZS5wYW56b29tKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc1Jlc3RpbmcpJiZ0aGlzLnJlc3VtZSgpfW9uVGltZXJFbmQoKXtcInBsYXlcIj09PXRoaXMuc3RhdGUmJih0aGlzLmluc3RhbmNlLmlzSW5maW5pdGV8fHRoaXMuaW5zdGFuY2UucGFnZSE9PXRoaXMuaW5zdGFuY2UucGFnZXMubGVuZ3RoLTE/dGhpcy5pbnN0YW5jZS5zbGlkZU5leHQoKTp0aGlzLmluc3RhbmNlLnNsaWRlVG8oMCkpfXJlbW92ZVByb2dyZXNzQmFyKCl7dGhpcy5wcm9ncmVzc0JhciYmKHRoaXMucHJvZ3Jlc3NCYXIucmVtb3ZlKCksdGhpcy5wcm9ncmVzc0Jhcj1udWxsKX1jcmVhdGVQcm9ncmVzc0Jhcigpe3ZhciB0O2lmKCF0aGlzLm9wdGlvbihcInNob3dQcm9ncmVzc1wiKSlyZXR1cm4gbnVsbDt0aGlzLnJlbW92ZVByb2dyZXNzQmFyKCk7Y29uc3QgZT10aGlzLmluc3RhbmNlLGk9KG51bGw9PT0odD1lLnBhZ2VzW2UucGFnZV0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNsaWRlcyl8fFtdO2xldCBuPXRoaXMub3B0aW9uKFwicHJvZ3Jlc3NQYXJlbnRFbFwiKTtpZihufHwobj0oMT09PWkubGVuZ3RoP2lbMF0uZWw6bnVsbCl8fGUudmlld3BvcnQpLCFuKXJldHVybiBudWxsO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gUyhzLFwiZi1wcm9ncmVzc1wiKSxuLnByZXBlbmQocyksdGhpcy5wcm9ncmVzc0Jhcj1zLHMub2Zmc2V0SGVpZ2h0LHN9c2V0KCl7aWYodGhpcy5pbnN0YW5jZS5wYWdlcy5sZW5ndGg8MilyZXR1cm47aWYodGhpcy5wcm9ncmVzc0JhcilyZXR1cm47Y29uc3QgdD10aGlzLm9wdGlvbihcInRpbWVvdXRcIik7dGhpcy5zdGF0ZT1cInBsYXlcIixTKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyLFwiaGFzLWF1dG9wbGF5XCIpO2xldCBlPXRoaXMuY3JlYXRlUHJvZ3Jlc3NCYXIoKTtlJiYoZS5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb249YCR7dH1tc2AsZS5zdHlsZS50cmFuc2Zvcm09XCJzY2FsZVgoMSlcIiksdGhpcy50aW1lcj1zZXRUaW1lb3V0KCgoKT0+e3RoaXMudGltZXI9bnVsbCx0aGlzLmluSG92ZXJ8fHRoaXMub25UaW1lckVuZCgpfSksdCksdGhpcy5lbWl0KFwic2V0XCIpfWNsZWFyKCl7dGhpcy50aW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPW51bGwpLHRoaXMucmVtb3ZlUHJvZ3Jlc3NCYXIoKX1zdGFydCgpe2lmKHRoaXMuc2V0KCksdGhpcy5vcHRpb24oXCJwYXVzZU9uSG92ZXJcIikpe2NvbnN0IHQ9dGhpcy5pbnN0YW5jZS5jb250YWluZXI7dC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHRoaXMub25Nb3VzZUVudGVyLCExKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsdGhpcy5vbk1vdXNlTGVhdmUsITEpfWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdGhpcy5vblZpc2liaWxpdHlDaGFuZ2UsITEpfXN0b3AoKXtjb25zdCB0PXRoaXMuaW5zdGFuY2UuY29udGFpbmVyO3RoaXMuY2xlYXIoKSx0aGlzLnN0YXRlPVwicmVhZHlcIix0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdGhpcy5vbk1vdXNlRW50ZXIsITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0aGlzLm9uTW91c2VMZWF2ZSwhMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIix0aGlzLm9uVmlzaWJpbGl0eUNoYW5nZSwhMSksRSh0LFwiaGFzLWF1dG9wbGF5XCIpLHRoaXMuZW1pdChcInN0b3BcIil9cGF1c2UoKXtcInBsYXlcIj09PXRoaXMuc3RhdGUmJih0aGlzLnN0YXRlPVwicGF1c2VcIix0aGlzLmNsZWFyKCksdGhpcy5lbWl0KFwicGF1c2VcIikpfXJlc3VtZSgpe2NvbnN0IHQ9dGhpcy5pbnN0YW5jZTtpZih0LmlzSW5maW5pdGV8fHQucGFnZSE9PXQucGFnZXMubGVuZ3RoLTEpaWYoXCJwbGF5XCIhPT10aGlzLnN0YXRlKXtpZihcInBhdXNlXCI9PT10aGlzLnN0YXRlJiYhdGhpcy5pbkhvdmVyKXtjb25zdCB0PW5ldyBFdmVudChcInJlc3VtZVwiLHtidWJibGVzOiEwLGNhbmNlbGFibGU6ITB9KTt0aGlzLmVtaXQoXCJyZXN1bWVcIixldmVudCksdC5kZWZhdWx0UHJldmVudGVkfHx0aGlzLnNldCgpfX1lbHNlIHRoaXMuc2V0KCk7ZWxzZSB0aGlzLnN0b3AoKX10b2dnbGUoKXtcInBsYXlcIj09PXRoaXMuc3RhdGV8fFwicGF1c2VcIj09PXRoaXMuc3RhdGU/dGhpcy5zdG9wKCk6dGhpcy5zZXQoKX1hdHRhY2goKXt0aGlzLmluc3RhbmNlLm9uKFwicmVhZHlcIix0aGlzLm9uUmVhZHkpLHRoaXMuaW5zdGFuY2Uub24oXCJQYW56b29tLnN0YXJ0QW5pbWF0aW9uXCIsdGhpcy5vbkNoYW5nZSksdGhpcy5pbnN0YW5jZS5vbihcIlBhbnpvb20uZW5kQW5pbWF0aW9uXCIsdGhpcy5vblNldHRsZSksdGhpcy5pbnN0YW5jZS5vbihcIlBhbnpvb20udG91Y2hNb3ZlXCIsdGhpcy5vbkNoYW5nZSl9ZGV0YWNoKCl7dGhpcy5pbnN0YW5jZS5vZmYoXCJyZWFkeVwiLHRoaXMub25SZWFkeSksdGhpcy5pbnN0YW5jZS5vZmYoXCJQYW56b29tLnN0YXJ0QW5pbWF0aW9uXCIsdGhpcy5vbkNoYW5nZSksdGhpcy5pbnN0YW5jZS5vZmYoXCJQYW56b29tLmVuZEFuaW1hdGlvblwiLHRoaXMub25TZXR0bGUpLHRoaXMuaW5zdGFuY2Uub2ZmKFwiUGFuem9vbS50b3VjaE1vdmVcIix0aGlzLm9uQ2hhbmdlKSx0aGlzLnN0b3AoKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KG50LFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e2F1dG9TdGFydDohMCxwYXVzZU9uSG92ZXI6ITAscHJvZ3Jlc3NQYXJlbnRFbDpudWxsLHNob3dQcm9ncmVzczohMCx0aW1lb3V0OjNlM319KTtjbGFzcyBzdCBleHRlbmRzIEl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicmVmXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KX1vblByZXBhcmUodCl7Y29uc3QgZT10LmNhcm91c2VsO2lmKCFlKXJldHVybjtjb25zdCBpPXQuY29udGFpbmVyO2kmJihlLm9wdGlvbnMuQXV0b3BsYXk9dSh0aGlzLm9wdGlvbihcIkF1dG9wbGF5XCIpfHx7fSx7cGF1c2VPbkhvdmVyOiExLGF1dG9TdGFydDohMSx0aW1lb3V0OnRoaXMub3B0aW9uKFwidGltZW91dFwiKSxwcm9ncmVzc1BhcmVudEVsOigpPT5pLnF1ZXJ5U2VsZWN0b3IoXCIuZmFuY3lib3hfX3Rvb2xiYXIgW2RhdGEtZmFuY3lib3gtdG9nZ2xlLXNsaWRlc2hvd11cIil8fGksb246e3NldDplPT57dmFyIG47aS5jbGFzc0xpc3QuYWRkKFwiaGFzLXNsaWRlc2hvd1wiKSwobnVsbD09PShuPXQuZ2V0U2xpZGUoKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uc3RhdGUpIT09Vi5SZWFkeSYmZS5wYXVzZSgpfSxzdG9wOigpPT57aS5jbGFzc0xpc3QucmVtb3ZlKFwiaGFzLXNsaWRlc2hvd1wiKSx0LmlzQ29tcGFjdHx8dC5lbmRJZGxlKCl9LHJlc3VtZTooZSxpKT0+e3ZhciBuLHMsbzshaXx8IWkuY2FuY2VsYWJsZXx8KG51bGw9PT0obj10LmdldFNsaWRlKCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnN0YXRlKT09PVYuUmVhZHkmJihudWxsPT09KG89bnVsbD09PShzPXQuY2Fyb3VzZWwpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnBhbnpvb20pfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmlzUmVzdGluZyl8fGkucHJldmVudERlZmF1bHQoKX19fSksZS5hdHRhY2hQbHVnaW5zKHtBdXRvcGxheTpudH0pLHRoaXMucmVmPWUucGx1Z2lucy5BdXRvcGxheSl9b25SZWFkeSh0KXtjb25zdCBlPXQuY2Fyb3VzZWwsaT10aGlzLnJlZjtlJiZpJiZ0aGlzLm9wdGlvbihcInBsYXlPblN0YXJ0XCIpJiYoZS5pc0luZmluaXRlfHxlLnBhZ2U8ZS5wYWdlcy5sZW5ndGgtMSkmJmkuc3RhcnQoKX1vbkRvbmUodCxlKXtjb25zdCBpPXRoaXMucmVmO2lmKCFpKXJldHVybjtjb25zdCBuPWUucGFuem9vbTtuJiZuLm9uKFwic3RhcnRBbmltYXRpb25cIiwoKCk9Pnt0LmlzQ3VycmVudFNsaWRlKGUpJiZpLnN0b3AoKX0pKSx0LmlzQ3VycmVudFNsaWRlKGUpJiZpLnJlc3VtZSgpfW9uS2V5ZG93bih0LGUpe3ZhciBpO2NvbnN0IG49dGhpcy5yZWY7biYmZT09PXRoaXMub3B0aW9uKFwia2V5XCIpJiZcIkJVVFRPTlwiIT09KG51bGw9PT0oaT1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXx8dm9pZCAwPT09aT92b2lkIDA6aS5ub2RlTmFtZSkmJm4udG9nZ2xlKCl9YXR0YWNoKCl7dGhpcy5pbnN0YW5jZS5vbihcIkNhcm91c2VsLmluaXRcIix0aGlzLm9uUHJlcGFyZSksdGhpcy5pbnN0YW5jZS5vbihcIkNhcm91c2VsLnJlYWR5XCIsdGhpcy5vblJlYWR5KSx0aGlzLmluc3RhbmNlLm9uKFwiZG9uZVwiLHRoaXMub25Eb25lKSx0aGlzLmluc3RhbmNlLm9uKFwia2V5ZG93blwiLHRoaXMub25LZXlkb3duKX1kZXRhY2goKXt0aGlzLmluc3RhbmNlLm9mZihcIkNhcm91c2VsLmluaXRcIix0aGlzLm9uUHJlcGFyZSksdGhpcy5pbnN0YW5jZS5vZmYoXCJDYXJvdXNlbC5yZWFkeVwiLHRoaXMub25SZWFkeSksdGhpcy5pbnN0YW5jZS5vZmYoXCJkb25lXCIsdGhpcy5vbkRvbmUpLHRoaXMuaW5zdGFuY2Uub2ZmKFwia2V5ZG93blwiLHRoaXMub25LZXlkb3duKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHN0LFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e2tleTpcIiBcIixwbGF5T25TdGFydDohMSx0aW1lb3V0OjNlM319KTtjb25zdCBvdD17Y2xhc3Nlczp7Y29udGFpbmVyOlwiZi10aHVtYnMgZi1jYXJvdXNlbF9fdGh1bWJzXCIsdmlld3BvcnQ6XCJmLXRodW1ic19fdmlld3BvcnRcIix0cmFjazpcImYtdGh1bWJzX190cmFja1wiLHNsaWRlOlwiZi10aHVtYnNfX3NsaWRlXCIsaXNSZXN0aW5nOlwiaXMtcmVzdGluZ1wiLGlzU2VsZWN0ZWQ6XCJpcy1zZWxlY3RlZFwiLGlzTG9hZGluZzpcImlzLWxvYWRpbmdcIixoYXNUaHVtYnM6XCJoYXMtdGh1bWJzXCJ9LG1pbkNvdW50OjIscGFyZW50RWw6bnVsbCx0aHVtYlRwbDonPGJ1dHRvbiBjbGFzcz1cImYtdGh1bWJzX19zbGlkZV9fYnV0dG9uXCIgdGFiaW5kZXg9XCIwXCIgdHlwZT1cImJ1dHRvblwiIGFyaWEtbGFiZWw9XCJ7e0dPVE99fVwiIGRhdGEtY2Fyb3VzZWwtaW5kZXg9XCIlaVwiPjxpbWcgY2xhc3M9XCJmLXRodW1ic19fc2xpZGVfX2ltZ1wiIGRhdGEtbGF6eS1zcmM9XCJ7eyVzfX1cIiBhbHQ9XCJcIiAvPjwvYnV0dG9uPicsdHlwZTpcIm1vZGVyblwifTt2YXIgYXQ7IWZ1bmN0aW9uKHQpe3RbdC5Jbml0PTBdPVwiSW5pdFwiLHRbdC5SZWFkeT0xXT1cIlJlYWR5XCIsdFt0LkhpZGRlbj0yXT1cIkhpZGRlblwiLHRbdC5EaXNhYmxlZD0zXT1cIkRpc2FibGVkXCJ9KGF0fHwoYXQ9e30pKTtsZXQgcnQ9Y2xhc3MgZXh0ZW5kcyBJe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInR5cGVcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6XCJtb2Rlcm5cIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGFpbmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInRyYWNrXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNhcm91c2VsXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBhbnpvb21cIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidGh1bWJXaWR0aFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0aHVtYkNsaXBXaWR0aFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0aHVtYkhlaWdodFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0aHVtYkdhcFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0aHVtYkV4dHJhR2FwXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOjB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInNob3VsZENlbnRlclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic3RhdGVcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6YXQuSW5pdH0pfWZvcm1hdFRodW1iKHQsZSl7cmV0dXJuIHRoaXMuaW5zdGFuY2UubG9jYWxpemUoZSxbW1wiJWlcIix0LmluZGV4XSxbXCIlZFwiLHQuaW5kZXgrMV0sW1wiJXNcIix0LnRodW1iU3JjfHxcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBN1wiXV0pfWdldFNsaWRlcygpe2NvbnN0IHQ9W10sZT10aGlzLm9wdGlvbihcInRodW1iVHBsXCIpfHxcIlwiO2lmKGUpZm9yKGNvbnN0IGkgb2YgdGhpcy5pbnN0YW5jZS5zbGlkZXN8fFtdKXtsZXQgbj1cIlwiO2kudHlwZSYmKG49YGZvci0ke2kudHlwZX1gLGkudHlwZSYmW1widmlkZW9cIixcInlvdXR1YmVcIixcInZpbWVvXCIsXCJodG1sNXZpZGVvXCJdLmluY2x1ZGVzKGkudHlwZSkmJihuKz1cIiBmb3ItdmlkZW9cIikpLHQucHVzaCh7aHRtbDp0aGlzLmZvcm1hdFRodW1iKGksZSksY3VzdG9tQ2xhc3M6bn0pfXJldHVybiB0fW9uSW5pdFNsaWRlKHQsZSl7Y29uc3QgaT1lLmVsO2kmJihlLnRodW1iU3JjPWkuZGF0YXNldC50aHVtYlNyY3x8ZS50aHVtYlNyY3x8XCJcIixlLnRodW1iQ2xpcFdpZHRoPXBhcnNlRmxvYXQoaS5kYXRhc2V0LnRodW1iQ2xpcFdpZHRofHxcIlwiKXx8ZS50aHVtYkNsaXBXaWR0aHx8MCxlLnRodW1iSGVpZ2h0PXBhcnNlRmxvYXQoaS5kYXRhc2V0LnRodW1iSGVpZ2h0fHxcIlwiKXx8ZS50aHVtYkhlaWdodHx8MCl9b25Jbml0U2xpZGVzKCl7dGhpcy5zdGF0ZT09PWF0LkluaXQmJnRoaXMuYnVpbGQoKX1vblJlZnJlc2hNKCl7dGhpcy5yZWZyZXNoTW9kZXJuKCl9b25DaGFuZ2VNKCl7XCJtb2Rlcm5cIj09PXRoaXMudHlwZSYmKHRoaXMuc2hvdWxkQ2VudGVyPSEwLHRoaXMuY2VudGVyTW9kZXJuKCkpfW9uQ2xpY2tNb2Rlcm4odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCk7Y29uc3QgZT10aGlzLmluc3RhbmNlLGk9ZS5wYWdlLG49dD0+e2lmKHQpe2NvbnN0IGU9dC5jbG9zZXN0KFwiW2RhdGEtY2Fyb3VzZWwtaW5kZXhdXCIpO2lmKGUpcmV0dXJuIHBhcnNlSW50KGUuZGF0YXNldC5jYXJvdXNlbEluZGV4fHxcIlwiLDEwKXx8MH1yZXR1cm4tMX0scz0odCxlKT0+e2NvbnN0IGk9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0LGUpO3JldHVybiBpP24oaSk6LTF9O2xldCBvPW4odC50YXJnZXQpO288MCYmKG89cyh0LmNsaWVudFgrdGhpcy50aHVtYkdhcCx0LmNsaWVudFkpLG89PT1pJiYobz1pLTEpKSxvPDAmJihvPXModC5jbGllbnRYLXRoaXMudGh1bWJHYXAsdC5jbGllbnRZKSxvPT09aSYmKG89aSsxKSksbzwwJiYobz0oZT0+e2xldCBuPXModC5jbGllbnRYLWUsdC5jbGllbnRZKSxhPXModC5jbGllbnRYK2UsdC5jbGllbnRZKTtyZXR1cm4gbzwwJiZuPT09aSYmKG89aSsxKSxvPDAmJmE9PT1pJiYobz1pLTEpLG99KSh0aGlzLnRodW1iRXh0cmFHYXApKSxvPT09aT90aGlzLmNlbnRlck1vZGVybigpOm8+LTEmJm88ZS5wYWdlcy5sZW5ndGgmJmUuc2xpZGVUbyhvKX1vblRyYW5zZm9ybU0oKXtpZihcIm1vZGVyblwiIT09dGhpcy50eXBlKXJldHVybjtjb25zdHtpbnN0YW5jZTp0LGNvbnRhaW5lcjplLHRyYWNrOml9PXRoaXMsbj10LnBhbnpvb207aWYoIShlJiZpJiZuJiZ0aGlzLnBhbnpvb20pKXJldHVybjtvKGUsdGhpcy5jbihcImlzUmVzdGluZ1wiKSxuLnN0YXRlIT09Zy5Jbml0JiZuLmlzUmVzdGluZyk7Y29uc3Qgcz10aGlzLnRodW1iR2FwLGE9dGhpcy50aHVtYkV4dHJhR2FwLHI9dGhpcy50aHVtYkNsaXBXaWR0aDtsZXQgbD0wLGM9MCxoPTA7Zm9yKGNvbnN0IGUgb2YgdC5zbGlkZXMpe2xldCBpPWUuaW5kZXgsbj1lLnRodW1iU2xpZGVFbDtpZighbiljb250aW51ZTtvKG4sdGhpcy5jbihcImlzU2VsZWN0ZWRcIiksaT09PXQucGFnZSksYz0xLU1hdGguYWJzKHQuZ2V0UHJvZ3Jlc3MoaSkpLG4uc3R5bGUuc2V0UHJvcGVydHkoXCItLXByb2dyZXNzXCIsYz9jK1wiXCI6XCJcIik7Y29uc3QgZD0uNSooKGUudGh1bWJXaWR0aHx8MCktcik7bCs9cyxsKz1kLGMmJihsLT1jKihkK2EpKSxuLnN0eWxlLnNldFByb3BlcnR5KFwiLS1zaGlmdFwiLGwtcytcIlwiKSxsKz1kLGMmJihsLT1jKihkK2EpKSxsLT1zLDA9PT1pJiYoaD1hKmMpfWkmJihpLnN0eWxlLnNldFByb3BlcnR5KFwiLS1sZWZ0XCIsaCtcIlwiKSxpLnN0eWxlLnNldFByb3BlcnR5KFwiLS13aWR0aFwiLGwraCtzK2EqYytcIlwiKSksdGhpcy5zaG91bGRDZW50ZXImJnRoaXMuY2VudGVyTW9kZXJuKCl9YnVpbGRDbGFzc2ljKCl7Y29uc3R7Y29udGFpbmVyOnQsdHJhY2s6ZX09dGhpcyxpPXRoaXMuZ2V0U2xpZGVzKCk7aWYoIXR8fCFlfHwhaSlyZXR1cm47Y29uc3Qgbj1uZXcgdGhpcy5pbnN0YW5jZS5jb25zdHJ1Y3Rvcih0LHUoe3RyYWNrOmUsaW5maW5pdGU6ITEsY2VudGVyOiEwLGZpbGw6ITAsZHJhZ0ZyZWU6ITAsc2xpZGVzUGVyUGFnZToxLHRyYW5zaXRpb246ITEsRG90czohMSxOYXZpZ2F0aW9uOiExLFN5bmM6e30sY2xhc3Nlczp7Y29udGFpbmVyOlwiZi10aHVtYnNcIix2aWV3cG9ydDpcImYtdGh1bWJzX192aWV3cG9ydFwiLHRyYWNrOlwiZi10aHVtYnNfX3RyYWNrXCIsc2xpZGU6XCJmLXRodW1ic19fc2xpZGVcIn19LHRoaXMub3B0aW9uKFwiQ2Fyb3VzZWxcIil8fHt9LHtTeW5jOnt0YXJnZXQ6dGhpcy5pbnN0YW5jZX0sc2xpZGVzOml9KSk7dGhpcy5jYXJvdXNlbD1uLHRoaXMudHJhY2s9ZSxuLm9uKFwicmVhZHlcIiwoKCk9Pnt0aGlzLmVtaXQoXCJyZWFkeVwiKX0pKX1idWlsZE1vZGVybigpe2lmKFwibW9kZXJuXCIhPT10aGlzLnR5cGUpcmV0dXJuO2NvbnN0e2NvbnRhaW5lcjp0LHRyYWNrOmUsaW5zdGFuY2U6aX09dGhpcyxzPXRoaXMub3B0aW9uKFwidGh1bWJUcGxcIil8fFwiXCI7aWYoIXR8fCFlfHwhcylyZXR1cm47Uyh0LFwiaXMtaG9yaXpvbnRhbFwiKSx0aGlzLnVwZGF0ZU1vZGVybigpO2Zvcihjb25zdCB0IG9mIGkuc2xpZGVzfHxbXSl7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKFMoaSx0aGlzLmNuKFwic2xpZGVcIikpLHQudHlwZSl7bGV0IGU9YGZvci0ke3QudHlwZX1gO1tcInZpZGVvXCIsXCJ5b3V0dWJlXCIsXCJ2aW1lb1wiLFwiaHRtbDV2aWRlb1wiXS5pbmNsdWRlcyh0LnR5cGUpJiYoZSs9XCIgZm9yLXZpZGVvXCIpLFMoaSxlKX1pLmFwcGVuZENoaWxkKG4odGhpcy5mb3JtYXRUaHVtYih0LHMpKSksdC50aHVtYlNsaWRlRWw9aSxlLmFwcGVuZENoaWxkKGkpLHRoaXMucmVzaXplTW9kZXJuU2xpZGUodCl9Y29uc3Qgbz1uZXcgaS5jb25zdHJ1Y3Rvci5QYW56b29tKHQse2NvbnRlbnQ6ZSxsb2NrQXhpczpcInhcIix6b29tOiExLHBhbk9ubHlab29tZWQ6ITEsYm91bmRzOigpPT57bGV0IHQ9MCxlPTAsbj1pLnNsaWRlc1swXSxzPWkuc2xpZGVzW2kuc2xpZGVzLmxlbmd0aC0xXSxvPWkuc2xpZGVzW2kucGFnZV07cmV0dXJuIG4mJnMmJm8mJihlPS0xKnRoaXMuZ2V0TW9kZXJuVGh1bWJQb3MoMCksMCE9PWkucGFnZSYmKGUrPS41KihuLnRodW1iV2lkdGh8fDApKSx0PS0xKnRoaXMuZ2V0TW9kZXJuVGh1bWJQb3MoaS5zbGlkZXMubGVuZ3RoLTEpLGkucGFnZSE9PWkuc2xpZGVzLmxlbmd0aC0xJiYodCs9KHMudGh1bWJXaWR0aHx8MCktKG8udGh1bWJXaWR0aHx8MCktLjUqKHMudGh1bWJXaWR0aHx8MCkpKSx7eDp7bWluOnQsbWF4OmV9LHk6e21pbjowLG1heDowfX19fSk7by5vbihcInRvdWNoU3RhcnRcIiwoKHQsZSk9Pnt0aGlzLnNob3VsZENlbnRlcj0hMX0pKSxvLm9uKFwiY2xpY2tcIiwoKHQsZSk9PnRoaXMub25DbGlja01vZGVybihlKSkpLG8ub24oXCJyZWFkeVwiLCgoKT0+e3RoaXMuY2VudGVyTW9kZXJuKCksdGhpcy5lbWl0KFwicmVhZHlcIil9KSksby5vbihbXCJhZnRlclRyYW5zZm9ybVwiLFwicmVmcmVzaFwiXSwodD0+e3RoaXMubGF6eUxvYWRNb2Rlcm4oKX0pKSx0aGlzLnBhbnpvb209byx0aGlzLnJlZnJlc2hNb2Rlcm4oKX11cGRhdGVNb2Rlcm4oKXtpZihcIm1vZGVyblwiIT09dGhpcy50eXBlKXJldHVybjtjb25zdHtjb250YWluZXI6dH09dGhpczt0JiYodGhpcy50aHVtYkdhcD1wYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUodCkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tZi10aHVtYi1nYXBcIikpfHwwLHRoaXMudGh1bWJFeHRyYUdhcD1wYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUodCkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tZi10aHVtYi1leHRyYS1nYXBcIikpfHwwLHRoaXMudGh1bWJXaWR0aD1wYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUodCkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tZi10aHVtYi13aWR0aFwiKSl8fDQwLHRoaXMudGh1bWJDbGlwV2lkdGg9cGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHQpLmdldFByb3BlcnR5VmFsdWUoXCItLWYtdGh1bWItY2xpcC13aWR0aFwiKSl8fDQwLHRoaXMudGh1bWJIZWlnaHQ9cGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHQpLmdldFByb3BlcnR5VmFsdWUoXCItLWYtdGh1bWItaGVpZ2h0XCIpKXx8NDApfXJlZnJlc2hNb2Rlcm4oKXt2YXIgdDtpZihcIm1vZGVyblwiPT09dGhpcy50eXBlKXt0aGlzLnVwZGF0ZU1vZGVybigpO2Zvcihjb25zdCB0IG9mIHRoaXMuaW5zdGFuY2Uuc2xpZGVzfHxbXSl0aGlzLnJlc2l6ZU1vZGVyblNsaWRlKHQpO3RoaXMub25UcmFuc2Zvcm1NKCksbnVsbD09PSh0PXRoaXMucGFuem9vbSl8fHZvaWQgMD09PXR8fHQudXBkYXRlTWV0cmljcyghMCksdGhpcy5jZW50ZXJNb2Rlcm4oMCl9fWNlbnRlck1vZGVybihlKXtjb25zdCBpPXRoaXMuaW5zdGFuY2Use2NvbnRhaW5lcjpuLHBhbnpvb206c309dGhpcztpZighbnx8IXN8fHMuc3RhdGU9PT1nLkluaXQpcmV0dXJuO2NvbnN0IG89aS5wYWdlO2xldCBhPXRoaXMuZ2V0TW9kZXJuVGh1bWJQb3Mobykscj1hO2ZvcihsZXQgdD1pLnBhZ2UtMzt0PGkucGFnZSszO3QrKyl7aWYodDwwfHx0PmkucGFnZXMubGVuZ3RoLTF8fHQ9PT1pLnBhZ2UpY29udGludWU7Y29uc3QgZT0xLU1hdGguYWJzKGkuZ2V0UHJvZ3Jlc3ModCkpO2U+MCYmZTwxJiYocis9ZSoodGhpcy5nZXRNb2Rlcm5UaHVtYlBvcyh0KS1hKSl9bGV0IGw9MTAwO3ZvaWQgMD09PWUmJihlPS4yLGkuaW5UcmFuc2l0aW9uLnNpemU+MCYmKGU9LjEyKSxNYXRoLmFicygtMSpzLmN1cnJlbnQuZS1yKT5zLmNvbnRhaW5lclJlY3Qud2lkdGgmJihlPS41LGw9MCkpLHMub3B0aW9ucy5tYXhWZWxvY2l0eT1sLHMuYXBwbHlDaGFuZ2Uoe3Bhblg6dCgtMSpyLXMudGFyZ2V0LmUsMWUzKSxmcmljdGlvbjpudWxsPT09aS5wcmV2UGFnZT8wOmV9KX1sYXp5TG9hZE1vZGVybigpe2NvbnN0e2luc3RhbmNlOnQscGFuem9vbTplfT10aGlzO2lmKCFlKXJldHVybjtjb25zdCBpPS0xKmUuY3VycmVudC5lfHwwO2xldCBzPXRoaXMuZ2V0TW9kZXJuVGh1bWJQb3ModC5wYWdlKTtpZihlLnN0YXRlIT09Zy5Jbml0fHwwPT09cylmb3IoY29uc3QgcyBvZiB0LnNsaWRlc3x8W10pe2NvbnN0IHQ9cy50aHVtYlNsaWRlRWw7aWYoIXQpY29udGludWU7Y29uc3Qgbz10LnF1ZXJ5U2VsZWN0b3IoXCJpbWdbZGF0YS1sYXp5LXNyY11cIiksYT1zLmluZGV4LHI9dGhpcy5nZXRNb2Rlcm5UaHVtYlBvcyhhKSxsPWktLjUqZS5jb250YWluZXJSZWN0LmlubmVyV2lkdGgsYz1sK2UuY29udGFpbmVyUmVjdC5pbm5lcldpZHRoO2lmKCFvfHxyPGx8fHI+Yyljb250aW51ZTtsZXQgaD1vLmRhdGFzZXQubGF6eVNyYztpZighaHx8IWgubGVuZ3RoKWNvbnRpbnVlO2lmKGRlbGV0ZSBvLmRhdGFzZXQubGF6eVNyYyxvLnNyYz1oLG8uY29tcGxldGUpY29udGludWU7Uyh0LHRoaXMuY24oXCJpc0xvYWRpbmdcIikpO2NvbnN0IGQ9bih3KTt0LmFwcGVuZENoaWxkKGQpLG8uYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwoKCk9Pnt0Lm9mZnNldFBhcmVudCYmKHQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNuKFwiaXNMb2FkaW5nXCIpKSxkLnJlbW92ZSgpKX0pLCExKX19cmVzaXplTW9kZXJuU2xpZGUodCl7aWYoXCJtb2Rlcm5cIiE9PXRoaXMudHlwZSlyZXR1cm47aWYoIXQudGh1bWJTbGlkZUVsKXJldHVybjtjb25zdCBlPXQudGh1bWJDbGlwV2lkdGgmJnQudGh1bWJIZWlnaHQ/TWF0aC5yb3VuZCh0aGlzLnRodW1iSGVpZ2h0Kih0LnRodW1iQ2xpcFdpZHRoL3QudGh1bWJIZWlnaHQpKTp0aGlzLnRodW1iV2lkdGg7dC50aHVtYldpZHRoPWV9Z2V0TW9kZXJuVGh1bWJQb3MoZSl7Y29uc3QgaT10aGlzLmluc3RhbmNlLnNsaWRlc1tlXSxuPXRoaXMucGFuem9vbTtpZighbnx8IW4uY29udGVudFJlY3QuZml0V2lkdGgpcmV0dXJuIDA7bGV0IHM9bi5jb250YWluZXJSZWN0LmlubmVyV2lkdGgsbz1uLmNvbnRlbnRSZWN0LndpZHRoOzI9PT10aGlzLmluc3RhbmNlLnNsaWRlcy5sZW5ndGgmJihlLT0xLG89Mip0aGlzLnRodW1iQ2xpcFdpZHRoKTtsZXQgYT1lKih0aGlzLnRodW1iQ2xpcFdpZHRoK3RoaXMudGh1bWJHYXApK3RoaXMudGh1bWJFeHRyYUdhcCsuNSooaS50aHVtYldpZHRofHwwKTtyZXR1cm4gYS09bz5zPy41KnM6LjUqbyx0KGF8fDAsMSl9YnVpbGQoKXtjb25zdCB0PXRoaXMuaW5zdGFuY2UsZT10LmNvbnRhaW5lcixpPXRoaXMub3B0aW9uKFwibWluQ291bnRcIil8fDA7aWYoaSl7bGV0IGU9MDtmb3IoY29uc3QgaSBvZiB0LnNsaWRlc3x8W10paS50aHVtYlNyYyYmZSsrO2lmKGU8aSlyZXR1cm4gdGhpcy5jbGVhbnVwKCksdm9pZCh0aGlzLnN0YXRlPWF0LkRpc2FibGVkKX1jb25zdCBuPXRoaXMub3B0aW9uKFwidHlwZVwiKTtpZihbXCJtb2Rlcm5cIixcImNsYXNzaWNcIl0uaW5kZXhPZihuKTwwKXJldHVybiB2b2lkKHRoaXMuc3RhdGU9YXQuRGlzYWJsZWQpO3RoaXMudHlwZT1uO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtTKHMsdGhpcy5jbihcImNvbnRhaW5lclwiKSksUyhzLGBpcy0ke259YCk7Y29uc3Qgbz10aGlzLm9wdGlvbihcInBhcmVudEVsXCIpO28/by5hcHBlbmRDaGlsZChzKTplLmFmdGVyKHMpLHRoaXMuY29udGFpbmVyPXMsUyhlLHRoaXMuY24oXCJoYXNUaHVtYnNcIikpO2NvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtTKGEsdGhpcy5jbihcInRyYWNrXCIpKSxzLmFwcGVuZENoaWxkKGEpLHRoaXMudHJhY2s9YSxcImNsYXNzaWNcIj09PW4/dGhpcy5idWlsZENsYXNzaWMoKTp0aGlzLmJ1aWxkTW9kZXJuKCksdGhpcy5zdGF0ZT1hdC5SZWFkeSxzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChlPT57c2V0VGltZW91dCgoKCk9Pnt2YXIgZTtudWxsPT09KGU9bnVsbD09cz92b2lkIDA6cy5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jYXJvdXNlbC1pbmRleD1cIiR7dC5wYWdlfVwiXWApKXx8dm9pZCAwPT09ZXx8ZS5mb2N1cygpfSksMTAwKX0pKX1jbGVhbnVwKCl7dGhpcy5jYXJvdXNlbCYmdGhpcy5jYXJvdXNlbC5kZXN0cm95KCksdGhpcy5jYXJvdXNlbD1udWxsLHRoaXMucGFuem9vbSYmdGhpcy5wYW56b29tLmRlc3Ryb3koKSx0aGlzLnBhbnpvb209bnVsbCx0aGlzLmNvbnRhaW5lciYmdGhpcy5jb250YWluZXIucmVtb3ZlKCksdGhpcy5jb250YWluZXI9bnVsbCx0aGlzLnRyYWNrPW51bGwsdGhpcy5zdGF0ZT1hdC5Jbml0LEUodGhpcy5pbnN0YW5jZS5jb250YWluZXIsdGhpcy5jbihcImhhc1RodW1ic1wiKSl9YXR0YWNoKCl7Y29uc3R7aW5zdGFuY2U6dH09dGhpczt0Lm9uKFwiaW5pdFNsaWRlXCIsdGhpcy5vbkluaXRTbGlkZSksdC5zdGF0ZT09PUwuSW5pdD90Lm9uKFwiaW5pdFNsaWRlc1wiLHRoaXMub25Jbml0U2xpZGVzKTp0aGlzLm9uSW5pdFNsaWRlcygpLHQub24oXCJQYW56b29tLmFmdGVyVHJhbnNmb3JtXCIsdGhpcy5vblRyYW5zZm9ybU0pLHQub24oXCJQYW56b29tLnJlZnJlc2hcIix0aGlzLm9uUmVmcmVzaE0pLHQub24oXCJjaGFuZ2VcIix0aGlzLm9uQ2hhbmdlTSl9ZGV0YWNoKCl7Y29uc3R7aW5zdGFuY2U6dH09dGhpczt0Lm9mZihcImluaXRTbGlkZVwiLHRoaXMub25Jbml0U2xpZGUpLHQub2ZmKFwiaW5pdFNsaWRlc1wiLHRoaXMub25Jbml0U2xpZGVzKSx0Lm9mZihcIlBhbnpvb20uYWZ0ZXJUcmFuc2Zvcm1cIix0aGlzLm9uVHJhbnNmb3JtTSksdC5vZmYoXCJQYW56b29tLnJlZnJlc2hcIix0aGlzLm9uUmVmcmVzaE0pLHQub2ZmKFwiY2hhbmdlXCIsdGhpcy5vbkNoYW5nZU0pLHRoaXMuY2xlYW51cCgpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHJ0LFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6b3R9KTtjb25zdCBsdD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sb3QpLHtrZXk6XCJ0XCIsc2hvd09uU3RhcnQ6ITAscGFyZW50RWw6bnVsbH0pO2NsYXNzIGN0IGV4dGVuZHMgSXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJyZWZcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaGlkZGVuXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSl9Z2V0IGlzRW5hYmxlZCgpe2NvbnN0IHQ9dGhpcy5yZWY7cmV0dXJuIHQmJnQuc3RhdGUhPT1hdC5EaXNhYmxlZH1nZXQgaXNIaWRkZW4oKXtyZXR1cm4gdGhpcy5oaWRkZW59b25Jbml0KCl7Y29uc3QgdD10aGlzLmluc3RhbmNlLGU9dC5jYXJvdXNlbDtpZih0aGlzLnJlZnx8IWUpcmV0dXJuO2NvbnN0IGk9dGhpcy5vcHRpb24oXCJwYXJlbnRFbFwiKXx8dC5mb290ZXJ8fHQuY29udGFpbmVyO2kmJihlLm9wdGlvbnMuVGh1bWJzPXUoe30sdGhpcy5vcHRpb25zLHtwYXJlbnRFbDppLGNsYXNzZXM6e2NvbnRhaW5lcjpcImYtdGh1bWJzIGZhbmN5Ym94X190aHVtYnNcIn0sQ2Fyb3VzZWw6e1N5bmM6e2ZyaWN0aW9uOnQub3B0aW9uKFwiQ2Fyb3VzZWwuZnJpY3Rpb25cIil9LG9uOntjbGljazoodCxlKT0+e2Uuc3RvcFByb3BhZ2F0aW9uKCl9fX0sb246e3JlYWR5OnQ9Pntjb25zdCBlPXQuY29udGFpbmVyO2UmJnRoaXMuaGlkZGVuJiYodGhpcy5yZWZyZXNoKCksZS5zdHlsZS50cmFuc2l0aW9uPVwibm9uZVwiLHRoaXMuaGlkZSgpLGUub2Zmc2V0SGVpZ2h0LHF1ZXVlTWljcm90YXNrKCgoKT0+e2Uuc3R5bGUudHJhbnNpdGlvbj1cIlwiLHRoaXMuc2hvdygpfSkpKX19fSksZS5hdHRhY2hQbHVnaW5zKHtUaHVtYnM6cnR9KSx0aGlzLnJlZj1lLnBsdWdpbnMuVGh1bWJzLHRoaXMub3B0aW9uKFwic2hvd09uU3RhcnRcIil8fCh0aGlzLnJlZi5zdGF0ZT1hdC5IaWRkZW4sdGhpcy5oaWRkZW49ITApKX1vblJlc2l6ZSgpe3ZhciB0O2NvbnN0IGU9bnVsbD09PSh0PXRoaXMucmVmKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb250YWluZXI7ZSYmKGUuc3R5bGUubWF4SGVpZ2h0PVwiXCIpfW9uS2V5ZG93bih0LGUpe2NvbnN0IGk9dGhpcy5vcHRpb24oXCJrZXlcIik7aSYmaT09PWUmJnRoaXMudG9nZ2xlKCl9dG9nZ2xlKCl7Y29uc3QgdD10aGlzLnJlZjt0JiZ0LnN0YXRlIT09YXQuRGlzYWJsZWQmJih0LnN0YXRlIT09YXQuSGlkZGVuP3RoaXMuaGlkZGVuP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnQuYnVpbGQoKSl9c2hvdygpe2NvbnN0IHQ9dGhpcy5yZWYsZT10JiZ0LnN0YXRlIT09YXQuRGlzYWJsZWQmJnQuY29udGFpbmVyO2UmJih0aGlzLnJlZnJlc2goKSxlLm9mZnNldEhlaWdodCxlLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpLGUuY2xhc3NMaXN0LnJlbW92ZShcImlzLWhpZGRlblwiKSx0aGlzLmhpZGRlbj0hMSl9aGlkZSgpe2NvbnN0IHQ9dGhpcy5yZWYsZT10JiZ0LmNvbnRhaW5lcjtlJiYodGhpcy5yZWZyZXNoKCksZS5vZmZzZXRIZWlnaHQsZS5jbGFzc0xpc3QuYWRkKFwiaXMtaGlkZGVuXCIpLGUuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIixcInRydWVcIikpLHRoaXMuaGlkZGVuPSEwfXJlZnJlc2goKXtjb25zdCB0PXRoaXMucmVmO2lmKCF0fHx0LnN0YXRlPT09YXQuRGlzYWJsZWQpcmV0dXJuO2NvbnN0IGU9dC5jb250YWluZXIsaT0obnVsbD09ZT92b2lkIDA6ZS5maXJzdENoaWxkKXx8bnVsbDtlJiZpJiZpLmNoaWxkTm9kZXMubGVuZ3RoJiYoZS5zdHlsZS5tYXhIZWlnaHQ9YCR7aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHR9cHhgKX1hdHRhY2goKXt0aGlzLmluc3RhbmNlLnN0YXRlPT09Wi5Jbml0P3RoaXMuaW5zdGFuY2Uub24oXCJDYXJvdXNlbC5pbml0XCIsdGhpcy5vbkluaXQpOnRoaXMub25Jbml0KCksdGhpcy5pbnN0YW5jZS5vbihcInJlc2l6ZVwiLHRoaXMub25SZXNpemUpLHRoaXMuaW5zdGFuY2Uub24oXCJrZXlkb3duXCIsdGhpcy5vbktleWRvd24pfWRldGFjaCgpe3ZhciB0O3RoaXMuaW5zdGFuY2Uub2ZmKFwiQ2Fyb3VzZWwuaW5pdFwiLHRoaXMub25Jbml0KSx0aGlzLmluc3RhbmNlLm9mZihcInJlc2l6ZVwiLHRoaXMub25SZXNpemUpLHRoaXMuaW5zdGFuY2Uub2ZmKFwia2V5ZG93blwiLHRoaXMub25LZXlkb3duKSxudWxsPT09KHQ9dGhpcy5pbnN0YW5jZS5jYXJvdXNlbCl8fHZvaWQgMD09PXR8fHQuZGV0YWNoUGx1Z2lucyhbXCJUaHVtYnNcIl0pLHRoaXMucmVmPW51bGx9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdCxcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmx0fSk7Y29uc3QgaHQ9e3BhbkxlZnQ6e2ljb246Jzxzdmc+PHBhdGggZD1cIk01IDEyaDE0TTUgMTJsNiA2TTUgMTJsNi02XCIvPjwvc3ZnPicsY2hhbmdlOntwYW5YOi0xMDB9fSxwYW5SaWdodDp7aWNvbjonPHN2Zz48cGF0aCBkPVwiTTUgMTJoMTRNMTMgMThsNi02TTEzIDZsNiA2XCIvPjwvc3ZnPicsY2hhbmdlOntwYW5YOjEwMH19LHBhblVwOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMTIgNXYxNE0xOCAxMWwtNi02TTYgMTFsNi02XCIvPjwvc3ZnPicsY2hhbmdlOntwYW5ZOi0xMDB9fSxwYW5Eb3duOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMTIgNXYxNE0xOCAxM2wtNiA2TTYgMTNsNiA2XCIvPjwvc3ZnPicsY2hhbmdlOntwYW5ZOjEwMH19LHpvb21Jbjp7aWNvbjonPHN2Zz48Y2lyY2xlIGN4PVwiMTFcIiBjeT1cIjExXCIgcj1cIjcuNVwiLz48cGF0aCBkPVwibTIxIDIxLTQuMzUtNC4zNU0xMSA4djZNOCAxMWg2XCIvPjwvc3ZnPicsYWN0aW9uOlwiem9vbUluXCJ9LHpvb21PdXQ6e2ljb246Jzxzdmc+PGNpcmNsZSBjeD1cIjExXCIgY3k9XCIxMVwiIHI9XCI3LjVcIi8+PHBhdGggZD1cIm0yMSAyMS00LjM1LTQuMzVNOCAxMWg2XCIvPjwvc3ZnPicsYWN0aW9uOlwiem9vbU91dFwifSx0b2dnbGUxdG8xOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMy41MSAzLjA3YzUuNzQuMDIgMTEuNDgtLjAyIDE3LjIyLjAyIDEuMzcuMSAyLjM0IDEuNjQgMi4xOCAzLjEzIDAgNC4wOC4wMiA4LjE2IDAgMTIuMjMtLjEgMS41NC0xLjQ3IDIuNjQtMi43OSAyLjQ2LTUuNjEtLjAxLTExLjI0LjAyLTE2Ljg2LS4wMS0xLjM2LS4xMi0yLjMzLTEuNjUtMi4xNy0zLjE0IDAtNC4wNy0uMDItOC4xNiAwLTEyLjIzLjEtMS4zNiAxLjIyLTIuNDggMi40Mi0yLjQ2WlwiLz48cGF0aCBkPVwiTTUuNjUgOC41NGgxLjQ5djYuOTJtOC45NC02LjkyaDEuNDl2Ni45Mk0xMS41IDkuNHYuMDJtMCA1LjE4djBcIi8+PC9zdmc+JyxhY3Rpb246XCJ0b2dnbGVab29tXCJ9LHRvZ2dsZVpvb206e2ljb246Jzxzdmc+PGc+PGxpbmUgeDE9XCIxMVwiIHkxPVwiOFwiIHgyPVwiMTFcIiB5Mj1cIjE0XCI+PC9saW5lPjwvZz48Y2lyY2xlIGN4PVwiMTFcIiBjeT1cIjExXCIgcj1cIjcuNVwiLz48cGF0aCBkPVwibTIxIDIxLTQuMzUtNC4zNU04IDExaDZcIi8+PC9zdmc+JyxhY3Rpb246XCJ0b2dnbGVab29tXCJ9LGl0ZXJhdGVab29tOntpY29uOic8c3ZnPjxnPjxsaW5lIHgxPVwiMTFcIiB5MT1cIjhcIiB4Mj1cIjExXCIgeTI9XCIxNFwiPjwvbGluZT48L2c+PGNpcmNsZSBjeD1cIjExXCIgY3k9XCIxMVwiIHI9XCI3LjVcIi8+PHBhdGggZD1cIm0yMSAyMS00LjM1LTQuMzVNOCAxMWg2XCIvPjwvc3ZnPicsYWN0aW9uOlwiaXRlcmF0ZVpvb21cIn0scm90YXRlQ0NXOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMTUgNC41NWE4IDggMCAwIDAtNiAxNC45TTkgMTV2NUg0TTE4LjM3IDcuMTZ2LjAxTTEzIDE5Ljk0di4wMU0xNi44NCAxOC4zN3YuMDFNMTkuMzcgMTUuMXYuMDFNMTkuOTQgMTF2LjAxXCIvPjwvc3ZnPicsYWN0aW9uOlwicm90YXRlQ0NXXCJ9LHJvdGF0ZUNXOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNOSA0LjU1YTggOCAwIDAgMSA2IDE0LjlNMTUgMTV2NWg1TTUuNjMgNy4xNnYuMDFNNC4wNiAxMXYuMDFNNC42MyAxNS4xdi4wMU03LjE2IDE4LjM3di4wMU0xMSAxOS45NHYuMDFcIi8+PC9zdmc+JyxhY3Rpb246XCJyb3RhdGVDV1wifSxmbGlwWDp7aWNvbjonPHN2ZyBzdHlsZT1cInN0cm9rZS13aWR0aDogMS4zXCI+PHBhdGggZD1cIk0xMiAzdjE4TTE2IDd2MTBoNUwxNiA3TTggN3YxMEgzTDggN1wiLz48L3N2Zz4nLGFjdGlvbjpcImZsaXBYXCJ9LGZsaXBZOntpY29uOic8c3ZnIHN0eWxlPVwic3Ryb2tlLXdpZHRoOiAxLjNcIj48cGF0aCBkPVwiTTMgMTJoMThNNyAxNmgxMEw3IDIxdi01TTcgOGgxMEw3IDN2NVwiLz48L3N2Zz4nLGFjdGlvbjpcImZsaXBZXCJ9LGZpdFg6e2ljb246Jzxzdmc+PHBhdGggZD1cIk00IDEyVjZhMiAyIDAgMCAxIDItMmgxMmEyIDIgMCAwIDEgMiAydjZNMTAgMThIM00yMSAxOGgtN002IDE1bC0zIDMgMyAzTTE4IDE1bDMgMy0zIDNcIi8+PC9zdmc+JyxhY3Rpb246XCJmaXRYXCJ9LGZpdFk6e2ljb246Jzxzdmc+PHBhdGggZD1cIk0xMiAyMEg2YTIgMiAwIDAgMS0yLTJWNmEyIDIgMCAwIDEgMi0yaDZNMTggMTR2N00xOCAzdjdNMTUgMThsMyAzIDMtM00xNSA2bDMtMyAzIDNcIi8+PC9zdmc+JyxhY3Rpb246XCJmaXRZXCJ9LHJlc2V0OntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMjAgMTFBOC4xIDguMSAwIDAgMCA0LjUgOU00IDV2NGg0TTQgMTNhOC4xIDguMSAwIDAgMCAxNS41IDJtLjUgNHYtNGgtNFwiLz48L3N2Zz4nLGFjdGlvbjpcInJlc2V0XCJ9LHRvZ2dsZUZTOntpY29uOic8c3ZnPjxnPjxwYXRoIGQ9XCJNMTQuNSA5LjUgMjEgM20wIDBoLTZtNiAwdjZNMyAyMWw2LjUtNi41TTMgMjF2LTZtMCA2aDZcIi8+PC9nPjxnPjxwYXRoIGQ9XCJtMTQgMTAgNy03bS03IDdoNm0tNiAwVjRNMyAyMWw3LTdtMCAwdjZtMC02SDRcIi8+PC9nPjwvc3ZnPicsYWN0aW9uOlwidG9nZ2xlRlNcIn19O3ZhciBkdDshZnVuY3Rpb24odCl7dFt0LkluaXQ9MF09XCJJbml0XCIsdFt0LlJlYWR5PTFdPVwiUmVhZHlcIix0W3QuRGlzYWJsZWQ9Ml09XCJEaXNhYmxlZFwifShkdHx8KGR0PXt9KSk7Y29uc3QgdXQ9e2Fic29sdXRlOlwiYXV0b1wiLGRpc3BsYXk6e2xlZnQ6W1wiaW5mb2JhclwiXSxtaWRkbGU6W10scmlnaHQ6W1wiaXRlcmF0ZVpvb21cIixcInNsaWRlc2hvd1wiLFwiZnVsbHNjcmVlblwiLFwidGh1bWJzXCIsXCJjbG9zZVwiXX0sZW5hYmxlZDpcImF1dG9cIixpdGVtczp7aW5mb2Jhcjp7dHBsOic8ZGl2IGNsYXNzPVwiZmFuY3lib3hfX2luZm9iYXJcIiB0YWJpbmRleD1cIi0xXCI+PHNwYW4gZGF0YS1mYW5jeWJveC1jdXJyZW50LWluZGV4Pjwvc3Bhbj4vPHNwYW4gZGF0YS1mYW5jeWJveC1jb3VudD48L3NwYW4+PC9kaXY+J30sZG93bmxvYWQ6e3RwbDonPGEgY2xhc3M9XCJmLWJ1dHRvblwiIHRpdGxlPVwie3tET1dOTE9BRH19XCIgZGF0YS1mYW5jeWJveC1kb3dubG9hZCBocmVmPVwiamF2YXNyaXB0OjtcIj48c3ZnPjxwYXRoIGQ9XCJNNCAxN3YyYTIgMiAwIDAgMCAyIDJoMTJhMiAyIDAgMCAwIDItMnYtMk03IDExbDUgNSA1LTVNMTIgNHYxMlwiLz48L3N2Zz48L2E+J30scHJldjp7dHBsOic8YnV0dG9uIGNsYXNzPVwiZi1idXR0b25cIiB0aXRsZT1cInt7UFJFVn19XCIgZGF0YS1mYW5jeWJveC1wcmV2Pjxzdmc+PHBhdGggZD1cIm0xNSA2LTYgNiA2IDZcIi8+PC9zdmc+PC9idXR0b24+J30sbmV4dDp7dHBsOic8YnV0dG9uIGNsYXNzPVwiZi1idXR0b25cIiB0aXRsZT1cInt7TkVYVH19XCIgZGF0YS1mYW5jeWJveC1uZXh0Pjxzdmc+PHBhdGggZD1cIm05IDYgNiA2LTYgNlwiLz48L3N2Zz48L2J1dHRvbj4nfSxzbGlkZXNob3c6e3RwbDonPGJ1dHRvbiBjbGFzcz1cImYtYnV0dG9uXCIgdGl0bGU9XCJ7e1RPR0dMRV9TTElERVNIT1d9fVwiIGRhdGEtZmFuY3lib3gtdG9nZ2xlLXNsaWRlc2hvdz48c3ZnPjxnPjxwYXRoIGQ9XCJNOCA0djE2bDEzIC04elwiPjwvcGF0aD48L2c+PGc+PHBhdGggZD1cIk04IDR2MTVNMTcgNHYxNVwiLz48L2c+PC9zdmc+PC9idXR0b24+J30sZnVsbHNjcmVlbjp7dHBsOic8YnV0dG9uIGNsYXNzPVwiZi1idXR0b25cIiB0aXRsZT1cInt7VE9HR0xFX0ZVTExTQ1JFRU59fVwiIGRhdGEtZmFuY3lib3gtdG9nZ2xlLWZ1bGxzY3JlZW4+PHN2Zz48Zz48cGF0aCBkPVwiTTQgOFY2YTIgMiAwIDAgMSAyLTJoMk00IDE2djJhMiAyIDAgMCAwIDIgMmgyTTE2IDRoMmEyIDIgMCAwIDEgMiAydjJNMTYgMjBoMmEyIDIgMCAwIDAgMi0ydi0yXCIvPjwvZz48Zz48cGF0aCBkPVwiTTE1IDE5di0yYTIgMiAwIDAgMSAyLTJoMk0xNSA1djJhMiAyIDAgMCAwIDIgMmgyTTUgMTVoMmEyIDIgMCAwIDEgMiAydjJNNSA5aDJhMiAyIDAgMCAwIDItMlY1XCIvPjwvZz48L3N2Zz48L2J1dHRvbj4nfSx0aHVtYnM6e3RwbDonPGJ1dHRvbiBjbGFzcz1cImYtYnV0dG9uXCIgdGl0bGU9XCJ7e1RPR0dMRV9USFVNQlN9fVwiIGRhdGEtZmFuY3lib3gtdG9nZ2xlLXRodW1icz48c3ZnPjxjaXJjbGUgY3g9XCI1LjVcIiBjeT1cIjUuNVwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiNS41XCIgcj1cIjFcIi8+PGNpcmNsZSBjeD1cIjE4LjVcIiBjeT1cIjUuNVwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCI1LjVcIiBjeT1cIjEyXCIgcj1cIjFcIi8+PGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCIxOC41XCIgY3k9XCIxMlwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCI1LjVcIiBjeT1cIjE4LjVcIiByPVwiMVwiLz48Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjE4LjVcIiByPVwiMVwiLz48Y2lyY2xlIGN4PVwiMTguNVwiIGN5PVwiMTguNVwiIHI9XCIxXCIvPjwvc3ZnPjwvYnV0dG9uPid9LGNsb3NlOnt0cGw6JzxidXR0b24gY2xhc3M9XCJmLWJ1dHRvblwiIHRpdGxlPVwie3tDTE9TRX19XCIgZGF0YS1mYW5jeWJveC1jbG9zZT48c3ZnPjxwYXRoIGQ9XCJtMTkuNSA0LjUtMTUgMTVNNC41IDQuNWwxNSAxNVwiLz48L3N2Zz48L2J1dHRvbj4nfX0scGFyZW50RWw6bnVsbH0scHQ9e3RhYmluZGV4OlwiLTFcIix3aWR0aDpcIjI0XCIsaGVpZ2h0OlwiMjRcIix2aWV3Qm94OlwiMCAwIDI0IDI0XCIseG1sbnM6XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wifTtjbGFzcyBmdCBleHRlbmRzIEl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic3RhdGVcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ZHQuSW5pdH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGFpbmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KX1vblJlYWR5KHQpe3ZhciBlO2lmKCF0LmNhcm91c2VsKXJldHVybjtsZXQgaT10aGlzLm9wdGlvbihcImRpc3BsYXlcIiksbj10aGlzLm9wdGlvbihcImFic29sdXRlXCIpLHM9dGhpcy5vcHRpb24oXCJlbmFibGVkXCIpO2lmKFwiYXV0b1wiPT09cyl7Y29uc3QgdD10aGlzLmluc3RhbmNlLmNhcm91c2VsO2xldCBlPTA7aWYodClmb3IoY29uc3QgaSBvZiB0LnNsaWRlcykoaS5wYW56b29tfHxcImltYWdlXCI9PT1pLnR5cGUpJiZlKys7ZXx8KHM9ITEpfXN8fChpPXZvaWQgMCk7bGV0IG89MDtjb25zdCBhPXtsZWZ0OltdLG1pZGRsZTpbXSxyaWdodDpbXX07aWYoaSlmb3IoY29uc3QgdCBvZltcImxlZnRcIixcIm1pZGRsZVwiLFwicmlnaHRcIl0pZm9yKGNvbnN0IG4gb2YgaVt0XSl7Y29uc3QgaT10aGlzLmNyZWF0ZUVsKG4pO2kmJihudWxsPT09KGU9YVt0XSl8fHZvaWQgMD09PWV8fGUucHVzaChpKSxvKyspfWxldCByPW51bGw7aWYobyYmKHI9dGhpcy5jcmVhdGVDb250YWluZXIoKSkscil7Zm9yKGNvbnN0W3QsZV1vZiBPYmplY3QuZW50cmllcyhhKSl7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1MoaSxcImZhbmN5Ym94X190b29sYmFyX19jb2x1bW4gaXMtXCIrdCk7Zm9yKGNvbnN0IHQgb2YgZSlpLmFwcGVuZENoaWxkKHQpO1wiYXV0b1wiIT09bnx8XCJtaWRkbGVcIiE9PXR8fGUubGVuZ3RofHwobj0hMCksci5hcHBlbmRDaGlsZChpKX0hMD09PW4mJlMocixcImlzLWFic29sdXRlXCIpLHRoaXMuc3RhdGU9ZHQuUmVhZHksdGhpcy5vblJlZnJlc2goKX1lbHNlIHRoaXMuc3RhdGU9ZHQuRGlzYWJsZWR9b25DbGljayh0KXt2YXIgZSxpO2NvbnN0IG49dGhpcy5pbnN0YW5jZSxzPW4uZ2V0U2xpZGUoKSxvPW51bGw9PXM/dm9pZCAwOnMucGFuem9vbSxhPXQudGFyZ2V0LHI9YSYmeChhKT9hLmRhdGFzZXQ6bnVsbDtpZighcilyZXR1cm47aWYodm9pZCAwIT09ci5mYW5jeWJveFRvZ2dsZVRodW1icylyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksdm9pZChudWxsPT09KGU9bi5wbHVnaW5zLlRodW1icyl8fHZvaWQgMD09PWV8fGUudG9nZ2xlKCkpO2lmKHZvaWQgMCE9PXIuZmFuY3lib3hUb2dnbGVGdWxsc2NyZWVuKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSx2b2lkIHRoaXMuaW5zdGFuY2UudG9nZ2xlRnVsbHNjcmVlbigpO2lmKHZvaWQgMCE9PXIuZmFuY3lib3hUb2dnbGVTbGlkZXNob3cpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpO2NvbnN0IGU9bnVsbD09PShpPW4uY2Fyb3VzZWwpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnBsdWdpbnMuQXV0b3BsYXk7bGV0IHM9ZS5pc0FjdGl2ZTtyZXR1cm4gbyYmXCJtb3VzZW1vdmVcIj09PW8ucGFuTW9kZSYmIXMmJm8ucmVzZXQoKSx2b2lkKHM/ZS5zdG9wKCk6ZS5zdGFydCgpKX1jb25zdCBsPXIucGFuem9vbUFjdGlvbixjPXIucGFuem9vbUNoYW5nZTtpZigoY3x8bCkmJih0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSksYyl7bGV0IHQ9e307dHJ5e3Q9SlNPTi5wYXJzZShjKX1jYXRjaCh0KXt9byYmby5hcHBseUNoYW5nZSh0KX1lbHNlIGwmJm8mJm9bbF0mJm9bbF0oKX1vbkNoYW5nZSgpe3RoaXMub25SZWZyZXNoKCl9b25SZWZyZXNoKCl7aWYodGhpcy5pbnN0YW5jZS5pc0Nsb3NpbmcoKSlyZXR1cm47Y29uc3QgdD10aGlzLmNvbnRhaW5lcjtpZighdClyZXR1cm47Y29uc3QgZT10aGlzLmluc3RhbmNlLmdldFNsaWRlKCk7aWYoIWV8fGUuc3RhdGUhPT1WLlJlYWR5KXJldHVybjtjb25zdCBpPWUmJiFlLmVycm9yJiZlLnBhbnpvb207Zm9yKGNvbnN0IGUgb2YgdC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtcGFuem9vbS1hY3Rpb25dXCIpKWk/KGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksZS5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSk6KGUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcIlwiKSxlLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCItMVwiKSk7bGV0IG49aSYmaS5jYW5ab29tSW4oKSxzPWkmJmkuY2FuWm9vbU91dCgpO2Zvcihjb25zdCBlIG9mIHQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGFuem9vbS1hY3Rpb249XCJ6b29tSW5cIl0nKSluPyhlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLGUucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIikpOihlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksZS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIikpO2Zvcihjb25zdCBlIG9mIHQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGFuem9vbS1hY3Rpb249XCJ6b29tT3V0XCJdJykpcz8oZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSxlLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpKTooZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiXCIpLGUuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIixcIi0xXCIpKTtmb3IoY29uc3QgZSBvZiB0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXBhbnpvb20tYWN0aW9uPVwidG9nZ2xlWm9vbVwiXSxbZGF0YS1wYW56b29tLWFjdGlvbj1cIml0ZXJhdGVab29tXCJdJykpe3N8fG4/KGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksZS5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSk6KGUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcIlwiKSxlLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCItMVwiKSk7Y29uc3QgdD1lLnF1ZXJ5U2VsZWN0b3IoXCJnXCIpO3QmJih0LnN0eWxlLmRpc3BsYXk9bj9cIlwiOlwibm9uZVwiKX19b25Eb25lKHQsZSl7dmFyIGk7bnVsbD09PShpPWUucGFuem9vbSl8fHZvaWQgMD09PWl8fGkub24oXCJhZnRlclRyYW5zZm9ybVwiLCgoKT0+e3RoaXMuaW5zdGFuY2UuaXNDdXJyZW50U2xpZGUoZSkmJnRoaXMub25SZWZyZXNoKCl9KSksdGhpcy5pbnN0YW5jZS5pc0N1cnJlbnRTbGlkZShlKSYmdGhpcy5vblJlZnJlc2goKX1jcmVhdGVDb250YWluZXIoKXtjb25zdCB0PXRoaXMuaW5zdGFuY2UuY29udGFpbmVyO2lmKCF0KXJldHVybiBudWxsO2NvbnN0IGU9dGhpcy5vcHRpb24oXCJwYXJlbnRFbFwiKXx8dCxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIFMoaSxcImZhbmN5Ym94X190b29sYmFyXCIpLGUucHJlcGVuZChpKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub25DbGljayx7cGFzc2l2ZTohMSxjYXB0dXJlOiEwfSksdCYmUyh0LFwiaGFzLXRvb2xiYXJcIiksdGhpcy5jb250YWluZXI9aSxpfWNyZWF0ZUVsKHQpe3ZhciBlO2NvbnN0IGk9dGhpcy5pbnN0YW5jZS5jYXJvdXNlbDtpZighaSlyZXR1cm4gbnVsbDtpZihcInRvZ2dsZUZTXCI9PT10KXJldHVybiBudWxsO2lmKFwiZnVsbHNjcmVlblwiPT09dCYmIXRoaXMuaW5zdGFuY2UuZnNBUEkpcmV0dXJuIG51bGw7bGV0IHM9bnVsbDtjb25zdCBvPWkuc2xpZGVzLmxlbmd0aHx8MDtsZXQgYT0wLHI9MDtmb3IoY29uc3QgdCBvZiBpLnNsaWRlcykodC5wYW56b29tfHxcImltYWdlXCI9PT10LnR5cGUpJiZhKyssKFwiaW1hZ2VcIj09PXQudHlwZXx8dC5kb3dubG9hZFNyYykmJnIrKztpZihvPDImJltcImluZm9iYXJcIixcInByZXZcIixcIm5leHRcIl0uaW5jbHVkZXModCkpcmV0dXJuIHM7aWYodm9pZCAwIT09aHRbdF0mJiFhKXJldHVybiBudWxsO2lmKFwiZG93bmxvYWRcIj09PXQmJiFyKXJldHVybiBudWxsO2lmKFwidGh1bWJzXCI9PT10KXtjb25zdCB0PXRoaXMuaW5zdGFuY2UucGx1Z2lucy5UaHVtYnM7aWYoIXR8fCF0LmlzRW5hYmxlZClyZXR1cm4gbnVsbH1pZihcInNsaWRlc2hvd1wiPT09dCl7aWYoIShudWxsPT09KGU9dGhpcy5pbnN0YW5jZS5jYXJvdXNlbCl8fHZvaWQgMD09PWU/dm9pZCAwOmUucGx1Z2lucy5BdXRvcGxheSl8fG88MilyZXR1cm4gbnVsbH1pZih2b2lkIDAhPT1odFt0XSl7Y29uc3QgZT1odFt0XTtzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIikscy5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLHRoaXMuaW5zdGFuY2UubG9jYWxpemUoYHt7JHt0LnRvVXBwZXJDYXNlKCl9fX1gKSksUyhzLFwiZi1idXR0b25cIiksZS5hY3Rpb24mJihzLmRhdGFzZXQucGFuem9vbUFjdGlvbj1lLmFjdGlvbiksZS5jaGFuZ2UmJihzLmRhdGFzZXQucGFuem9vbUNoYW5nZT1KU09OLnN0cmluZ2lmeShlLmNoYW5nZSkpLHMuYXBwZW5kQ2hpbGQobih0aGlzLmluc3RhbmNlLmxvY2FsaXplKGUuaWNvbikpKX1lbHNle2NvbnN0IGU9KHRoaXMub3B0aW9uKFwiaXRlbXNcIil8fFtdKVt0XTtlJiYocz1uKHRoaXMuaW5zdGFuY2UubG9jYWxpemUoZS50cGwpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNsaWNrJiZzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCh0PT57dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksXCJmdW5jdGlvblwiPT10eXBlb2YgZS5jbGljayYmZS5jbGljay5jYWxsKHRoaXMsdGhpcyx0KX0pKSl9Y29uc3QgbD1udWxsPT1zP3ZvaWQgMDpzLnF1ZXJ5U2VsZWN0b3IoXCJzdmdcIik7aWYobClmb3IoY29uc3RbdCxlXW9mIE9iamVjdC5lbnRyaWVzKHB0KSlsLmdldEF0dHJpYnV0ZSh0KXx8bC5zZXRBdHRyaWJ1dGUodCxTdHJpbmcoZSkpO3JldHVybiBzfXJlbW92ZUNvbnRhaW5lcigpe2NvbnN0IHQ9dGhpcy5jb250YWluZXI7dCYmdC5yZW1vdmUoKSx0aGlzLmNvbnRhaW5lcj1udWxsLHRoaXMuc3RhdGU9ZHQuRGlzYWJsZWQ7Y29uc3QgZT10aGlzLmluc3RhbmNlLmNvbnRhaW5lcjtlJiZFKGUsXCJoYXMtdG9vbGJhclwiKX1hdHRhY2goKXtjb25zdCB0PXRoaXMse2luc3RhbmNlOmV9PXQ7ZS5vbihcIkNhcm91c2VsLmluaXRTbGlkZXNcIix0Lm9uUmVhZHkpLGUub24oXCJkb25lXCIsdC5vbkRvbmUpLGUub24oXCJyZXZlYWxcIix0Lm9uQ2hhbmdlKSxlLm9uKFwiQ2Fyb3VzZWwuY2hhbmdlXCIsdC5vbkNoYW5nZSksdC5vblJlYWR5KHQuaW5zdGFuY2UpfWRldGFjaCgpe2NvbnN0IHQ9dGhpcyx7aW5zdGFuY2U6ZX09dDtlLm9mZihcIkNhcm91c2VsLmluaXRTbGlkZXNcIix0Lm9uUmVhZHkpLGUub2ZmKFwiZG9uZVwiLHQub25Eb25lKSxlLm9mZihcInJldmVhbFwiLHQub25DaGFuZ2UpLGUub2ZmKFwiQ2Fyb3VzZWwuY2hhbmdlXCIsdC5vbkNoYW5nZSksdC5yZW1vdmVDb250YWluZXIoKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGZ0LFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dXR9KTtjb25zdCBtdD17SGFzaDpVLEh0bWw6aXQsSW1hZ2VzOkosU2xpZGVzaG93OnN0LFRodW1iczpjdCxUb29sYmFyOmZ0fSxndD1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtyZXR1cm4gdCYmXCJSYW5nZVwiPT09dC50eXBlfTtsZXQgYnQ9bnVsbCx2dD1udWxsO2NvbnN0IHl0PW5ldyBNYXA7bGV0IHd0PTA7Y2xhc3MgeHQgZXh0ZW5kcyBte2dldCBpc0lkbGUoKXtyZXR1cm4gdGhpcy5pZGxlfWdldCBpc0NvbXBhY3QoKXtyZXR1cm4gdGhpcy5vcHRpb24oXCJjb21wYWN0XCIpfWNvbnN0cnVjdG9yKHQ9W10sZT17fSxpPXt9KXtzdXBlcihlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInVzZXJTbGlkZXNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInVzZXJQbHVnaW5zXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnt9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZGxlXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZGxlVGltZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY2xpY2tUaW1lclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwd3RcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWdub3JlRm9jdXNDaGFuZ2VcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ITF9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInN0YXRlXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOlouSW5pdH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGFpbmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImZvb3RlclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjYXB0aW9uXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNhcm91c2VsXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImxhc3RGb2N1c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwcmV2TW91c2VNb3ZlRXZlbnRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJmc0FQSVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSx0aGlzLmZzQVBJPSgoKT0+e2xldCB0LGU9XCJcIixpPVwiXCIsbj1cIlwiO3JldHVybiBkb2N1bWVudC5mdWxsc2NyZWVuRW5hYmxlZD8oZT1cInJlcXVlc3RGdWxsc2NyZWVuXCIsaT1cImV4aXRGdWxsc2NyZWVuXCIsbj1cImZ1bGxzY3JlZW5FbGVtZW50XCIpOmRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkJiYoZT1cIndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuXCIsaT1cIndlYmtpdEV4aXRGdWxsc2NyZWVuXCIsbj1cIndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50XCIpLGUmJih0PXtyZXF1ZXN0OmZ1bmN0aW9uKHQpe3JldHVyblwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW5cIj09PWU/dFtlXShFbGVtZW50LkFMTE9XX0tFWUJPQVJEX0lOUFVUKTp0W2VdKCl9LGV4aXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnRbbl0mJmRvY3VtZW50W2ldKCl9LGlzRnVsbHNjcmVlbjpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudFtuXX19KSx0fSkoKSx0aGlzLmlkPWUuaWR8fCsrd3QseXQuc2V0KHRoaXMuaWQsdGhpcyksdGhpcy51c2VyU2xpZGVzPXQsdGhpcy51c2VyUGx1Z2lucz1pLHF1ZXVlTWljcm90YXNrKCgoKT0+e3RoaXMuaW5pdCgpfSkpfWluaXQoKXtpZih0aGlzLnN0YXRlPT09Wi5EZXN0cm95KXJldHVybjt0aGlzLnN0YXRlPVouSW5pdCx0aGlzLmF0dGFjaFBsdWdpbnMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHh0LlBsdWdpbnMpLHRoaXMudXNlclBsdWdpbnMpKSx0aGlzLmVtaXQoXCJpbml0XCIpLCEwPT09dGhpcy5vcHRpb24oXCJoaWRlU2Nyb2xsYmFyXCIpJiYoKCk9PntpZighVylyZXR1cm47Y29uc3QgdD1kb2N1bWVudC5ib2R5O2lmKHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaGlkZS1zY3JvbGxiYXJcIikpcmV0dXJuO2NvbnN0IGU9d2luZG93LmlubmVyV2lkdGgtZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLGk9dC5jdXJyZW50U3R5bGV8fHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLG49cGFyc2VGbG9hdChpLm1hcmdpblJpZ2h0KTtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZhbmN5Ym94LXNjcm9sbGJhci1jb21wZW5zYXRlXCIsYCR7ZX1weGApLG4mJnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZhbmN5Ym94LWJvZHktbWFyZ2luXCIsYCR7bn1weGApLHQuY2xhc3NMaXN0LmFkZChcImhpZGUtc2Nyb2xsYmFyXCIpfSkoKSx0aGlzLmluaXRMYXlvdXQoKTtjb25zdCB0PSgpPT57dGhpcy5pbml0Q2Fyb3VzZWwodGhpcy51c2VyU2xpZGVzKSx0aGlzLnN0YXRlPVouUmVhZHksdGhpcy5hdHRhY2hFdmVudHMoKSx0aGlzLmVtaXQoXCJyZWFkeVwiKSxzZXRUaW1lb3V0KCgoKT0+e3RoaXMuY29udGFpbmVyJiZ0aGlzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwiZmFsc2VcIil9KSwxNil9O3RoaXMub3B0aW9uKFwiRnVsbHNjcmVlbi5hdXRvU3RhcnRcIikmJnRoaXMuZnNBUEkmJiF0aGlzLmZzQVBJLmlzRnVsbHNjcmVlbigpP3RoaXMuZnNBUEkucmVxdWVzdCh0aGlzLmNvbnRhaW5lcikudGhlbigoKCk9PnQoKSkpLmNhdGNoKCgoKT0+dCgpKSk6dCgpfWluaXRMYXlvdXQoKXt2YXIgdCxlO2NvbnN0IGk9dGhpcy5vcHRpb24oXCJwYXJlbnRFbFwiKXx8ZG9jdW1lbnQuYm9keSxzPW4odGhpcy5sb2NhbGl6ZSh0aGlzLm9wdGlvbihcInRwbC5tYWluXCIpfHxcIlwiKSk7cyYmKHMuc2V0QXR0cmlidXRlKFwiaWRcIixgZmFuY3lib3gtJHt0aGlzLmlkfWApLHMuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLHRoaXMubG9jYWxpemUoXCJ7e01PREFMfX1cIikpLHMuY2xhc3NMaXN0LnRvZ2dsZShcImlzLWNvbXBhY3RcIix0aGlzLmlzQ29tcGFjdCksUyhzLHRoaXMub3B0aW9uKFwibWFpbkNsYXNzXCIpfHxcIlwiKSx0aGlzLmNvbnRhaW5lcj1zLHRoaXMuZm9vdGVyPXMucXVlcnlTZWxlY3RvcihcIi5mYW5jeWJveF9fZm9vdGVyXCIpLGkuYXBwZW5kQ2hpbGQocyksUyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXCJ3aXRoLWZhbmN5Ym94XCIpLGJ0JiZ2dHx8KGJ0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLFMoYnQsXCJmYW5jeWJveC1mb2N1cy1ndWFyZFwiKSxidC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiMFwiKSxidC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKSxidC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsXCJGb2N1cyBndWFyZFwiKSx2dD1idC5jbG9uZU5vZGUoKSxudWxsPT09KHQ9cy5wYXJlbnRFbGVtZW50KXx8dm9pZCAwPT09dHx8dC5pbnNlcnRCZWZvcmUoYnQscyksbnVsbD09PShlPXMucGFyZW50RWxlbWVudCl8fHZvaWQgMD09PWV8fGUuYXBwZW5kKHZ0KSksdGhpcy5vcHRpb24oXCJhbmltYXRlZFwiKSYmKFMocyxcImlzLWFuaW1hdGVkXCIpLHNldFRpbWVvdXQoKCgpPT57dGhpcy5pc0Nsb3NpbmcoKXx8RShzLFwiaXMtYW5pbWF0ZWRcIil9KSwzNTApKSx0aGlzLmVtaXQoXCJpbml0TGF5b3V0XCIpKX1pbml0Q2Fyb3VzZWwodCl7Y29uc3QgaT10aGlzLmNvbnRhaW5lcjtpZighaSlyZXR1cm47Y29uc3Qgbj1pLnF1ZXJ5U2VsZWN0b3IoXCIuZmFuY3lib3hfX2Nhcm91c2VsXCIpO2lmKCFuKXJldHVybjtjb25zdCBzPXRoaXMuY2Fyb3VzZWw9bmV3IF8obix1KHt9LHtzbGlkZXM6dCx0cmFuc2l0aW9uOlwiZmFkZVwiLFBhbnpvb206e2xvY2tBeGlzOnRoaXMub3B0aW9uKFwiZHJhZ1RvQ2xvc2VcIik/XCJ4eVwiOlwieFwiLGluZmluaXRlOiEhdGhpcy5vcHRpb24oXCJkcmFnVG9DbG9zZVwiKSYmXCJ5XCJ9LERvdHM6ITEsTmF2aWdhdGlvbjp7Y2xhc3Nlczp7Y29udGFpbmVyOlwiZmFuY3lib3hfX25hdlwiLGJ1dHRvbjpcImYtYnV0dG9uXCIsaXNOZXh0OlwiaXMtbmV4dFwiLGlzUHJldjpcImlzLXByZXZcIn19LGluaXRpYWxQYWdlOnRoaXMub3B0aW9uKFwic3RhcnRJbmRleFwiKSxsMTBuOnRoaXMub3B0aW9uKFwibDEwblwiKX0sdGhpcy5vcHRpb24oXCJDYXJvdXNlbFwiKXx8e30pKTtzLm9uKFwiKlwiLCgodCxlLC4uLmkpPT57dGhpcy5lbWl0KGBDYXJvdXNlbC4ke2V9YCx0LC4uLmkpfSkpLHMub24oW1wicmVhZHlcIixcImNoYW5nZVwiXSwoKCk9Pnt2YXIgdDtjb25zdCBlPXRoaXMuZ2V0U2xpZGUoKTtlJiYobnVsbD09PSh0PWUucGFuem9vbSl8fHZvaWQgMD09PXR8fHQudXBkYXRlQ29udHJvbHMoKSksdGhpcy5tYW5hZ2VDYXB0aW9uKGUpfSkpLHMub24oXCJyZW1vdmVTbGlkZVwiLCgodCxlKT0+e2UuY2xvc2VCdG5FbCYmZS5jbG9zZUJ0bkVsLnJlbW92ZSgpLGUuY2xvc2VCdG5FbD12b2lkIDAsZS5jYXB0aW9uRWwmJmUuY2FwdGlvbkVsLnJlbW92ZSgpLGUuY2FwdGlvbkVsPXZvaWQgMCxlLnNwaW5uZXJFbCYmZS5zcGlubmVyRWwucmVtb3ZlKCksZS5zcGlubmVyRWw9dm9pZCAwLGUuc3RhdGU9dm9pZCAwfSkpLHMub24oXCJQYW56b29tLnRvdWNoU3RhcnRcIiwoKCk9Pnt0aGlzLmlzQ29tcGFjdHx8dGhpcy5lbmRJZGxlKCl9KSkscy5vbihcInNldHRsZVwiLCgoKT0+e3RoaXMuaWRsZVRpbWVyfHx0aGlzLmlzQ29tcGFjdHx8IXRoaXMub3B0aW9uKFwiaWRsZVwiKXx8dGhpcy5zZXRJZGxlKCksdGhpcy5vcHRpb24oXCJhdXRvRm9jdXNcIikmJnRoaXMuY2hlY2tGb2N1cygpfSkpLHRoaXMub3B0aW9uKFwiZHJhZ1RvQ2xvc2VcIikmJihzLm9uKFwiUGFuem9vbS5hZnRlclRyYW5zZm9ybVwiLCgodCxpKT0+e2NvbnN0IG49dGhpcy5nZXRTbGlkZSgpO2lmKG4mJmUobi5lbCkpcmV0dXJuO2NvbnN0IHM9dGhpcy5jb250YWluZXI7aWYocyl7Y29uc3QgdD1NYXRoLmFicyhpLmN1cnJlbnQuZiksZT10PDE/XCJcIjpNYXRoLm1heCguNSxNYXRoLm1pbigxLDEtdC9pLmNvbnRlbnRSZWN0LmZpdEhlaWdodCoxLjUpKTtzLnN0eWxlLnNldFByb3BlcnR5KFwiLS1mYW5jeWJveC10c1wiLGU/XCIwc1wiOlwiXCIpLHMuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZhbmN5Ym94LW9wYWNpdHlcIixlK1wiXCIpfX0pKSxzLm9uKFwiUGFuem9vbS50b3VjaEVuZFwiLCgodCxpLG4pPT57dmFyIHM7Y29uc3Qgbz10aGlzLmdldFNsaWRlKCk7aWYobyYmZShvLmVsKSlyZXR1cm47aWYoaS5pc01vYmlsZSYmZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmLTEhPT1bXCJURVhUQVJFQVwiLFwiSU5QVVRcIl0uaW5kZXhPZihudWxsPT09KHM9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl8fHZvaWQgMD09PXM/dm9pZCAwOnMubm9kZU5hbWUpKXJldHVybjtjb25zdCBhPU1hdGguYWJzKGkuZHJhZ09mZnNldC55KTtcInlcIj09PWkubG9ja2VkQXhpcyYmKGE+PTIwMHx8YT49NTAmJmkuZHJhZ09mZnNldC50aW1lPDMwMCkmJihuJiZuLmNhbmNlbGFibGUmJm4ucHJldmVudERlZmF1bHQoKSx0aGlzLmNsb3NlKG4sXCJmLXRocm93T3V0XCIrKGkuY3VycmVudC5mPDA/XCJVcFwiOlwiRG93blwiKSkpfSkpKSxzLm9uKFtcImNoYW5nZVwiXSwodD0+e3ZhciBlO2xldCBpPW51bGw9PT0oZT10aGlzLmdldFNsaWRlKCkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnRyaWdnZXJFbDtpZihpKXtjb25zdCBlPW5ldyBDdXN0b21FdmVudChcInNsaWRlVG9cIix7YnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGRldGFpbDp0LnBhZ2V9KTtpLmRpc3BhdGNoRXZlbnQoZSl9fSkpLHMub24oW1wicmVmcmVzaFwiLFwiY2hhbmdlXCJdLCh0PT57Y29uc3QgZT10aGlzLmNvbnRhaW5lcjtpZighZSlyZXR1cm47Zm9yKGNvbnN0IGkgb2YgZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZmFuY3lib3gtY3VycmVudC1pbmRleF1cIikpaS5pbm5lckhUTUw9dC5wYWdlKzE7Zm9yKGNvbnN0IGkgb2YgZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZmFuY3lib3gtY291bnRdXCIpKWkuaW5uZXJIVE1MPXQucGFnZXMubGVuZ3RoO2lmKCF0LmlzSW5maW5pdGUpe2Zvcihjb25zdCBpIG9mIGUucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWZhbmN5Ym94LW5leHRdXCIpKXQucGFnZTx0LnBhZ2VzLmxlbmd0aC0xPyhpLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLGkucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIikpOihpLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksaS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIikpO2Zvcihjb25zdCBpIG9mIGUucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWZhbmN5Ym94LXByZXZdXCIpKXQucGFnZT4wPyhpLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLGkucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIikpOihpLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksaS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIikpfWNvbnN0IGk9dGhpcy5nZXRTbGlkZSgpO2lmKCFpKXJldHVybjtsZXQgbj1pLmRvd25sb2FkU3JjfHxcIlwiO258fFwiaW1hZ2VcIiE9PWkudHlwZXx8aS5lcnJvcnx8XCJzdHJpbmdcIiE9dHlwZW9mIGkuc3JjfHwobj1pLnNyYyk7Zm9yKGNvbnN0IHQgb2YgZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZmFuY3lib3gtZG93bmxvYWRdXCIpKXtjb25zdCBlPWkuZG93bmxvYWRGaWxlbmFtZTtuPyh0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLHQucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIiksdC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsbiksdC5zZXRBdHRyaWJ1dGUoXCJkb3dubG9hZFwiLGV8fG4pLHQuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsXCJfYmxhbmtcIikpOih0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksdC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJocmVmXCIpLHQucmVtb3ZlQXR0cmlidXRlKFwiZG93bmxvYWRcIikpfX0pKSx0aGlzLmVtaXQoXCJpbml0Q2Fyb3VzZWxcIil9YXR0YWNoRXZlbnRzKCl7Y29uc3QgdD10aGlzLmNvbnRhaW5lcjt0JiYodC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLHQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsdGhpcy5vbldoZWVsLHtwYXNzaXZlOiExLGNhcHR1cmU6ITF9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMub25LZXlkb3duLHtwYXNzaXZlOiExLGNhcHR1cmU6ITB9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlLCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5vbk1vdXNlbW92ZSksdGhpcy5vcHRpb24oXCJ0cmFwRm9jdXNcIikmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMub25Gb2N1cywhMCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplKSl9ZGV0YWNoRXZlbnRzKCl7Y29uc3QgdD10aGlzLmNvbnRhaW5lcjt0JiYoZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLm9uS2V5ZG93bix7cGFzc2l2ZTohMSxjYXB0dXJlOiEwfSksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIix0aGlzLm9uV2hlZWwse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkNsaWNrLHtwYXNzaXZlOiExLGNhcHR1cmU6ITF9KSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5vbk1vdXNlbW92ZSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMub25WaXNpYmlsaXR5Q2hhbmdlLCExKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0aGlzLm9uRm9jdXMsITApKX1vbkNsaWNrKHQpe3ZhciBlLGk7Y29uc3R7Y29udGFpbmVyOm4saXNDb21wYWN0OnN9PXRoaXM7aWYoIW58fHRoaXMuaXNDbG9zaW5nKCkpcmV0dXJuOyFzJiZ0aGlzLm9wdGlvbihcImlkbGVcIikmJnRoaXMucmVzZXRJZGxlKCk7Y29uc3Qgbz1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2lmKGd0KCkmJm8mJm4uY29udGFpbnMobykpcmV0dXJuO2NvbnN0IGE9dC5jb21wb3NlZFBhdGgoKVswXTtpZihhPT09KG51bGw9PT0oZT10aGlzLmNhcm91c2VsKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jb250YWluZXIpKXJldHVybjtpZihhLmNsb3Nlc3QoXCIuZi1zcGlubmVyXCIpfHxhLmNsb3Nlc3QoXCJbZGF0YS1mYW5jeWJveC1jbG9zZV1cIikpcmV0dXJuIHQucHJldmVudERlZmF1bHQoKSx2b2lkIHRoaXMuY2xvc2UodCk7aWYoYS5jbG9zZXN0KFwiW2RhdGEtZmFuY3lib3gtcHJldl1cIikpcmV0dXJuIHQucHJldmVudERlZmF1bHQoKSx2b2lkIHRoaXMucHJldigpO2lmKGEuY2xvc2VzdChcIltkYXRhLWZhbmN5Ym94LW5leHRdXCIpKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdm9pZCB0aGlzLm5leHQoKTtpZihzJiZcImltYWdlXCI9PT0obnVsbD09PShpPXRoaXMuZ2V0U2xpZGUoKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkudHlwZSkpcmV0dXJuIHZvaWQodGhpcy5jbGlja1RpbWVyPyhjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVyKSx0aGlzLmNsaWNrVGltZXI9bnVsbCk6dGhpcy5jbGlja1RpbWVyPXNldFRpbWVvdXQoKCgpPT57dGhpcy50b2dnbGVJZGxlKCksdGhpcy5jbGlja1RpbWVyPW51bGx9KSwzNTApKTtpZih0aGlzLmVtaXQoXCJjbGlja1wiLHQpLHQuZGVmYXVsdFByZXZlbnRlZClyZXR1cm47bGV0IHI9ITE7aWYoYS5jbG9zZXN0KFwiLmZhbmN5Ym94X19jb250ZW50XCIpKXtpZihvKXtpZihvLmNsb3Nlc3QoXCJbY29udGVudGVkaXRhYmxlXVwiKSlyZXR1cm47YS5tYXRjaGVzKFgpfHxvLmJsdXIoKX1pZihndCgpKXJldHVybjtyPXRoaXMub3B0aW9uKFwiY29udGVudENsaWNrXCIpfWVsc2UgYS5jbG9zZXN0KFwiLmZhbmN5Ym94X19jYXJvdXNlbFwiKSYmIWEubWF0Y2hlcyhYKSYmKHI9dGhpcy5vcHRpb24oXCJiYWNrZHJvcENsaWNrXCIpKTtcImNsb3NlXCI9PT1yPyh0LnByZXZlbnREZWZhdWx0KCksdGhpcy5jbG9zZSh0KSk6XCJuZXh0XCI9PT1yPyh0LnByZXZlbnREZWZhdWx0KCksdGhpcy5uZXh0KCkpOlwicHJldlwiPT09ciYmKHQucHJldmVudERlZmF1bHQoKSx0aGlzLnByZXYoKSl9b25XaGVlbCh0KXtjb25zdCBlPXRoaXMub3B0aW9uKFwid2hlZWxcIix0KSxpPVwic2xpZGVcIj09PWUsbj1bLXQuZGVsdGFYfHwwLC10LmRlbHRhWXx8MCwtdC5kZXRhaWx8fDBdLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnMoZSk+TWF0aC5hYnModCk/ZTp0fSkpLHM9TWF0aC5tYXgoLTEsTWF0aC5taW4oMSxuKSksbz1EYXRlLm5vdygpO3RoaXMucHd0JiZvLXRoaXMucHd0PDMwMD9pJiZ0LnByZXZlbnREZWZhdWx0KCk6KHRoaXMucHd0PW8sdGhpcy5lbWl0KFwid2hlZWxcIix0KSx0LmRlZmF1bHRQcmV2ZW50ZWR8fChcImNsb3NlXCI9PT1lPyh0LnByZXZlbnREZWZhdWx0KCksdGhpcy5jbG9zZSh0KSk6XCJzbGlkZVwiPT09ZSYmKHQucHJldmVudERlZmF1bHQoKSx0aGlzW3M+MD9cInByZXZcIjpcIm5leHRcIl0oKSkpKX1vbktleWRvd24odCl7aWYoIXRoaXMuaXNUb3Btb3N0KCkpcmV0dXJuO3RoaXMuaXNDb21wYWN0fHwhdGhpcy5vcHRpb24oXCJpZGxlXCIpfHx0aGlzLmlzQ2xvc2luZygpfHx0aGlzLnJlc2V0SWRsZSgpO2NvbnN0IGU9dC5rZXksaT10aGlzLm9wdGlvbihcImtleWJvYXJkXCIpO2lmKCFpfHx0LmN0cmxLZXl8fHQuYWx0S2V5fHx0LnNoaWZ0S2V5KXJldHVybjtjb25zdCBuPXQuY29tcG9zZWRQYXRoKClbMF0scz1kb2N1bWVudC5hY3RpdmVFbGVtZW50JiZkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNsYXNzTGlzdCxvPXMmJnMuY29udGFpbnMoXCJmLWJ1dHRvblwiKXx8bi5kYXRhc2V0LmNhcm91c2VsUGFnZXx8bi5kYXRhc2V0LmNhcm91c2VsSW5kZXg7aWYoXCJFc2NhcGVcIiE9PWUmJiFvJiZ4KG4pKXtpZihuLmlzQ29udGVudEVkaXRhYmxlfHwtMSE9PVtcIlRFWFRBUkVBXCIsXCJPUFRJT05cIixcIklOUFVUXCIsXCJTRUxFQ1RcIixcIlZJREVPXCJdLmluZGV4T2Yobi5ub2RlTmFtZSkpcmV0dXJufXRoaXMuZW1pdChcImtleWRvd25cIixlLHQpO2NvbnN0IGE9aVtlXTtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW2FdJiYodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXNbYV0oKSl9b25SZXNpemUoKXtjb25zdCB0PXRoaXMuY29udGFpbmVyO2lmKCF0KXJldHVybjtjb25zdCBlPXRoaXMuaXNDb21wYWN0O3QuY2xhc3NMaXN0LnRvZ2dsZShcImlzLWNvbXBhY3RcIixlKSx0aGlzLm1hbmFnZUNhcHRpb24odGhpcy5nZXRTbGlkZSgpKSx0aGlzLmlzQ29tcGFjdD90aGlzLmNsZWFySWRsZSgpOnRoaXMuZW5kSWRsZSgpLHRoaXMuZW1pdChcInJlc2l6ZVwiKX1vbkZvY3VzKHQpe3RoaXMuaXNUb3Btb3N0KCkmJnRoaXMuY2hlY2tGb2N1cyh0KX1vbk1vdXNlbW92ZSh0KXt0aGlzLnByZXZNb3VzZU1vdmVFdmVudD10LCF0aGlzLmlzQ29tcGFjdCYmdGhpcy5vcHRpb24oXCJpZGxlXCIpJiZ0aGlzLnJlc2V0SWRsZSgpfW9uVmlzaWJpbGl0eUNoYW5nZSgpe1widmlzaWJsZVwiPT09ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlP3RoaXMuY2hlY2tGb2N1cygpOnRoaXMuZW5kSWRsZSgpfW1hbmFnZUNsb3NlQnRuKHQpe2NvbnN0IGU9dGhpcy5vcHRpb25Gb3IodCxcImNsb3NlQnV0dG9uXCIpfHwhMTtpZihcImF1dG9cIj09PWUpe2NvbnN0IHQ9dGhpcy5wbHVnaW5zLlRvb2xiYXI7aWYodCYmdC5zdGF0ZT09PWR0LlJlYWR5KXJldHVybn1pZighZSlyZXR1cm47aWYoIXQuY29udGVudEVsfHx0LmNsb3NlQnRuRWwpcmV0dXJuO2NvbnN0IGk9dGhpcy5vcHRpb24oXCJ0cGwuY2xvc2VCdXR0b25cIik7aWYoaSl7Y29uc3QgZT1uKHRoaXMubG9jYWxpemUoaSkpO3QuY2xvc2VCdG5FbD10LmNvbnRlbnRFbC5hcHBlbmRDaGlsZChlKSx0LmVsJiZTKHQuZWwsXCJoYXMtY2xvc2UtYnRuXCIpfX1tYW5hZ2VDYXB0aW9uKHQpe3ZhciBlLGk7Y29uc3Qgbj1cImZhbmN5Ym94X19jYXB0aW9uXCIscz1cImhhcy1jYXB0aW9uXCIsbz10aGlzLmNvbnRhaW5lcjtpZighbylyZXR1cm47Y29uc3QgYT10aGlzLmlzQ29tcGFjdHx8dGhpcy5vcHRpb24oXCJjb21tb25DYXB0aW9uXCIpLHI9IWE7aWYodGhpcy5jYXB0aW9uJiZ0aGlzLnN0b3AodGhpcy5jYXB0aW9uKSxyJiZ0aGlzLmNhcHRpb24mJih0aGlzLmNhcHRpb24ucmVtb3ZlKCksdGhpcy5jYXB0aW9uPW51bGwpLGEmJiF0aGlzLmNhcHRpb24pZm9yKGNvbnN0IHQgb2YobnVsbD09PShlPXRoaXMuY2Fyb3VzZWwpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnNsaWRlcyl8fFtdKXQuY2FwdGlvbkVsJiYodC5jYXB0aW9uRWwucmVtb3ZlKCksdC5jYXB0aW9uRWw9dm9pZCAwLEUodC5lbCxzKSxudWxsPT09KGk9dC5lbCl8fHZvaWQgMD09PWl8fGkucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIpKTtpZih0fHwodD10aGlzLmdldFNsaWRlKCkpLCF0fHxhJiYhdGhpcy5pc0N1cnJlbnRTbGlkZSh0KSlyZXR1cm47Y29uc3QgbD10LmVsO2xldCBjPXRoaXMub3B0aW9uRm9yKHQsXCJjYXB0aW9uXCIsXCJcIik7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGN8fCFjLmxlbmd0aClyZXR1cm4gdm9pZChhJiZ0aGlzLmNhcHRpb24mJnRoaXMuYW5pbWF0ZSh0aGlzLmNhcHRpb24sXCJmLWZhZGVPdXRcIiwoKCk9Pnt2YXIgdDtudWxsPT09KHQ9dGhpcy5jYXB0aW9uKXx8dm9pZCAwPT09dHx8dC5yZW1vdmUoKSx0aGlzLmNhcHRpb249bnVsbH0pKSk7bGV0IGg9bnVsbDtpZihyKXtpZihoPXQuY2FwdGlvbkVsfHxudWxsLGwmJiFoKXtjb25zdCBlPWBmYW5jeWJveF9fY2FwdGlvbl8ke3RoaXMuaWR9XyR7dC5pbmRleH1gO2g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxTKGgsbiksaC5zZXRBdHRyaWJ1dGUoXCJpZFwiLGUpLHQuY2FwdGlvbkVsPWwuYXBwZW5kQ2hpbGQoaCksUyhsLHMpLGwuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsZSl9fWVsc2V7aWYoaD10aGlzLmNhcHRpb24saHx8KGg9by5xdWVyeVNlbGVjdG9yKFwiLlwiK24pKSwhaCl7aD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGguZGF0YXNldC5mYW5jeWJveENhcHRpb249XCJcIixTKGgsbiksaC5pbm5lckhUTUw9YzsodGhpcy5mb290ZXJ8fG8pLnByZXBlbmQoaCl9UyhvLHMpLHRoaXMuY2FwdGlvbj1ofWgmJihoLmlubmVySFRNTD1jKX1jaGVja0ZvY3VzKHQpe3ZhciBlO2NvbnN0IGk9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudHx8bnVsbDtpJiYobnVsbD09PShlPXRoaXMuY29udGFpbmVyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jb250YWlucyhpKSl8fHRoaXMuZm9jdXModCl9Zm9jdXModCl7dmFyIGU7aWYodGhpcy5pZ25vcmVGb2N1c0NoYW5nZSlyZXR1cm47Y29uc3QgaT1kb2N1bWVudC5hY3RpdmVFbGVtZW50fHxudWxsLG49KG51bGw9PXQ/dm9pZCAwOnQudGFyZ2V0KXx8bnVsbCxzPXRoaXMuY29udGFpbmVyLG89dGhpcy5nZXRTbGlkZSgpO2lmKCFzfHwhKG51bGw9PT0oZT10aGlzLmNhcm91c2VsKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS52aWV3cG9ydCkpcmV0dXJuO2lmKCF0JiZpJiZzLmNvbnRhaW5zKGkpKXJldHVybjtjb25zdCBhPW8mJm8uc3RhdGU9PT1WLlJlYWR5P28uZWw6bnVsbDtpZighYXx8YS5jb250YWlucyhpKXx8cz09PWkpcmV0dXJuO3QmJnQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaWdub3JlRm9jdXNDaGFuZ2U9ITA7Y29uc3Qgcj1BcnJheS5mcm9tKHMucXVlcnlTZWxlY3RvckFsbChYKSk7bGV0IGw9W10sYz1udWxsO2ZvcihsZXQgdCBvZiByKXtjb25zdCBlPSF0Lm9mZnNldFBhcmVudHx8dC5jbG9zZXN0KCdbYXJpYS1oaWRkZW49XCJ0cnVlXCJdJyksaT1hJiZhLmNvbnRhaW5zKHQpLG49IXRoaXMuY2Fyb3VzZWwudmlld3BvcnQuY29udGFpbnModCk7dD09PXN8fChpfHxuKSYmIWU/KGwucHVzaCh0KSx2b2lkIDAhPT10LmRhdGFzZXQub3JpZ1RhYmluZGV4JiYodC50YWJJbmRleD1wYXJzZUZsb2F0KHQuZGF0YXNldC5vcmlnVGFiaW5kZXgpKSx0LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtb3JpZy10YWJpbmRleFwiKSwhdC5oYXNBdHRyaWJ1dGUoXCJhdXRvRm9jdXNcIikmJmN8fChjPXQpKToodC5kYXRhc2V0Lm9yaWdUYWJpbmRleD12b2lkIDA9PT10LmRhdGFzZXQub3JpZ1RhYmluZGV4P3QuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIil8fHZvaWQgMDp0LmRhdGFzZXQub3JpZ1RhYmluZGV4LHQudGFiSW5kZXg9LTEpfWxldCBoPW51bGw7dD8oIW58fGwuaW5kZXhPZihuKTwwKSYmKGg9Y3x8cyxsLmxlbmd0aCYmKGk9PT12dD9oPWxbMF06dGhpcy5sYXN0Rm9jdXMhPT1zJiZpIT09YnR8fChoPWxbbC5sZW5ndGgtMV0pKSk6aD1vJiZcImltYWdlXCI9PT1vLnR5cGU/czpjfHxzLGgmJlkoaCksdGhpcy5sYXN0Rm9jdXM9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCx0aGlzLmlnbm9yZUZvY3VzQ2hhbmdlPSExfW5leHQoKXtjb25zdCB0PXRoaXMuY2Fyb3VzZWw7dCYmdC5wYWdlcy5sZW5ndGg+MSYmdC5zbGlkZU5leHQoKX1wcmV2KCl7Y29uc3QgdD10aGlzLmNhcm91c2VsO3QmJnQucGFnZXMubGVuZ3RoPjEmJnQuc2xpZGVQcmV2KCl9anVtcFRvKC4uLnQpe3RoaXMuY2Fyb3VzZWwmJnRoaXMuY2Fyb3VzZWwuc2xpZGVUbyguLi50KX1pc1RvcG1vc3QoKXt2YXIgdDtyZXR1cm4obnVsbD09PSh0PXh0LmdldEluc3RhbmNlKCkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkKT09dGhpcy5pZH1hbmltYXRlKHQ9bnVsbCxlPVwiXCIsaSl7aWYoIXR8fCFlKXJldHVybiB2b2lkKGkmJmkoKSk7dGhpcy5zdG9wKHQpO2NvbnN0IG49cz0+e3MudGFyZ2V0PT09dCYmdC5kYXRhc2V0LmFuaW1hdGlvbk5hbWUmJih0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIixuKSxkZWxldGUgdC5kYXRhc2V0LmFuaW1hdGlvbk5hbWUsaSYmaSgpLEUodCxlKSl9O3QuZGF0YXNldC5hbmltYXRpb25OYW1lPWUsdC5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsbiksUyh0LGUpfXN0b3AodCl7dCYmdC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImFuaW1hdGlvbmVuZFwiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITAsY3VycmVudFRhcmdldDp0fSkpfXNldENvbnRlbnQodCxlPVwiXCIsaT0hMCl7aWYodGhpcy5pc0Nsb3NpbmcoKSlyZXR1cm47Y29uc3Qgcz10LmVsO2lmKCFzKXJldHVybjtsZXQgbz1udWxsO2lmKHgoZSk/bz1lOihvPW4oZStcIlwiKSx4KG8pfHwobz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG8uaW5uZXJIVE1MPWUrXCJcIikpLFtcImltZ1wiLFwicGljdHVyZVwiLFwiaWZyYW1lXCIsXCJ2aWRlb1wiLFwiYXVkaW9cIl0uaW5jbHVkZXMoby5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuYXBwZW5kQ2hpbGQobyksbz10fXgobykmJnQuZmlsdGVyJiYhdC5lcnJvciYmKG89by5xdWVyeVNlbGVjdG9yKHQuZmlsdGVyKSksbyYmeChvKT8oUyhvLFwiZmFuY3lib3hfX2NvbnRlbnRcIiksdC5pZCYmby5zZXRBdHRyaWJ1dGUoXCJpZFwiLHQuaWQpLFwibm9uZVwiIT09by5zdHlsZS5kaXNwbGF5JiZcIm5vbmVcIiE9PWdldENvbXB1dGVkU3R5bGUobykuZ2V0UHJvcGVydHlWYWx1ZShcImRpc3BsYXlcIil8fChvLnN0eWxlLmRpc3BsYXk9dC5kaXNwbGF5fHx0aGlzLm9wdGlvbihcImRlZmF1bHREaXNwbGF5XCIpfHxcImZsZXhcIikscy5jbGFzc0xpc3QuYWRkKGBoYXMtJHt0LmVycm9yP1wiZXJyb3JcIjp0LnR5cGV8fFwidW5rbm93blwifWApLHMucHJlcGVuZChvKSx0LmNvbnRlbnRFbD1vLGkmJnRoaXMucmV2ZWFsQ29udGVudCh0KSx0aGlzLm1hbmFnZUNsb3NlQnRuKHQpLHRoaXMubWFuYWdlQ2FwdGlvbih0KSk6dGhpcy5zZXRFcnJvcih0LFwie3tFTEVNRU5UX05PVF9GT1VORH19XCIpfXJldmVhbENvbnRlbnQodCxlKXtjb25zdCBpPXQuZWwsbj10LmNvbnRlbnRFbDtpJiZuJiYodGhpcy5lbWl0KFwicmV2ZWFsXCIsdCksdGhpcy5oaWRlTG9hZGluZyh0KSx0LnN0YXRlPVYuT3BlbmluZywoZT10aGlzLmlzT3BlbmluZ1NsaWRlKHQpP3ZvaWQgMD09PWU/dGhpcy5vcHRpb25Gb3IodCxcInNob3dDbGFzc1wiKTplOlwiZi1mYWRlSW5cIik/dGhpcy5hbmltYXRlKG4sZSwoKCk9Pnt0aGlzLmRvbmUodCl9KSk6dGhpcy5kb25lKHQpKX1kb25lKHQpe3RoaXMuaXNDbG9zaW5nKCl8fCh0LnN0YXRlPVYuUmVhZHksdGhpcy5lbWl0KFwiZG9uZVwiLHQpLFModC5lbCxcImlzLWRvbmVcIiksdGhpcy5pc0N1cnJlbnRTbGlkZSh0KSYmdGhpcy5vcHRpb24oXCJhdXRvRm9jdXNcIikmJnF1ZXVlTWljcm90YXNrKCgoKT0+e3RoaXMub3B0aW9uKFwiYXV0b0ZvY3VzXCIpJiYodGhpcy5vcHRpb24oXCJhdXRvRm9jdXNcIik/dGhpcy5mb2N1cygpOnRoaXMuY2hlY2tGb2N1cygpKX0pKSx0aGlzLmlzT3BlbmluZ1NsaWRlKHQpJiYhdGhpcy5pc0NvbXBhY3QmJnRoaXMub3B0aW9uKFwiaWRsZVwiKSYmdGhpcy5zZXRJZGxlKCkpfWlzQ3VycmVudFNsaWRlKHQpe2NvbnN0IGU9dGhpcy5nZXRTbGlkZSgpO3JldHVybiEoIXR8fCFlKSYmZS5pbmRleD09PXQuaW5kZXh9aXNPcGVuaW5nU2xpZGUodCl7dmFyIGUsaTtyZXR1cm4gbnVsbD09PShudWxsPT09KGU9dGhpcy5jYXJvdXNlbCl8fHZvaWQgMD09PWU/dm9pZCAwOmUucHJldlBhZ2UpJiZ0LmluZGV4PT09KG51bGw9PT0oaT10aGlzLmdldFNsaWRlKCkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmluZGV4KX1zaG93TG9hZGluZyh0KXt0LnN0YXRlPVYuTG9hZGluZztjb25zdCBlPXQuZWw7aWYoIWUpcmV0dXJuO1MoZSxcImlzLWxvYWRpbmdcIiksdGhpcy5lbWl0KFwibG9hZGluZ1wiLHQpLHQuc3Bpbm5lckVsfHxzZXRUaW1lb3V0KCgoKT0+e2lmKCF0aGlzLmlzQ2xvc2luZygpJiYhdC5zcGlubmVyRWwmJnQuc3RhdGU9PT1WLkxvYWRpbmcpe2xldCBpPW4odyk7dC5zcGlubmVyRWw9aSxlLnByZXBlbmQoaSksdGhpcy5hbmltYXRlKGksXCJmLWZhZGVJblwiKX19KSwyNTApfWhpZGVMb2FkaW5nKHQpe2NvbnN0IGU9dC5lbDtpZighZSlyZXR1cm47Y29uc3QgaT10LnNwaW5uZXJFbDt0aGlzLmlzQ2xvc2luZygpP251bGw9PWl8fGkucmVtb3ZlKCk6KEUoZSxcImlzLWxvYWRpbmdcIiksaSYmdGhpcy5hbmltYXRlKGksXCJmLWZhZGVPdXRcIiwoKCk9PntpLnJlbW92ZSgpfSkpLHQuc3RhdGU9PT1WLkxvYWRpbmcmJih0aGlzLmVtaXQoXCJsb2FkZWRcIix0KSx0LnN0YXRlPVYuUmVhZHkpKX1zZXRFcnJvcih0LGUpe2lmKHRoaXMuaXNDbG9zaW5nKCkpcmV0dXJuO3RoaXMuZW1pdChcImVycm9yXCIpLHQuZXJyb3I9ZSx0aGlzLmhpZGVMb2FkaW5nKHQpLHRoaXMuY2xlYXJDb250ZW50KHQpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmNsYXNzTGlzdC5hZGQoXCJmYW5jeWJveC1lcnJvclwiKSxpLmlubmVySFRNTD10aGlzLmxvY2FsaXplKGV8fFwiPHA+e3tFUlJPUn19PC9wPlwiKSx0aGlzLnNldENvbnRlbnQodCxpKX1jbGVhckNvbnRlbnQodCl7dmFyIGU7bnVsbD09PShlPXRoaXMuY2Fyb3VzZWwpfHx2b2lkIDA9PT1lfHxlLmVtaXQoXCJyZW1vdmVTbGlkZVwiLHQpLHQuY29udGVudEVsJiYodC5jb250ZW50RWwucmVtb3ZlKCksdC5jb250ZW50RWw9dm9pZCAwKSx0LmNsb3NlQnRuRWwmJih0LmNsb3NlQnRuRWwucmVtb3ZlKCksdC5jbG9zZUJ0bkVsPXZvaWQgMCk7Y29uc3QgaT10LmVsO2kmJihFKGksXCJpcy1sb2FkaW5nXCIpLEUoaSxcImhhcy1lcnJvclwiKSxFKGksXCJoYXMtdW5rbm93blwiKSxFKGksYGhhcy0ke3QudHlwZXx8XCJ1bmtub3duXCJ9YCkpfWdldFNsaWRlKCl7dmFyIHQ7Y29uc3QgZT10aGlzLmNhcm91c2VsO3JldHVybihudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5wYWdlc1tudWxsPT1lP3ZvaWQgMDplLnBhZ2VdKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zbGlkZXNbMF0pfHx2b2lkIDB9Y2xvc2UodCxlKXtpZih0aGlzLmlzQ2xvc2luZygpKXJldHVybjtjb25zdCBpPW5ldyBFdmVudChcInNob3VsZENsb3NlXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pO2lmKHRoaXMuZW1pdChcInNob3VsZENsb3NlXCIsaSx0KSxpLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuO3QmJnQuY2FuY2VsYWJsZSYmKHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpKTtjb25zdCBuPXRoaXMuZnNBUEkscz0oKT0+e3RoaXMucHJvY2VlZENsb3NlKHQsZSl9O24mJm4uaXNGdWxsc2NyZWVuKCk/UHJvbWlzZS5yZXNvbHZlKG4uZXhpdCgpKS50aGVuKCgoKT0+cygpKSk6cygpfWNsZWFySWRsZSgpe3RoaXMuaWRsZVRpbWVyJiZjbGVhclRpbWVvdXQodGhpcy5pZGxlVGltZXIpLHRoaXMuaWRsZVRpbWVyPW51bGx9c2V0SWRsZSh0PSExKXtjb25zdCBlPSgpPT57dGhpcy5jbGVhcklkbGUoKSx0aGlzLmlkbGU9ITAsUyh0aGlzLmNvbnRhaW5lcixcImlzLWlkbGVcIiksdGhpcy5lbWl0KFwic2V0SWRsZVwiKX07aWYodGhpcy5jbGVhcklkbGUoKSwhdGhpcy5pc0Nsb3NpbmcoKSlpZih0KWUoKTtlbHNle2NvbnN0IHQ9dGhpcy5vcHRpb24oXCJpZGxlXCIpO3QmJih0aGlzLmlkbGVUaW1lcj1zZXRUaW1lb3V0KGUsdCkpfX1lbmRJZGxlKCl7dGhpcy5jbGVhcklkbGUoKSx0aGlzLmlkbGUmJiF0aGlzLmlzQ2xvc2luZygpJiYodGhpcy5pZGxlPSExLEUodGhpcy5jb250YWluZXIsXCJpcy1pZGxlXCIpLHRoaXMuZW1pdChcImVuZElkbGVcIikpfXJlc2V0SWRsZSgpe3RoaXMuZW5kSWRsZSgpLHRoaXMuc2V0SWRsZSgpfXRvZ2dsZUlkbGUoKXt0aGlzLmlkbGU/dGhpcy5lbmRJZGxlKCk6dGhpcy5zZXRJZGxlKCEwKX10b2dnbGVGdWxsc2NyZWVuKCl7Y29uc3QgdD10aGlzLmZzQVBJO3QmJih0LmlzRnVsbHNjcmVlbigpP3QuZXhpdCgpOnRoaXMuY29udGFpbmVyJiZ0LnJlcXVlc3QodGhpcy5jb250YWluZXIpKX1pc0Nsb3NpbmcoKXtyZXR1cm5bWi5DbG9zaW5nLFouQ3VzdG9tQ2xvc2luZyxaLkRlc3Ryb3ldLmluY2x1ZGVzKHRoaXMuc3RhdGUpfXByb2NlZWRDbG9zZSh0LGUpe3ZhciBpO3RoaXMuc3RhdGU9Wi5DbG9zaW5nLHRoaXMuY2xlYXJJZGxlKCksdGhpcy5kZXRhY2hFdmVudHMoKTtjb25zdCBuPXRoaXMuY29udGFpbmVyLHM9dGhpcy5jYXJvdXNlbCxvPXRoaXMuZ2V0U2xpZGUoKSxhPW8mJnRoaXMub3B0aW9uKFwicGxhY2VGb2N1c0JhY2tcIik/by50cmlnZ2VyRWx8fHRoaXMub3B0aW9uKFwidHJpZ2dlclwiKTpudWxsO2lmKGEmJihOKGEpP1koYSk6YS5mb2N1cygpKSxuJiYoUyhuLFwiaXMtY2xvc2luZ1wiKSxuLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLHRoaXMub3B0aW9uKFwiYW5pbWF0ZWRcIikmJlMobixcImlzLWFuaW1hdGVkXCIpLG4uc3R5bGUucG9pbnRlckV2ZW50cz1cIm5vbmVcIikscyl7cy5jbGVhclRyYW5zaXRpb25zKCksbnVsbD09PShpPXMucGFuem9vbSl8fHZvaWQgMD09PWl8fGkuZGVzdHJveSgpO2Zvcihjb25zdCB0IG9mIHMuc2xpZGVzKXt0LnN0YXRlPVYuQ2xvc2luZyx0aGlzLmhpZGVMb2FkaW5nKHQpO2NvbnN0IGU9dC5jb250ZW50RWw7ZSYmdGhpcy5zdG9wKGUpO2NvbnN0IGk9bnVsbD09dD92b2lkIDA6dC5wYW56b29tO2kmJihpLnN0b3AoKSxpLmRldGFjaEV2ZW50cygpLGkuZGV0YWNoT2JzZXJ2ZXIoKSksdGhpcy5pc0N1cnJlbnRTbGlkZSh0KXx8cy5lbWl0KFwicmVtb3ZlU2xpZGVcIix0KX19dGhpcy5lbWl0KFwiY2xvc2VcIix0KSx0aGlzLnN0YXRlIT09Wi5DdXN0b21DbG9zaW5nPyh2b2lkIDA9PT1lJiZvJiYoZT10aGlzLm9wdGlvbkZvcihvLFwiaGlkZUNsYXNzXCIpKSxlJiZvPyh0aGlzLmFuaW1hdGUoby5jb250ZW50RWwsZSwoKCk9PntzJiZzLmVtaXQoXCJyZW1vdmVTbGlkZVwiLG8pfSkpLHNldFRpbWVvdXQoKCgpPT57dGhpcy5kZXN0cm95KCl9KSw1MDApKTp0aGlzLmRlc3Ryb3koKSk6c2V0VGltZW91dCgoKCk9Pnt0aGlzLmRlc3Ryb3koKX0pLDUwMCl9ZGVzdHJveSgpe3ZhciB0O2lmKHRoaXMuc3RhdGU9PT1aLkRlc3Ryb3kpcmV0dXJuO3RoaXMuc3RhdGU9Wi5EZXN0cm95LG51bGw9PT0odD10aGlzLmNhcm91c2VsKXx8dm9pZCAwPT09dHx8dC5kZXN0cm95KCk7Y29uc3QgZT10aGlzLmNvbnRhaW5lcjtlJiZlLnJlbW92ZSgpLHl0LmRlbGV0ZSh0aGlzLmlkKTtjb25zdCBpPXh0LmdldEluc3RhbmNlKCk7aT9pLmZvY3VzKCk6KGJ0JiYoYnQucmVtb3ZlKCksYnQ9bnVsbCksdnQmJih2dC5yZW1vdmUoKSx2dD1udWxsKSxFKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcIndpdGgtZmFuY3lib3hcIiksKCgpPT57aWYoIVcpcmV0dXJuO2NvbnN0IHQ9ZG9jdW1lbnQsZT10LmJvZHk7ZS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZS1zY3JvbGxiYXJcIiksZS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZmFuY3lib3gtYm9keS1tYXJnaW5cIixcIlwiKSx0LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZmFuY3lib3gtc2Nyb2xsYmFyLWNvbXBlbnNhdGVcIixcIlwiKX0pKCksdGhpcy5lbWl0KFwiZGVzdHJveVwiKSl9c3RhdGljIGJpbmQodCxlLGkpe2lmKCFXKXJldHVybjtsZXQgbixzPVwiXCIsbz17fTtpZih2b2lkIDA9PT10P249ZG9jdW1lbnQuYm9keTpcInN0cmluZ1wiPT10eXBlb2YgdD8obj1kb2N1bWVudC5ib2R5LHM9dCxcIm9iamVjdFwiPT10eXBlb2YgZSYmKG89ZXx8e30pKToobj10LFwic3RyaW5nXCI9PXR5cGVvZiBlJiYocz1lKSxcIm9iamVjdFwiPT10eXBlb2YgaSYmKG89aXx8e30pKSwhbnx8IXgobikpcmV0dXJuO3M9c3x8XCJbZGF0YS1mYW5jeWJveF1cIjtjb25zdCBhPXh0Lm9wZW5lcnMuZ2V0KG4pfHxuZXcgTWFwO2Euc2V0KHMsbykseHQub3BlbmVycy5zZXQobixhKSwxPT09YS5zaXplJiZuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHh0LmZyb21FdmVudCl9c3RhdGljIHVuYmluZCh0LGUpe2xldCBpLG49XCJcIjtpZihcInN0cmluZ1wiPT10eXBlb2YgdD8oaT1kb2N1bWVudC5ib2R5LG49dCk6KGk9dCxcInN0cmluZ1wiPT10eXBlb2YgZSYmKG49ZSkpLCFpKXJldHVybjtjb25zdCBzPXh0Lm9wZW5lcnMuZ2V0KGkpO3MmJm4mJnMuZGVsZXRlKG4pLG4mJnN8fCh4dC5vcGVuZXJzLmRlbGV0ZShpKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHh0LmZyb21FdmVudCkpfXN0YXRpYyBkZXN0cm95KCl7bGV0IHQ7Zm9yKDt0PXh0LmdldEluc3RhbmNlKCk7KXQuZGVzdHJveSgpO2Zvcihjb25zdCB0IG9mIHh0Lm9wZW5lcnMua2V5cygpKXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIseHQuZnJvbUV2ZW50KTt4dC5vcGVuZXJzPW5ldyBNYXB9c3RhdGljIGZyb21FdmVudCh0KXtpZih0LmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuO2lmKHQuYnV0dG9uJiYwIT09dC5idXR0b24pcmV0dXJuO2lmKHQuY3RybEtleXx8dC5tZXRhS2V5fHx0LnNoaWZ0S2V5KXJldHVybjtsZXQgZT10LmNvbXBvc2VkUGF0aCgpWzBdO2NvbnN0IGk9ZS5jbG9zZXN0KFwiW2RhdGEtZmFuY3lib3gtdHJpZ2dlcl1cIik7aWYoaSl7Y29uc3QgdD1pLmRhdGFzZXQuZmFuY3lib3hUcmlnZ2VyfHxcIlwiLG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtZmFuY3lib3g9XCIke3R9XCJdYCkscz1wYXJzZUludChpLmRhdGFzZXQuZmFuY3lib3hJbmRleHx8XCJcIiwxMCl8fDA7ZT1uW3NdfHxlfWlmKCEoZSYmZSBpbnN0YW5jZW9mIEVsZW1lbnQpKXJldHVybjtsZXQgbixzLG8sYTtpZihbLi4ueHQub3BlbmVyc10ucmV2ZXJzZSgpLmZpbmQoKChbdCxpXSk9PiEoIXQuY29udGFpbnMoZSl8fCFbLi4uaV0ucmV2ZXJzZSgpLmZpbmQoKChbaSxyXSk9PntsZXQgbD1lLmNsb3Nlc3QoaSk7cmV0dXJuISFsJiYobj10LHM9aSxvPWwsYT1yLCEwKX0pKSkpKSwhbnx8IXN8fCFvKXJldHVybjthPWF8fHt9LHQucHJldmVudERlZmF1bHQoKSxlPW87bGV0IHI9W10sbD11KHt9LHEsYSk7bC5ldmVudD10LGwudHJpZ2dlcj1lLGwuZGVsZWdhdGU9aTtjb25zdCBjPWwuZ3JvdXBBbGwsaD1sLmdyb3VwQXR0cixkPWgmJmU/ZS5nZXRBdHRyaWJ1dGUoYCR7aH1gKTpcIlwiO2lmKCghZXx8ZHx8YykmJihyPVtdLnNsaWNlLmNhbGwobi5xdWVyeVNlbGVjdG9yQWxsKHMpKSksZSYmIWMmJihyPWQ/ci5maWx0ZXIoKHQ9PnQuZ2V0QXR0cmlidXRlKGAke2h9YCk9PT1kKSk6W2VdKSwhci5sZW5ndGgpcmV0dXJuO2NvbnN0IHA9eHQuZ2V0SW5zdGFuY2UoKTtyZXR1cm4gcCYmcC5vcHRpb25zLnRyaWdnZXImJnIuaW5kZXhPZihwLm9wdGlvbnMudHJpZ2dlcik+LTE/dm9pZCAwOihlJiYobC5zdGFydEluZGV4PXIuaW5kZXhPZihlKSkseHQuZnJvbU5vZGVzKHIsbCkpfXN0YXRpYyBmcm9tU2VsZWN0b3IodCxlKXtsZXQgaT1udWxsLG49XCJcIjtpZihcInN0cmluZ1wiPT10eXBlb2YgdD8oaT1kb2N1bWVudC5ib2R5LG49dCk6dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiZcInN0cmluZ1wiPT10eXBlb2YgZSYmKGk9dCxuPWUpLCFpfHwhbilyZXR1cm4hMTtjb25zdCBzPXh0Lm9wZW5lcnMuZ2V0KGkpO2lmKCFzKXJldHVybiExO2NvbnN0IG89cy5nZXQobik7cmV0dXJuISFvJiZ4dC5mcm9tTm9kZXMoQXJyYXkuZnJvbShpLnF1ZXJ5U2VsZWN0b3JBbGwobikpLG8pfXN0YXRpYyBmcm9tTm9kZXModCxlKXtlPXUoe30scSxlKTtjb25zdCBpPVtdO2Zvcihjb25zdCBuIG9mIHQpe2NvbnN0IHQ9bi5kYXRhc2V0fHx7fSxzPXQuc3JjfHxuLmdldEF0dHJpYnV0ZShcImhyZWZcIil8fG4uZ2V0QXR0cmlidXRlKFwiY3VycmVudFNyY1wiKXx8bi5nZXRBdHRyaWJ1dGUoXCJzcmNcIil8fHZvaWQgMDtsZXQgbztjb25zdCBhPWUuZGVsZWdhdGU7bGV0IHI7YSYmaS5sZW5ndGg9PT1lLnN0YXJ0SW5kZXgmJihvPWEgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50P2E6YS5xdWVyeVNlbGVjdG9yKFwiaW1nOm5vdChbYXJpYS1oaWRkZW5dKVwiKSksb3x8KG89biBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/bjpuLnF1ZXJ5U2VsZWN0b3IoXCJpbWc6bm90KFthcmlhLWhpZGRlbl0pXCIpKSxvJiYocj1vLmN1cnJlbnRTcmN8fG8uc3JjfHx2b2lkIDAsIXImJm8uZGF0YXNldCYmKHI9by5kYXRhc2V0LmxhenlTcmN8fG8uZGF0YXNldC5zcmN8fHZvaWQgMCkpO2NvbnN0IGw9e3NyYzpzLHRyaWdnZXJFbDpuLHRodW1iRWw6byx0aHVtYkVsU3JjOnIsdGh1bWJTcmM6cn07Zm9yKGNvbnN0IGUgaW4gdClcImZhbmN5Ym94XCIhPT1lJiYobFtlXT10W2VdK1wiXCIpO2kucHVzaChsKX1yZXR1cm4gbmV3IHh0KGksZSl9c3RhdGljIGdldEluc3RhbmNlKHQpe2lmKHQpcmV0dXJuIHl0LmdldCh0KTtyZXR1cm4gQXJyYXkuZnJvbSh5dC52YWx1ZXMoKSkucmV2ZXJzZSgpLmZpbmQoKHQ9PiF0LmlzQ2xvc2luZygpJiZ0KSl8fG51bGx9c3RhdGljIGdldFNsaWRlKCl7dmFyIHQ7cmV0dXJuKG51bGw9PT0odD14dC5nZXRJbnN0YW5jZSgpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRTbGlkZSgpKXx8bnVsbH1zdGF0aWMgc2hvdyh0PVtdLGU9e30pe3JldHVybiBuZXcgeHQodCxlKX1zdGF0aWMgbmV4dCgpe2NvbnN0IHQ9eHQuZ2V0SW5zdGFuY2UoKTt0JiZ0Lm5leHQoKX1zdGF0aWMgcHJldigpe2NvbnN0IHQ9eHQuZ2V0SW5zdGFuY2UoKTt0JiZ0LnByZXYoKX1zdGF0aWMgY2xvc2UodD0hMCwuLi5lKXtpZih0KWZvcihjb25zdCB0IG9mIHl0LnZhbHVlcygpKXQuY2xvc2UoLi4uZSk7ZWxzZXtjb25zdCB0PXh0LmdldEluc3RhbmNlKCk7dCYmdC5jbG9zZSguLi5lKX19fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh4dCxcInZlcnNpb25cIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6XCI1LjAuMTVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh4dCxcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnF9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoeHQsXCJQbHVnaW5zXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm10fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHh0LFwib3BlbmVyc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpuZXcgTWFwfSk7ZXhwb3J0e18gYXMgQ2Fyb3VzZWwseHQgYXMgRmFuY3lib3gsVCBhcyBQYW56b29tfTtcbiIsIi8qIVxuICAqIEJvb3RzdHJhcCBiYXNlLWNvbXBvbmVudC5qcyB2NS4yLjMgKGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS8pXG4gICogQ29weXJpZ2h0IDIwMTEtMjAyMiBUaGUgQm9vdHN0cmFwIEF1dGhvcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ncmFwaHMvY29udHJpYnV0b3JzKVxuICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJy4vZG9tL2RhdGEnKSwgcmVxdWlyZSgnLi91dGlsL2luZGV4JyksIHJlcXVpcmUoJy4vZG9tL2V2ZW50LWhhbmRsZXInKSwgcmVxdWlyZSgnLi91dGlsL2NvbmZpZycpKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJy4vZG9tL2RhdGEnLCAnLi91dGlsL2luZGV4JywgJy4vZG9tL2V2ZW50LWhhbmRsZXInLCAnLi91dGlsL2NvbmZpZyddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5CYXNlQ29tcG9uZW50ID0gZmFjdG9yeShnbG9iYWwuRGF0YSwgZ2xvYmFsLkluZGV4LCBnbG9iYWwuRXZlbnRIYW5kbGVyLCBnbG9iYWwuQ29uZmlnKSk7XG59KSh0aGlzLCAoZnVuY3Rpb24gKERhdGEsIGluZGV4LCBFdmVudEhhbmRsZXIsIENvbmZpZykgeyAndXNlIHN0cmljdCc7XG5cbiAgY29uc3QgX2ludGVyb3BEZWZhdWx0TGVnYWN5ID0gZSA9PiBlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiAnZGVmYXVsdCcgaW4gZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcblxuICBjb25zdCBEYXRhX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdExlZ2FjeShEYXRhKTtcbiAgY29uc3QgRXZlbnRIYW5kbGVyX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdExlZ2FjeShFdmVudEhhbmRsZXIpO1xuICBjb25zdCBDb25maWdfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0TGVnYWN5KENvbmZpZyk7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogYmFzZS1jb21wb25lbnQuanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICAvKipcbiAgICogQ29uc3RhbnRzXG4gICAqL1xuXG4gIGNvbnN0IFZFUlNJT04gPSAnNS4yLjMnO1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBCYXNlQ29tcG9uZW50IGV4dGVuZHMgQ29uZmlnX19kZWZhdWx0LmRlZmF1bHQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIGVsZW1lbnQgPSBpbmRleC5nZXRFbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgRGF0YV9fZGVmYXVsdC5kZWZhdWx0LnNldCh0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZLCB0aGlzKTtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICBkaXNwb3NlKCkge1xuICAgICAgRGF0YV9fZGVmYXVsdC5kZWZhdWx0LnJlbW92ZSh0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZKTtcbiAgICAgIEV2ZW50SGFuZGxlcl9fZGVmYXVsdC5kZWZhdWx0Lm9mZih0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkVWRU5UX0tFWSk7XG5cbiAgICAgIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XG4gICAgICAgIHRoaXNbcHJvcGVydHlOYW1lXSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3F1ZXVlQ2FsbGJhY2soY2FsbGJhY2ssIGVsZW1lbnQsIGlzQW5pbWF0ZWQgPSB0cnVlKSB7XG4gICAgICBpbmRleC5leGVjdXRlQWZ0ZXJUcmFuc2l0aW9uKGNhbGxiYWNrLCBlbGVtZW50LCBpc0FuaW1hdGVkKTtcbiAgICB9XG5cbiAgICBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgY29uZmlnID0gdGhpcy5fbWVyZ2VDb25maWdPYmooY29uZmlnLCB0aGlzLl9lbGVtZW50KTtcbiAgICAgIGNvbmZpZyA9IHRoaXMuX2NvbmZpZ0FmdGVyTWVyZ2UoY29uZmlnKTtcblxuICAgICAgdGhpcy5fdHlwZUNoZWNrQ29uZmlnKGNvbmZpZyk7XG5cbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfSAvLyBTdGF0aWNcblxuXG4gICAgc3RhdGljIGdldEluc3RhbmNlKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBEYXRhX19kZWZhdWx0LmRlZmF1bHQuZ2V0KGluZGV4LmdldEVsZW1lbnQoZWxlbWVudCksIHRoaXMuREFUQV9LRVkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZUluc3RhbmNlKGVsZW1lbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRJbnN0YW5jZShlbGVtZW50KSB8fCBuZXcgdGhpcyhlbGVtZW50LCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IG51bGwpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgVkVSU0lPTigpIHtcbiAgICAgIHJldHVybiBWRVJTSU9OO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgREFUQV9LRVkoKSB7XG4gICAgICByZXR1cm4gYGJzLiR7dGhpcy5OQU1FfWA7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBFVkVOVF9LRVkoKSB7XG4gICAgICByZXR1cm4gYC4ke3RoaXMuREFUQV9LRVl9YDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZXZlbnROYW1lKG5hbWUpIHtcbiAgICAgIHJldHVybiBgJHtuYW1lfSR7dGhpcy5FVkVOVF9LRVl9YDtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBCYXNlQ29tcG9uZW50O1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLWNvbXBvbmVudC5qcy5tYXBcbiIsIi8qIVxuICAqIEJvb3RzdHJhcCBidXR0b24uanMgdjUuMi4zIChodHRwczovL2dldGJvb3RzdHJhcC5jb20vKVxuICAqIENvcHlyaWdodCAyMDExLTIwMjIgVGhlIEJvb3RzdHJhcCBBdXRob3JzIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvZ3JhcGhzL2NvbnRyaWJ1dG9ycylcbiAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCcuL3V0aWwvaW5kZXgnKSwgcmVxdWlyZSgnLi9kb20vZXZlbnQtaGFuZGxlcicpLCByZXF1aXJlKCcuL2Jhc2UtY29tcG9uZW50JykpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnLi91dGlsL2luZGV4JywgJy4vZG9tL2V2ZW50LWhhbmRsZXInLCAnLi9iYXNlLWNvbXBvbmVudCddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5CdXR0b24gPSBmYWN0b3J5KGdsb2JhbC5JbmRleCwgZ2xvYmFsLkV2ZW50SGFuZGxlciwgZ2xvYmFsLkJhc2VDb21wb25lbnQpKTtcbn0pKHRoaXMsIChmdW5jdGlvbiAoaW5kZXgsIEV2ZW50SGFuZGxlciwgQmFzZUNvbXBvbmVudCkgeyAndXNlIHN0cmljdCc7XG5cbiAgY29uc3QgX2ludGVyb3BEZWZhdWx0TGVnYWN5ID0gZSA9PiBlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiAnZGVmYXVsdCcgaW4gZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcblxuICBjb25zdCBFdmVudEhhbmRsZXJfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0TGVnYWN5KEV2ZW50SGFuZGxlcik7XG4gIGNvbnN0IEJhc2VDb21wb25lbnRfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0TGVnYWN5KEJhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGJ1dHRvbi5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSA9ICdidXR0b24nO1xuICBjb25zdCBEQVRBX0tFWSA9ICdicy5idXR0b24nO1xuICBjb25zdCBFVkVOVF9LRVkgPSBgLiR7REFUQV9LRVl9YDtcbiAgY29uc3QgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gIGNvbnN0IENMQVNTX05BTUVfQUNUSVZFID0gJ2FjdGl2ZSc7XG4gIGNvbnN0IFNFTEVDVE9SX0RBVEFfVE9HR0xFID0gJ1tkYXRhLWJzLXRvZ2dsZT1cImJ1dHRvblwiXSc7XG4gIGNvbnN0IEVWRU5UX0NMSUNLX0RBVEFfQVBJID0gYGNsaWNrJHtFVkVOVF9LRVl9JHtEQVRBX0FQSV9LRVl9YDtcbiAgLyoqXG4gICAqIENsYXNzIGRlZmluaXRpb25cbiAgICovXG5cbiAgY2xhc3MgQnV0dG9uIGV4dGVuZHMgQmFzZUNvbXBvbmVudF9fZGVmYXVsdC5kZWZhdWx0IHtcbiAgICAvLyBHZXR0ZXJzXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUU7XG4gICAgfSAvLyBQdWJsaWNcblxuXG4gICAgdG9nZ2xlKCkge1xuICAgICAgLy8gVG9nZ2xlIGNsYXNzIGFuZCBzeW5jIHRoZSBgYXJpYS1wcmVzc2VkYCBhdHRyaWJ1dGUgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBgLnRvZ2dsZSgpYCBtZXRob2RcbiAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoQ0xBU1NfTkFNRV9BQ1RJVkUpKTtcbiAgICB9IC8vIFN0YXRpY1xuXG5cbiAgICBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBCdXR0b24uZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzKTtcblxuICAgICAgICBpZiAoY29uZmlnID09PSAndG9nZ2xlJykge1xuICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfVxuICAvKipcbiAgICogRGF0YSBBUEkgaW1wbGVtZW50YXRpb25cbiAgICovXG5cblxuICBFdmVudEhhbmRsZXJfX2RlZmF1bHQuZGVmYXVsdC5vbihkb2N1bWVudCwgRVZFTlRfQ0xJQ0tfREFUQV9BUEksIFNFTEVDVE9SX0RBVEFfVE9HR0xFLCBldmVudCA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC50YXJnZXQuY2xvc2VzdChTRUxFQ1RPUl9EQVRBX1RPR0dMRSk7XG4gICAgY29uc3QgZGF0YSA9IEJ1dHRvbi5nZXRPckNyZWF0ZUluc3RhbmNlKGJ1dHRvbik7XG4gICAgZGF0YS50b2dnbGUoKTtcbiAgfSk7XG4gIC8qKlxuICAgKiBqUXVlcnlcbiAgICovXG5cbiAgaW5kZXguZGVmaW5lSlF1ZXJ5UGx1Z2luKEJ1dHRvbik7XG5cbiAgcmV0dXJuIEJ1dHRvbjtcblxufSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnV0dG9uLmpzLm1hcFxuIiwiLyohXG4gICogQm9vdHN0cmFwIGNhcm91c2VsLmpzIHY1LjIuMyAoaHR0cHM6Ly9nZXRib290c3RyYXAuY29tLylcbiAgKiBDb3B5cmlnaHQgMjAxMS0yMDIyIFRoZSBCb290c3RyYXAgQXV0aG9ycyAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2dyYXBocy9jb250cmlidXRvcnMpXG4gICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnLi91dGlsL2luZGV4JyksIHJlcXVpcmUoJy4vZG9tL2V2ZW50LWhhbmRsZXInKSwgcmVxdWlyZSgnLi9kb20vbWFuaXB1bGF0b3InKSwgcmVxdWlyZSgnLi9kb20vc2VsZWN0b3ItZW5naW5lJyksIHJlcXVpcmUoJy4vdXRpbC9zd2lwZScpLCByZXF1aXJlKCcuL2Jhc2UtY29tcG9uZW50JykpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnLi91dGlsL2luZGV4JywgJy4vZG9tL2V2ZW50LWhhbmRsZXInLCAnLi9kb20vbWFuaXB1bGF0b3InLCAnLi9kb20vc2VsZWN0b3ItZW5naW5lJywgJy4vdXRpbC9zd2lwZScsICcuL2Jhc2UtY29tcG9uZW50J10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkNhcm91c2VsID0gZmFjdG9yeShnbG9iYWwuSW5kZXgsIGdsb2JhbC5FdmVudEhhbmRsZXIsIGdsb2JhbC5NYW5pcHVsYXRvciwgZ2xvYmFsLlNlbGVjdG9yRW5naW5lLCBnbG9iYWwuU3dpcGUsIGdsb2JhbC5CYXNlQ29tcG9uZW50KSk7XG59KSh0aGlzLCAoZnVuY3Rpb24gKGluZGV4LCBFdmVudEhhbmRsZXIsIE1hbmlwdWxhdG9yLCBTZWxlY3RvckVuZ2luZSwgU3dpcGUsIEJhc2VDb21wb25lbnQpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIGNvbnN0IF9pbnRlcm9wRGVmYXVsdExlZ2FjeSA9IGUgPT4gZSAmJiB0eXBlb2YgZSA9PT0gJ29iamVjdCcgJiYgJ2RlZmF1bHQnIGluIGUgPyBlIDogeyBkZWZhdWx0OiBlIH07XG5cbiAgY29uc3QgRXZlbnRIYW5kbGVyX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdExlZ2FjeShFdmVudEhhbmRsZXIpO1xuICBjb25zdCBNYW5pcHVsYXRvcl9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHRMZWdhY3koTWFuaXB1bGF0b3IpO1xuICBjb25zdCBTZWxlY3RvckVuZ2luZV9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHRMZWdhY3koU2VsZWN0b3JFbmdpbmUpO1xuICBjb25zdCBTd2lwZV9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHRMZWdhY3koU3dpcGUpO1xuICBjb25zdCBCYXNlQ29tcG9uZW50X19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdExlZ2FjeShCYXNlQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiBjYXJvdXNlbC5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgTkFNRSA9ICdjYXJvdXNlbCc7XG4gIGNvbnN0IERBVEFfS0VZID0gJ2JzLmNhcm91c2VsJztcbiAgY29uc3QgRVZFTlRfS0VZID0gYC4ke0RBVEFfS0VZfWA7XG4gIGNvbnN0IERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICBjb25zdCBBUlJPV19MRUZUX0tFWSA9ICdBcnJvd0xlZnQnO1xuICBjb25zdCBBUlJPV19SSUdIVF9LRVkgPSAnQXJyb3dSaWdodCc7XG4gIGNvbnN0IFRPVUNIRVZFTlRfQ09NUEFUX1dBSVQgPSA1MDA7IC8vIFRpbWUgZm9yIG1vdXNlIGNvbXBhdCBldmVudHMgdG8gZmlyZSBhZnRlciB0b3VjaFxuXG4gIGNvbnN0IE9SREVSX05FWFQgPSAnbmV4dCc7XG4gIGNvbnN0IE9SREVSX1BSRVYgPSAncHJldic7XG4gIGNvbnN0IERJUkVDVElPTl9MRUZUID0gJ2xlZnQnO1xuICBjb25zdCBESVJFQ1RJT05fUklHSFQgPSAncmlnaHQnO1xuICBjb25zdCBFVkVOVF9TTElERSA9IGBzbGlkZSR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX1NMSUQgPSBgc2xpZCR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX0tFWURPV04gPSBga2V5ZG93biR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX01PVVNFRU5URVIgPSBgbW91c2VlbnRlciR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX01PVVNFTEVBVkUgPSBgbW91c2VsZWF2ZSR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX0RSQUdfU1RBUlQgPSBgZHJhZ3N0YXJ0JHtFVkVOVF9LRVl9YDtcbiAgY29uc3QgRVZFTlRfTE9BRF9EQVRBX0FQSSA9IGBsb2FkJHtFVkVOVF9LRVl9JHtEQVRBX0FQSV9LRVl9YDtcbiAgY29uc3QgRVZFTlRfQ0xJQ0tfREFUQV9BUEkgPSBgY2xpY2ske0VWRU5UX0tFWX0ke0RBVEFfQVBJX0tFWX1gO1xuICBjb25zdCBDTEFTU19OQU1FX0NBUk9VU0VMID0gJ2Nhcm91c2VsJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9BQ1RJVkUgPSAnYWN0aXZlJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9TTElERSA9ICdzbGlkZSc7XG4gIGNvbnN0IENMQVNTX05BTUVfRU5EID0gJ2Nhcm91c2VsLWl0ZW0tZW5kJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9TVEFSVCA9ICdjYXJvdXNlbC1pdGVtLXN0YXJ0JztcbiAgY29uc3QgQ0xBU1NfTkFNRV9ORVhUID0gJ2Nhcm91c2VsLWl0ZW0tbmV4dCc7XG4gIGNvbnN0IENMQVNTX05BTUVfUFJFViA9ICdjYXJvdXNlbC1pdGVtLXByZXYnO1xuICBjb25zdCBTRUxFQ1RPUl9BQ1RJVkUgPSAnLmFjdGl2ZSc7XG4gIGNvbnN0IFNFTEVDVE9SX0lURU0gPSAnLmNhcm91c2VsLWl0ZW0nO1xuICBjb25zdCBTRUxFQ1RPUl9BQ1RJVkVfSVRFTSA9IFNFTEVDVE9SX0FDVElWRSArIFNFTEVDVE9SX0lURU07XG4gIGNvbnN0IFNFTEVDVE9SX0lURU1fSU1HID0gJy5jYXJvdXNlbC1pdGVtIGltZyc7XG4gIGNvbnN0IFNFTEVDVE9SX0lORElDQVRPUlMgPSAnLmNhcm91c2VsLWluZGljYXRvcnMnO1xuICBjb25zdCBTRUxFQ1RPUl9EQVRBX1NMSURFID0gJ1tkYXRhLWJzLXNsaWRlXSwgW2RhdGEtYnMtc2xpZGUtdG9dJztcbiAgY29uc3QgU0VMRUNUT1JfREFUQV9SSURFID0gJ1tkYXRhLWJzLXJpZGU9XCJjYXJvdXNlbFwiXSc7XG4gIGNvbnN0IEtFWV9UT19ESVJFQ1RJT04gPSB7XG4gICAgW0FSUk9XX0xFRlRfS0VZXTogRElSRUNUSU9OX1JJR0hULFxuICAgIFtBUlJPV19SSUdIVF9LRVldOiBESVJFQ1RJT05fTEVGVFxuICB9O1xuICBjb25zdCBEZWZhdWx0ID0ge1xuICAgIGludGVydmFsOiA1MDAwLFxuICAgIGtleWJvYXJkOiB0cnVlLFxuICAgIHBhdXNlOiAnaG92ZXInLFxuICAgIHJpZGU6IGZhbHNlLFxuICAgIHRvdWNoOiB0cnVlLFxuICAgIHdyYXA6IHRydWVcbiAgfTtcbiAgY29uc3QgRGVmYXVsdFR5cGUgPSB7XG4gICAgaW50ZXJ2YWw6ICcobnVtYmVyfGJvb2xlYW4pJyxcbiAgICAvLyBUT0RPOnY2IHJlbW92ZSBib29sZWFuIHN1cHBvcnRcbiAgICBrZXlib2FyZDogJ2Jvb2xlYW4nLFxuICAgIHBhdXNlOiAnKHN0cmluZ3xib29sZWFuKScsXG4gICAgcmlkZTogJyhib29sZWFufHN0cmluZyknLFxuICAgIHRvdWNoOiAnYm9vbGVhbicsXG4gICAgd3JhcDogJ2Jvb2xlYW4nXG4gIH07XG4gIC8qKlxuICAgKiBDbGFzcyBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNsYXNzIENhcm91c2VsIGV4dGVuZHMgQmFzZUNvbXBvbmVudF9fZGVmYXVsdC5kZWZhdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIHN1cGVyKGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy50b3VjaFRpbWVvdXQgPSBudWxsO1xuICAgICAgdGhpcy5fc3dpcGVIZWxwZXIgPSBudWxsO1xuICAgICAgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQgPSBTZWxlY3RvckVuZ2luZV9fZGVmYXVsdC5kZWZhdWx0LmZpbmRPbmUoU0VMRUNUT1JfSU5ESUNBVE9SUywgdGhpcy5fZWxlbWVudCk7XG5cbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcucmlkZSA9PT0gQ0xBU1NfTkFNRV9DQVJPVVNFTCkge1xuICAgICAgICB0aGlzLmN5Y2xlKCk7XG4gICAgICB9XG4gICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdCgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdFR5cGU7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUU7XG4gICAgfSAvLyBQdWJsaWNcblxuXG4gICAgbmV4dCgpIHtcbiAgICAgIHRoaXMuX3NsaWRlKE9SREVSX05FWFQpO1xuICAgIH1cblxuICAgIG5leHRXaGVuVmlzaWJsZSgpIHtcbiAgICAgIC8vIEZJWE1FIFRPRE8gdXNlIGBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGVgXG4gICAgICAvLyBEb24ndCBjYWxsIG5leHQgd2hlbiB0aGUgcGFnZSBpc24ndCB2aXNpYmxlXG4gICAgICAvLyBvciB0aGUgY2Fyb3VzZWwgb3IgaXRzIHBhcmVudCBpc24ndCB2aXNpYmxlXG4gICAgICBpZiAoIWRvY3VtZW50LmhpZGRlbiAmJiBpbmRleC5pc1Zpc2libGUodGhpcy5fZWxlbWVudCkpIHtcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJldigpIHtcbiAgICAgIHRoaXMuX3NsaWRlKE9SREVSX1BSRVYpO1xuICAgIH1cblxuICAgIHBhdXNlKCkge1xuICAgICAgaWYgKHRoaXMuX2lzU2xpZGluZykge1xuICAgICAgICBpbmRleC50cmlnZ2VyVHJhbnNpdGlvbkVuZCh0aGlzLl9lbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xuICAgIH1cblxuICAgIGN5Y2xlKCkge1xuICAgICAgdGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xuXG4gICAgICB0aGlzLl91cGRhdGVJbnRlcnZhbCgpO1xuXG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHRoaXMubmV4dFdoZW5WaXNpYmxlKCksIHRoaXMuX2NvbmZpZy5pbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgX21heWJlRW5hYmxlQ3ljbGUoKSB7XG4gICAgICBpZiAoIXRoaXMuX2NvbmZpZy5yaWRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2lzU2xpZGluZykge1xuICAgICAgICBFdmVudEhhbmRsZXJfX2RlZmF1bHQuZGVmYXVsdC5vbmUodGhpcy5fZWxlbWVudCwgRVZFTlRfU0xJRCwgKCkgPT4gdGhpcy5jeWNsZSgpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmN5Y2xlKCk7XG4gICAgfVxuXG4gICAgdG8oaW5kZXgpIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5fZ2V0SXRlbXMoKTtcblxuICAgICAgaWYgKGluZGV4ID4gaXRlbXMubGVuZ3RoIC0gMSB8fCBpbmRleCA8IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5faXNTbGlkaW5nKSB7XG4gICAgICAgIEV2ZW50SGFuZGxlcl9fZGVmYXVsdC5kZWZhdWx0Lm9uZSh0aGlzLl9lbGVtZW50LCBFVkVOVF9TTElELCAoKSA9PiB0aGlzLnRvKGluZGV4KSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLl9nZXRJdGVtSW5kZXgodGhpcy5fZ2V0QWN0aXZlKCkpO1xuXG4gICAgICBpZiAoYWN0aXZlSW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3JkZXIgPSBpbmRleCA+IGFjdGl2ZUluZGV4ID8gT1JERVJfTkVYVCA6IE9SREVSX1BSRVY7XG5cbiAgICAgIHRoaXMuX3NsaWRlKG9yZGVyLCBpdGVtc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICBpZiAodGhpcy5fc3dpcGVIZWxwZXIpIHtcbiAgICAgICAgdGhpcy5fc3dpcGVIZWxwZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuXG4gICAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgfSAvLyBQcml2YXRlXG5cblxuICAgIF9jb25maWdBZnRlck1lcmdlKGNvbmZpZykge1xuICAgICAgY29uZmlnLmRlZmF1bHRJbnRlcnZhbCA9IGNvbmZpZy5pbnRlcnZhbDtcbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5rZXlib2FyZCkge1xuICAgICAgICBFdmVudEhhbmRsZXJfX2RlZmF1bHQuZGVmYXVsdC5vbih0aGlzLl9lbGVtZW50LCBFVkVOVF9LRVlET1dOLCBldmVudCA9PiB0aGlzLl9rZXlkb3duKGV2ZW50KSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcucGF1c2UgPT09ICdob3ZlcicpIHtcbiAgICAgICAgRXZlbnRIYW5kbGVyX19kZWZhdWx0LmRlZmF1bHQub24odGhpcy5fZWxlbWVudCwgRVZFTlRfTU9VU0VFTlRFUiwgKCkgPT4gdGhpcy5wYXVzZSgpKTtcbiAgICAgICAgRXZlbnRIYW5kbGVyX19kZWZhdWx0LmRlZmF1bHQub24odGhpcy5fZWxlbWVudCwgRVZFTlRfTU9VU0VMRUFWRSwgKCkgPT4gdGhpcy5fbWF5YmVFbmFibGVDeWNsZSgpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy50b3VjaCAmJiBTd2lwZV9fZGVmYXVsdC5kZWZhdWx0LmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgdGhpcy5fYWRkVG91Y2hFdmVudExpc3RlbmVycygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9hZGRUb3VjaEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgZm9yIChjb25zdCBpbWcgb2YgU2VsZWN0b3JFbmdpbmVfX2RlZmF1bHQuZGVmYXVsdC5maW5kKFNFTEVDVE9SX0lURU1fSU1HLCB0aGlzLl9lbGVtZW50KSkge1xuICAgICAgICBFdmVudEhhbmRsZXJfX2RlZmF1bHQuZGVmYXVsdC5vbihpbWcsIEVWRU5UX0RSQUdfU1RBUlQsIGV2ZW50ID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbmRDYWxsQmFjayA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5wYXVzZSAhPT0gJ2hvdmVyJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBJZiBpdCdzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2UsIG1vdXNlZW50ZXIvbGVhdmUgYXJlIGZpcmVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgdGhlIG1vdXNlIGNvbXBhdGliaWxpdHkgZXZlbnRzIG9uIGZpcnN0IHRhcCAtIHRoZSBjYXJvdXNlbFxuICAgICAgICAvLyB3b3VsZCBzdG9wIGN5Y2xpbmcgdW50aWwgdXNlciB0YXBwZWQgb3V0IG9mIGl0O1xuICAgICAgICAvLyBoZXJlLCB3ZSBsaXN0ZW4gZm9yIHRvdWNoZW5kLCBleHBsaWNpdGx5IHBhdXNlIHRoZSBjYXJvdXNlbFxuICAgICAgICAvLyAoYXMgaWYgaXQncyB0aGUgc2Vjb25kIHRpbWUgd2UgdGFwIG9uIGl0LCBtb3VzZWVudGVyIGNvbXBhdCBldmVudFxuICAgICAgICAvLyBpcyBOT1QgZmlyZWQpIGFuZCBhZnRlciBhIHRpbWVvdXQgKHRvIGFsbG93IGZvciBtb3VzZSBjb21wYXRpYmlsaXR5XG4gICAgICAgIC8vIGV2ZW50cyB0byBmaXJlKSB3ZSBleHBsaWNpdGx5IHJlc3RhcnQgY3ljbGluZ1xuXG5cbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLnRvdWNoVGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoVGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRvdWNoVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fbWF5YmVFbmFibGVDeWNsZSgpLCBUT1VDSEVWRU5UX0NPTVBBVF9XQUlUICsgdGhpcy5fY29uZmlnLmludGVydmFsKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHN3aXBlQ29uZmlnID0ge1xuICAgICAgICBsZWZ0Q2FsbGJhY2s6ICgpID0+IHRoaXMuX3NsaWRlKHRoaXMuX2RpcmVjdGlvblRvT3JkZXIoRElSRUNUSU9OX0xFRlQpKSxcbiAgICAgICAgcmlnaHRDYWxsYmFjazogKCkgPT4gdGhpcy5fc2xpZGUodGhpcy5fZGlyZWN0aW9uVG9PcmRlcihESVJFQ1RJT05fUklHSFQpKSxcbiAgICAgICAgZW5kQ2FsbGJhY2s6IGVuZENhbGxCYWNrXG4gICAgICB9O1xuICAgICAgdGhpcy5fc3dpcGVIZWxwZXIgPSBuZXcgU3dpcGVfX2RlZmF1bHQuZGVmYXVsdCh0aGlzLl9lbGVtZW50LCBzd2lwZUNvbmZpZyk7XG4gICAgfVxuXG4gICAgX2tleWRvd24oZXZlbnQpIHtcbiAgICAgIGlmICgvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IEtFWV9UT19ESVJFQ1RJT05bZXZlbnQua2V5XTtcblxuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHRoaXMuX3NsaWRlKHRoaXMuX2RpcmVjdGlvblRvT3JkZXIoZGlyZWN0aW9uKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2dldEl0ZW1JbmRleChlbGVtZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0SXRlbXMoKS5pbmRleE9mKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIF9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50KGluZGV4KSB7XG4gICAgICBpZiAoIXRoaXMuX2luZGljYXRvcnNFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWN0aXZlSW5kaWNhdG9yID0gU2VsZWN0b3JFbmdpbmVfX2RlZmF1bHQuZGVmYXVsdC5maW5kT25lKFNFTEVDVE9SX0FDVElWRSwgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpO1xuICAgICAgYWN0aXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9BQ1RJVkUpO1xuICAgICAgYWN0aXZlSW5kaWNhdG9yLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1jdXJyZW50Jyk7XG4gICAgICBjb25zdCBuZXdBY3RpdmVJbmRpY2F0b3IgPSBTZWxlY3RvckVuZ2luZV9fZGVmYXVsdC5kZWZhdWx0LmZpbmRPbmUoYFtkYXRhLWJzLXNsaWRlLXRvPVwiJHtpbmRleH1cIl1gLCB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCk7XG5cbiAgICAgIGlmIChuZXdBY3RpdmVJbmRpY2F0b3IpIHtcbiAgICAgICAgbmV3QWN0aXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9BQ1RJVkUpO1xuICAgICAgICBuZXdBY3RpdmVJbmRpY2F0b3Iuc2V0QXR0cmlidXRlKCdhcmlhLWN1cnJlbnQnLCAndHJ1ZScpO1xuICAgICAgfVxuICAgIH1cblxuICAgIF91cGRhdGVJbnRlcnZhbCgpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9hY3RpdmVFbGVtZW50IHx8IHRoaXMuX2dldEFjdGl2ZSgpO1xuXG4gICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbGVtZW50SW50ZXJ2YWwgPSBOdW1iZXIucGFyc2VJbnQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtaW50ZXJ2YWwnKSwgMTApO1xuICAgICAgdGhpcy5fY29uZmlnLmludGVydmFsID0gZWxlbWVudEludGVydmFsIHx8IHRoaXMuX2NvbmZpZy5kZWZhdWx0SW50ZXJ2YWw7XG4gICAgfVxuXG4gICAgX3NsaWRlKG9yZGVyLCBlbGVtZW50ID0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMuX2lzU2xpZGluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSB0aGlzLl9nZXRBY3RpdmUoKTtcblxuICAgICAgY29uc3QgaXNOZXh0ID0gb3JkZXIgPT09IE9SREVSX05FWFQ7XG4gICAgICBjb25zdCBuZXh0RWxlbWVudCA9IGVsZW1lbnQgfHwgaW5kZXguZ2V0TmV4dEFjdGl2ZUVsZW1lbnQodGhpcy5fZ2V0SXRlbXMoKSwgYWN0aXZlRWxlbWVudCwgaXNOZXh0LCB0aGlzLl9jb25maWcud3JhcCk7XG5cbiAgICAgIGlmIChuZXh0RWxlbWVudCA9PT0gYWN0aXZlRWxlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5leHRFbGVtZW50SW5kZXggPSB0aGlzLl9nZXRJdGVtSW5kZXgobmV4dEVsZW1lbnQpO1xuXG4gICAgICBjb25zdCB0cmlnZ2VyRXZlbnQgPSBldmVudE5hbWUgPT4ge1xuICAgICAgICByZXR1cm4gRXZlbnRIYW5kbGVyX19kZWZhdWx0LmRlZmF1bHQudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBldmVudE5hbWUsIHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBuZXh0RWxlbWVudCxcbiAgICAgICAgICBkaXJlY3Rpb246IHRoaXMuX29yZGVyVG9EaXJlY3Rpb24ob3JkZXIpLFxuICAgICAgICAgIGZyb206IHRoaXMuX2dldEl0ZW1JbmRleChhY3RpdmVFbGVtZW50KSxcbiAgICAgICAgICB0bzogbmV4dEVsZW1lbnRJbmRleFxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHNsaWRlRXZlbnQgPSB0cmlnZ2VyRXZlbnQoRVZFTlRfU0xJREUpO1xuXG4gICAgICBpZiAoc2xpZGVFdmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhY3RpdmVFbGVtZW50IHx8ICFuZXh0RWxlbWVudCkge1xuICAgICAgICAvLyBTb21lIHdlaXJkbmVzcyBpcyBoYXBwZW5pbmcsIHNvIHdlIGJhaWxcbiAgICAgICAgLy8gdG9kbzogY2hhbmdlIHRlc3RzIHRoYXQgdXNlIGVtcHR5IGRpdnMgdG8gYXZvaWQgdGhpcyBjaGVja1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzQ3ljbGluZyA9IEJvb2xlYW4odGhpcy5faW50ZXJ2YWwpO1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgdGhpcy5faXNTbGlkaW5nID0gdHJ1ZTtcblxuICAgICAgdGhpcy5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChuZXh0RWxlbWVudEluZGV4KTtcblxuICAgICAgdGhpcy5fYWN0aXZlRWxlbWVudCA9IG5leHRFbGVtZW50O1xuICAgICAgY29uc3QgZGlyZWN0aW9uYWxDbGFzc05hbWUgPSBpc05leHQgPyBDTEFTU19OQU1FX1NUQVJUIDogQ0xBU1NfTkFNRV9FTkQ7XG4gICAgICBjb25zdCBvcmRlckNsYXNzTmFtZSA9IGlzTmV4dCA/IENMQVNTX05BTUVfTkVYVCA6IENMQVNTX05BTUVfUFJFVjtcbiAgICAgIG5leHRFbGVtZW50LmNsYXNzTGlzdC5hZGQob3JkZXJDbGFzc05hbWUpO1xuICAgICAgaW5kZXgucmVmbG93KG5leHRFbGVtZW50KTtcbiAgICAgIGFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChkaXJlY3Rpb25hbENsYXNzTmFtZSk7XG4gICAgICBuZXh0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcblxuICAgICAgY29uc3QgY29tcGxldGVDYWxsQmFjayA9ICgpID0+IHtcbiAgICAgICAgbmV4dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShkaXJlY3Rpb25hbENsYXNzTmFtZSwgb3JkZXJDbGFzc05hbWUpO1xuICAgICAgICBuZXh0RWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfQUNUSVZFKTtcbiAgICAgICAgYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfQUNUSVZFLCBvcmRlckNsYXNzTmFtZSwgZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuICAgICAgICB0aGlzLl9pc1NsaWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdHJpZ2dlckV2ZW50KEVWRU5UX1NMSUQpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcXVldWVDYWxsYmFjayhjb21wbGV0ZUNhbGxCYWNrLCBhY3RpdmVFbGVtZW50LCB0aGlzLl9pc0FuaW1hdGVkKCkpO1xuXG4gICAgICBpZiAoaXNDeWNsaW5nKSB7XG4gICAgICAgIHRoaXMuY3ljbGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfaXNBbmltYXRlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX1NMSURFKTtcbiAgICB9XG5cbiAgICBfZ2V0QWN0aXZlKCkge1xuICAgICAgcmV0dXJuIFNlbGVjdG9yRW5naW5lX19kZWZhdWx0LmRlZmF1bHQuZmluZE9uZShTRUxFQ1RPUl9BQ1RJVkVfSVRFTSwgdGhpcy5fZWxlbWVudCk7XG4gICAgfVxuXG4gICAgX2dldEl0ZW1zKCkge1xuICAgICAgcmV0dXJuIFNlbGVjdG9yRW5naW5lX19kZWZhdWx0LmRlZmF1bHQuZmluZChTRUxFQ1RPUl9JVEVNLCB0aGlzLl9lbGVtZW50KTtcbiAgICB9XG5cbiAgICBfY2xlYXJJbnRlcnZhbCgpIHtcbiAgICAgIGlmICh0aGlzLl9pbnRlcnZhbCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKTtcbiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9kaXJlY3Rpb25Ub09yZGVyKGRpcmVjdGlvbikge1xuICAgICAgaWYgKGluZGV4LmlzUlRMKCkpIHtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OX0xFRlQgPyBPUkRFUl9QUkVWIDogT1JERVJfTkVYVDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OX0xFRlQgPyBPUkRFUl9ORVhUIDogT1JERVJfUFJFVjtcbiAgICB9XG5cbiAgICBfb3JkZXJUb0RpcmVjdGlvbihvcmRlcikge1xuICAgICAgaWYgKGluZGV4LmlzUlRMKCkpIHtcbiAgICAgICAgcmV0dXJuIG9yZGVyID09PSBPUkRFUl9QUkVWID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvcmRlciA9PT0gT1JERVJfUFJFViA/IERJUkVDVElPTl9SSUdIVCA6IERJUkVDVElPTl9MRUZUO1xuICAgIH0gLy8gU3RhdGljXG5cblxuICAgIHN0YXRpYyBqUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IENhcm91c2VsLmdldE9yQ3JlYXRlSW5zdGFuY2UodGhpcywgY29uZmlnKTtcblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBkYXRhLnRvKGNvbmZpZyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkIHx8IGNvbmZpZy5zdGFydHNXaXRoKCdfJykgfHwgY29uZmlnID09PSAnY29uc3RydWN0b3InKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgXCIke2NvbmZpZ31cImApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfVxuICAvKipcbiAgICogRGF0YSBBUEkgaW1wbGVtZW50YXRpb25cbiAgICovXG5cblxuICBFdmVudEhhbmRsZXJfX2RlZmF1bHQuZGVmYXVsdC5vbihkb2N1bWVudCwgRVZFTlRfQ0xJQ0tfREFUQV9BUEksIFNFTEVDVE9SX0RBVEFfU0xJREUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGluZGV4LmdldEVsZW1lbnRGcm9tU2VsZWN0b3IodGhpcyk7XG5cbiAgICBpZiAoIXRhcmdldCB8fCAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX0NBUk9VU0VMKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgY2Fyb3VzZWwgPSBDYXJvdXNlbC5nZXRPckNyZWF0ZUluc3RhbmNlKHRhcmdldCk7XG4gICAgY29uc3Qgc2xpZGVJbmRleCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWJzLXNsaWRlLXRvJyk7XG5cbiAgICBpZiAoc2xpZGVJbmRleCkge1xuICAgICAgY2Fyb3VzZWwudG8oc2xpZGVJbmRleCk7XG5cbiAgICAgIGNhcm91c2VsLl9tYXliZUVuYWJsZUN5Y2xlKCk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoTWFuaXB1bGF0b3JfX2RlZmF1bHQuZGVmYXVsdC5nZXREYXRhQXR0cmlidXRlKHRoaXMsICdzbGlkZScpID09PSAnbmV4dCcpIHtcbiAgICAgIGNhcm91c2VsLm5leHQoKTtcblxuICAgICAgY2Fyb3VzZWwuX21heWJlRW5hYmxlQ3ljbGUoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNhcm91c2VsLnByZXYoKTtcblxuICAgIGNhcm91c2VsLl9tYXliZUVuYWJsZUN5Y2xlKCk7XG4gIH0pO1xuICBFdmVudEhhbmRsZXJfX2RlZmF1bHQuZGVmYXVsdC5vbih3aW5kb3csIEVWRU5UX0xPQURfREFUQV9BUEksICgpID0+IHtcbiAgICBjb25zdCBjYXJvdXNlbHMgPSBTZWxlY3RvckVuZ2luZV9fZGVmYXVsdC5kZWZhdWx0LmZpbmQoU0VMRUNUT1JfREFUQV9SSURFKTtcblxuICAgIGZvciAoY29uc3QgY2Fyb3VzZWwgb2YgY2Fyb3VzZWxzKSB7XG4gICAgICBDYXJvdXNlbC5nZXRPckNyZWF0ZUluc3RhbmNlKGNhcm91c2VsKTtcbiAgICB9XG4gIH0pO1xuICAvKipcbiAgICogalF1ZXJ5XG4gICAqL1xuXG4gIGluZGV4LmRlZmluZUpRdWVyeVBsdWdpbihDYXJvdXNlbCk7XG5cbiAgcmV0dXJuIENhcm91c2VsO1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYXJvdXNlbC5qcy5tYXBcbiIsIi8qIVxuICAqIEJvb3RzdHJhcCBjb2xsYXBzZS5qcyB2NS4yLjMgKGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS8pXG4gICogQ29weXJpZ2h0IDIwMTEtMjAyMiBUaGUgQm9vdHN0cmFwIEF1dGhvcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ncmFwaHMvY29udHJpYnV0b3JzKVxuICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJy4vdXRpbC9pbmRleCcpLCByZXF1aXJlKCcuL2RvbS9ldmVudC1oYW5kbGVyJyksIHJlcXVpcmUoJy4vZG9tL3NlbGVjdG9yLWVuZ2luZScpLCByZXF1aXJlKCcuL2Jhc2UtY29tcG9uZW50JykpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnLi91dGlsL2luZGV4JywgJy4vZG9tL2V2ZW50LWhhbmRsZXInLCAnLi9kb20vc2VsZWN0b3ItZW5naW5lJywgJy4vYmFzZS1jb21wb25lbnQnXSwgZmFjdG9yeSkgOlxuICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuQ29sbGFwc2UgPSBmYWN0b3J5KGdsb2JhbC5JbmRleCwgZ2xvYmFsLkV2ZW50SGFuZGxlciwgZ2xvYmFsLlNlbGVjdG9yRW5naW5lLCBnbG9iYWwuQmFzZUNvbXBvbmVudCkpO1xufSkodGhpcywgKGZ1bmN0aW9uIChpbmRleCwgRXZlbnRIYW5kbGVyLCBTZWxlY3RvckVuZ2luZSwgQmFzZUNvbXBvbmVudCkgeyAndXNlIHN0cmljdCc7XG5cbiAgY29uc3QgX2ludGVyb3BEZWZhdWx0TGVnYWN5ID0gZSA9PiBlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiAnZGVmYXVsdCcgaW4gZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcblxuICBjb25zdCBFdmVudEhhbmRsZXJfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0TGVnYWN5KEV2ZW50SGFuZGxlcik7XG4gIGNvbnN0IFNlbGVjdG9yRW5naW5lX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdExlZ2FjeShTZWxlY3RvckVuZ2luZSk7XG4gIGNvbnN0IEJhc2VDb21wb25lbnRfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0TGVnYWN5KEJhc2VDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGNvbGxhcHNlLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBOQU1FID0gJ2NvbGxhcHNlJztcbiAgY29uc3QgREFUQV9LRVkgPSAnYnMuY29sbGFwc2UnO1xuICBjb25zdCBFVkVOVF9LRVkgPSBgLiR7REFUQV9LRVl9YDtcbiAgY29uc3QgREFUQV9BUElfS0VZID0gJy5kYXRhLWFwaSc7XG4gIGNvbnN0IEVWRU5UX1NIT1cgPSBgc2hvdyR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX1NIT1dOID0gYHNob3duJHtFVkVOVF9LRVl9YDtcbiAgY29uc3QgRVZFTlRfSElERSA9IGBoaWRlJHtFVkVOVF9LRVl9YDtcbiAgY29uc3QgRVZFTlRfSElEREVOID0gYGhpZGRlbiR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX0NMSUNLX0RBVEFfQVBJID0gYGNsaWNrJHtFVkVOVF9LRVl9JHtEQVRBX0FQSV9LRVl9YDtcbiAgY29uc3QgQ0xBU1NfTkFNRV9TSE9XID0gJ3Nob3cnO1xuICBjb25zdCBDTEFTU19OQU1FX0NPTExBUFNFID0gJ2NvbGxhcHNlJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9DT0xMQVBTSU5HID0gJ2NvbGxhcHNpbmcnO1xuICBjb25zdCBDTEFTU19OQU1FX0NPTExBUFNFRCA9ICdjb2xsYXBzZWQnO1xuICBjb25zdCBDTEFTU19OQU1FX0RFRVBFUl9DSElMRFJFTiA9IGA6c2NvcGUgLiR7Q0xBU1NfTkFNRV9DT0xMQVBTRX0gLiR7Q0xBU1NfTkFNRV9DT0xMQVBTRX1gO1xuICBjb25zdCBDTEFTU19OQU1FX0hPUklaT05UQUwgPSAnY29sbGFwc2UtaG9yaXpvbnRhbCc7XG4gIGNvbnN0IFdJRFRIID0gJ3dpZHRoJztcbiAgY29uc3QgSEVJR0hUID0gJ2hlaWdodCc7XG4gIGNvbnN0IFNFTEVDVE9SX0FDVElWRVMgPSAnLmNvbGxhcHNlLnNob3csIC5jb2xsYXBzZS5jb2xsYXBzaW5nJztcbiAgY29uc3QgU0VMRUNUT1JfREFUQV9UT0dHTEUgPSAnW2RhdGEtYnMtdG9nZ2xlPVwiY29sbGFwc2VcIl0nO1xuICBjb25zdCBEZWZhdWx0ID0ge1xuICAgIHBhcmVudDogbnVsbCxcbiAgICB0b2dnbGU6IHRydWVcbiAgfTtcbiAgY29uc3QgRGVmYXVsdFR5cGUgPSB7XG4gICAgcGFyZW50OiAnKG51bGx8ZWxlbWVudCknLFxuICAgIHRvZ2dsZTogJ2Jvb2xlYW4nXG4gIH07XG4gIC8qKlxuICAgKiBDbGFzcyBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNsYXNzIENvbGxhcHNlIGV4dGVuZHMgQmFzZUNvbXBvbmVudF9fZGVmYXVsdC5kZWZhdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIHN1cGVyKGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3RyaWdnZXJBcnJheSA9IFtdO1xuICAgICAgY29uc3QgdG9nZ2xlTGlzdCA9IFNlbGVjdG9yRW5naW5lX19kZWZhdWx0LmRlZmF1bHQuZmluZChTRUxFQ1RPUl9EQVRBX1RPR0dMRSk7XG5cbiAgICAgIGZvciAoY29uc3QgZWxlbSBvZiB0b2dnbGVMaXN0KSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gaW5kZXguZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtKTtcbiAgICAgICAgY29uc3QgZmlsdGVyRWxlbWVudCA9IFNlbGVjdG9yRW5naW5lX19kZWZhdWx0LmRlZmF1bHQuZmluZChzZWxlY3RvcikuZmlsdGVyKGZvdW5kRWxlbWVudCA9PiBmb3VuZEVsZW1lbnQgPT09IHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICAgIGlmIChzZWxlY3RvciAhPT0gbnVsbCAmJiBmaWx0ZXJFbGVtZW50Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX3RyaWdnZXJBcnJheS5wdXNoKGVsZW0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2luaXRpYWxpemVDaGlsZHJlbigpO1xuXG4gICAgICBpZiAoIXRoaXMuX2NvbmZpZy5wYXJlbnQpIHtcbiAgICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX3RyaWdnZXJBcnJheSwgdGhpcy5faXNTaG93bigpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy50b2dnbGUpIHtcbiAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgIH1cbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0KCkge1xuICAgICAgcmV0dXJuIERlZmF1bHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0VHlwZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICByZXR1cm4gTkFNRTtcbiAgICB9IC8vIFB1YmxpY1xuXG5cbiAgICB0b2dnbGUoKSB7XG4gICAgICBpZiAodGhpcy5faXNTaG93bigpKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hvdygpIHtcbiAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgdGhpcy5faXNTaG93bigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGFjdGl2ZUNoaWxkcmVuID0gW107IC8vIGZpbmQgYWN0aXZlIGNoaWxkcmVuXG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcucGFyZW50KSB7XG4gICAgICAgIGFjdGl2ZUNoaWxkcmVuID0gdGhpcy5fZ2V0Rmlyc3RMZXZlbENoaWxkcmVuKFNFTEVDVE9SX0FDVElWRVMpLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQgIT09IHRoaXMuX2VsZW1lbnQpLm1hcChlbGVtZW50ID0+IENvbGxhcHNlLmdldE9yQ3JlYXRlSW5zdGFuY2UoZWxlbWVudCwge1xuICAgICAgICAgIHRvZ2dsZTogZmFsc2VcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aXZlQ2hpbGRyZW4ubGVuZ3RoICYmIGFjdGl2ZUNoaWxkcmVuWzBdLl9pc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdGFydEV2ZW50ID0gRXZlbnRIYW5kbGVyX19kZWZhdWx0LmRlZmF1bHQudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9TSE9XKTtcblxuICAgICAgaWYgKHN0YXJ0RXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgYWN0aXZlSW5zdGFuY2Ugb2YgYWN0aXZlQ2hpbGRyZW4pIHtcbiAgICAgICAgYWN0aXZlSW5zdGFuY2UuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfQ09MTEFQU0UpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9DT0xMQVBTSU5HKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gMDtcblxuICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX3RyaWdnZXJBcnJheSwgdHJ1ZSk7XG5cbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHRydWU7XG5cbiAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9DT0xMQVBTSU5HKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9DT0xMQVBTRSwgQ0xBU1NfTkFNRV9TSE9XKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAnJztcbiAgICAgICAgRXZlbnRIYW5kbGVyX19kZWZhdWx0LmRlZmF1bHQudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9TSE9XTik7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjYXBpdGFsaXplZERpbWVuc2lvbiA9IGRpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKDEpO1xuICAgICAgY29uc3Qgc2Nyb2xsU2l6ZSA9IGBzY3JvbGwke2NhcGl0YWxpemVkRGltZW5zaW9ufWA7XG5cbiAgICAgIHRoaXMuX3F1ZXVlQ2FsbGJhY2soY29tcGxldGUsIHRoaXMuX2VsZW1lbnQsIHRydWUpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSBgJHt0aGlzLl9lbGVtZW50W3Njcm9sbFNpemVdfXB4YDtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgaWYgKHRoaXMuX2lzVHJhbnNpdGlvbmluZyB8fCAhdGhpcy5faXNTaG93bigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhcnRFdmVudCA9IEV2ZW50SGFuZGxlcl9fZGVmYXVsdC5kZWZhdWx0LnRyaWdnZXIodGhpcy5fZWxlbWVudCwgRVZFTlRfSElERSk7XG5cbiAgICAgIGlmIChzdGFydEV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkaW1lbnNpb24gPSB0aGlzLl9nZXREaW1lbnNpb24oKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gYCR7dGhpcy5fZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtkaW1lbnNpb25dfXB4YDtcbiAgICAgIGluZGV4LnJlZmxvdyh0aGlzLl9lbGVtZW50KTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfQ09MTEFQU0lORyk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19OQU1FX0NPTExBUFNFLCBDTEFTU19OQU1FX1NIT1cpO1xuXG4gICAgICBmb3IgKGNvbnN0IHRyaWdnZXIgb2YgdGhpcy5fdHJpZ2dlckFycmF5KSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBpbmRleC5nZXRFbGVtZW50RnJvbVNlbGVjdG9yKHRyaWdnZXIpO1xuXG4gICAgICAgIGlmIChlbGVtZW50ICYmICF0aGlzLl9pc1Nob3duKGVsZW1lbnQpKSB7XG4gICAgICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKFt0cmlnZ2VyXSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHRydWU7XG5cbiAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9DT0xMQVBTSU5HKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9DT0xMQVBTRSk7XG5cbiAgICAgICAgRXZlbnRIYW5kbGVyX19kZWZhdWx0LmRlZmF1bHQudHJpZ2dlcih0aGlzLl9lbGVtZW50LCBFVkVOVF9ISURERU4pO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gJyc7XG5cbiAgICAgIHRoaXMuX3F1ZXVlQ2FsbGJhY2soY29tcGxldGUsIHRoaXMuX2VsZW1lbnQsIHRydWUpO1xuICAgIH1cblxuICAgIF9pc1Nob3duKGVsZW1lbnQgPSB0aGlzLl9lbGVtZW50KSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9TSE9XKTtcbiAgICB9IC8vIFByaXZhdGVcblxuXG4gICAgX2NvbmZpZ0FmdGVyTWVyZ2UoY29uZmlnKSB7XG4gICAgICBjb25maWcudG9nZ2xlID0gQm9vbGVhbihjb25maWcudG9nZ2xlKTsgLy8gQ29lcmNlIHN0cmluZyB2YWx1ZXNcblxuICAgICAgY29uZmlnLnBhcmVudCA9IGluZGV4LmdldEVsZW1lbnQoY29uZmlnLnBhcmVudCk7XG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cblxuICAgIF9nZXREaW1lbnNpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9IT1JJWk9OVEFMKSA/IFdJRFRIIDogSEVJR0hUO1xuICAgIH1cblxuICAgIF9pbml0aWFsaXplQ2hpbGRyZW4oKSB7XG4gICAgICBpZiAoIXRoaXMuX2NvbmZpZy5wYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuX2dldEZpcnN0TGV2ZWxDaGlsZHJlbihTRUxFQ1RPUl9EQVRBX1RPR0dMRSk7XG5cbiAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBjaGlsZHJlbikge1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGluZGV4LmdldEVsZW1lbnRGcm9tU2VsZWN0b3IoZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKFtlbGVtZW50XSwgdGhpcy5faXNTaG93bihzZWxlY3RlZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2dldEZpcnN0TGV2ZWxDaGlsZHJlbihzZWxlY3Rvcikge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBTZWxlY3RvckVuZ2luZV9fZGVmYXVsdC5kZWZhdWx0LmZpbmQoQ0xBU1NfTkFNRV9ERUVQRVJfQ0hJTERSRU4sIHRoaXMuX2NvbmZpZy5wYXJlbnQpOyAvLyByZW1vdmUgY2hpbGRyZW4gaWYgZ3JlYXRlciBkZXB0aFxuXG4gICAgICByZXR1cm4gU2VsZWN0b3JFbmdpbmVfX2RlZmF1bHQuZGVmYXVsdC5maW5kKHNlbGVjdG9yLCB0aGlzLl9jb25maWcucGFyZW50KS5maWx0ZXIoZWxlbWVudCA9PiAhY2hpbGRyZW4uaW5jbHVkZXMoZWxlbWVudCkpO1xuICAgIH1cblxuICAgIF9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModHJpZ2dlckFycmF5LCBpc09wZW4pIHtcbiAgICAgIGlmICghdHJpZ2dlckFycmF5Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0cmlnZ2VyQXJyYXkpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKENMQVNTX05BTUVfQ09MTEFQU0VELCAhaXNPcGVuKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBpc09wZW4pO1xuICAgICAgfVxuICAgIH0gLy8gU3RhdGljXG5cblxuICAgIHN0YXRpYyBqUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICBjb25zdCBfY29uZmlnID0ge307XG5cbiAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJyAmJiAvc2hvd3xoaWRlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgX2NvbmZpZy50b2dnbGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBDb2xsYXBzZS5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMsIF9jb25maWcpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgTm8gbWV0aG9kIG5hbWVkIFwiJHtjb25maWd9XCJgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gIH1cbiAgLyoqXG4gICAqIERhdGEgQVBJIGltcGxlbWVudGF0aW9uXG4gICAqL1xuXG5cbiAgRXZlbnRIYW5kbGVyX19kZWZhdWx0LmRlZmF1bHQub24oZG9jdW1lbnQsIEVWRU5UX0NMSUNLX0RBVEFfQVBJLCBTRUxFQ1RPUl9EQVRBX1RPR0dMRSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gcHJldmVudERlZmF1bHQgb25seSBmb3IgPGE+IGVsZW1lbnRzICh3aGljaCBjaGFuZ2UgdGhlIFVSTCkgbm90IGluc2lkZSB0aGUgY29sbGFwc2libGUgZWxlbWVudFxuICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PT0gJ0EnIHx8IGV2ZW50LmRlbGVnYXRlVGFyZ2V0ICYmIGV2ZW50LmRlbGVnYXRlVGFyZ2V0LnRhZ05hbWUgPT09ICdBJykge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RvciA9IGluZGV4LmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG4gICAgY29uc3Qgc2VsZWN0b3JFbGVtZW50cyA9IFNlbGVjdG9yRW5naW5lX19kZWZhdWx0LmRlZmF1bHQuZmluZChzZWxlY3Rvcik7XG5cbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2Ygc2VsZWN0b3JFbGVtZW50cykge1xuICAgICAgQ29sbGFwc2UuZ2V0T3JDcmVhdGVJbnN0YW5jZShlbGVtZW50LCB7XG4gICAgICAgIHRvZ2dsZTogZmFsc2VcbiAgICAgIH0pLnRvZ2dsZSgpO1xuICAgIH1cbiAgfSk7XG4gIC8qKlxuICAgKiBqUXVlcnlcbiAgICovXG5cbiAgaW5kZXguZGVmaW5lSlF1ZXJ5UGx1Z2luKENvbGxhcHNlKTtcblxuICByZXR1cm4gQ29sbGFwc2U7XG5cbn0pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbGxhcHNlLmpzLm1hcFxuIiwiLyohXG4gICogQm9vdHN0cmFwIGRhdGEuanMgdjUuMi4zIChodHRwczovL2dldGJvb3RzdHJhcC5jb20vKVxuICAqIENvcHlyaWdodCAyMDExLTIwMjIgVGhlIEJvb3RzdHJhcCBBdXRob3JzIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvZ3JhcGhzL2NvbnRyaWJ1dG9ycylcbiAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkRhdGEgPSBmYWN0b3J5KCkpO1xufSkodGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGRvbS9kYXRhLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICAvKipcbiAgICogQ29uc3RhbnRzXG4gICAqL1xuICBjb25zdCBlbGVtZW50TWFwID0gbmV3IE1hcCgpO1xuICBjb25zdCBkYXRhID0ge1xuICAgIHNldChlbGVtZW50LCBrZXksIGluc3RhbmNlKSB7XG4gICAgICBpZiAoIWVsZW1lbnRNYXAuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgIGVsZW1lbnRNYXAuc2V0KGVsZW1lbnQsIG5ldyBNYXAoKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGluc3RhbmNlTWFwID0gZWxlbWVudE1hcC5nZXQoZWxlbWVudCk7IC8vIG1ha2UgaXQgY2xlYXIgd2Ugb25seSB3YW50IG9uZSBpbnN0YW5jZSBwZXIgZWxlbWVudFxuICAgICAgLy8gY2FuIGJlIHJlbW92ZWQgbGF0ZXIgd2hlbiBtdWx0aXBsZSBrZXkvaW5zdGFuY2VzIGFyZSBmaW5lIHRvIGJlIHVzZWRcblxuICAgICAgaWYgKCFpbnN0YW5jZU1hcC5oYXMoa2V5KSAmJiBpbnN0YW5jZU1hcC5zaXplICE9PSAwKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEJvb3RzdHJhcCBkb2Vzbid0IGFsbG93IG1vcmUgdGhhbiBvbmUgaW5zdGFuY2UgcGVyIGVsZW1lbnQuIEJvdW5kIGluc3RhbmNlOiAke0FycmF5LmZyb20oaW5zdGFuY2VNYXAua2V5cygpKVswXX0uYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2VNYXAuc2V0KGtleSwgaW5zdGFuY2UpO1xuICAgIH0sXG5cbiAgICBnZXQoZWxlbWVudCwga2V5KSB7XG4gICAgICBpZiAoZWxlbWVudE1hcC5oYXMoZWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRNYXAuZ2V0KGVsZW1lbnQpLmdldChrZXkpIHx8IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICByZW1vdmUoZWxlbWVudCwga2V5KSB7XG4gICAgICBpZiAoIWVsZW1lbnRNYXAuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5zdGFuY2VNYXAgPSBlbGVtZW50TWFwLmdldChlbGVtZW50KTtcbiAgICAgIGluc3RhbmNlTWFwLmRlbGV0ZShrZXkpOyAvLyBmcmVlIHVwIGVsZW1lbnQgcmVmZXJlbmNlcyBpZiB0aGVyZSBhcmUgbm8gaW5zdGFuY2VzIGxlZnQgZm9yIGFuIGVsZW1lbnRcblxuICAgICAgaWYgKGluc3RhbmNlTWFwLnNpemUgPT09IDApIHtcbiAgICAgICAgZWxlbWVudE1hcC5kZWxldGUoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gIH07XG5cbiAgcmV0dXJuIGRhdGE7XG5cbn0pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGEuanMubWFwXG4iLCIvKiFcbiAgKiBCb290c3RyYXAgZXZlbnQtaGFuZGxlci5qcyB2NS4yLjMgKGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS8pXG4gICogQ29weXJpZ2h0IDIwMTEtMjAyMiBUaGUgQm9vdHN0cmFwIEF1dGhvcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ncmFwaHMvY29udHJpYnV0b3JzKVxuICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJy4uL3V0aWwvaW5kZXgnKSkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWycuLi91dGlsL2luZGV4J10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkV2ZW50SGFuZGxlciA9IGZhY3RvcnkoZ2xvYmFsLkluZGV4KSk7XG59KSh0aGlzLCAoZnVuY3Rpb24gKGluZGV4KSB7ICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiBkb20vZXZlbnQtaGFuZGxlci5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIC8qKlxuICAgKiBDb25zdGFudHNcbiAgICovXG5cbiAgY29uc3QgbmFtZXNwYWNlUmVnZXggPSAvW14uXSooPz1cXC4uKilcXC58LiovO1xuICBjb25zdCBzdHJpcE5hbWVSZWdleCA9IC9cXC4uKi87XG4gIGNvbnN0IHN0cmlwVWlkUmVnZXggPSAvOjpcXGQrJC87XG4gIGNvbnN0IGV2ZW50UmVnaXN0cnkgPSB7fTsgLy8gRXZlbnRzIHN0b3JhZ2VcblxuICBsZXQgdWlkRXZlbnQgPSAxO1xuICBjb25zdCBjdXN0b21FdmVudHMgPSB7XG4gICAgbW91c2VlbnRlcjogJ21vdXNlb3ZlcicsXG4gICAgbW91c2VsZWF2ZTogJ21vdXNlb3V0J1xuICB9O1xuICBjb25zdCBuYXRpdmVFdmVudHMgPSBuZXcgU2V0KFsnY2xpY2snLCAnZGJsY2xpY2snLCAnbW91c2V1cCcsICdtb3VzZWRvd24nLCAnY29udGV4dG1lbnUnLCAnbW91c2V3aGVlbCcsICdET01Nb3VzZVNjcm9sbCcsICdtb3VzZW92ZXInLCAnbW91c2VvdXQnLCAnbW91c2Vtb3ZlJywgJ3NlbGVjdHN0YXJ0JywgJ3NlbGVjdGVuZCcsICdrZXlkb3duJywgJ2tleXByZXNzJywgJ2tleXVwJywgJ29yaWVudGF0aW9uY2hhbmdlJywgJ3RvdWNoc3RhcnQnLCAndG91Y2htb3ZlJywgJ3RvdWNoZW5kJywgJ3RvdWNoY2FuY2VsJywgJ3BvaW50ZXJkb3duJywgJ3BvaW50ZXJtb3ZlJywgJ3BvaW50ZXJ1cCcsICdwb2ludGVybGVhdmUnLCAncG9pbnRlcmNhbmNlbCcsICdnZXN0dXJlc3RhcnQnLCAnZ2VzdHVyZWNoYW5nZScsICdnZXN0dXJlZW5kJywgJ2ZvY3VzJywgJ2JsdXInLCAnY2hhbmdlJywgJ3Jlc2V0JywgJ3NlbGVjdCcsICdzdWJtaXQnLCAnZm9jdXNpbicsICdmb2N1c291dCcsICdsb2FkJywgJ3VubG9hZCcsICdiZWZvcmV1bmxvYWQnLCAncmVzaXplJywgJ21vdmUnLCAnRE9NQ29udGVudExvYWRlZCcsICdyZWFkeXN0YXRlY2hhbmdlJywgJ2Vycm9yJywgJ2Fib3J0JywgJ3Njcm9sbCddKTtcbiAgLyoqXG4gICAqIFByaXZhdGUgbWV0aG9kc1xuICAgKi9cblxuICBmdW5jdGlvbiBtYWtlRXZlbnRVaWQoZWxlbWVudCwgdWlkKSB7XG4gICAgcmV0dXJuIHVpZCAmJiBgJHt1aWR9Ojoke3VpZEV2ZW50Kyt9YCB8fCBlbGVtZW50LnVpZEV2ZW50IHx8IHVpZEV2ZW50Kys7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFbGVtZW50RXZlbnRzKGVsZW1lbnQpIHtcbiAgICBjb25zdCB1aWQgPSBtYWtlRXZlbnRVaWQoZWxlbWVudCk7XG4gICAgZWxlbWVudC51aWRFdmVudCA9IHVpZDtcbiAgICBldmVudFJlZ2lzdHJ5W3VpZF0gPSBldmVudFJlZ2lzdHJ5W3VpZF0gfHwge307XG4gICAgcmV0dXJuIGV2ZW50UmVnaXN0cnlbdWlkXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJvb3RzdHJhcEhhbmRsZXIoZWxlbWVudCwgZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlcihldmVudCkge1xuICAgICAgaHlkcmF0ZU9iaihldmVudCwge1xuICAgICAgICBkZWxlZ2F0ZVRhcmdldDogZWxlbWVudFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChoYW5kbGVyLm9uZU9mZikge1xuICAgICAgICBFdmVudEhhbmRsZXIub2ZmKGVsZW1lbnQsIGV2ZW50LnR5cGUsIGZuKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuLmFwcGx5KGVsZW1lbnQsIFtldmVudF0pO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBib290c3RyYXBEZWxlZ2F0aW9uSGFuZGxlcihlbGVtZW50LCBzZWxlY3RvciwgZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlcihldmVudCkge1xuICAgICAgY29uc3QgZG9tRWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXG4gICAgICBmb3IgKGxldCB7XG4gICAgICAgIHRhcmdldFxuICAgICAgfSA9IGV2ZW50OyB0YXJnZXQgJiYgdGFyZ2V0ICE9PSB0aGlzOyB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGRvbUVsZW1lbnQgb2YgZG9tRWxlbWVudHMpIHtcbiAgICAgICAgICBpZiAoZG9tRWxlbWVudCAhPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBoeWRyYXRlT2JqKGV2ZW50LCB7XG4gICAgICAgICAgICBkZWxlZ2F0ZVRhcmdldDogdGFyZ2V0XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoaGFuZGxlci5vbmVPZmYpIHtcbiAgICAgICAgICAgIEV2ZW50SGFuZGxlci5vZmYoZWxlbWVudCwgZXZlbnQudHlwZSwgc2VsZWN0b3IsIGZuKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGFyZ2V0LCBbZXZlbnRdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kSGFuZGxlcihldmVudHMsIGNhbGxhYmxlLCBkZWxlZ2F0aW9uU2VsZWN0b3IgPSBudWxsKSB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZXZlbnRzKS5maW5kKGV2ZW50ID0+IGV2ZW50LmNhbGxhYmxlID09PSBjYWxsYWJsZSAmJiBldmVudC5kZWxlZ2F0aW9uU2VsZWN0b3IgPT09IGRlbGVnYXRpb25TZWxlY3Rvcik7XG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVQYXJhbWV0ZXJzKG9yaWdpbmFsVHlwZUV2ZW50LCBoYW5kbGVyLCBkZWxlZ2F0aW9uRnVuY3Rpb24pIHtcbiAgICBjb25zdCBpc0RlbGVnYXRlZCA9IHR5cGVvZiBoYW5kbGVyID09PSAnc3RyaW5nJzsgLy8gdG9kbzogdG9vbHRpcCBwYXNzZXMgYGZhbHNlYCBpbnN0ZWFkIG9mIHNlbGVjdG9yLCBzbyB3ZSBuZWVkIHRvIGNoZWNrXG5cbiAgICBjb25zdCBjYWxsYWJsZSA9IGlzRGVsZWdhdGVkID8gZGVsZWdhdGlvbkZ1bmN0aW9uIDogaGFuZGxlciB8fCBkZWxlZ2F0aW9uRnVuY3Rpb247XG4gICAgbGV0IHR5cGVFdmVudCA9IGdldFR5cGVFdmVudChvcmlnaW5hbFR5cGVFdmVudCk7XG5cbiAgICBpZiAoIW5hdGl2ZUV2ZW50cy5oYXModHlwZUV2ZW50KSkge1xuICAgICAgdHlwZUV2ZW50ID0gb3JpZ2luYWxUeXBlRXZlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtpc0RlbGVnYXRlZCwgY2FsbGFibGUsIHR5cGVFdmVudF07XG4gIH1cblxuICBmdW5jdGlvbiBhZGRIYW5kbGVyKGVsZW1lbnQsIG9yaWdpbmFsVHlwZUV2ZW50LCBoYW5kbGVyLCBkZWxlZ2F0aW9uRnVuY3Rpb24sIG9uZU9mZikge1xuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxUeXBlRXZlbnQgIT09ICdzdHJpbmcnIHx8ICFlbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IFtpc0RlbGVnYXRlZCwgY2FsbGFibGUsIHR5cGVFdmVudF0gPSBub3JtYWxpemVQYXJhbWV0ZXJzKG9yaWdpbmFsVHlwZUV2ZW50LCBoYW5kbGVyLCBkZWxlZ2F0aW9uRnVuY3Rpb24pOyAvLyBpbiBjYXNlIG9mIG1vdXNlZW50ZXIgb3IgbW91c2VsZWF2ZSB3cmFwIHRoZSBoYW5kbGVyIHdpdGhpbiBhIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGZvciBpdHMgRE9NIHBvc2l0aW9uXG4gICAgLy8gdGhpcyBwcmV2ZW50cyB0aGUgaGFuZGxlciBmcm9tIGJlaW5nIGRpc3BhdGNoZWQgdGhlIHNhbWUgd2F5IGFzIG1vdXNlb3ZlciBvciBtb3VzZW91dCBkb2VzXG5cbiAgICBpZiAob3JpZ2luYWxUeXBlRXZlbnQgaW4gY3VzdG9tRXZlbnRzKSB7XG4gICAgICBjb25zdCB3cmFwRnVuY3Rpb24gPSBmbiA9PiB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoIWV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgZXZlbnQucmVsYXRlZFRhcmdldCAhPT0gZXZlbnQuZGVsZWdhdGVUYXJnZXQgJiYgIWV2ZW50LmRlbGVnYXRlVGFyZ2V0LmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgY2FsbGFibGUgPSB3cmFwRnVuY3Rpb24oY2FsbGFibGUpO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50cyA9IGdldEVsZW1lbnRFdmVudHMoZWxlbWVudCk7XG4gICAgY29uc3QgaGFuZGxlcnMgPSBldmVudHNbdHlwZUV2ZW50XSB8fCAoZXZlbnRzW3R5cGVFdmVudF0gPSB7fSk7XG4gICAgY29uc3QgcHJldmlvdXNGdW5jdGlvbiA9IGZpbmRIYW5kbGVyKGhhbmRsZXJzLCBjYWxsYWJsZSwgaXNEZWxlZ2F0ZWQgPyBoYW5kbGVyIDogbnVsbCk7XG5cbiAgICBpZiAocHJldmlvdXNGdW5jdGlvbikge1xuICAgICAgcHJldmlvdXNGdW5jdGlvbi5vbmVPZmYgPSBwcmV2aW91c0Z1bmN0aW9uLm9uZU9mZiAmJiBvbmVPZmY7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdWlkID0gbWFrZUV2ZW50VWlkKGNhbGxhYmxlLCBvcmlnaW5hbFR5cGVFdmVudC5yZXBsYWNlKG5hbWVzcGFjZVJlZ2V4LCAnJykpO1xuICAgIGNvbnN0IGZuID0gaXNEZWxlZ2F0ZWQgPyBib290c3RyYXBEZWxlZ2F0aW9uSGFuZGxlcihlbGVtZW50LCBoYW5kbGVyLCBjYWxsYWJsZSkgOiBib290c3RyYXBIYW5kbGVyKGVsZW1lbnQsIGNhbGxhYmxlKTtcbiAgICBmbi5kZWxlZ2F0aW9uU2VsZWN0b3IgPSBpc0RlbGVnYXRlZCA/IGhhbmRsZXIgOiBudWxsO1xuICAgIGZuLmNhbGxhYmxlID0gY2FsbGFibGU7XG4gICAgZm4ub25lT2ZmID0gb25lT2ZmO1xuICAgIGZuLnVpZEV2ZW50ID0gdWlkO1xuICAgIGhhbmRsZXJzW3VpZF0gPSBmbjtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZUV2ZW50LCBmbiwgaXNEZWxlZ2F0ZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlSGFuZGxlcihlbGVtZW50LCBldmVudHMsIHR5cGVFdmVudCwgaGFuZGxlciwgZGVsZWdhdGlvblNlbGVjdG9yKSB7XG4gICAgY29uc3QgZm4gPSBmaW5kSGFuZGxlcihldmVudHNbdHlwZUV2ZW50XSwgaGFuZGxlciwgZGVsZWdhdGlvblNlbGVjdG9yKTtcblxuICAgIGlmICghZm4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZUV2ZW50LCBmbiwgQm9vbGVhbihkZWxlZ2F0aW9uU2VsZWN0b3IpKTtcbiAgICBkZWxldGUgZXZlbnRzW3R5cGVFdmVudF1bZm4udWlkRXZlbnRdO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTmFtZXNwYWNlZEhhbmRsZXJzKGVsZW1lbnQsIGV2ZW50cywgdHlwZUV2ZW50LCBuYW1lc3BhY2UpIHtcbiAgICBjb25zdCBzdG9yZUVsZW1lbnRFdmVudCA9IGV2ZW50c1t0eXBlRXZlbnRdIHx8IHt9O1xuXG4gICAgZm9yIChjb25zdCBoYW5kbGVyS2V5IG9mIE9iamVjdC5rZXlzKHN0b3JlRWxlbWVudEV2ZW50KSkge1xuICAgICAgaWYgKGhhbmRsZXJLZXkuaW5jbHVkZXMobmFtZXNwYWNlKSkge1xuICAgICAgICBjb25zdCBldmVudCA9IHN0b3JlRWxlbWVudEV2ZW50W2hhbmRsZXJLZXldO1xuICAgICAgICByZW1vdmVIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cywgdHlwZUV2ZW50LCBldmVudC5jYWxsYWJsZSwgZXZlbnQuZGVsZWdhdGlvblNlbGVjdG9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUeXBlRXZlbnQoZXZlbnQpIHtcbiAgICAvLyBhbGxvdyB0byBnZXQgdGhlIG5hdGl2ZSBldmVudHMgZnJvbSBuYW1lc3BhY2VkIGV2ZW50cyAoJ2NsaWNrLmJzLmJ1dHRvbicgLS0+ICdjbGljaycpXG4gICAgZXZlbnQgPSBldmVudC5yZXBsYWNlKHN0cmlwTmFtZVJlZ2V4LCAnJyk7XG4gICAgcmV0dXJuIGN1c3RvbUV2ZW50c1tldmVudF0gfHwgZXZlbnQ7XG4gIH1cblxuICBjb25zdCBFdmVudEhhbmRsZXIgPSB7XG4gICAgb24oZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIGRlbGVnYXRpb25GdW5jdGlvbikge1xuICAgICAgYWRkSGFuZGxlcihlbGVtZW50LCBldmVudCwgaGFuZGxlciwgZGVsZWdhdGlvbkZ1bmN0aW9uLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIG9uZShlbGVtZW50LCBldmVudCwgaGFuZGxlciwgZGVsZWdhdGlvbkZ1bmN0aW9uKSB7XG4gICAgICBhZGRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBkZWxlZ2F0aW9uRnVuY3Rpb24sIHRydWUpO1xuICAgIH0sXG5cbiAgICBvZmYoZWxlbWVudCwgb3JpZ2luYWxUeXBlRXZlbnQsIGhhbmRsZXIsIGRlbGVnYXRpb25GdW5jdGlvbikge1xuICAgICAgaWYgKHR5cGVvZiBvcmlnaW5hbFR5cGVFdmVudCAhPT0gJ3N0cmluZycgfHwgIWVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBbaXNEZWxlZ2F0ZWQsIGNhbGxhYmxlLCB0eXBlRXZlbnRdID0gbm9ybWFsaXplUGFyYW1ldGVycyhvcmlnaW5hbFR5cGVFdmVudCwgaGFuZGxlciwgZGVsZWdhdGlvbkZ1bmN0aW9uKTtcbiAgICAgIGNvbnN0IGluTmFtZXNwYWNlID0gdHlwZUV2ZW50ICE9PSBvcmlnaW5hbFR5cGVFdmVudDtcbiAgICAgIGNvbnN0IGV2ZW50cyA9IGdldEVsZW1lbnRFdmVudHMoZWxlbWVudCk7XG4gICAgICBjb25zdCBzdG9yZUVsZW1lbnRFdmVudCA9IGV2ZW50c1t0eXBlRXZlbnRdIHx8IHt9O1xuICAgICAgY29uc3QgaXNOYW1lc3BhY2UgPSBvcmlnaW5hbFR5cGVFdmVudC5zdGFydHNXaXRoKCcuJyk7XG5cbiAgICAgIGlmICh0eXBlb2YgY2FsbGFibGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFNpbXBsZXN0IGNhc2U6IGhhbmRsZXIgaXMgcGFzc2VkLCByZW1vdmUgdGhhdCBsaXN0ZW5lciBPTkxZLlxuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHN0b3JlRWxlbWVudEV2ZW50KS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZW1vdmVIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cywgdHlwZUV2ZW50LCBjYWxsYWJsZSwgaXNEZWxlZ2F0ZWQgPyBoYW5kbGVyIDogbnVsbCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTmFtZXNwYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudEV2ZW50IG9mIE9iamVjdC5rZXlzKGV2ZW50cykpIHtcbiAgICAgICAgICByZW1vdmVOYW1lc3BhY2VkSGFuZGxlcnMoZWxlbWVudCwgZXZlbnRzLCBlbGVtZW50RXZlbnQsIG9yaWdpbmFsVHlwZUV2ZW50LnNsaWNlKDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGtleUhhbmRsZXJzIG9mIE9iamVjdC5rZXlzKHN0b3JlRWxlbWVudEV2ZW50KSkge1xuICAgICAgICBjb25zdCBoYW5kbGVyS2V5ID0ga2V5SGFuZGxlcnMucmVwbGFjZShzdHJpcFVpZFJlZ2V4LCAnJyk7XG5cbiAgICAgICAgaWYgKCFpbk5hbWVzcGFjZSB8fCBvcmlnaW5hbFR5cGVFdmVudC5pbmNsdWRlcyhoYW5kbGVyS2V5KSkge1xuICAgICAgICAgIGNvbnN0IGV2ZW50ID0gc3RvcmVFbGVtZW50RXZlbnRba2V5SGFuZGxlcnNdO1xuICAgICAgICAgIHJlbW92ZUhhbmRsZXIoZWxlbWVudCwgZXZlbnRzLCB0eXBlRXZlbnQsIGV2ZW50LmNhbGxhYmxlLCBldmVudC5kZWxlZ2F0aW9uU2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRyaWdnZXIoZWxlbWVudCwgZXZlbnQsIGFyZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgZXZlbnQgIT09ICdzdHJpbmcnIHx8ICFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCAkID0gaW5kZXguZ2V0alF1ZXJ5KCk7XG4gICAgICBjb25zdCB0eXBlRXZlbnQgPSBnZXRUeXBlRXZlbnQoZXZlbnQpO1xuICAgICAgY29uc3QgaW5OYW1lc3BhY2UgPSBldmVudCAhPT0gdHlwZUV2ZW50O1xuICAgICAgbGV0IGpRdWVyeUV2ZW50ID0gbnVsbDtcbiAgICAgIGxldCBidWJibGVzID0gdHJ1ZTtcbiAgICAgIGxldCBuYXRpdmVEaXNwYXRjaCA9IHRydWU7XG4gICAgICBsZXQgZGVmYXVsdFByZXZlbnRlZCA9IGZhbHNlO1xuXG4gICAgICBpZiAoaW5OYW1lc3BhY2UgJiYgJCkge1xuICAgICAgICBqUXVlcnlFdmVudCA9ICQuRXZlbnQoZXZlbnQsIGFyZ3MpO1xuICAgICAgICAkKGVsZW1lbnQpLnRyaWdnZXIoalF1ZXJ5RXZlbnQpO1xuICAgICAgICBidWJibGVzID0gIWpRdWVyeUV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCk7XG4gICAgICAgIG5hdGl2ZURpc3BhdGNoID0gIWpRdWVyeUV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCk7XG4gICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQgPSBqUXVlcnlFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcbiAgICAgIH1cblxuICAgICAgbGV0IGV2dCA9IG5ldyBFdmVudChldmVudCwge1xuICAgICAgICBidWJibGVzLFxuICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGV2dCA9IGh5ZHJhdGVPYmooZXZ0LCBhcmdzKTtcblxuICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChuYXRpdmVEaXNwYXRjaCkge1xuICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2dC5kZWZhdWx0UHJldmVudGVkICYmIGpRdWVyeUV2ZW50KSB7XG4gICAgICAgIGpRdWVyeUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBldnQ7XG4gICAgfVxuXG4gIH07XG5cbiAgZnVuY3Rpb24gaHlkcmF0ZU9iaihvYmosIG1ldGEpIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhtZXRhIHx8IHt9KSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0gY2F0Y2ggKF91bnVzZWQpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXG4gICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgcmV0dXJuIEV2ZW50SGFuZGxlcjtcblxufSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnQtaGFuZGxlci5qcy5tYXBcbiIsIi8qIVxuICAqIEJvb3RzdHJhcCBtYW5pcHVsYXRvci5qcyB2NS4yLjMgKGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS8pXG4gICogQ29weXJpZ2h0IDIwMTEtMjAyMiBUaGUgQm9vdHN0cmFwIEF1dGhvcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ncmFwaHMvY29udHJpYnV0b3JzKVxuICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuTWFuaXB1bGF0b3IgPSBmYWN0b3J5KCkpO1xufSkodGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBCb290c3RyYXAgKHY1LjIuMyk6IGRvbS9tYW5pcHVsYXRvci5qc1xuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZURhdGEodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID09PSBOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09ICdudWxsJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG4gICAgfSBjYXRjaCAoX3VudXNlZCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZURhdGFLZXkoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5yZXBsYWNlKC9bQS1aXS9nLCBjaHIgPT4gYC0ke2Noci50b0xvd2VyQ2FzZSgpfWApO1xuICB9XG5cbiAgY29uc3QgTWFuaXB1bGF0b3IgPSB7XG4gICAgc2V0RGF0YUF0dHJpYnV0ZShlbGVtZW50LCBrZXksIHZhbHVlKSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShgZGF0YS1icy0ke25vcm1hbGl6ZURhdGFLZXkoa2V5KX1gLCB2YWx1ZSk7XG4gICAgfSxcblxuICAgIHJlbW92ZURhdGFBdHRyaWJ1dGUoZWxlbWVudCwga2V5KSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShgZGF0YS1icy0ke25vcm1hbGl6ZURhdGFLZXkoa2V5KX1gKTtcbiAgICB9LFxuXG4gICAgZ2V0RGF0YUF0dHJpYnV0ZXMoZWxlbWVudCkge1xuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgY29uc3QgYnNLZXlzID0gT2JqZWN0LmtleXMoZWxlbWVudC5kYXRhc2V0KS5maWx0ZXIoa2V5ID0+IGtleS5zdGFydHNXaXRoKCdicycpICYmICFrZXkuc3RhcnRzV2l0aCgnYnNDb25maWcnKSk7XG5cbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIGJzS2V5cykge1xuICAgICAgICBsZXQgcHVyZUtleSA9IGtleS5yZXBsYWNlKC9eYnMvLCAnJyk7XG4gICAgICAgIHB1cmVLZXkgPSBwdXJlS2V5LmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgcHVyZUtleS5zbGljZSgxLCBwdXJlS2V5Lmxlbmd0aCk7XG4gICAgICAgIGF0dHJpYnV0ZXNbcHVyZUtleV0gPSBub3JtYWxpemVEYXRhKGVsZW1lbnQuZGF0YXNldFtrZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgfSxcblxuICAgIGdldERhdGFBdHRyaWJ1dGUoZWxlbWVudCwga2V5KSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplRGF0YShlbGVtZW50LmdldEF0dHJpYnV0ZShgZGF0YS1icy0ke25vcm1hbGl6ZURhdGFLZXkoa2V5KX1gKSk7XG4gICAgfVxuXG4gIH07XG5cbiAgcmV0dXJuIE1hbmlwdWxhdG9yO1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYW5pcHVsYXRvci5qcy5tYXBcbiIsIi8qIVxuICAqIEJvb3RzdHJhcCBzZWxlY3Rvci1lbmdpbmUuanMgdjUuMi4zIChodHRwczovL2dldGJvb3RzdHJhcC5jb20vKVxuICAqIENvcHlyaWdodCAyMDExLTIwMjIgVGhlIEJvb3RzdHJhcCBBdXRob3JzIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvZ3JhcGhzL2NvbnRyaWJ1dG9ycylcbiAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCcuLi91dGlsL2luZGV4JykpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnLi4vdXRpbC9pbmRleCddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5TZWxlY3RvckVuZ2luZSA9IGZhY3RvcnkoZ2xvYmFsLkluZGV4KSk7XG59KSh0aGlzLCAoZnVuY3Rpb24gKGluZGV4KSB7ICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiBkb20vc2VsZWN0b3ItZW5naW5lLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBTZWxlY3RvckVuZ2luZSA9IHtcbiAgICBmaW5kKHNlbGVjdG9yLCBlbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gW10uY29uY2F0KC4uLkVsZW1lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwuY2FsbChlbGVtZW50LCBzZWxlY3RvcikpO1xuICAgIH0sXG5cbiAgICBmaW5kT25lKHNlbGVjdG9yLCBlbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gRWxlbWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3Rvci5jYWxsKGVsZW1lbnQsIHNlbGVjdG9yKTtcbiAgICB9LFxuXG4gICAgY2hpbGRyZW4oZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiBbXS5jb25jYXQoLi4uZWxlbWVudC5jaGlsZHJlbikuZmlsdGVyKGNoaWxkID0+IGNoaWxkLm1hdGNoZXMoc2VsZWN0b3IpKTtcbiAgICB9LFxuXG4gICAgcGFyZW50cyhlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgICAgY29uc3QgcGFyZW50cyA9IFtdO1xuICAgICAgbGV0IGFuY2VzdG9yID0gZWxlbWVudC5wYXJlbnROb2RlLmNsb3Nlc3Qoc2VsZWN0b3IpO1xuXG4gICAgICB3aGlsZSAoYW5jZXN0b3IpIHtcbiAgICAgICAgcGFyZW50cy5wdXNoKGFuY2VzdG9yKTtcbiAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnROb2RlLmNsb3Nlc3Qoc2VsZWN0b3IpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9LFxuXG4gICAgcHJldihlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgICAgbGV0IHByZXZpb3VzID0gZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXG4gICAgICB3aGlsZSAocHJldmlvdXMpIHtcbiAgICAgICAgaWYgKHByZXZpb3VzLm1hdGNoZXMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgcmV0dXJuIFtwcmV2aW91c107XG4gICAgICAgIH1cblxuICAgICAgICBwcmV2aW91cyA9IHByZXZpb3VzLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9LFxuXG4gICAgLy8gVE9ETzogdGhpcyBpcyBub3cgdW51c2VkOyByZW1vdmUgbGF0ZXIgYWxvbmcgd2l0aCBwcmV2KClcbiAgICBuZXh0KGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgICBsZXQgbmV4dCA9IGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICB3aGlsZSAobmV4dCkge1xuICAgICAgICBpZiAobmV4dC5tYXRjaGVzKHNlbGVjdG9yKSkge1xuICAgICAgICAgIHJldHVybiBbbmV4dF07XG4gICAgICAgIH1cblxuICAgICAgICBuZXh0ID0gbmV4dC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9LFxuXG4gICAgZm9jdXNhYmxlQ2hpbGRyZW4oZWxlbWVudCkge1xuICAgICAgY29uc3QgZm9jdXNhYmxlcyA9IFsnYScsICdidXR0b24nLCAnaW5wdXQnLCAndGV4dGFyZWEnLCAnc2VsZWN0JywgJ2RldGFpbHMnLCAnW3RhYmluZGV4XScsICdbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXSddLm1hcChzZWxlY3RvciA9PiBgJHtzZWxlY3Rvcn06bm90KFt0YWJpbmRleF49XCItXCJdKWApLmpvaW4oJywnKTtcbiAgICAgIHJldHVybiB0aGlzLmZpbmQoZm9jdXNhYmxlcywgZWxlbWVudCkuZmlsdGVyKGVsID0+ICFpbmRleC5pc0Rpc2FibGVkKGVsKSAmJiBpbmRleC5pc1Zpc2libGUoZWwpKTtcbiAgICB9XG5cbiAgfTtcblxuICByZXR1cm4gU2VsZWN0b3JFbmdpbmU7XG5cbn0pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlbGVjdG9yLWVuZ2luZS5qcy5tYXBcbiIsIi8qIVxuICAqIEJvb3RzdHJhcCBjb25maWcuanMgdjUuMi4zIChodHRwczovL2dldGJvb3RzdHJhcC5jb20vKVxuICAqIENvcHlyaWdodCAyMDExLTIwMjIgVGhlIEJvb3RzdHJhcCBBdXRob3JzIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvZ3JhcGhzL2NvbnRyaWJ1dG9ycylcbiAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCcuL2luZGV4JyksIHJlcXVpcmUoJy4uL2RvbS9tYW5pcHVsYXRvcicpKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJy4vaW5kZXgnLCAnLi4vZG9tL21hbmlwdWxhdG9yJ10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkNvbmZpZyA9IGZhY3RvcnkoZ2xvYmFsLkluZGV4LCBnbG9iYWwuTWFuaXB1bGF0b3IpKTtcbn0pKHRoaXMsIChmdW5jdGlvbiAoaW5kZXgsIE1hbmlwdWxhdG9yKSB7ICd1c2Ugc3RyaWN0JztcblxuICBjb25zdCBfaW50ZXJvcERlZmF1bHRMZWdhY3kgPSBlID0+IGUgJiYgdHlwZW9mIGUgPT09ICdvYmplY3QnICYmICdkZWZhdWx0JyBpbiBlID8gZSA6IHsgZGVmYXVsdDogZSB9O1xuXG4gIGNvbnN0IE1hbmlwdWxhdG9yX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdExlZ2FjeShNYW5pcHVsYXRvcik7XG5cbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEJvb3RzdHJhcCAodjUuMi4zKTogdXRpbC9jb25maWcuanNcbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYWluL0xJQ0VOU0UpXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBDb25maWcge1xuICAgIC8vIEdldHRlcnNcbiAgICBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IE5BTUUoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBoYXZlIHRvIGltcGxlbWVudCB0aGUgc3RhdGljIG1ldGhvZCBcIk5BTUVcIiwgZm9yIGVhY2ggY29tcG9uZW50IScpO1xuICAgIH1cblxuICAgIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICBjb25maWcgPSB0aGlzLl9tZXJnZUNvbmZpZ09iaihjb25maWcpO1xuICAgICAgY29uZmlnID0gdGhpcy5fY29uZmlnQWZ0ZXJNZXJnZShjb25maWcpO1xuXG4gICAgICB0aGlzLl90eXBlQ2hlY2tDb25maWcoY29uZmlnKTtcblxuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG5cbiAgICBfY29uZmlnQWZ0ZXJNZXJnZShjb25maWcpIHtcbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgX21lcmdlQ29uZmlnT2JqKGNvbmZpZywgZWxlbWVudCkge1xuICAgICAgY29uc3QganNvbkNvbmZpZyA9IGluZGV4LmlzRWxlbWVudChlbGVtZW50KSA/IE1hbmlwdWxhdG9yX19kZWZhdWx0LmRlZmF1bHQuZ2V0RGF0YUF0dHJpYnV0ZShlbGVtZW50LCAnY29uZmlnJykgOiB7fTsgLy8gdHJ5IHRvIHBhcnNlXG5cbiAgICAgIHJldHVybiB7IC4uLnRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCxcbiAgICAgICAgLi4uKHR5cGVvZiBqc29uQ29uZmlnID09PSAnb2JqZWN0JyA/IGpzb25Db25maWcgOiB7fSksXG4gICAgICAgIC4uLihpbmRleC5pc0VsZW1lbnQoZWxlbWVudCkgPyBNYW5pcHVsYXRvcl9fZGVmYXVsdC5kZWZhdWx0LmdldERhdGFBdHRyaWJ1dGVzKGVsZW1lbnQpIDoge30pLFxuICAgICAgICAuLi4odHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcgPyBjb25maWcgOiB7fSlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgX3R5cGVDaGVja0NvbmZpZyhjb25maWcsIGNvbmZpZ1R5cGVzID0gdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSkge1xuICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiBPYmplY3Qua2V5cyhjb25maWdUeXBlcykpIHtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRUeXBlcyA9IGNvbmZpZ1R5cGVzW3Byb3BlcnR5XTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdbcHJvcGVydHldO1xuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSBpbmRleC5pc0VsZW1lbnQodmFsdWUpID8gJ2VsZW1lbnQnIDogaW5kZXgudG9UeXBlKHZhbHVlKTtcblxuICAgICAgICBpZiAoIW5ldyBSZWdFeHAoZXhwZWN0ZWRUeXBlcykudGVzdCh2YWx1ZVR5cGUpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHt0aGlzLmNvbnN0cnVjdG9yLk5BTUUudG9VcHBlckNhc2UoKX06IE9wdGlvbiBcIiR7cHJvcGVydHl9XCIgcHJvdmlkZWQgdHlwZSBcIiR7dmFsdWVUeXBlfVwiIGJ1dCBleHBlY3RlZCB0eXBlIFwiJHtleHBlY3RlZFR5cGVzfVwiLmApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gQ29uZmlnO1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwXG4iLCIvKiFcbiAgKiBCb290c3RyYXAgaW5kZXguanMgdjUuMi4zIChodHRwczovL2dldGJvb3RzdHJhcC5jb20vKVxuICAqIENvcHlyaWdodCAyMDExLTIwMjIgVGhlIEJvb3RzdHJhcCBBdXRob3JzIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvZ3JhcGhzL2NvbnRyaWJ1dG9ycylcbiAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwuSW5kZXggPSB7fSkpO1xufSkodGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiB1dGlsL2luZGV4LmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgY29uc3QgTUFYX1VJRCA9IDEwMDAwMDA7XG4gIGNvbnN0IE1JTExJU0VDT05EU19NVUxUSVBMSUVSID0gMTAwMDtcbiAgY29uc3QgVFJBTlNJVElPTl9FTkQgPSAndHJhbnNpdGlvbmVuZCc7IC8vIFNob3V0LW91dCBBbmd1cyBDcm9sbCAoaHR0cHM6Ly9nb28uZ2wvcHh3UUdwKVxuXG4gIGNvbnN0IHRvVHlwZSA9IG9iamVjdCA9PiB7XG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGAke29iamVjdH1gO1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KS5tYXRjaCgvXFxzKFthLXpdKykvaSlbMV0udG9Mb3dlckNhc2UoKTtcbiAgfTtcbiAgLyoqXG4gICAqIFB1YmxpYyBVdGlsIEFQSVxuICAgKi9cblxuXG4gIGNvbnN0IGdldFVJRCA9IHByZWZpeCA9PiB7XG4gICAgZG8ge1xuICAgICAgcHJlZml4ICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1BWF9VSUQpO1xuICAgIH0gd2hpbGUgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZWZpeCkpO1xuXG4gICAgcmV0dXJuIHByZWZpeDtcbiAgfTtcblxuICBjb25zdCBnZXRTZWxlY3RvciA9IGVsZW1lbnQgPT4ge1xuICAgIGxldCBzZWxlY3RvciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWJzLXRhcmdldCcpO1xuXG4gICAgaWYgKCFzZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gJyMnKSB7XG4gICAgICBsZXQgaHJlZkF0dHJpYnV0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdocmVmJyk7IC8vIFRoZSBvbmx5IHZhbGlkIGNvbnRlbnQgdGhhdCBjb3VsZCBkb3VibGUgYXMgYSBzZWxlY3RvciBhcmUgSURzIG9yIGNsYXNzZXMsXG4gICAgICAvLyBzbyBldmVyeXRoaW5nIHN0YXJ0aW5nIHdpdGggYCNgIG9yIGAuYC4gSWYgYSBcInJlYWxcIiBVUkwgaXMgdXNlZCBhcyB0aGUgc2VsZWN0b3IsXG4gICAgICAvLyBgZG9jdW1lbnQucXVlcnlTZWxlY3RvcmAgd2lsbCByaWdodGZ1bGx5IGNvbXBsYWluIGl0IGlzIGludmFsaWQuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2lzc3Vlcy8zMjI3M1xuXG4gICAgICBpZiAoIWhyZWZBdHRyaWJ1dGUgfHwgIWhyZWZBdHRyaWJ1dGUuaW5jbHVkZXMoJyMnKSAmJiAhaHJlZkF0dHJpYnV0ZS5zdGFydHNXaXRoKCcuJykpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IC8vIEp1c3QgaW4gY2FzZSBzb21lIENNUyBwdXRzIG91dCBhIGZ1bGwgVVJMIHdpdGggdGhlIGFuY2hvciBhcHBlbmRlZFxuXG5cbiAgICAgIGlmIChocmVmQXR0cmlidXRlLmluY2x1ZGVzKCcjJykgJiYgIWhyZWZBdHRyaWJ1dGUuc3RhcnRzV2l0aCgnIycpKSB7XG4gICAgICAgIGhyZWZBdHRyaWJ1dGUgPSBgIyR7aHJlZkF0dHJpYnV0ZS5zcGxpdCgnIycpWzFdfWA7XG4gICAgICB9XG5cbiAgICAgIHNlbGVjdG9yID0gaHJlZkF0dHJpYnV0ZSAmJiBocmVmQXR0cmlidXRlICE9PSAnIycgPyBocmVmQXR0cmlidXRlLnRyaW0oKSA6IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdG9yO1xuICB9O1xuXG4gIGNvbnN0IGdldFNlbGVjdG9yRnJvbUVsZW1lbnQgPSBlbGVtZW50ID0+IHtcbiAgICBjb25zdCBzZWxlY3RvciA9IGdldFNlbGVjdG9yKGVsZW1lbnQpO1xuXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgPyBzZWxlY3RvciA6IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgY29uc3QgZ2V0RWxlbWVudEZyb21TZWxlY3RvciA9IGVsZW1lbnQgPT4ge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gZ2V0U2VsZWN0b3IoZWxlbWVudCk7XG4gICAgcmV0dXJuIHNlbGVjdG9yID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgOiBudWxsO1xuICB9O1xuXG4gIGNvbnN0IGdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50ID0gZWxlbWVudCA9PiB7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IC8vIEdldCB0cmFuc2l0aW9uLWR1cmF0aW9uIG9mIHRoZSBlbGVtZW50XG5cblxuICAgIGxldCB7XG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb24sXG4gICAgICB0cmFuc2l0aW9uRGVsYXlcbiAgICB9ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgY29uc3QgZmxvYXRUcmFuc2l0aW9uRHVyYXRpb24gPSBOdW1iZXIucGFyc2VGbG9hdCh0cmFuc2l0aW9uRHVyYXRpb24pO1xuICAgIGNvbnN0IGZsb2F0VHJhbnNpdGlvbkRlbGF5ID0gTnVtYmVyLnBhcnNlRmxvYXQodHJhbnNpdGlvbkRlbGF5KTsgLy8gUmV0dXJuIDAgaWYgZWxlbWVudCBvciB0cmFuc2l0aW9uIGR1cmF0aW9uIGlzIG5vdCBmb3VuZFxuXG4gICAgaWYgKCFmbG9hdFRyYW5zaXRpb25EdXJhdGlvbiAmJiAhZmxvYXRUcmFuc2l0aW9uRGVsYXkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gLy8gSWYgbXVsdGlwbGUgZHVyYXRpb25zIGFyZSBkZWZpbmVkLCB0YWtlIHRoZSBmaXJzdFxuXG5cbiAgICB0cmFuc2l0aW9uRHVyYXRpb24gPSB0cmFuc2l0aW9uRHVyYXRpb24uc3BsaXQoJywnKVswXTtcbiAgICB0cmFuc2l0aW9uRGVsYXkgPSB0cmFuc2l0aW9uRGVsYXkuc3BsaXQoJywnKVswXTtcbiAgICByZXR1cm4gKE51bWJlci5wYXJzZUZsb2F0KHRyYW5zaXRpb25EdXJhdGlvbikgKyBOdW1iZXIucGFyc2VGbG9hdCh0cmFuc2l0aW9uRGVsYXkpKSAqIE1JTExJU0VDT05EU19NVUxUSVBMSUVSO1xuICB9O1xuXG4gIGNvbnN0IHRyaWdnZXJUcmFuc2l0aW9uRW5kID0gZWxlbWVudCA9PiB7XG4gICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChUUkFOU0lUSU9OX0VORCkpO1xuICB9O1xuXG4gIGNvbnN0IGlzRWxlbWVudCA9IG9iamVjdCA9PiB7XG4gICAgaWYgKCFvYmplY3QgfHwgdHlwZW9mIG9iamVjdCAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9iamVjdC5qcXVlcnkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvYmplY3QgPSBvYmplY3RbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGVvZiBvYmplY3Qubm9kZVR5cGUgIT09ICd1bmRlZmluZWQnO1xuICB9O1xuXG4gIGNvbnN0IGdldEVsZW1lbnQgPSBvYmplY3QgPT4ge1xuICAgIC8vIGl0J3MgYSBqUXVlcnkgb2JqZWN0IG9yIGEgbm9kZSBlbGVtZW50XG4gICAgaWYgKGlzRWxlbWVudChvYmplY3QpKSB7XG4gICAgICByZXR1cm4gb2JqZWN0LmpxdWVyeSA/IG9iamVjdFswXSA6IG9iamVjdDtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9iamVjdCA9PT0gJ3N0cmluZycgJiYgb2JqZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9iamVjdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgY29uc3QgaXNWaXNpYmxlID0gZWxlbWVudCA9PiB7XG4gICAgaWYgKCFpc0VsZW1lbnQoZWxlbWVudCkgfHwgZWxlbWVudC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnRJc1Zpc2libGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoJ3Zpc2liaWxpdHknKSA9PT0gJ3Zpc2libGUnOyAvLyBIYW5kbGUgYGRldGFpbHNgIGVsZW1lbnQgYXMgaXRzIGNvbnRlbnQgbWF5IGZhbHNpZSBhcHBlYXIgdmlzaWJsZSB3aGVuIGl0IGlzIGNsb3NlZFxuXG4gICAgY29uc3QgY2xvc2VkRGV0YWlscyA9IGVsZW1lbnQuY2xvc2VzdCgnZGV0YWlsczpub3QoW29wZW5dKScpO1xuXG4gICAgaWYgKCFjbG9zZWREZXRhaWxzKSB7XG4gICAgICByZXR1cm4gZWxlbWVudElzVmlzaWJsZTtcbiAgICB9XG5cbiAgICBpZiAoY2xvc2VkRGV0YWlscyAhPT0gZWxlbWVudCkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGVsZW1lbnQuY2xvc2VzdCgnc3VtbWFyeScpO1xuXG4gICAgICBpZiAoc3VtbWFyeSAmJiBzdW1tYXJ5LnBhcmVudE5vZGUgIT09IGNsb3NlZERldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3VtbWFyeSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnRJc1Zpc2libGU7XG4gIH07XG5cbiAgY29uc3QgaXNEaXNhYmxlZCA9IGVsZW1lbnQgPT4ge1xuICAgIGlmICghZWxlbWVudCB8fCBlbGVtZW50Lm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGVsZW1lbnQuZGlzYWJsZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5kaXNhYmxlZDtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgIT09ICdmYWxzZSc7XG4gIH07XG5cbiAgY29uc3QgZmluZFNoYWRvd1Jvb3QgPSBlbGVtZW50ID0+IHtcbiAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hdHRhY2hTaGFkb3cpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gLy8gQ2FuIGZpbmQgdGhlIHNoYWRvdyByb290IG90aGVyd2lzZSBpdCdsbCByZXR1cm4gdGhlIGRvY3VtZW50XG5cblxuICAgIGlmICh0eXBlb2YgZWxlbWVudC5nZXRSb290Tm9kZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc3Qgcm9vdCA9IGVsZW1lbnQuZ2V0Um9vdE5vZGUoKTtcbiAgICAgIHJldHVybiByb290IGluc3RhbmNlb2YgU2hhZG93Um9vdCA/IHJvb3QgOiBudWxsO1xuICAgIH1cblxuICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgU2hhZG93Um9vdCkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfSAvLyB3aGVuIHdlIGRvbid0IGZpbmQgYSBzaGFkb3cgcm9vdFxuXG5cbiAgICBpZiAoIWVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbmRTaGFkb3dSb290KGVsZW1lbnQucGFyZW50Tm9kZSk7XG4gIH07XG5cbiAgY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuICAvKipcbiAgICogVHJpY2sgdG8gcmVzdGFydCBhbiBlbGVtZW50J3MgYW5pbWF0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICogQHJldHVybiB2b2lkXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuY2hhcmlzdGhlby5pby9ibG9nLzIwMjEvMDIvcmVzdGFydC1hLWNzcy1hbmltYXRpb24td2l0aC1qYXZhc2NyaXB0LyNyZXN0YXJ0aW5nLWEtY3NzLWFuaW1hdGlvblxuICAgKi9cblxuXG4gIGNvbnN0IHJlZmxvdyA9IGVsZW1lbnQgPT4ge1xuICAgIGVsZW1lbnQub2Zmc2V0SGVpZ2h0OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC1leHByZXNzaW9uc1xuICB9O1xuXG4gIGNvbnN0IGdldGpRdWVyeSA9ICgpID0+IHtcbiAgICBpZiAod2luZG93LmpRdWVyeSAmJiAhZG9jdW1lbnQuYm9keS5oYXNBdHRyaWJ1dGUoJ2RhdGEtYnMtbm8tanF1ZXJ5JykpIHtcbiAgICAgIHJldHVybiB3aW5kb3cualF1ZXJ5O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGNvbnN0IERPTUNvbnRlbnRMb2FkZWRDYWxsYmFja3MgPSBbXTtcblxuICBjb25zdCBvbkRPTUNvbnRlbnRMb2FkZWQgPSBjYWxsYmFjayA9PiB7XG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xuICAgICAgLy8gYWRkIGxpc3RlbmVyIG9uIHRoZSBmaXJzdCBjYWxsIHdoZW4gdGhlIGRvY3VtZW50IGlzIGluIGxvYWRpbmcgc3RhdGVcbiAgICAgIGlmICghRE9NQ29udGVudExvYWRlZENhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIERPTUNvbnRlbnRMb2FkZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgRE9NQ29udGVudExvYWRlZENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaXNSVEwgPSAoKSA9PiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlyID09PSAncnRsJztcblxuICBjb25zdCBkZWZpbmVKUXVlcnlQbHVnaW4gPSBwbHVnaW4gPT4ge1xuICAgIG9uRE9NQ29udGVudExvYWRlZCgoKSA9PiB7XG4gICAgICBjb25zdCAkID0gZ2V0alF1ZXJ5KCk7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblxuICAgICAgaWYgKCQpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHBsdWdpbi5OQU1FO1xuICAgICAgICBjb25zdCBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW25hbWVdO1xuICAgICAgICAkLmZuW25hbWVdID0gcGx1Z2luLmpRdWVyeUludGVyZmFjZTtcbiAgICAgICAgJC5mbltuYW1lXS5Db25zdHJ1Y3RvciA9IHBsdWdpbjtcblxuICAgICAgICAkLmZuW25hbWVdLm5vQ29uZmxpY3QgPSAoKSA9PiB7XG4gICAgICAgICAgJC5mbltuYW1lXSA9IEpRVUVSWV9OT19DT05GTElDVDtcbiAgICAgICAgICByZXR1cm4gcGx1Z2luLmpRdWVyeUludGVyZmFjZTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBleGVjdXRlID0gY2FsbGJhY2sgPT4ge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGV4ZWN1dGVBZnRlclRyYW5zaXRpb24gPSAoY2FsbGJhY2ssIHRyYW5zaXRpb25FbGVtZW50LCB3YWl0Rm9yVHJhbnNpdGlvbiA9IHRydWUpID0+IHtcbiAgICBpZiAoIXdhaXRGb3JUcmFuc2l0aW9uKSB7XG4gICAgICBleGVjdXRlKGNhbGxiYWNrKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkdXJhdGlvblBhZGRpbmcgPSA1O1xuICAgIGNvbnN0IGVtdWxhdGVkRHVyYXRpb24gPSBnZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0cmFuc2l0aW9uRWxlbWVudCkgKyBkdXJhdGlvblBhZGRpbmc7XG4gICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuXG4gICAgY29uc3QgaGFuZGxlciA9ICh7XG4gICAgICB0YXJnZXRcbiAgICB9KSA9PiB7XG4gICAgICBpZiAodGFyZ2V0ICE9PSB0cmFuc2l0aW9uRWxlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICB0cmFuc2l0aW9uRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFRSQU5TSVRJT05fRU5ELCBoYW5kbGVyKTtcbiAgICAgIGV4ZWN1dGUoY2FsbGJhY2spO1xuICAgIH07XG5cbiAgICB0cmFuc2l0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFRSQU5TSVRJT05fRU5ELCBoYW5kbGVyKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIHRyaWdnZXJUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25FbGVtZW50KTtcbiAgICAgIH1cbiAgICB9LCBlbXVsYXRlZER1cmF0aW9uKTtcbiAgfTtcbiAgLyoqXG4gICAqIFJldHVybiB0aGUgcHJldmlvdXMvbmV4dCBlbGVtZW50IG9mIGEgbGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheX0gbGlzdCAgICBUaGUgbGlzdCBvZiBlbGVtZW50c1xuICAgKiBAcGFyYW0gYWN0aXZlRWxlbWVudCAgIFRoZSBhY3RpdmUgZWxlbWVudFxuICAgKiBAcGFyYW0gc2hvdWxkR2V0TmV4dCAgIENob29zZSB0byBnZXQgbmV4dCBvciBwcmV2aW91cyBlbGVtZW50XG4gICAqIEBwYXJhbSBpc0N5Y2xlQWxsb3dlZFxuICAgKiBAcmV0dXJuIHtFbGVtZW50fGVsZW19IFRoZSBwcm9wZXIgZWxlbWVudFxuICAgKi9cblxuXG4gIGNvbnN0IGdldE5leHRBY3RpdmVFbGVtZW50ID0gKGxpc3QsIGFjdGl2ZUVsZW1lbnQsIHNob3VsZEdldE5leHQsIGlzQ3ljbGVBbGxvd2VkKSA9PiB7XG4gICAgY29uc3QgbGlzdExlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICAgIGxldCBpbmRleCA9IGxpc3QuaW5kZXhPZihhY3RpdmVFbGVtZW50KTsgLy8gaWYgdGhlIGVsZW1lbnQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGxpc3QgcmV0dXJuIGFuIGVsZW1lbnRcbiAgICAvLyBkZXBlbmRpbmcgb24gdGhlIGRpcmVjdGlvbiBhbmQgaWYgY3ljbGUgaXMgYWxsb3dlZFxuXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuICFzaG91bGRHZXROZXh0ICYmIGlzQ3ljbGVBbGxvd2VkID8gbGlzdFtsaXN0TGVuZ3RoIC0gMV0gOiBsaXN0WzBdO1xuICAgIH1cblxuICAgIGluZGV4ICs9IHNob3VsZEdldE5leHQgPyAxIDogLTE7XG5cbiAgICBpZiAoaXNDeWNsZUFsbG93ZWQpIHtcbiAgICAgIGluZGV4ID0gKGluZGV4ICsgbGlzdExlbmd0aCkgJSBsaXN0TGVuZ3RoO1xuICAgIH1cblxuICAgIHJldHVybiBsaXN0W01hdGgubWF4KDAsIE1hdGgubWluKGluZGV4LCBsaXN0TGVuZ3RoIC0gMSkpXTtcbiAgfTtcblxuICBleHBvcnRzLmRlZmluZUpRdWVyeVBsdWdpbiA9IGRlZmluZUpRdWVyeVBsdWdpbjtcbiAgZXhwb3J0cy5leGVjdXRlID0gZXhlY3V0ZTtcbiAgZXhwb3J0cy5leGVjdXRlQWZ0ZXJUcmFuc2l0aW9uID0gZXhlY3V0ZUFmdGVyVHJhbnNpdGlvbjtcbiAgZXhwb3J0cy5maW5kU2hhZG93Um9vdCA9IGZpbmRTaGFkb3dSb290O1xuICBleHBvcnRzLmdldEVsZW1lbnQgPSBnZXRFbGVtZW50O1xuICBleHBvcnRzLmdldEVsZW1lbnRGcm9tU2VsZWN0b3IgPSBnZXRFbGVtZW50RnJvbVNlbGVjdG9yO1xuICBleHBvcnRzLmdldE5leHRBY3RpdmVFbGVtZW50ID0gZ2V0TmV4dEFjdGl2ZUVsZW1lbnQ7XG4gIGV4cG9ydHMuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCA9IGdldFNlbGVjdG9yRnJvbUVsZW1lbnQ7XG4gIGV4cG9ydHMuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQgPSBnZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudDtcbiAgZXhwb3J0cy5nZXRVSUQgPSBnZXRVSUQ7XG4gIGV4cG9ydHMuZ2V0alF1ZXJ5ID0gZ2V0alF1ZXJ5O1xuICBleHBvcnRzLmlzRGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICBleHBvcnRzLmlzRWxlbWVudCA9IGlzRWxlbWVudDtcbiAgZXhwb3J0cy5pc1JUTCA9IGlzUlRMO1xuICBleHBvcnRzLmlzVmlzaWJsZSA9IGlzVmlzaWJsZTtcbiAgZXhwb3J0cy5ub29wID0gbm9vcDtcbiAgZXhwb3J0cy5vbkRPTUNvbnRlbnRMb2FkZWQgPSBvbkRPTUNvbnRlbnRMb2FkZWQ7XG4gIGV4cG9ydHMucmVmbG93ID0gcmVmbG93O1xuICBleHBvcnRzLnRvVHlwZSA9IHRvVHlwZTtcbiAgZXhwb3J0cy50cmlnZ2VyVHJhbnNpdGlvbkVuZCA9IHRyaWdnZXJUcmFuc2l0aW9uRW5kO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGV4cG9ydHMsIHsgX19lc01vZHVsZTogeyB2YWx1ZTogdHJ1ZSB9LCBbU3ltYm9sLnRvU3RyaW5nVGFnXTogeyB2YWx1ZTogJ01vZHVsZScgfSB9KTtcblxufSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCIvKiFcbiAgKiBCb290c3RyYXAgc3dpcGUuanMgdjUuMi4zIChodHRwczovL2dldGJvb3RzdHJhcC5jb20vKVxuICAqIENvcHlyaWdodCAyMDExLTIwMjIgVGhlIEJvb3RzdHJhcCBBdXRob3JzIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvZ3JhcGhzL2NvbnRyaWJ1dG9ycylcbiAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21haW4vTElDRU5TRSlcbiAgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCcuL2NvbmZpZycpLCByZXF1aXJlKCcuLi9kb20vZXZlbnQtaGFuZGxlcicpLCByZXF1aXJlKCcuL2luZGV4JykpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnLi9jb25maWcnLCAnLi4vZG9tL2V2ZW50LWhhbmRsZXInLCAnLi9pbmRleCddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5Td2lwZSA9IGZhY3RvcnkoZ2xvYmFsLkNvbmZpZywgZ2xvYmFsLkV2ZW50SGFuZGxlciwgZ2xvYmFsLkluZGV4KSk7XG59KSh0aGlzLCAoZnVuY3Rpb24gKENvbmZpZywgRXZlbnRIYW5kbGVyLCBpbmRleCkgeyAndXNlIHN0cmljdCc7XG5cbiAgY29uc3QgX2ludGVyb3BEZWZhdWx0TGVnYWN5ID0gZSA9PiBlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiAnZGVmYXVsdCcgaW4gZSA/IGUgOiB7IGRlZmF1bHQ6IGUgfTtcblxuICBjb25zdCBDb25maWdfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0TGVnYWN5KENvbmZpZyk7XG4gIGNvbnN0IEV2ZW50SGFuZGxlcl9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHRMZWdhY3koRXZlbnRIYW5kbGVyKTtcblxuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQm9vdHN0cmFwICh2NS4yLjMpOiB1dGlsL3N3aXBlLmpzXG4gICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cbiAgLyoqXG4gICAqIENvbnN0YW50c1xuICAgKi9cblxuICBjb25zdCBOQU1FID0gJ3N3aXBlJztcbiAgY29uc3QgRVZFTlRfS0VZID0gJy5icy5zd2lwZSc7XG4gIGNvbnN0IEVWRU5UX1RPVUNIU1RBUlQgPSBgdG91Y2hzdGFydCR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX1RPVUNITU9WRSA9IGB0b3VjaG1vdmUke0VWRU5UX0tFWX1gO1xuICBjb25zdCBFVkVOVF9UT1VDSEVORCA9IGB0b3VjaGVuZCR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IEVWRU5UX1BPSU5URVJET1dOID0gYHBvaW50ZXJkb3duJHtFVkVOVF9LRVl9YDtcbiAgY29uc3QgRVZFTlRfUE9JTlRFUlVQID0gYHBvaW50ZXJ1cCR7RVZFTlRfS0VZfWA7XG4gIGNvbnN0IFBPSU5URVJfVFlQRV9UT1VDSCA9ICd0b3VjaCc7XG4gIGNvbnN0IFBPSU5URVJfVFlQRV9QRU4gPSAncGVuJztcbiAgY29uc3QgQ0xBU1NfTkFNRV9QT0lOVEVSX0VWRU5UID0gJ3BvaW50ZXItZXZlbnQnO1xuICBjb25zdCBTV0lQRV9USFJFU0hPTEQgPSA0MDtcbiAgY29uc3QgRGVmYXVsdCA9IHtcbiAgICBlbmRDYWxsYmFjazogbnVsbCxcbiAgICBsZWZ0Q2FsbGJhY2s6IG51bGwsXG4gICAgcmlnaHRDYWxsYmFjazogbnVsbFxuICB9O1xuICBjb25zdCBEZWZhdWx0VHlwZSA9IHtcbiAgICBlbmRDYWxsYmFjazogJyhmdW5jdGlvbnxudWxsKScsXG4gICAgbGVmdENhbGxiYWNrOiAnKGZ1bmN0aW9ufG51bGwpJyxcbiAgICByaWdodENhbGxiYWNrOiAnKGZ1bmN0aW9ufG51bGwpJ1xuICB9O1xuICAvKipcbiAgICogQ2xhc3MgZGVmaW5pdGlvblxuICAgKi9cblxuICBjbGFzcyBTd2lwZSBleHRlbmRzIENvbmZpZ19fZGVmYXVsdC5kZWZhdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcblxuICAgICAgaWYgKCFlbGVtZW50IHx8ICFTd2lwZS5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICB0aGlzLl9kZWx0YVggPSAwO1xuICAgICAgdGhpcy5fc3VwcG9ydFBvaW50ZXJFdmVudHMgPSBCb29sZWFuKHdpbmRvdy5Qb2ludGVyRXZlbnQpO1xuXG4gICAgICB0aGlzLl9pbml0RXZlbnRzKCk7XG4gICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdCgpIHtcbiAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7XG4gICAgICByZXR1cm4gRGVmYXVsdFR5cGU7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBOQU1FKCkge1xuICAgICAgcmV0dXJuIE5BTUU7XG4gICAgfSAvLyBQdWJsaWNcblxuXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIEV2ZW50SGFuZGxlcl9fZGVmYXVsdC5kZWZhdWx0Lm9mZih0aGlzLl9lbGVtZW50LCBFVkVOVF9LRVkpO1xuICAgIH0gLy8gUHJpdmF0ZVxuXG5cbiAgICBfc3RhcnQoZXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy5fc3VwcG9ydFBvaW50ZXJFdmVudHMpIHtcbiAgICAgICAgdGhpcy5fZGVsdGFYID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ldmVudElzUG9pbnRlclBlblRvdWNoKGV2ZW50KSkge1xuICAgICAgICB0aGlzLl9kZWx0YVggPSBldmVudC5jbGllbnRYO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9lbmQoZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLl9ldmVudElzUG9pbnRlclBlblRvdWNoKGV2ZW50KSkge1xuICAgICAgICB0aGlzLl9kZWx0YVggPSBldmVudC5jbGllbnRYIC0gdGhpcy5fZGVsdGFYO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9oYW5kbGVTd2lwZSgpO1xuXG4gICAgICBpbmRleC5leGVjdXRlKHRoaXMuX2NvbmZpZy5lbmRDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgX21vdmUoZXZlbnQpIHtcbiAgICAgIHRoaXMuX2RlbHRhWCA9IGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPiAxID8gMCA6IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCAtIHRoaXMuX2RlbHRhWDtcbiAgICB9XG5cbiAgICBfaGFuZGxlU3dpcGUoKSB7XG4gICAgICBjb25zdCBhYnNEZWx0YVggPSBNYXRoLmFicyh0aGlzLl9kZWx0YVgpO1xuXG4gICAgICBpZiAoYWJzRGVsdGFYIDw9IFNXSVBFX1RIUkVTSE9MRCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGFic0RlbHRhWCAvIHRoaXMuX2RlbHRhWDtcbiAgICAgIHRoaXMuX2RlbHRhWCA9IDA7XG5cbiAgICAgIGlmICghZGlyZWN0aW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaW5kZXguZXhlY3V0ZShkaXJlY3Rpb24gPiAwID8gdGhpcy5fY29uZmlnLnJpZ2h0Q2FsbGJhY2sgOiB0aGlzLl9jb25maWcubGVmdENhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBfaW5pdEV2ZW50cygpIHtcbiAgICAgIGlmICh0aGlzLl9zdXBwb3J0UG9pbnRlckV2ZW50cykge1xuICAgICAgICBFdmVudEhhbmRsZXJfX2RlZmF1bHQuZGVmYXVsdC5vbih0aGlzLl9lbGVtZW50LCBFVkVOVF9QT0lOVEVSRE9XTiwgZXZlbnQgPT4gdGhpcy5fc3RhcnQoZXZlbnQpKTtcbiAgICAgICAgRXZlbnRIYW5kbGVyX19kZWZhdWx0LmRlZmF1bHQub24odGhpcy5fZWxlbWVudCwgRVZFTlRfUE9JTlRFUlVQLCBldmVudCA9PiB0aGlzLl9lbmQoZXZlbnQpKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9QT0lOVEVSX0VWRU5UKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEV2ZW50SGFuZGxlcl9fZGVmYXVsdC5kZWZhdWx0Lm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX1RPVUNIU1RBUlQsIGV2ZW50ID0+IHRoaXMuX3N0YXJ0KGV2ZW50KSk7XG4gICAgICAgIEV2ZW50SGFuZGxlcl9fZGVmYXVsdC5kZWZhdWx0Lm9uKHRoaXMuX2VsZW1lbnQsIEVWRU5UX1RPVUNITU9WRSwgZXZlbnQgPT4gdGhpcy5fbW92ZShldmVudCkpO1xuICAgICAgICBFdmVudEhhbmRsZXJfX2RlZmF1bHQuZGVmYXVsdC5vbih0aGlzLl9lbGVtZW50LCBFVkVOVF9UT1VDSEVORCwgZXZlbnQgPT4gdGhpcy5fZW5kKGV2ZW50KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2V2ZW50SXNQb2ludGVyUGVuVG91Y2goZXZlbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdXBwb3J0UG9pbnRlckV2ZW50cyAmJiAoZXZlbnQucG9pbnRlclR5cGUgPT09IFBPSU5URVJfVFlQRV9QRU4gfHwgZXZlbnQucG9pbnRlclR5cGUgPT09IFBPSU5URVJfVFlQRV9UT1VDSCk7XG4gICAgfSAvLyBTdGF0aWNcblxuXG4gICAgc3RhdGljIGlzU3VwcG9ydGVkKCkge1xuICAgICAgcmV0dXJuICdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIFN3aXBlO1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2lwZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==